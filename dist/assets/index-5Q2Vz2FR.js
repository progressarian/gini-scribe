(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function o(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=o(a);fetch(a.href,l)}})();var Ng={exports:{}},yl={},Cg={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds=Symbol.for("react.element"),Ob=Symbol.for("react.portal"),jb=Symbol.for("react.fragment"),Gb=Symbol.for("react.strict_mode"),Pb=Symbol.for("react.profiler"),Db=Symbol.for("react.provider"),kb=Symbol.for("react.context"),Bb=Symbol.for("react.forward_ref"),_b=Symbol.for("react.suspense"),zb=Symbol.for("react.memo"),Ub=Symbol.for("react.lazy"),xh=Symbol.iterator;function Wb(e){return e===null||typeof e!="object"?null:(e=xh&&e[xh]||e["@@iterator"],typeof e=="function"?e:null)}var Og={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jg=Object.assign,Gg={};function ei(e,n,o){this.props=e,this.context=n,this.refs=Gg,this.updater=o||Og}ei.prototype.isReactComponent={};ei.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};ei.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Pg(){}Pg.prototype=ei.prototype;function lf(e,n,o){this.props=e,this.context=n,this.refs=Gg,this.updater=o||Og}var df=lf.prototype=new Pg;df.constructor=lf;jg(df,ei.prototype);df.isPureReactComponent=!0;var bh=Array.isArray,Dg=Object.prototype.hasOwnProperty,cf={current:null},kg={key:!0,ref:!0,__self:!0,__source:!0};function Bg(e,n,o){var i,a={},l=null,p=null;if(n!=null)for(i in n.ref!==void 0&&(p=n.ref),n.key!==void 0&&(l=""+n.key),n)Dg.call(n,i)&&!kg.hasOwnProperty(i)&&(a[i]=n[i]);var g=arguments.length-2;if(g===1)a.children=o;else if(1<g){for(var x=Array(g),A=0;A<g;A++)x[A]=arguments[A+2];a.children=x}if(e&&e.defaultProps)for(i in g=e.defaultProps,g)a[i]===void 0&&(a[i]=g[i]);return{$$typeof:ds,type:e,key:l,ref:p,props:a,_owner:cf.current}}function Hb(e,n){return{$$typeof:ds,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function ff(e){return typeof e=="object"&&e!==null&&e.$$typeof===ds}function Fb(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return n[o]})}var yh=/\/+/g;function kd(e,n){return typeof e=="object"&&e!==null&&e.key!=null?Fb(""+e.key):n.toString(36)}function ka(e,n,o,i,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(l){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case ds:case Ob:p=!0}}if(p)return p=e,a=a(p),e=i===""?"."+kd(p,0):i,bh(a)?(o="",e!=null&&(o=e.replace(yh,"$&/")+"/"),ka(a,n,o,"",function(A){return A})):a!=null&&(ff(a)&&(a=Hb(a,o+(!a.key||p&&p.key===a.key?"":(""+a.key).replace(yh,"$&/")+"/")+e)),n.push(a)),1;if(p=0,i=i===""?".":i+":",bh(e))for(var g=0;g<e.length;g++){l=e[g];var x=i+kd(l,g);p+=ka(l,n,o,x,a)}else if(x=Wb(e),typeof x=="function")for(e=x.call(e),g=0;!(l=e.next()).done;)l=l.value,x=i+kd(l,g++),p+=ka(l,n,o,x,a);else if(l==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return p}function xa(e,n,o){if(e==null)return e;var i=[],a=0;return ka(e,i,"","",function(l){return n.call(o,l,a++)}),i}function $b(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var Gt={current:null},Ba={transition:null},Yb={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Ba,ReactCurrentOwner:cf};function _g(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:xa,forEach:function(e,n,o){xa(e,function(){n.apply(this,arguments)},o)},count:function(e){var n=0;return xa(e,function(){n++}),n},toArray:function(e){return xa(e,function(n){return n})||[]},only:function(e){if(!ff(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ee.Component=ei;Ee.Fragment=jb;Ee.Profiler=Pb;Ee.PureComponent=lf;Ee.StrictMode=Gb;Ee.Suspense=_b;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yb;Ee.act=_g;Ee.cloneElement=function(e,n,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=jg({},e.props),a=e.key,l=e.ref,p=e._owner;if(n!=null){if(n.ref!==void 0&&(l=n.ref,p=cf.current),n.key!==void 0&&(a=""+n.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(x in n)Dg.call(n,x)&&!kg.hasOwnProperty(x)&&(i[x]=n[x]===void 0&&g!==void 0?g[x]:n[x])}var x=arguments.length-2;if(x===1)i.children=o;else if(1<x){g=Array(x);for(var A=0;A<x;A++)g[A]=arguments[A+2];i.children=g}return{$$typeof:ds,type:e.type,key:a,ref:l,props:i,_owner:p}};Ee.createContext=function(e){return e={$$typeof:kb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Db,_context:e},e.Consumer=e};Ee.createElement=Bg;Ee.createFactory=function(e){var n=Bg.bind(null,e);return n.type=e,n};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(e){return{$$typeof:Bb,render:e}};Ee.isValidElement=ff;Ee.lazy=function(e){return{$$typeof:Ub,_payload:{_status:-1,_result:e},_init:$b}};Ee.memo=function(e,n){return{$$typeof:zb,type:e,compare:n===void 0?null:n}};Ee.startTransition=function(e){var n=Ba.transition;Ba.transition={};try{e()}finally{Ba.transition=n}};Ee.unstable_act=_g;Ee.useCallback=function(e,n){return Gt.current.useCallback(e,n)};Ee.useContext=function(e){return Gt.current.useContext(e)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(e){return Gt.current.useDeferredValue(e)};Ee.useEffect=function(e,n){return Gt.current.useEffect(e,n)};Ee.useId=function(){return Gt.current.useId()};Ee.useImperativeHandle=function(e,n,o){return Gt.current.useImperativeHandle(e,n,o)};Ee.useInsertionEffect=function(e,n){return Gt.current.useInsertionEffect(e,n)};Ee.useLayoutEffect=function(e,n){return Gt.current.useLayoutEffect(e,n)};Ee.useMemo=function(e,n){return Gt.current.useMemo(e,n)};Ee.useReducer=function(e,n,o){return Gt.current.useReducer(e,n,o)};Ee.useRef=function(e){return Gt.current.useRef(e)};Ee.useState=function(e){return Gt.current.useState(e)};Ee.useSyncExternalStore=function(e,n,o){return Gt.current.useSyncExternalStore(e,n,o)};Ee.useTransition=function(){return Gt.current.useTransition()};Ee.version="18.3.1";Cg.exports=Ee;var S=Cg.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vb=S,Xb=Symbol.for("react.element"),Kb=Symbol.for("react.fragment"),Jb=Object.prototype.hasOwnProperty,Zb=Vb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qb={key:!0,ref:!0,__self:!0,__source:!0};function zg(e,n,o){var i,a={},l=null,p=null;o!==void 0&&(l=""+o),n.key!==void 0&&(l=""+n.key),n.ref!==void 0&&(p=n.ref);for(i in n)Jb.call(n,i)&&!Qb.hasOwnProperty(i)&&(a[i]=n[i]);if(e&&e.defaultProps)for(i in n=e.defaultProps,n)a[i]===void 0&&(a[i]=n[i]);return{$$typeof:Xb,type:e,key:l,ref:p,props:a,_owner:Zb.current}}yl.Fragment=Kb;yl.jsx=zg;yl.jsxs=zg;Ng.exports=yl;var t=Ng.exports,pc={},Ug={exports:{}},tn={},Wg={exports:{}},Hg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(Y,ce){var se=Y.length;Y.push(ce);e:for(;0<se;){var Se=se-1>>>1,je=Y[Se];if(0<a(je,ce))Y[Se]=ce,Y[se]=je,se=Se;else break e}}function o(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var ce=Y[0],se=Y.pop();if(se!==ce){Y[0]=se;e:for(var Se=0,je=Y.length,Ht=je>>>1;Se<Ht;){var ge=2*(Se+1)-1,rt=Y[ge],Qe=ge+1,He=Y[Qe];if(0>a(rt,se))Qe<je&&0>a(He,rt)?(Y[Se]=He,Y[Qe]=se,Se=Qe):(Y[Se]=rt,Y[ge]=se,Se=ge);else if(Qe<je&&0>a(He,se))Y[Se]=He,Y[Qe]=se,Se=Qe;else break e}}return ce}function a(Y,ce){var se=Y.sortIndex-ce.sortIndex;return se!==0?se:Y.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var p=Date,g=p.now();e.unstable_now=function(){return p.now()-g}}var x=[],A=[],G=1,D=null,b=3,U=!1,N=!1,W=!1,F=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(Y){for(var ce=o(A);ce!==null;){if(ce.callback===null)i(A);else if(ce.startTime<=Y)i(A),ce.sortIndex=ce.expirationTime,n(x,ce);else break;ce=o(A)}}function B(Y){if(W=!1,L(Y),!N)if(o(x)!==null)N=!0,T(K);else{var ce=o(A);ce!==null&&ve(B,ce.startTime-Y)}}function K(Y,ce){N=!1,W&&(W=!1,v(Z),Z=-1),U=!0;var se=b;try{for(L(ce),D=o(x);D!==null&&(!(D.expirationTime>ce)||Y&&!Ie());){var Se=D.callback;if(typeof Se=="function"){D.callback=null,b=D.priorityLevel;var je=Se(D.expirationTime<=ce);ce=e.unstable_now(),typeof je=="function"?D.callback=je:D===o(x)&&i(x),L(ce)}else i(x);D=o(x)}if(D!==null)var Ht=!0;else{var ge=o(A);ge!==null&&ve(B,ge.startTime-ce),Ht=!1}return Ht}finally{D=null,b=se,U=!1}}var z=!1,q=null,Z=-1,me=5,C=-1;function Ie(){return!(e.unstable_now()-C<me)}function ne(){if(q!==null){var Y=e.unstable_now();C=Y;var ce=!0;try{ce=q(!0,Y)}finally{ce?Oe():(z=!1,q=null)}}else z=!1}var Oe;if(typeof E=="function")Oe=function(){E(ne)};else if(typeof MessageChannel<"u"){var Wt=new MessageChannel,Tt=Wt.port2;Wt.port1.onmessage=ne,Oe=function(){Tt.postMessage(null)}}else Oe=function(){F(ne,0)};function T(Y){q=Y,z||(z=!0,Oe())}function ve(Y,ce){Z=F(function(){Y(e.unstable_now())},ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){N||U||(N=!0,T(K))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return o(x)},e.unstable_next=function(Y){switch(b){case 1:case 2:case 3:var ce=3;break;default:ce=b}var se=b;b=ce;try{return Y()}finally{b=se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,ce){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var se=b;b=Y;try{return ce()}finally{b=se}},e.unstable_scheduleCallback=function(Y,ce,se){var Se=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Se+se:Se):se=Se,Y){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=se+je,Y={id:G++,callback:ce,priorityLevel:Y,startTime:se,expirationTime:je,sortIndex:-1},se>Se?(Y.sortIndex=se,n(A,Y),o(x)===null&&Y===o(A)&&(W?(v(Z),Z=-1):W=!0,ve(B,se-Se))):(Y.sortIndex=je,n(x,Y),N||U||(N=!0,T(K))),Y},e.unstable_shouldYield=Ie,e.unstable_wrapCallback=function(Y){var ce=b;return function(){var se=b;b=ce;try{return Y.apply(this,arguments)}finally{b=se}}}})(Hg);Wg.exports=Hg;var qb=Wg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey=S,en=qb;function H(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fg=new Set,Yi={};function eo(e,n){Vo(e,n),Vo(e+"Capture",n)}function Vo(e,n){for(Yi[e]=n,e=0;e<n.length;e++)Fg.add(n[e])}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=Object.prototype.hasOwnProperty,ty=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sh={},Eh={};function ny(e){return hc.call(Eh,e)?!0:hc.call(Sh,e)?!1:ty.test(e)?Eh[e]=!0:(Sh[e]=!0,!1)}function ry(e,n,o,i){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return i?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function oy(e,n,o,i){if(n===null||typeof n>"u"||ry(e,n,o,i))return!0;if(i)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Pt(e,n,o,i,a,l,p){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=o,this.propertyName=e,this.type=n,this.sanitizeURL=l,this.removeEmptyString=p}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yt[e]=new Pt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];yt[n]=new Pt(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yt[e]=new Pt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yt[e]=new Pt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yt[e]=new Pt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yt[e]=new Pt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yt[e]=new Pt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yt[e]=new Pt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yt[e]=new Pt(e,5,!1,e.toLowerCase(),null,!1,!1)});var uf=/[\-:]([a-z])/g;function pf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(uf,pf);yt[n]=new Pt(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(uf,pf);yt[n]=new Pt(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(uf,pf);yt[n]=new Pt(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yt[e]=new Pt(e,1,!1,e.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yt[e]=new Pt(e,1,!1,e.toLowerCase(),null,!0,!0)});function hf(e,n,o,i){var a=yt.hasOwnProperty(n)?yt[n]:null;(a!==null?a.type!==0:i||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(oy(n,o,a,i)&&(o=null),i||a===null?ny(n)&&(o===null?e.removeAttribute(n):e.setAttribute(n,""+o)):a.mustUseProperty?e[a.propertyName]=o===null?a.type===3?!1:"":o:(n=a.attributeName,i=a.attributeNamespace,o===null?e.removeAttribute(n):(a=a.type,o=a===3||a===4&&o===!0?"":""+o,i?e.setAttributeNS(i,n,o):e.setAttribute(n,o))))}var $n=ey.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ba=Symbol.for("react.element"),Io=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),gf=Symbol.for("react.strict_mode"),gc=Symbol.for("react.profiler"),$g=Symbol.for("react.provider"),Yg=Symbol.for("react.context"),mf=Symbol.for("react.forward_ref"),mc=Symbol.for("react.suspense"),xc=Symbol.for("react.suspense_list"),xf=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),Vg=Symbol.for("react.offscreen"),Ah=Symbol.iterator;function Ri(e){return e===null||typeof e!="object"?null:(e=Ah&&e[Ah]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,Bd;function ji(e){if(Bd===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);Bd=n&&n[1]||""}return`
`+Bd+e}var _d=!1;function zd(e,n){if(!e||_d)return"";_d=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(A){var i=A}Reflect.construct(e,[],n)}else{try{n.call()}catch(A){i=A}e.call(n.prototype)}else{try{throw Error()}catch(A){i=A}e()}}catch(A){if(A&&i&&typeof A.stack=="string"){for(var a=A.stack.split(`
`),l=i.stack.split(`
`),p=a.length-1,g=l.length-1;1<=p&&0<=g&&a[p]!==l[g];)g--;for(;1<=p&&0<=g;p--,g--)if(a[p]!==l[g]){if(p!==1||g!==1)do if(p--,g--,0>g||a[p]!==l[g]){var x=`
`+a[p].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=p&&0<=g);break}}}finally{_d=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?ji(e):""}function iy(e){switch(e.tag){case 5:return ji(e.type);case 16:return ji("Lazy");case 13:return ji("Suspense");case 19:return ji("SuspenseList");case 0:case 2:case 15:return e=zd(e.type,!1),e;case 11:return e=zd(e.type.render,!1),e;case 1:return e=zd(e.type,!0),e;default:return""}}function bc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case No:return"Fragment";case Io:return"Portal";case gc:return"Profiler";case gf:return"StrictMode";case mc:return"Suspense";case xc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yg:return(e.displayName||"Context")+".Consumer";case $g:return(e._context.displayName||"Context")+".Provider";case mf:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xf:return n=e.displayName||null,n!==null?n:bc(e.type)||"Memo";case sr:n=e._payload,e=e._init;try{return bc(e(n))}catch{}}return null}function sy(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bc(n);case 8:return n===gf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Sr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xg(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ay(e){var n=Xg(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),i=""+e[n];if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var a=o.get,l=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return a.call(this)},set:function(p){i=""+p,l.call(this,p)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(p){i=""+p},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ya(e){e._valueTracker||(e._valueTracker=ay(e))}function Kg(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var o=n.getValue(),i="";return e&&(i=Xg(e)?e.checked?"true":"false":e.value),e=i,e!==o?(n.setValue(e),!0):!1}function Ka(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yc(e,n){var o=n.checked;return Ve({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function Mh(e,n){var o=n.defaultValue==null?"":n.defaultValue,i=n.checked!=null?n.checked:n.defaultChecked;o=Sr(n.value!=null?n.value:o),e._wrapperState={initialChecked:i,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Jg(e,n){n=n.checked,n!=null&&hf(e,"checked",n,!1)}function Sc(e,n){Jg(e,n);var o=Sr(n.value),i=n.type;if(o!=null)i==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Ec(e,n.type,o):n.hasOwnProperty("defaultValue")&&Ec(e,n.type,Sr(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Th(e,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var i=n.type;if(!(i!=="submit"&&i!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,o||n===e.value||(e.value=n),e.defaultValue=n}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function Ec(e,n,o){(n!=="number"||Ka(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var Gi=Array.isArray;function Uo(e,n,o,i){if(e=e.options,n){n={};for(var a=0;a<o.length;a++)n["$"+o[a]]=!0;for(o=0;o<e.length;o++)a=n.hasOwnProperty("$"+e[o].value),e[o].selected!==a&&(e[o].selected=a),a&&i&&(e[o].defaultSelected=!0)}else{for(o=""+Sr(o),n=null,a=0;a<e.length;a++){if(e[a].value===o){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}n!==null||e[a].disabled||(n=e[a])}n!==null&&(n.selected=!0)}}function Ac(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ve({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rh(e,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(H(92));if(Gi(o)){if(1<o.length)throw Error(H(93));o=o[0]}n=o}n==null&&(n=""),o=n}e._wrapperState={initialValue:Sr(o)}}function Zg(e,n){var o=Sr(n.value),i=Sr(n.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),n.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),i!=null&&(e.defaultValue=""+i)}function vh(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Qg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mc(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Qg(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Sa,qg=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,i,a){MSApp.execUnsafeLocalFunction(function(){return e(n,o,i,a)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Sa=Sa||document.createElement("div"),Sa.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Sa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Vi(e,n){if(n){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=n;return}}e.textContent=n}var ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ly=["Webkit","ms","Moz","O"];Object.keys(ki).forEach(function(e){ly.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),ki[n]=ki[e]})});function e0(e,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||ki.hasOwnProperty(e)&&ki[e]?(""+n).trim():n+"px"}function t0(e,n){e=e.style;for(var o in n)if(n.hasOwnProperty(o)){var i=o.indexOf("--")===0,a=e0(o,n[o],i);o==="float"&&(o="cssFloat"),i?e.setProperty(o,a):e[o]=a}}var dy=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tc(e,n){if(n){if(dy[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(H(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(H(61))}if(n.style!=null&&typeof n.style!="object")throw Error(H(62))}}function Rc(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vc=null;function bf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Lc=null,Wo=null,Ho=null;function Lh(e){if(e=us(e)){if(typeof Lc!="function")throw Error(H(280));var n=e.stateNode;n&&(n=Tl(n),Lc(e.stateNode,e.type,n))}}function n0(e){Wo?Ho?Ho.push(e):Ho=[e]:Wo=e}function r0(){if(Wo){var e=Wo,n=Ho;if(Ho=Wo=null,Lh(e),n)for(e=0;e<n.length;e++)Lh(n[e])}}function o0(e,n){return e(n)}function i0(){}var Ud=!1;function s0(e,n,o){if(Ud)return e(n,o);Ud=!0;try{return o0(e,n,o)}finally{Ud=!1,(Wo!==null||Ho!==null)&&(i0(),r0())}}function Xi(e,n){var o=e.stateNode;if(o===null)return null;var i=Tl(o);if(i===null)return null;o=i[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(H(231,n,typeof o));return o}var wc=!1;if(Un)try{var vi={};Object.defineProperty(vi,"passive",{get:function(){wc=!0}}),window.addEventListener("test",vi,vi),window.removeEventListener("test",vi,vi)}catch{wc=!1}function cy(e,n,o,i,a,l,p,g,x){var A=Array.prototype.slice.call(arguments,3);try{n.apply(o,A)}catch(G){this.onError(G)}}var Bi=!1,Ja=null,Za=!1,Ic=null,fy={onError:function(e){Bi=!0,Ja=e}};function uy(e,n,o,i,a,l,p,g,x){Bi=!1,Ja=null,cy.apply(fy,arguments)}function py(e,n,o,i,a,l,p,g,x){if(uy.apply(this,arguments),Bi){if(Bi){var A=Ja;Bi=!1,Ja=null}else throw Error(H(198));Za||(Za=!0,Ic=A)}}function to(e){var n=e,o=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(o=n.return),e=n.return;while(e)}return n.tag===3?o:null}function a0(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function wh(e){if(to(e)!==e)throw Error(H(188))}function hy(e){var n=e.alternate;if(!n){if(n=to(e),n===null)throw Error(H(188));return n!==e?null:e}for(var o=e,i=n;;){var a=o.return;if(a===null)break;var l=a.alternate;if(l===null){if(i=a.return,i!==null){o=i;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===o)return wh(a),e;if(l===i)return wh(a),n;l=l.sibling}throw Error(H(188))}if(o.return!==i.return)o=a,i=l;else{for(var p=!1,g=a.child;g;){if(g===o){p=!0,o=a,i=l;break}if(g===i){p=!0,i=a,o=l;break}g=g.sibling}if(!p){for(g=l.child;g;){if(g===o){p=!0,o=l,i=a;break}if(g===i){p=!0,i=l,o=a;break}g=g.sibling}if(!p)throw Error(H(189))}}if(o.alternate!==i)throw Error(H(190))}if(o.tag!==3)throw Error(H(188));return o.stateNode.current===o?e:n}function l0(e){return e=hy(e),e!==null?d0(e):null}function d0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=d0(e);if(n!==null)return n;e=e.sibling}return null}var c0=en.unstable_scheduleCallback,Ih=en.unstable_cancelCallback,gy=en.unstable_shouldYield,my=en.unstable_requestPaint,nt=en.unstable_now,xy=en.unstable_getCurrentPriorityLevel,yf=en.unstable_ImmediatePriority,f0=en.unstable_UserBlockingPriority,Qa=en.unstable_NormalPriority,by=en.unstable_LowPriority,u0=en.unstable_IdlePriority,Sl=null,In=null;function yy(e){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Sl,e,void 0,(e.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:Ay,Sy=Math.log,Ey=Math.LN2;function Ay(e){return e>>>=0,e===0?32:31-(Sy(e)/Ey|0)|0}var Ea=64,Aa=4194304;function Pi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qa(e,n){var o=e.pendingLanes;if(o===0)return 0;var i=0,a=e.suspendedLanes,l=e.pingedLanes,p=o&268435455;if(p!==0){var g=p&~a;g!==0?i=Pi(g):(l&=p,l!==0&&(i=Pi(l)))}else p=o&~a,p!==0?i=Pi(p):l!==0&&(i=Pi(l));if(i===0)return 0;if(n!==0&&n!==i&&!(n&a)&&(a=i&-i,l=n&-n,a>=l||a===16&&(l&4194240)!==0))return n;if(i&4&&(i|=o&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=i;0<n;)o=31-En(n),a=1<<o,i|=e[o],n&=~a;return i}function My(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ty(e,n){for(var o=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var p=31-En(l),g=1<<p,x=a[p];x===-1?(!(g&o)||g&i)&&(a[p]=My(g,n)):x<=n&&(e.expiredLanes|=g),l&=~g}}function Nc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function p0(){var e=Ea;return Ea<<=1,!(Ea&4194240)&&(Ea=64),e}function Wd(e){for(var n=[],o=0;31>o;o++)n.push(e);return n}function cs(e,n,o){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-En(n),e[n]=o}function Ry(e,n){var o=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<o;){var a=31-En(o),l=1<<a;n[a]=0,i[a]=-1,e[a]=-1,o&=~l}}function Sf(e,n){var o=e.entangledLanes|=n;for(e=e.entanglements;o;){var i=31-En(o),a=1<<i;a&n|e[i]&n&&(e[i]|=n),o&=~a}}var Ce=0;function h0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var g0,Ef,m0,x0,b0,Cc=!1,Ma=[],ur=null,pr=null,hr=null,Ki=new Map,Ji=new Map,lr=[],vy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nh(e,n){switch(e){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Ki.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ji.delete(n.pointerId)}}function Li(e,n,o,i,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:n,domEventName:o,eventSystemFlags:i,nativeEvent:l,targetContainers:[a]},n!==null&&(n=us(n),n!==null&&Ef(n)),e):(e.eventSystemFlags|=i,n=e.targetContainers,a!==null&&n.indexOf(a)===-1&&n.push(a),e)}function Ly(e,n,o,i,a){switch(n){case"focusin":return ur=Li(ur,e,n,o,i,a),!0;case"dragenter":return pr=Li(pr,e,n,o,i,a),!0;case"mouseover":return hr=Li(hr,e,n,o,i,a),!0;case"pointerover":var l=a.pointerId;return Ki.set(l,Li(Ki.get(l)||null,e,n,o,i,a)),!0;case"gotpointercapture":return l=a.pointerId,Ji.set(l,Li(Ji.get(l)||null,e,n,o,i,a)),!0}return!1}function y0(e){var n=Fr(e.target);if(n!==null){var o=to(n);if(o!==null){if(n=o.tag,n===13){if(n=a0(o),n!==null){e.blockedOn=n,b0(e.priority,function(){m0(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _a(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var o=Oc(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var i=new o.constructor(o.type,o);vc=i,o.target.dispatchEvent(i),vc=null}else return n=us(o),n!==null&&Ef(n),e.blockedOn=o,!1;n.shift()}return!0}function Ch(e,n,o){_a(e)&&o.delete(n)}function wy(){Cc=!1,ur!==null&&_a(ur)&&(ur=null),pr!==null&&_a(pr)&&(pr=null),hr!==null&&_a(hr)&&(hr=null),Ki.forEach(Ch),Ji.forEach(Ch)}function wi(e,n){e.blockedOn===n&&(e.blockedOn=null,Cc||(Cc=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,wy)))}function Zi(e){function n(a){return wi(a,e)}if(0<Ma.length){wi(Ma[0],e);for(var o=1;o<Ma.length;o++){var i=Ma[o];i.blockedOn===e&&(i.blockedOn=null)}}for(ur!==null&&wi(ur,e),pr!==null&&wi(pr,e),hr!==null&&wi(hr,e),Ki.forEach(n),Ji.forEach(n),o=0;o<lr.length;o++)i=lr[o],i.blockedOn===e&&(i.blockedOn=null);for(;0<lr.length&&(o=lr[0],o.blockedOn===null);)y0(o),o.blockedOn===null&&lr.shift()}var Fo=$n.ReactCurrentBatchConfig,el=!0;function Iy(e,n,o,i){var a=Ce,l=Fo.transition;Fo.transition=null;try{Ce=1,Af(e,n,o,i)}finally{Ce=a,Fo.transition=l}}function Ny(e,n,o,i){var a=Ce,l=Fo.transition;Fo.transition=null;try{Ce=4,Af(e,n,o,i)}finally{Ce=a,Fo.transition=l}}function Af(e,n,o,i){if(el){var a=Oc(e,n,o,i);if(a===null)Qd(e,n,i,tl,o),Nh(e,i);else if(Ly(a,e,n,o,i))i.stopPropagation();else if(Nh(e,i),n&4&&-1<vy.indexOf(e)){for(;a!==null;){var l=us(a);if(l!==null&&g0(l),l=Oc(e,n,o,i),l===null&&Qd(e,n,i,tl,o),l===a)break;a=l}a!==null&&i.stopPropagation()}else Qd(e,n,i,null,o)}}var tl=null;function Oc(e,n,o,i){if(tl=null,e=bf(i),e=Fr(e),e!==null)if(n=to(e),n===null)e=null;else if(o=n.tag,o===13){if(e=a0(n),e!==null)return e;e=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return tl=e,null}function S0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xy()){case yf:return 1;case f0:return 4;case Qa:case by:return 16;case u0:return 536870912;default:return 16}default:return 16}}var cr=null,Mf=null,za=null;function E0(){if(za)return za;var e,n=Mf,o=n.length,i,a="value"in cr?cr.value:cr.textContent,l=a.length;for(e=0;e<o&&n[e]===a[e];e++);var p=o-e;for(i=1;i<=p&&n[o-i]===a[l-i];i++);return za=a.slice(e,1<i?1-i:void 0)}function Ua(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ta(){return!0}function Oh(){return!1}function nn(e){function n(o,i,a,l,p){this._reactName=o,this._targetInst=a,this.type=i,this.nativeEvent=l,this.target=p,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(o=e[g],this[g]=o?o(l):l[g]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ta:Oh,this.isPropagationStopped=Oh,this}return Ve(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ta)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ta)},persist:function(){},isPersistent:Ta}),n}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tf=nn(ti),fs=Ve({},ti,{view:0,detail:0}),Cy=nn(fs),Hd,Fd,Ii,El=Ve({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ii&&(Ii&&e.type==="mousemove"?(Hd=e.screenX-Ii.screenX,Fd=e.screenY-Ii.screenY):Fd=Hd=0,Ii=e),Hd)},movementY:function(e){return"movementY"in e?e.movementY:Fd}}),jh=nn(El),Oy=Ve({},El,{dataTransfer:0}),jy=nn(Oy),Gy=Ve({},fs,{relatedTarget:0}),$d=nn(Gy),Py=Ve({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),Dy=nn(Py),ky=Ve({},ti,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),By=nn(ky),_y=Ve({},ti,{data:0}),Gh=nn(_y),zy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hy(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Wy[e])?!!n[e]:!1}function Rf(){return Hy}var Fy=Ve({},fs,{key:function(e){if(e.key){var n=zy[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ua(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Uy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rf,charCode:function(e){return e.type==="keypress"?Ua(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ua(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$y=nn(Fy),Yy=Ve({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ph=nn(Yy),Vy=Ve({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rf}),Xy=nn(Vy),Ky=Ve({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jy=nn(Ky),Zy=Ve({},El,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qy=nn(Zy),qy=[9,13,27,32],vf=Un&&"CompositionEvent"in window,_i=null;Un&&"documentMode"in document&&(_i=document.documentMode);var e1=Un&&"TextEvent"in window&&!_i,A0=Un&&(!vf||_i&&8<_i&&11>=_i),Dh=" ",kh=!1;function M0(e,n){switch(e){case"keyup":return qy.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Co=!1;function t1(e,n){switch(e){case"compositionend":return T0(n);case"keypress":return n.which!==32?null:(kh=!0,Dh);case"textInput":return e=n.data,e===Dh&&kh?null:e;default:return null}}function n1(e,n){if(Co)return e==="compositionend"||!vf&&M0(e,n)?(e=E0(),za=Mf=cr=null,Co=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return A0&&n.locale!=="ko"?null:n.data;default:return null}}var r1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!r1[e.type]:n==="textarea"}function R0(e,n,o,i){n0(i),n=nl(n,"onChange"),0<n.length&&(o=new Tf("onChange","change",null,o,i),e.push({event:o,listeners:n}))}var zi=null,Qi=null;function o1(e){D0(e,0)}function Al(e){var n=Go(e);if(Kg(n))return e}function i1(e,n){if(e==="change")return n}var v0=!1;if(Un){var Yd;if(Un){var Vd="oninput"in document;if(!Vd){var _h=document.createElement("div");_h.setAttribute("oninput","return;"),Vd=typeof _h.oninput=="function"}Yd=Vd}else Yd=!1;v0=Yd&&(!document.documentMode||9<document.documentMode)}function zh(){zi&&(zi.detachEvent("onpropertychange",L0),Qi=zi=null)}function L0(e){if(e.propertyName==="value"&&Al(Qi)){var n=[];R0(n,Qi,e,bf(e)),s0(o1,n)}}function s1(e,n,o){e==="focusin"?(zh(),zi=n,Qi=o,zi.attachEvent("onpropertychange",L0)):e==="focusout"&&zh()}function a1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Al(Qi)}function l1(e,n){if(e==="click")return Al(n)}function d1(e,n){if(e==="input"||e==="change")return Al(n)}function c1(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Mn=typeof Object.is=="function"?Object.is:c1;function qi(e,n){if(Mn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var o=Object.keys(e),i=Object.keys(n);if(o.length!==i.length)return!1;for(i=0;i<o.length;i++){var a=o[i];if(!hc.call(n,a)||!Mn(e[a],n[a]))return!1}return!0}function Uh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wh(e,n){var o=Uh(e);e=0;for(var i;o;){if(o.nodeType===3){if(i=e+o.textContent.length,e<=n&&i>=n)return{node:o,offset:n-e};e=i}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Uh(o)}}function w0(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?w0(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function I0(){for(var e=window,n=Ka();n instanceof e.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)e=n.contentWindow;else break;n=Ka(e.document)}return n}function Lf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function f1(e){var n=I0(),o=e.focusedElem,i=e.selectionRange;if(n!==o&&o&&o.ownerDocument&&w0(o.ownerDocument.documentElement,o)){if(i!==null&&Lf(o)){if(n=i.start,e=i.end,e===void 0&&(e=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(e,o.value.length);else if(e=(n=o.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var a=o.textContent.length,l=Math.min(i.start,a);i=i.end===void 0?l:Math.min(i.end,a),!e.extend&&l>i&&(a=i,i=l,l=a),a=Wh(o,l);var p=Wh(o,i);a&&p&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(n=n.createRange(),n.setStart(a.node,a.offset),e.removeAllRanges(),l>i?(e.addRange(n),e.extend(p.node,p.offset)):(n.setEnd(p.node,p.offset),e.addRange(n)))}}for(n=[],e=o;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)e=n[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var u1=Un&&"documentMode"in document&&11>=document.documentMode,Oo=null,jc=null,Ui=null,Gc=!1;function Hh(e,n,o){var i=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Gc||Oo==null||Oo!==Ka(i)||(i=Oo,"selectionStart"in i&&Lf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ui&&qi(Ui,i)||(Ui=i,i=nl(jc,"onSelect"),0<i.length&&(n=new Tf("onSelect","select",null,n,o),e.push({event:n,listeners:i}),n.target=Oo)))}function Ra(e,n){var o={};return o[e.toLowerCase()]=n.toLowerCase(),o["Webkit"+e]="webkit"+n,o["Moz"+e]="moz"+n,o}var jo={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionend:Ra("Transition","TransitionEnd")},Xd={},N0={};Un&&(N0=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function Ml(e){if(Xd[e])return Xd[e];if(!jo[e])return e;var n=jo[e],o;for(o in n)if(n.hasOwnProperty(o)&&o in N0)return Xd[e]=n[o];return e}var C0=Ml("animationend"),O0=Ml("animationiteration"),j0=Ml("animationstart"),G0=Ml("transitionend"),P0=new Map,Fh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,n){P0.set(e,n),eo(n,[e])}for(var Kd=0;Kd<Fh.length;Kd++){var Jd=Fh[Kd],p1=Jd.toLowerCase(),h1=Jd[0].toUpperCase()+Jd.slice(1);Ar(p1,"on"+h1)}Ar(C0,"onAnimationEnd");Ar(O0,"onAnimationIteration");Ar(j0,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(G0,"onTransitionEnd");Vo("onMouseEnter",["mouseout","mouseover"]);Vo("onMouseLeave",["mouseout","mouseover"]);Vo("onPointerEnter",["pointerout","pointerover"]);Vo("onPointerLeave",["pointerout","pointerover"]);eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function $h(e,n,o){var i=e.type||"unknown-event";e.currentTarget=o,py(i,n,void 0,e),e.currentTarget=null}function D0(e,n){n=(n&4)!==0;for(var o=0;o<e.length;o++){var i=e[o],a=i.event;i=i.listeners;e:{var l=void 0;if(n)for(var p=i.length-1;0<=p;p--){var g=i[p],x=g.instance,A=g.currentTarget;if(g=g.listener,x!==l&&a.isPropagationStopped())break e;$h(a,g,A),l=x}else for(p=0;p<i.length;p++){if(g=i[p],x=g.instance,A=g.currentTarget,g=g.listener,x!==l&&a.isPropagationStopped())break e;$h(a,g,A),l=x}}}if(Za)throw e=Ic,Za=!1,Ic=null,e}function De(e,n){var o=n[_c];o===void 0&&(o=n[_c]=new Set);var i=e+"__bubble";o.has(i)||(k0(n,e,2,!1),o.add(i))}function Zd(e,n,o){var i=0;n&&(i|=4),k0(o,e,i,n)}var va="_reactListening"+Math.random().toString(36).slice(2);function es(e){if(!e[va]){e[va]=!0,Fg.forEach(function(o){o!=="selectionchange"&&(g1.has(o)||Zd(o,!1,e),Zd(o,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[va]||(n[va]=!0,Zd("selectionchange",!1,n))}}function k0(e,n,o,i){switch(S0(n)){case 1:var a=Iy;break;case 4:a=Ny;break;default:a=Af}o=a.bind(null,n,o,e),a=void 0,!wc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(n,o,{capture:!0,passive:a}):e.addEventListener(n,o,!0):a!==void 0?e.addEventListener(n,o,{passive:a}):e.addEventListener(n,o,!1)}function Qd(e,n,o,i,a){var l=i;if(!(n&1)&&!(n&2)&&i!==null)e:for(;;){if(i===null)return;var p=i.tag;if(p===3||p===4){var g=i.stateNode.containerInfo;if(g===a||g.nodeType===8&&g.parentNode===a)break;if(p===4)for(p=i.return;p!==null;){var x=p.tag;if((x===3||x===4)&&(x=p.stateNode.containerInfo,x===a||x.nodeType===8&&x.parentNode===a))return;p=p.return}for(;g!==null;){if(p=Fr(g),p===null)return;if(x=p.tag,x===5||x===6){i=l=p;continue e}g=g.parentNode}}i=i.return}s0(function(){var A=l,G=bf(o),D=[];e:{var b=P0.get(e);if(b!==void 0){var U=Tf,N=e;switch(e){case"keypress":if(Ua(o)===0)break e;case"keydown":case"keyup":U=$y;break;case"focusin":N="focus",U=$d;break;case"focusout":N="blur",U=$d;break;case"beforeblur":case"afterblur":U=$d;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=jy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=Xy;break;case C0:case O0:case j0:U=Dy;break;case G0:U=Jy;break;case"scroll":U=Cy;break;case"wheel":U=Qy;break;case"copy":case"cut":case"paste":U=By;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Ph}var W=(n&4)!==0,F=!W&&e==="scroll",v=W?b!==null?b+"Capture":null:b;W=[];for(var E=A,L;E!==null;){L=E;var B=L.stateNode;if(L.tag===5&&B!==null&&(L=B,v!==null&&(B=Xi(E,v),B!=null&&W.push(ts(E,B,L)))),F)break;E=E.return}0<W.length&&(b=new U(b,N,null,o,G),D.push({event:b,listeners:W}))}}if(!(n&7)){e:{if(b=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",b&&o!==vc&&(N=o.relatedTarget||o.fromElement)&&(Fr(N)||N[Wn]))break e;if((U||b)&&(b=G.window===G?G:(b=G.ownerDocument)?b.defaultView||b.parentWindow:window,U?(N=o.relatedTarget||o.toElement,U=A,N=N?Fr(N):null,N!==null&&(F=to(N),N!==F||N.tag!==5&&N.tag!==6)&&(N=null)):(U=null,N=A),U!==N)){if(W=jh,B="onMouseLeave",v="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(W=Ph,B="onPointerLeave",v="onPointerEnter",E="pointer"),F=U==null?b:Go(U),L=N==null?b:Go(N),b=new W(B,E+"leave",U,o,G),b.target=F,b.relatedTarget=L,B=null,Fr(G)===A&&(W=new W(v,E+"enter",N,o,G),W.target=L,W.relatedTarget=F,B=W),F=B,U&&N)t:{for(W=U,v=N,E=0,L=W;L;L=Ro(L))E++;for(L=0,B=v;B;B=Ro(B))L++;for(;0<E-L;)W=Ro(W),E--;for(;0<L-E;)v=Ro(v),L--;for(;E--;){if(W===v||v!==null&&W===v.alternate)break t;W=Ro(W),v=Ro(v)}W=null}else W=null;U!==null&&Yh(D,b,U,W,!1),N!==null&&F!==null&&Yh(D,F,N,W,!0)}}e:{if(b=A?Go(A):window,U=b.nodeName&&b.nodeName.toLowerCase(),U==="select"||U==="input"&&b.type==="file")var K=i1;else if(Bh(b))if(v0)K=d1;else{K=a1;var z=s1}else(U=b.nodeName)&&U.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(K=l1);if(K&&(K=K(e,A))){R0(D,K,o,G);break e}z&&z(e,b,A),e==="focusout"&&(z=b._wrapperState)&&z.controlled&&b.type==="number"&&Ec(b,"number",b.value)}switch(z=A?Go(A):window,e){case"focusin":(Bh(z)||z.contentEditable==="true")&&(Oo=z,jc=A,Ui=null);break;case"focusout":Ui=jc=Oo=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,Hh(D,o,G);break;case"selectionchange":if(u1)break;case"keydown":case"keyup":Hh(D,o,G)}var q;if(vf)e:{switch(e){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else Co?M0(e,o)&&(Z="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Z="onCompositionStart");Z&&(A0&&o.locale!=="ko"&&(Co||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&Co&&(q=E0()):(cr=G,Mf="value"in cr?cr.value:cr.textContent,Co=!0)),z=nl(A,Z),0<z.length&&(Z=new Gh(Z,e,null,o,G),D.push({event:Z,listeners:z}),q?Z.data=q:(q=T0(o),q!==null&&(Z.data=q)))),(q=e1?t1(e,o):n1(e,o))&&(A=nl(A,"onBeforeInput"),0<A.length&&(G=new Gh("onBeforeInput","beforeinput",null,o,G),D.push({event:G,listeners:A}),G.data=q))}D0(D,n)})}function ts(e,n,o){return{instance:e,listener:n,currentTarget:o}}function nl(e,n){for(var o=n+"Capture",i=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Xi(e,o),l!=null&&i.unshift(ts(e,l,a)),l=Xi(e,n),l!=null&&i.push(ts(e,l,a))),e=e.return}return i}function Ro(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yh(e,n,o,i,a){for(var l=n._reactName,p=[];o!==null&&o!==i;){var g=o,x=g.alternate,A=g.stateNode;if(x!==null&&x===i)break;g.tag===5&&A!==null&&(g=A,a?(x=Xi(o,l),x!=null&&p.unshift(ts(o,x,g))):a||(x=Xi(o,l),x!=null&&p.push(ts(o,x,g)))),o=o.return}p.length!==0&&e.push({event:n,listeners:p})}var m1=/\r\n?/g,x1=/\u0000|\uFFFD/g;function Vh(e){return(typeof e=="string"?e:""+e).replace(m1,`
`).replace(x1,"")}function La(e,n,o){if(n=Vh(n),Vh(e)!==n&&o)throw Error(H(425))}function rl(){}var Pc=null,Dc=null;function kc(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Bc=typeof setTimeout=="function"?setTimeout:void 0,b1=typeof clearTimeout=="function"?clearTimeout:void 0,Xh=typeof Promise=="function"?Promise:void 0,y1=typeof queueMicrotask=="function"?queueMicrotask:typeof Xh<"u"?function(e){return Xh.resolve(null).then(e).catch(S1)}:Bc;function S1(e){setTimeout(function(){throw e})}function qd(e,n){var o=n,i=0;do{var a=o.nextSibling;if(e.removeChild(o),a&&a.nodeType===8)if(o=a.data,o==="/$"){if(i===0){e.removeChild(a),Zi(n);return}i--}else o!=="$"&&o!=="$?"&&o!=="$!"||i++;o=a}while(o);Zi(n)}function gr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Kh(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return e;n--}else o==="/$"&&n++}e=e.previousSibling}return null}var ni=Math.random().toString(36).slice(2),wn="__reactFiber$"+ni,ns="__reactProps$"+ni,Wn="__reactContainer$"+ni,_c="__reactEvents$"+ni,E1="__reactListeners$"+ni,A1="__reactHandles$"+ni;function Fr(e){var n=e[wn];if(n)return n;for(var o=e.parentNode;o;){if(n=o[Wn]||o[wn]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(e=Kh(e);e!==null;){if(o=e[wn])return o;e=Kh(e)}return n}e=o,o=e.parentNode}return null}function us(e){return e=e[wn]||e[Wn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Go(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function Tl(e){return e[ns]||null}var zc=[],Po=-1;function Mr(e){return{current:e}}function ke(e){0>Po||(e.current=zc[Po],zc[Po]=null,Po--)}function Pe(e,n){Po++,zc[Po]=e.current,e.current=n}var Er={},Mt=Mr(Er),_t=Mr(!1),Kr=Er;function Xo(e,n){var o=e.type.contextTypes;if(!o)return Er;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===n)return i.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in o)a[l]=n[l];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),a}function zt(e){return e=e.childContextTypes,e!=null}function ol(){ke(_t),ke(Mt)}function Jh(e,n,o){if(Mt.current!==Er)throw Error(H(168));Pe(Mt,n),Pe(_t,o)}function B0(e,n,o){var i=e.stateNode;if(n=n.childContextTypes,typeof i.getChildContext!="function")return o;i=i.getChildContext();for(var a in i)if(!(a in n))throw Error(H(108,sy(e)||"Unknown",a));return Ve({},o,i)}function il(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Er,Kr=Mt.current,Pe(Mt,e),Pe(_t,_t.current),!0}function Zh(e,n,o){var i=e.stateNode;if(!i)throw Error(H(169));o?(e=B0(e,n,Kr),i.__reactInternalMemoizedMergedChildContext=e,ke(_t),ke(Mt),Pe(Mt,e)):ke(_t),Pe(_t,o)}var kn=null,Rl=!1,ec=!1;function _0(e){kn===null?kn=[e]:kn.push(e)}function M1(e){Rl=!0,_0(e)}function Tr(){if(!ec&&kn!==null){ec=!0;var e=0,n=Ce;try{var o=kn;for(Ce=1;e<o.length;e++){var i=o[e];do i=i(!0);while(i!==null)}kn=null,Rl=!1}catch(a){throw kn!==null&&(kn=kn.slice(e+1)),c0(yf,Tr),a}finally{Ce=n,ec=!1}}return null}var Do=[],ko=0,sl=null,al=0,dn=[],cn=0,Jr=null,Bn=1,_n="";function Wr(e,n){Do[ko++]=al,Do[ko++]=sl,sl=e,al=n}function z0(e,n,o){dn[cn++]=Bn,dn[cn++]=_n,dn[cn++]=Jr,Jr=e;var i=Bn;e=_n;var a=32-En(i)-1;i&=~(1<<a),o+=1;var l=32-En(n)+a;if(30<l){var p=a-a%5;l=(i&(1<<p)-1).toString(32),i>>=p,a-=p,Bn=1<<32-En(n)+a|o<<a|i,_n=l+e}else Bn=1<<l|o<<a|i,_n=e}function wf(e){e.return!==null&&(Wr(e,1),z0(e,1,0))}function If(e){for(;e===sl;)sl=Do[--ko],Do[ko]=null,al=Do[--ko],Do[ko]=null;for(;e===Jr;)Jr=dn[--cn],dn[cn]=null,_n=dn[--cn],dn[cn]=null,Bn=dn[--cn],dn[cn]=null}var qt=null,Qt=null,We=!1,Sn=null;function U0(e,n){var o=fn(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=e,n=e.deletions,n===null?(e.deletions=[o],e.flags|=16):n.push(o)}function Qh(e,n){switch(e.tag){case 5:var o=e.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,qt=e,Qt=gr(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,qt=e,Qt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=Jr!==null?{id:Bn,overflow:_n}:null,e.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=fn(18,null,null,0),o.stateNode=n,o.return=e,e.child=o,qt=e,Qt=null,!0):!1;default:return!1}}function Uc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wc(e){if(We){var n=Qt;if(n){var o=n;if(!Qh(e,n)){if(Uc(e))throw Error(H(418));n=gr(o.nextSibling);var i=qt;n&&Qh(e,n)?U0(i,o):(e.flags=e.flags&-4097|2,We=!1,qt=e)}}else{if(Uc(e))throw Error(H(418));e.flags=e.flags&-4097|2,We=!1,qt=e}}}function qh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qt=e}function wa(e){if(e!==qt)return!1;if(!We)return qh(e),We=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!kc(e.type,e.memoizedProps)),n&&(n=Qt)){if(Uc(e))throw W0(),Error(H(418));for(;n;)U0(e,n),n=gr(n.nextSibling)}if(qh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(n===0){Qt=gr(e.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}e=e.nextSibling}Qt=null}}else Qt=qt?gr(e.stateNode.nextSibling):null;return!0}function W0(){for(var e=Qt;e;)e=gr(e.nextSibling)}function Ko(){Qt=qt=null,We=!1}function Nf(e){Sn===null?Sn=[e]:Sn.push(e)}var T1=$n.ReactCurrentBatchConfig;function Ni(e,n,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(H(309));var i=o.stateNode}if(!i)throw Error(H(147,e));var a=i,l=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===l?n.ref:(n=function(p){var g=a.refs;p===null?delete g[l]:g[l]=p},n._stringRef=l,n)}if(typeof e!="string")throw Error(H(284));if(!o._owner)throw Error(H(290,e))}return e}function Ia(e,n){throw e=Object.prototype.toString.call(n),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function eg(e){var n=e._init;return n(e._payload)}function H0(e){function n(v,E){if(e){var L=v.deletions;L===null?(v.deletions=[E],v.flags|=16):L.push(E)}}function o(v,E){if(!e)return null;for(;E!==null;)n(v,E),E=E.sibling;return null}function i(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function a(v,E){return v=yr(v,E),v.index=0,v.sibling=null,v}function l(v,E,L){return v.index=L,e?(L=v.alternate,L!==null?(L=L.index,L<E?(v.flags|=2,E):L):(v.flags|=2,E)):(v.flags|=1048576,E)}function p(v){return e&&v.alternate===null&&(v.flags|=2),v}function g(v,E,L,B){return E===null||E.tag!==6?(E=ac(L,v.mode,B),E.return=v,E):(E=a(E,L),E.return=v,E)}function x(v,E,L,B){var K=L.type;return K===No?G(v,E,L.props.children,B,L.key):E!==null&&(E.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===sr&&eg(K)===E.type)?(B=a(E,L.props),B.ref=Ni(v,E,L),B.return=v,B):(B=Xa(L.type,L.key,L.props,null,v.mode,B),B.ref=Ni(v,E,L),B.return=v,B)}function A(v,E,L,B){return E===null||E.tag!==4||E.stateNode.containerInfo!==L.containerInfo||E.stateNode.implementation!==L.implementation?(E=lc(L,v.mode,B),E.return=v,E):(E=a(E,L.children||[]),E.return=v,E)}function G(v,E,L,B,K){return E===null||E.tag!==7?(E=Xr(L,v.mode,B,K),E.return=v,E):(E=a(E,L),E.return=v,E)}function D(v,E,L){if(typeof E=="string"&&E!==""||typeof E=="number")return E=ac(""+E,v.mode,L),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ba:return L=Xa(E.type,E.key,E.props,null,v.mode,L),L.ref=Ni(v,null,E),L.return=v,L;case Io:return E=lc(E,v.mode,L),E.return=v,E;case sr:var B=E._init;return D(v,B(E._payload),L)}if(Gi(E)||Ri(E))return E=Xr(E,v.mode,L,null),E.return=v,E;Ia(v,E)}return null}function b(v,E,L,B){var K=E!==null?E.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return K!==null?null:g(v,E,""+L,B);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case ba:return L.key===K?x(v,E,L,B):null;case Io:return L.key===K?A(v,E,L,B):null;case sr:return K=L._init,b(v,E,K(L._payload),B)}if(Gi(L)||Ri(L))return K!==null?null:G(v,E,L,B,null);Ia(v,L)}return null}function U(v,E,L,B,K){if(typeof B=="string"&&B!==""||typeof B=="number")return v=v.get(L)||null,g(E,v,""+B,K);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case ba:return v=v.get(B.key===null?L:B.key)||null,x(E,v,B,K);case Io:return v=v.get(B.key===null?L:B.key)||null,A(E,v,B,K);case sr:var z=B._init;return U(v,E,L,z(B._payload),K)}if(Gi(B)||Ri(B))return v=v.get(L)||null,G(E,v,B,K,null);Ia(E,B)}return null}function N(v,E,L,B){for(var K=null,z=null,q=E,Z=E=0,me=null;q!==null&&Z<L.length;Z++){q.index>Z?(me=q,q=null):me=q.sibling;var C=b(v,q,L[Z],B);if(C===null){q===null&&(q=me);break}e&&q&&C.alternate===null&&n(v,q),E=l(C,E,Z),z===null?K=C:z.sibling=C,z=C,q=me}if(Z===L.length)return o(v,q),We&&Wr(v,Z),K;if(q===null){for(;Z<L.length;Z++)q=D(v,L[Z],B),q!==null&&(E=l(q,E,Z),z===null?K=q:z.sibling=q,z=q);return We&&Wr(v,Z),K}for(q=i(v,q);Z<L.length;Z++)me=U(q,v,Z,L[Z],B),me!==null&&(e&&me.alternate!==null&&q.delete(me.key===null?Z:me.key),E=l(me,E,Z),z===null?K=me:z.sibling=me,z=me);return e&&q.forEach(function(Ie){return n(v,Ie)}),We&&Wr(v,Z),K}function W(v,E,L,B){var K=Ri(L);if(typeof K!="function")throw Error(H(150));if(L=K.call(L),L==null)throw Error(H(151));for(var z=K=null,q=E,Z=E=0,me=null,C=L.next();q!==null&&!C.done;Z++,C=L.next()){q.index>Z?(me=q,q=null):me=q.sibling;var Ie=b(v,q,C.value,B);if(Ie===null){q===null&&(q=me);break}e&&q&&Ie.alternate===null&&n(v,q),E=l(Ie,E,Z),z===null?K=Ie:z.sibling=Ie,z=Ie,q=me}if(C.done)return o(v,q),We&&Wr(v,Z),K;if(q===null){for(;!C.done;Z++,C=L.next())C=D(v,C.value,B),C!==null&&(E=l(C,E,Z),z===null?K=C:z.sibling=C,z=C);return We&&Wr(v,Z),K}for(q=i(v,q);!C.done;Z++,C=L.next())C=U(q,v,Z,C.value,B),C!==null&&(e&&C.alternate!==null&&q.delete(C.key===null?Z:C.key),E=l(C,E,Z),z===null?K=C:z.sibling=C,z=C);return e&&q.forEach(function(ne){return n(v,ne)}),We&&Wr(v,Z),K}function F(v,E,L,B){if(typeof L=="object"&&L!==null&&L.type===No&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case ba:e:{for(var K=L.key,z=E;z!==null;){if(z.key===K){if(K=L.type,K===No){if(z.tag===7){o(v,z.sibling),E=a(z,L.props.children),E.return=v,v=E;break e}}else if(z.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===sr&&eg(K)===z.type){o(v,z.sibling),E=a(z,L.props),E.ref=Ni(v,z,L),E.return=v,v=E;break e}o(v,z);break}else n(v,z);z=z.sibling}L.type===No?(E=Xr(L.props.children,v.mode,B,L.key),E.return=v,v=E):(B=Xa(L.type,L.key,L.props,null,v.mode,B),B.ref=Ni(v,E,L),B.return=v,v=B)}return p(v);case Io:e:{for(z=L.key;E!==null;){if(E.key===z)if(E.tag===4&&E.stateNode.containerInfo===L.containerInfo&&E.stateNode.implementation===L.implementation){o(v,E.sibling),E=a(E,L.children||[]),E.return=v,v=E;break e}else{o(v,E);break}else n(v,E);E=E.sibling}E=lc(L,v.mode,B),E.return=v,v=E}return p(v);case sr:return z=L._init,F(v,E,z(L._payload),B)}if(Gi(L))return N(v,E,L,B);if(Ri(L))return W(v,E,L,B);Ia(v,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,E!==null&&E.tag===6?(o(v,E.sibling),E=a(E,L),E.return=v,v=E):(o(v,E),E=ac(L,v.mode,B),E.return=v,v=E),p(v)):o(v,E)}return F}var Jo=H0(!0),F0=H0(!1),ll=Mr(null),dl=null,Bo=null,Cf=null;function Of(){Cf=Bo=dl=null}function jf(e){var n=ll.current;ke(ll),e._currentValue=n}function Hc(e,n,o){for(;e!==null;){var i=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,i!==null&&(i.childLanes|=n)):i!==null&&(i.childLanes&n)!==n&&(i.childLanes|=n),e===o)break;e=e.return}}function $o(e,n){dl=e,Cf=Bo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(Bt=!0),e.firstContext=null)}function pn(e){var n=e._currentValue;if(Cf!==e)if(e={context:e,memoizedValue:n,next:null},Bo===null){if(dl===null)throw Error(H(308));Bo=e,dl.dependencies={lanes:0,firstContext:e}}else Bo=Bo.next=e;return n}var $r=null;function Gf(e){$r===null?$r=[e]:$r.push(e)}function $0(e,n,o,i){var a=n.interleaved;return a===null?(o.next=o,Gf(n)):(o.next=a.next,a.next=o),n.interleaved=o,Hn(e,i)}function Hn(e,n){e.lanes|=n;var o=e.alternate;for(o!==null&&(o.lanes|=n),o=e,e=e.return;e!==null;)e.childLanes|=n,o=e.alternate,o!==null&&(o.childLanes|=n),o=e,e=e.return;return o.tag===3?o.stateNode:null}var ar=!1;function Pf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Y0(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function mr(e,n,o){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Re&2){var a=i.pending;return a===null?n.next=n:(n.next=a.next,a.next=n),i.pending=n,Hn(e,o)}return a=i.interleaved,a===null?(n.next=n,Gf(i)):(n.next=a.next,a.next=n),i.interleaved=n,Hn(e,o)}function Wa(e,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var i=n.lanes;i&=e.pendingLanes,o|=i,n.lanes=o,Sf(e,o)}}function tg(e,n){var o=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,o===i)){var a=null,l=null;if(o=o.firstBaseUpdate,o!==null){do{var p={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};l===null?a=l=p:l=l.next=p,o=o.next}while(o!==null);l===null?a=l=n:l=l.next=n}else a=l=n;o={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:i.shared,effects:i.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=n:e.next=n,o.lastBaseUpdate=n}function cl(e,n,o,i){var a=e.updateQueue;ar=!1;var l=a.firstBaseUpdate,p=a.lastBaseUpdate,g=a.shared.pending;if(g!==null){a.shared.pending=null;var x=g,A=x.next;x.next=null,p===null?l=A:p.next=A,p=x;var G=e.alternate;G!==null&&(G=G.updateQueue,g=G.lastBaseUpdate,g!==p&&(g===null?G.firstBaseUpdate=A:g.next=A,G.lastBaseUpdate=x))}if(l!==null){var D=a.baseState;p=0,G=A=x=null,g=l;do{var b=g.lane,U=g.eventTime;if((i&b)===b){G!==null&&(G=G.next={eventTime:U,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var N=e,W=g;switch(b=n,U=o,W.tag){case 1:if(N=W.payload,typeof N=="function"){D=N.call(U,D,b);break e}D=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=W.payload,b=typeof N=="function"?N.call(U,D,b):N,b==null)break e;D=Ve({},D,b);break e;case 2:ar=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,b=a.effects,b===null?a.effects=[g]:b.push(g))}else U={eventTime:U,lane:b,tag:g.tag,payload:g.payload,callback:g.callback,next:null},G===null?(A=G=U,x=D):G=G.next=U,p|=b;if(g=g.next,g===null){if(g=a.shared.pending,g===null)break;b=g,g=b.next,b.next=null,a.lastBaseUpdate=b,a.shared.pending=null}}while(!0);if(G===null&&(x=D),a.baseState=x,a.firstBaseUpdate=A,a.lastBaseUpdate=G,n=a.shared.interleaved,n!==null){a=n;do p|=a.lane,a=a.next;while(a!==n)}else l===null&&(a.shared.lanes=0);Qr|=p,e.lanes=p,e.memoizedState=D}}function ng(e,n,o){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var i=e[n],a=i.callback;if(a!==null){if(i.callback=null,i=o,typeof a!="function")throw Error(H(191,a));a.call(i)}}}var ps={},Nn=Mr(ps),rs=Mr(ps),os=Mr(ps);function Yr(e){if(e===ps)throw Error(H(174));return e}function Df(e,n){switch(Pe(os,n),Pe(rs,e),Pe(Nn,ps),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Mc(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Mc(n,e)}ke(Nn),Pe(Nn,n)}function Zo(){ke(Nn),ke(rs),ke(os)}function V0(e){Yr(os.current);var n=Yr(Nn.current),o=Mc(n,e.type);n!==o&&(Pe(rs,e),Pe(Nn,o))}function kf(e){rs.current===e&&(ke(Nn),ke(rs))}var $e=Mr(0);function fl(e){for(var n=e;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var tc=[];function Bf(){for(var e=0;e<tc.length;e++)tc[e]._workInProgressVersionPrimary=null;tc.length=0}var Ha=$n.ReactCurrentDispatcher,nc=$n.ReactCurrentBatchConfig,Zr=0,Ye=null,ct=null,ht=null,ul=!1,Wi=!1,is=0,R1=0;function St(){throw Error(H(321))}function _f(e,n){if(n===null)return!1;for(var o=0;o<n.length&&o<e.length;o++)if(!Mn(e[o],n[o]))return!1;return!0}function zf(e,n,o,i,a,l){if(Zr=l,Ye=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ha.current=e===null||e.memoizedState===null?I1:N1,e=o(i,a),Wi){l=0;do{if(Wi=!1,is=0,25<=l)throw Error(H(301));l+=1,ht=ct=null,n.updateQueue=null,Ha.current=C1,e=o(i,a)}while(Wi)}if(Ha.current=pl,n=ct!==null&&ct.next!==null,Zr=0,ht=ct=Ye=null,ul=!1,n)throw Error(H(300));return e}function Uf(){var e=is!==0;return is=0,e}function vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ye.memoizedState=ht=e:ht=ht.next=e,ht}function hn(){if(ct===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var n=ht===null?Ye.memoizedState:ht.next;if(n!==null)ht=n,ct=e;else{if(e===null)throw Error(H(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},ht===null?Ye.memoizedState=ht=e:ht=ht.next=e}return ht}function ss(e,n){return typeof n=="function"?n(e):n}function rc(e){var n=hn(),o=n.queue;if(o===null)throw Error(H(311));o.lastRenderedReducer=e;var i=ct,a=i.baseQueue,l=o.pending;if(l!==null){if(a!==null){var p=a.next;a.next=l.next,l.next=p}i.baseQueue=a=l,o.pending=null}if(a!==null){l=a.next,i=i.baseState;var g=p=null,x=null,A=l;do{var G=A.lane;if((Zr&G)===G)x!==null&&(x=x.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),i=A.hasEagerState?A.eagerState:e(i,A.action);else{var D={lane:G,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};x===null?(g=x=D,p=i):x=x.next=D,Ye.lanes|=G,Qr|=G}A=A.next}while(A!==null&&A!==l);x===null?p=i:x.next=g,Mn(i,n.memoizedState)||(Bt=!0),n.memoizedState=i,n.baseState=p,n.baseQueue=x,o.lastRenderedState=i}if(e=o.interleaved,e!==null){a=e;do l=a.lane,Ye.lanes|=l,Qr|=l,a=a.next;while(a!==e)}else a===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function oc(e){var n=hn(),o=n.queue;if(o===null)throw Error(H(311));o.lastRenderedReducer=e;var i=o.dispatch,a=o.pending,l=n.memoizedState;if(a!==null){o.pending=null;var p=a=a.next;do l=e(l,p.action),p=p.next;while(p!==a);Mn(l,n.memoizedState)||(Bt=!0),n.memoizedState=l,n.baseQueue===null&&(n.baseState=l),o.lastRenderedState=l}return[l,i]}function X0(){}function K0(e,n){var o=Ye,i=hn(),a=n(),l=!Mn(i.memoizedState,a);if(l&&(i.memoizedState=a,Bt=!0),i=i.queue,Wf(Q0.bind(null,o,i,e),[e]),i.getSnapshot!==n||l||ht!==null&&ht.memoizedState.tag&1){if(o.flags|=2048,as(9,Z0.bind(null,o,i,a,n),void 0,null),gt===null)throw Error(H(349));Zr&30||J0(o,n,a)}return a}function J0(e,n,o){e.flags|=16384,e={getSnapshot:n,value:o},n=Ye.updateQueue,n===null?(n={lastEffect:null,stores:null},Ye.updateQueue=n,n.stores=[e]):(o=n.stores,o===null?n.stores=[e]:o.push(e))}function Z0(e,n,o,i){n.value=o,n.getSnapshot=i,q0(n)&&em(e)}function Q0(e,n,o){return o(function(){q0(n)&&em(e)})}function q0(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!Mn(e,o)}catch{return!0}}function em(e){var n=Hn(e,1);n!==null&&An(n,e,1,-1)}function rg(e){var n=vn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:e},n.queue=e,e=e.dispatch=w1.bind(null,Ye,e),[n.memoizedState,e]}function as(e,n,o,i){return e={tag:e,create:n,destroy:o,deps:i,next:null},n=Ye.updateQueue,n===null?(n={lastEffect:null,stores:null},Ye.updateQueue=n,n.lastEffect=e.next=e):(o=n.lastEffect,o===null?n.lastEffect=e.next=e:(i=o.next,o.next=e,e.next=i,n.lastEffect=e)),e}function tm(){return hn().memoizedState}function Fa(e,n,o,i){var a=vn();Ye.flags|=e,a.memoizedState=as(1|n,o,void 0,i===void 0?null:i)}function vl(e,n,o,i){var a=hn();i=i===void 0?null:i;var l=void 0;if(ct!==null){var p=ct.memoizedState;if(l=p.destroy,i!==null&&_f(i,p.deps)){a.memoizedState=as(n,o,l,i);return}}Ye.flags|=e,a.memoizedState=as(1|n,o,l,i)}function og(e,n){return Fa(8390656,8,e,n)}function Wf(e,n){return vl(2048,8,e,n)}function nm(e,n){return vl(4,2,e,n)}function rm(e,n){return vl(4,4,e,n)}function om(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function im(e,n,o){return o=o!=null?o.concat([e]):null,vl(4,4,om.bind(null,n,e),o)}function Hf(){}function sm(e,n){var o=hn();n=n===void 0?null:n;var i=o.memoizedState;return i!==null&&n!==null&&_f(n,i[1])?i[0]:(o.memoizedState=[e,n],e)}function am(e,n){var o=hn();n=n===void 0?null:n;var i=o.memoizedState;return i!==null&&n!==null&&_f(n,i[1])?i[0]:(e=e(),o.memoizedState=[e,n],e)}function lm(e,n,o){return Zr&21?(Mn(o,n)||(o=p0(),Ye.lanes|=o,Qr|=o,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,Bt=!0),e.memoizedState=o)}function v1(e,n){var o=Ce;Ce=o!==0&&4>o?o:4,e(!0);var i=nc.transition;nc.transition={};try{e(!1),n()}finally{Ce=o,nc.transition=i}}function dm(){return hn().memoizedState}function L1(e,n,o){var i=br(e);if(o={lane:i,action:o,hasEagerState:!1,eagerState:null,next:null},cm(e))fm(n,o);else if(o=$0(e,n,o,i),o!==null){var a=jt();An(o,e,i,a),um(o,n,i)}}function w1(e,n,o){var i=br(e),a={lane:i,action:o,hasEagerState:!1,eagerState:null,next:null};if(cm(e))fm(n,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=n.lastRenderedReducer,l!==null))try{var p=n.lastRenderedState,g=l(p,o);if(a.hasEagerState=!0,a.eagerState=g,Mn(g,p)){var x=n.interleaved;x===null?(a.next=a,Gf(n)):(a.next=x.next,x.next=a),n.interleaved=a;return}}catch{}finally{}o=$0(e,n,a,i),o!==null&&(a=jt(),An(o,e,i,a),um(o,n,i))}}function cm(e){var n=e.alternate;return e===Ye||n!==null&&n===Ye}function fm(e,n){Wi=ul=!0;var o=e.pending;o===null?n.next=n:(n.next=o.next,o.next=n),e.pending=n}function um(e,n,o){if(o&4194240){var i=n.lanes;i&=e.pendingLanes,o|=i,n.lanes=o,Sf(e,o)}}var pl={readContext:pn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},I1={readContext:pn,useCallback:function(e,n){return vn().memoizedState=[e,n===void 0?null:n],e},useContext:pn,useEffect:og,useImperativeHandle:function(e,n,o){return o=o!=null?o.concat([e]):null,Fa(4194308,4,om.bind(null,n,e),o)},useLayoutEffect:function(e,n){return Fa(4194308,4,e,n)},useInsertionEffect:function(e,n){return Fa(4,2,e,n)},useMemo:function(e,n){var o=vn();return n=n===void 0?null:n,e=e(),o.memoizedState=[e,n],e},useReducer:function(e,n,o){var i=vn();return n=o!==void 0?o(n):n,i.memoizedState=i.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},i.queue=e,e=e.dispatch=L1.bind(null,Ye,e),[i.memoizedState,e]},useRef:function(e){var n=vn();return e={current:e},n.memoizedState=e},useState:rg,useDebugValue:Hf,useDeferredValue:function(e){return vn().memoizedState=e},useTransition:function(){var e=rg(!1),n=e[0];return e=v1.bind(null,e[1]),vn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,o){var i=Ye,a=vn();if(We){if(o===void 0)throw Error(H(407));o=o()}else{if(o=n(),gt===null)throw Error(H(349));Zr&30||J0(i,n,o)}a.memoizedState=o;var l={value:o,getSnapshot:n};return a.queue=l,og(Q0.bind(null,i,l,e),[e]),i.flags|=2048,as(9,Z0.bind(null,i,l,o,n),void 0,null),o},useId:function(){var e=vn(),n=gt.identifierPrefix;if(We){var o=_n,i=Bn;o=(i&~(1<<32-En(i)-1)).toString(32)+o,n=":"+n+"R"+o,o=is++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=R1++,n=":"+n+"r"+o.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},N1={readContext:pn,useCallback:sm,useContext:pn,useEffect:Wf,useImperativeHandle:im,useInsertionEffect:nm,useLayoutEffect:rm,useMemo:am,useReducer:rc,useRef:tm,useState:function(){return rc(ss)},useDebugValue:Hf,useDeferredValue:function(e){var n=hn();return lm(n,ct.memoizedState,e)},useTransition:function(){var e=rc(ss)[0],n=hn().memoizedState;return[e,n]},useMutableSource:X0,useSyncExternalStore:K0,useId:dm,unstable_isNewReconciler:!1},C1={readContext:pn,useCallback:sm,useContext:pn,useEffect:Wf,useImperativeHandle:im,useInsertionEffect:nm,useLayoutEffect:rm,useMemo:am,useReducer:oc,useRef:tm,useState:function(){return oc(ss)},useDebugValue:Hf,useDeferredValue:function(e){var n=hn();return ct===null?n.memoizedState=e:lm(n,ct.memoizedState,e)},useTransition:function(){var e=oc(ss)[0],n=hn().memoizedState;return[e,n]},useMutableSource:X0,useSyncExternalStore:K0,useId:dm,unstable_isNewReconciler:!1};function bn(e,n){if(e&&e.defaultProps){n=Ve({},n),e=e.defaultProps;for(var o in e)n[o]===void 0&&(n[o]=e[o]);return n}return n}function Fc(e,n,o,i){n=e.memoizedState,o=o(i,n),o=o==null?n:Ve({},n,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Ll={isMounted:function(e){return(e=e._reactInternals)?to(e)===e:!1},enqueueSetState:function(e,n,o){e=e._reactInternals;var i=jt(),a=br(e),l=zn(i,a);l.payload=n,o!=null&&(l.callback=o),n=mr(e,l,a),n!==null&&(An(n,e,a,i),Wa(n,e,a))},enqueueReplaceState:function(e,n,o){e=e._reactInternals;var i=jt(),a=br(e),l=zn(i,a);l.tag=1,l.payload=n,o!=null&&(l.callback=o),n=mr(e,l,a),n!==null&&(An(n,e,a,i),Wa(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var o=jt(),i=br(e),a=zn(o,i);a.tag=2,n!=null&&(a.callback=n),n=mr(e,a,i),n!==null&&(An(n,e,i,o),Wa(n,e,i))}};function ig(e,n,o,i,a,l,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,p):n.prototype&&n.prototype.isPureReactComponent?!qi(o,i)||!qi(a,l):!0}function pm(e,n,o){var i=!1,a=Er,l=n.contextType;return typeof l=="object"&&l!==null?l=pn(l):(a=zt(n)?Kr:Mt.current,i=n.contextTypes,l=(i=i!=null)?Xo(e,a):Er),n=new n(o,l),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Ll,e.stateNode=n,n._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),n}function sg(e,n,o,i){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,i),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,i),n.state!==e&&Ll.enqueueReplaceState(n,n.state,null)}function $c(e,n,o,i){var a=e.stateNode;a.props=o,a.state=e.memoizedState,a.refs={},Pf(e);var l=n.contextType;typeof l=="object"&&l!==null?a.context=pn(l):(l=zt(n)?Kr:Mt.current,a.context=Xo(e,l)),a.state=e.memoizedState,l=n.getDerivedStateFromProps,typeof l=="function"&&(Fc(e,n,l,o),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(n=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),n!==a.state&&Ll.enqueueReplaceState(a,a.state,null),cl(e,o,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Qo(e,n){try{var o="",i=n;do o+=iy(i),i=i.return;while(i);var a=o}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:n,stack:a,digest:null}}function ic(e,n,o){return{value:e,source:null,stack:o??null,digest:n??null}}function Yc(e,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var O1=typeof WeakMap=="function"?WeakMap:Map;function hm(e,n,o){o=zn(-1,o),o.tag=3,o.payload={element:null};var i=n.value;return o.callback=function(){gl||(gl=!0,nf=i),Yc(e,n)},o}function gm(e,n,o){o=zn(-1,o),o.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=n.value;o.payload=function(){return i(a)},o.callback=function(){Yc(e,n)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(o.callback=function(){Yc(e,n),typeof i!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var p=n.stack;this.componentDidCatch(n.value,{componentStack:p!==null?p:""})}),o}function ag(e,n,o){var i=e.pingCache;if(i===null){i=e.pingCache=new O1;var a=new Set;i.set(n,a)}else a=i.get(n),a===void 0&&(a=new Set,i.set(n,a));a.has(o)||(a.add(o),e=Y1.bind(null,e,n,o),n.then(e,e))}function lg(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function dg(e,n,o,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===n?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=zn(-1,1),n.tag=2,mr(o,n,1))),o.lanes|=1),e)}var j1=$n.ReactCurrentOwner,Bt=!1;function Ot(e,n,o,i){n.child=e===null?F0(n,null,o,i):Jo(n,e.child,o,i)}function cg(e,n,o,i,a){o=o.render;var l=n.ref;return $o(n,a),i=zf(e,n,o,i,l,a),o=Uf(),e!==null&&!Bt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,Fn(e,n,a)):(We&&o&&wf(n),n.flags|=1,Ot(e,n,i,a),n.child)}function fg(e,n,o,i,a){if(e===null){var l=o.type;return typeof l=="function"&&!Zf(l)&&l.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=l,mm(e,n,l,i,a)):(e=Xa(o.type,null,i,n,n.mode,a),e.ref=n.ref,e.return=n,n.child=e)}if(l=e.child,!(e.lanes&a)){var p=l.memoizedProps;if(o=o.compare,o=o!==null?o:qi,o(p,i)&&e.ref===n.ref)return Fn(e,n,a)}return n.flags|=1,e=yr(l,i),e.ref=n.ref,e.return=n,n.child=e}function mm(e,n,o,i,a){if(e!==null){var l=e.memoizedProps;if(qi(l,i)&&e.ref===n.ref)if(Bt=!1,n.pendingProps=i=l,(e.lanes&a)!==0)e.flags&131072&&(Bt=!0);else return n.lanes=e.lanes,Fn(e,n,a)}return Vc(e,n,o,i,a)}function xm(e,n,o){var i=n.pendingProps,a=i.children,l=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(zo,Zt),Zt|=o;else{if(!(o&1073741824))return e=l!==null?l.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Pe(zo,Zt),Zt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:o,Pe(zo,Zt),Zt|=i}else l!==null?(i=l.baseLanes|o,n.memoizedState=null):i=o,Pe(zo,Zt),Zt|=i;return Ot(e,n,a,o),n.child}function bm(e,n){var o=n.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function Vc(e,n,o,i,a){var l=zt(o)?Kr:Mt.current;return l=Xo(n,l),$o(n,a),o=zf(e,n,o,i,l,a),i=Uf(),e!==null&&!Bt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,Fn(e,n,a)):(We&&i&&wf(n),n.flags|=1,Ot(e,n,o,a),n.child)}function ug(e,n,o,i,a){if(zt(o)){var l=!0;il(n)}else l=!1;if($o(n,a),n.stateNode===null)$a(e,n),pm(n,o,i),$c(n,o,i,a),i=!0;else if(e===null){var p=n.stateNode,g=n.memoizedProps;p.props=g;var x=p.context,A=o.contextType;typeof A=="object"&&A!==null?A=pn(A):(A=zt(o)?Kr:Mt.current,A=Xo(n,A));var G=o.getDerivedStateFromProps,D=typeof G=="function"||typeof p.getSnapshotBeforeUpdate=="function";D||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(g!==i||x!==A)&&sg(n,p,i,A),ar=!1;var b=n.memoizedState;p.state=b,cl(n,i,p,a),x=n.memoizedState,g!==i||b!==x||_t.current||ar?(typeof G=="function"&&(Fc(n,o,G,i),x=n.memoizedState),(g=ar||ig(n,o,g,i,b,x,A))?(D||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=i,n.memoizedState=x),p.props=i,p.state=x,p.context=A,i=g):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),i=!1)}else{p=n.stateNode,Y0(e,n),g=n.memoizedProps,A=n.type===n.elementType?g:bn(n.type,g),p.props=A,D=n.pendingProps,b=p.context,x=o.contextType,typeof x=="object"&&x!==null?x=pn(x):(x=zt(o)?Kr:Mt.current,x=Xo(n,x));var U=o.getDerivedStateFromProps;(G=typeof U=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(g!==D||b!==x)&&sg(n,p,i,x),ar=!1,b=n.memoizedState,p.state=b,cl(n,i,p,a);var N=n.memoizedState;g!==D||b!==N||_t.current||ar?(typeof U=="function"&&(Fc(n,o,U,i),N=n.memoizedState),(A=ar||ig(n,o,A,i,b,N,x)||!1)?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(i,N,x),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(i,N,x)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||g===e.memoizedProps&&b===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&b===e.memoizedState||(n.flags|=1024),n.memoizedProps=i,n.memoizedState=N),p.props=i,p.state=N,p.context=x,i=A):(typeof p.componentDidUpdate!="function"||g===e.memoizedProps&&b===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&b===e.memoizedState||(n.flags|=1024),i=!1)}return Xc(e,n,o,i,l,a)}function Xc(e,n,o,i,a,l){bm(e,n);var p=(n.flags&128)!==0;if(!i&&!p)return a&&Zh(n,o,!1),Fn(e,n,l);i=n.stateNode,j1.current=n;var g=p&&typeof o.getDerivedStateFromError!="function"?null:i.render();return n.flags|=1,e!==null&&p?(n.child=Jo(n,e.child,null,l),n.child=Jo(n,null,g,l)):Ot(e,n,g,l),n.memoizedState=i.state,a&&Zh(n,o,!0),n.child}function ym(e){var n=e.stateNode;n.pendingContext?Jh(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Jh(e,n.context,!1),Df(e,n.containerInfo)}function pg(e,n,o,i,a){return Ko(),Nf(a),n.flags|=256,Ot(e,n,o,i),n.child}var Kc={dehydrated:null,treeContext:null,retryLane:0};function Jc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sm(e,n,o){var i=n.pendingProps,a=$e.current,l=!1,p=(n.flags&128)!==0,g;if((g=p)||(g=e!==null&&e.memoizedState===null?!1:(a&2)!==0),g?(l=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Pe($e,a&1),e===null)return Wc(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(p=i.children,e=i.fallback,l?(i=n.mode,l=n.child,p={mode:"hidden",children:p},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=p):l=Nl(p,i,0,null),e=Xr(e,i,o,null),l.return=n,e.return=n,l.sibling=e,n.child=l,n.child.memoizedState=Jc(o),n.memoizedState=Kc,e):Ff(n,p));if(a=e.memoizedState,a!==null&&(g=a.dehydrated,g!==null))return G1(e,n,p,i,g,a,o);if(l){l=i.fallback,p=n.mode,a=e.child,g=a.sibling;var x={mode:"hidden",children:i.children};return!(p&1)&&n.child!==a?(i=n.child,i.childLanes=0,i.pendingProps=x,n.deletions=null):(i=yr(a,x),i.subtreeFlags=a.subtreeFlags&14680064),g!==null?l=yr(g,l):(l=Xr(l,p,o,null),l.flags|=2),l.return=n,i.return=n,i.sibling=l,n.child=i,i=l,l=n.child,p=e.child.memoizedState,p=p===null?Jc(o):{baseLanes:p.baseLanes|o,cachePool:null,transitions:p.transitions},l.memoizedState=p,l.childLanes=e.childLanes&~o,n.memoizedState=Kc,i}return l=e.child,e=l.sibling,i=yr(l,{mode:"visible",children:i.children}),!(n.mode&1)&&(i.lanes=o),i.return=n,i.sibling=null,e!==null&&(o=n.deletions,o===null?(n.deletions=[e],n.flags|=16):o.push(e)),n.child=i,n.memoizedState=null,i}function Ff(e,n){return n=Nl({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Na(e,n,o,i){return i!==null&&Nf(i),Jo(n,e.child,null,o),e=Ff(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function G1(e,n,o,i,a,l,p){if(o)return n.flags&256?(n.flags&=-257,i=ic(Error(H(422))),Na(e,n,p,i)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(l=i.fallback,a=n.mode,i=Nl({mode:"visible",children:i.children},a,0,null),l=Xr(l,a,p,null),l.flags|=2,i.return=n,l.return=n,i.sibling=l,n.child=i,n.mode&1&&Jo(n,e.child,null,p),n.child.memoizedState=Jc(p),n.memoizedState=Kc,l);if(!(n.mode&1))return Na(e,n,p,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var g=i.dgst;return i=g,l=Error(H(419)),i=ic(l,i,void 0),Na(e,n,p,i)}if(g=(p&e.childLanes)!==0,Bt||g){if(i=gt,i!==null){switch(p&-p){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|p)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Hn(e,a),An(i,e,a,-1))}return Jf(),i=ic(Error(H(421))),Na(e,n,p,i)}return a.data==="$?"?(n.flags|=128,n.child=e.child,n=V1.bind(null,e),a._reactRetry=n,null):(e=l.treeContext,Qt=gr(a.nextSibling),qt=n,We=!0,Sn=null,e!==null&&(dn[cn++]=Bn,dn[cn++]=_n,dn[cn++]=Jr,Bn=e.id,_n=e.overflow,Jr=n),n=Ff(n,i.children),n.flags|=4096,n)}function hg(e,n,o){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n),Hc(e.return,n,o)}function sc(e,n,o,i,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:i,tail:o,tailMode:a}:(l.isBackwards=n,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=o,l.tailMode=a)}function Em(e,n,o){var i=n.pendingProps,a=i.revealOrder,l=i.tail;if(Ot(e,n,i.children,o),i=$e.current,i&2)i=i&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hg(e,o,n);else if(e.tag===19)hg(e,o,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Pe($e,i),!(n.mode&1))n.memoizedState=null;else switch(a){case"forwards":for(o=n.child,a=null;o!==null;)e=o.alternate,e!==null&&fl(e)===null&&(a=o),o=o.sibling;o=a,o===null?(a=n.child,n.child=null):(a=o.sibling,o.sibling=null),sc(n,!1,a,o,l);break;case"backwards":for(o=null,a=n.child,n.child=null;a!==null;){if(e=a.alternate,e!==null&&fl(e)===null){n.child=a;break}e=a.sibling,a.sibling=o,o=a,a=e}sc(n,!0,o,null,l);break;case"together":sc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function $a(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Fn(e,n,o){if(e!==null&&(n.dependencies=e.dependencies),Qr|=n.lanes,!(o&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(H(153));if(n.child!==null){for(e=n.child,o=yr(e,e.pendingProps),n.child=o,o.return=n;e.sibling!==null;)e=e.sibling,o=o.sibling=yr(e,e.pendingProps),o.return=n;o.sibling=null}return n.child}function P1(e,n,o){switch(n.tag){case 3:ym(n),Ko();break;case 5:V0(n);break;case 1:zt(n.type)&&il(n);break;case 4:Df(n,n.stateNode.containerInfo);break;case 10:var i=n.type._context,a=n.memoizedProps.value;Pe(ll,i._currentValue),i._currentValue=a;break;case 13:if(i=n.memoizedState,i!==null)return i.dehydrated!==null?(Pe($e,$e.current&1),n.flags|=128,null):o&n.child.childLanes?Sm(e,n,o):(Pe($e,$e.current&1),e=Fn(e,n,o),e!==null?e.sibling:null);Pe($e,$e.current&1);break;case 19:if(i=(o&n.childLanes)!==0,e.flags&128){if(i)return Em(e,n,o);n.flags|=128}if(a=n.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Pe($e,$e.current),i)break;return null;case 22:case 23:return n.lanes=0,xm(e,n,o)}return Fn(e,n,o)}var Am,Zc,Mm,Tm;Am=function(e,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Zc=function(){};Mm=function(e,n,o,i){var a=e.memoizedProps;if(a!==i){e=n.stateNode,Yr(Nn.current);var l=null;switch(o){case"input":a=yc(e,a),i=yc(e,i),l=[];break;case"select":a=Ve({},a,{value:void 0}),i=Ve({},i,{value:void 0}),l=[];break;case"textarea":a=Ac(e,a),i=Ac(e,i),l=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=rl)}Tc(o,i);var p;o=null;for(A in a)if(!i.hasOwnProperty(A)&&a.hasOwnProperty(A)&&a[A]!=null)if(A==="style"){var g=a[A];for(p in g)g.hasOwnProperty(p)&&(o||(o={}),o[p]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(Yi.hasOwnProperty(A)?l||(l=[]):(l=l||[]).push(A,null));for(A in i){var x=i[A];if(g=a!=null?a[A]:void 0,i.hasOwnProperty(A)&&x!==g&&(x!=null||g!=null))if(A==="style")if(g){for(p in g)!g.hasOwnProperty(p)||x&&x.hasOwnProperty(p)||(o||(o={}),o[p]="");for(p in x)x.hasOwnProperty(p)&&g[p]!==x[p]&&(o||(o={}),o[p]=x[p])}else o||(l||(l=[]),l.push(A,o)),o=x;else A==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,g=g?g.__html:void 0,x!=null&&g!==x&&(l=l||[]).push(A,x)):A==="children"?typeof x!="string"&&typeof x!="number"||(l=l||[]).push(A,""+x):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(Yi.hasOwnProperty(A)?(x!=null&&A==="onScroll"&&De("scroll",e),l||g===x||(l=[])):(l=l||[]).push(A,x))}o&&(l=l||[]).push("style",o);var A=l;(n.updateQueue=A)&&(n.flags|=4)}};Tm=function(e,n,o,i){o!==i&&(n.flags|=4)};function Ci(e,n){if(!We)switch(e.tailMode){case"hidden":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var i=null;o!==null;)o.alternate!==null&&(i=o),o=o.sibling;i===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Et(e){var n=e.alternate!==null&&e.alternate.child===e.child,o=0,i=0;if(n)for(var a=e.child;a!==null;)o|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)o|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=o,n}function D1(e,n,o){var i=n.pendingProps;switch(If(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(n),null;case 1:return zt(n.type)&&ol(),Et(n),null;case 3:return i=n.stateNode,Zo(),ke(_t),ke(Mt),Bf(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(wa(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Sn!==null&&(sf(Sn),Sn=null))),Zc(e,n),Et(n),null;case 5:kf(n);var a=Yr(os.current);if(o=n.type,e!==null&&n.stateNode!=null)Mm(e,n,o,i,a),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!i){if(n.stateNode===null)throw Error(H(166));return Et(n),null}if(e=Yr(Nn.current),wa(n)){i=n.stateNode,o=n.type;var l=n.memoizedProps;switch(i[wn]=n,i[ns]=l,e=(n.mode&1)!==0,o){case"dialog":De("cancel",i),De("close",i);break;case"iframe":case"object":case"embed":De("load",i);break;case"video":case"audio":for(a=0;a<Di.length;a++)De(Di[a],i);break;case"source":De("error",i);break;case"img":case"image":case"link":De("error",i),De("load",i);break;case"details":De("toggle",i);break;case"input":Mh(i,l),De("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},De("invalid",i);break;case"textarea":Rh(i,l),De("invalid",i)}Tc(o,l),a=null;for(var p in l)if(l.hasOwnProperty(p)){var g=l[p];p==="children"?typeof g=="string"?i.textContent!==g&&(l.suppressHydrationWarning!==!0&&La(i.textContent,g,e),a=["children",g]):typeof g=="number"&&i.textContent!==""+g&&(l.suppressHydrationWarning!==!0&&La(i.textContent,g,e),a=["children",""+g]):Yi.hasOwnProperty(p)&&g!=null&&p==="onScroll"&&De("scroll",i)}switch(o){case"input":ya(i),Th(i,l,!0);break;case"textarea":ya(i),vh(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=rl)}i=a,n.updateQueue=i,i!==null&&(n.flags|=4)}else{p=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qg(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=p.createElement(o,{is:i.is}):(e=p.createElement(o),o==="select"&&(p=e,i.multiple?p.multiple=!0:i.size&&(p.size=i.size))):e=p.createElementNS(e,o),e[wn]=n,e[ns]=i,Am(e,n,!1,!1),n.stateNode=e;e:{switch(p=Rc(o,i),o){case"dialog":De("cancel",e),De("close",e),a=i;break;case"iframe":case"object":case"embed":De("load",e),a=i;break;case"video":case"audio":for(a=0;a<Di.length;a++)De(Di[a],e);a=i;break;case"source":De("error",e),a=i;break;case"img":case"image":case"link":De("error",e),De("load",e),a=i;break;case"details":De("toggle",e),a=i;break;case"input":Mh(e,i),a=yc(e,i),De("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=Ve({},i,{value:void 0}),De("invalid",e);break;case"textarea":Rh(e,i),a=Ac(e,i),De("invalid",e);break;default:a=i}Tc(o,a),g=a;for(l in g)if(g.hasOwnProperty(l)){var x=g[l];l==="style"?t0(e,x):l==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&qg(e,x)):l==="children"?typeof x=="string"?(o!=="textarea"||x!=="")&&Vi(e,x):typeof x=="number"&&Vi(e,""+x):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Yi.hasOwnProperty(l)?x!=null&&l==="onScroll"&&De("scroll",e):x!=null&&hf(e,l,x,p))}switch(o){case"input":ya(e),Th(e,i,!1);break;case"textarea":ya(e),vh(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Sr(i.value));break;case"select":e.multiple=!!i.multiple,l=i.value,l!=null?Uo(e,!!i.multiple,l,!1):i.defaultValue!=null&&Uo(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=rl)}switch(o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Et(n),null;case 6:if(e&&n.stateNode!=null)Tm(e,n,e.memoizedProps,i);else{if(typeof i!="string"&&n.stateNode===null)throw Error(H(166));if(o=Yr(os.current),Yr(Nn.current),wa(n)){if(i=n.stateNode,o=n.memoizedProps,i[wn]=n,(l=i.nodeValue!==o)&&(e=qt,e!==null))switch(e.tag){case 3:La(i.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&La(i.nodeValue,o,(e.mode&1)!==0)}l&&(n.flags|=4)}else i=(o.nodeType===9?o:o.ownerDocument).createTextNode(i),i[wn]=n,n.stateNode=i}return Et(n),null;case 13:if(ke($e),i=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&Qt!==null&&n.mode&1&&!(n.flags&128))W0(),Ko(),n.flags|=98560,l=!1;else if(l=wa(n),i!==null&&i.dehydrated!==null){if(e===null){if(!l)throw Error(H(318));if(l=n.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(H(317));l[wn]=n}else Ko(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Et(n),l=!1}else Sn!==null&&(sf(Sn),Sn=null),l=!0;if(!l)return n.flags&65536?n:null}return n.flags&128?(n.lanes=o,n):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(n.child.flags|=8192,n.mode&1&&(e===null||$e.current&1?ft===0&&(ft=3):Jf())),n.updateQueue!==null&&(n.flags|=4),Et(n),null);case 4:return Zo(),Zc(e,n),e===null&&es(n.stateNode.containerInfo),Et(n),null;case 10:return jf(n.type._context),Et(n),null;case 17:return zt(n.type)&&ol(),Et(n),null;case 19:if(ke($e),l=n.memoizedState,l===null)return Et(n),null;if(i=(n.flags&128)!==0,p=l.rendering,p===null)if(i)Ci(l,!1);else{if(ft!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(p=fl(e),p!==null){for(n.flags|=128,Ci(l,!1),i=p.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),n.subtreeFlags=0,i=o,o=n.child;o!==null;)l=o,e=i,l.flags&=14680066,p=l.alternate,p===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,e=p.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return Pe($e,$e.current&1|2),n.child}e=e.sibling}l.tail!==null&&nt()>qo&&(n.flags|=128,i=!0,Ci(l,!1),n.lanes=4194304)}else{if(!i)if(e=fl(p),e!==null){if(n.flags|=128,i=!0,o=e.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),Ci(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!We)return Et(n),null}else 2*nt()-l.renderingStartTime>qo&&o!==1073741824&&(n.flags|=128,i=!0,Ci(l,!1),n.lanes=4194304);l.isBackwards?(p.sibling=n.child,n.child=p):(o=l.last,o!==null?o.sibling=p:n.child=p,l.last=p)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=nt(),n.sibling=null,o=$e.current,Pe($e,i?o&1|2:o&1),n):(Et(n),null);case 22:case 23:return Kf(),i=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(n.flags|=8192),i&&n.mode&1?Zt&1073741824&&(Et(n),n.subtreeFlags&6&&(n.flags|=8192)):Et(n),null;case 24:return null;case 25:return null}throw Error(H(156,n.tag))}function k1(e,n){switch(If(n),n.tag){case 1:return zt(n.type)&&ol(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Zo(),ke(_t),ke(Mt),Bf(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return kf(n),null;case 13:if(ke($e),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(H(340));Ko()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ke($e),null;case 4:return Zo(),null;case 10:return jf(n.type._context),null;case 22:case 23:return Kf(),null;case 24:return null;default:return null}}var Ca=!1,At=!1,B1=typeof WeakSet=="function"?WeakSet:Set,te=null;function _o(e,n){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(i){Ze(e,n,i)}else o.current=null}function Qc(e,n,o){try{o()}catch(i){Ze(e,n,i)}}var gg=!1;function _1(e,n){if(Pc=el,e=I0(),Lf(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var i=o.getSelection&&o.getSelection();if(i&&i.rangeCount!==0){o=i.anchorNode;var a=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{o.nodeType,l.nodeType}catch{o=null;break e}var p=0,g=-1,x=-1,A=0,G=0,D=e,b=null;t:for(;;){for(var U;D!==o||a!==0&&D.nodeType!==3||(g=p+a),D!==l||i!==0&&D.nodeType!==3||(x=p+i),D.nodeType===3&&(p+=D.nodeValue.length),(U=D.firstChild)!==null;)b=D,D=U;for(;;){if(D===e)break t;if(b===o&&++A===a&&(g=p),b===l&&++G===i&&(x=p),(U=D.nextSibling)!==null)break;D=b,b=D.parentNode}D=U}o=g===-1||x===-1?null:{start:g,end:x}}else o=null}o=o||{start:0,end:0}}else o=null;for(Dc={focusedElem:e,selectionRange:o},el=!1,te=n;te!==null;)if(n=te,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,te=e;else for(;te!==null;){n=te;try{var N=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var W=N.memoizedProps,F=N.memoizedState,v=n.stateNode,E=v.getSnapshotBeforeUpdate(n.elementType===n.type?W:bn(n.type,W),F);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var L=n.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(B){Ze(n,n.return,B)}if(e=n.sibling,e!==null){e.return=n.return,te=e;break}te=n.return}return N=gg,gg=!1,N}function Hi(e,n,o){var i=n.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Qc(n,o,l)}a=a.next}while(a!==i)}}function wl(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&e)===e){var i=o.create;o.destroy=i()}o=o.next}while(o!==n)}}function qc(e){var n=e.ref;if(n!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof n=="function"?n(e):n.current=e}}function Rm(e){var n=e.alternate;n!==null&&(e.alternate=null,Rm(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[wn],delete n[ns],delete n[_c],delete n[E1],delete n[A1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function vm(e){return e.tag===5||e.tag===3||e.tag===4}function mg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ef(e,n,o){var i=e.tag;if(i===5||i===6)e=e.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(e,n):o.insertBefore(e,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(e,o)):(n=o,n.appendChild(e)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=rl));else if(i!==4&&(e=e.child,e!==null))for(ef(e,n,o),e=e.sibling;e!==null;)ef(e,n,o),e=e.sibling}function tf(e,n,o){var i=e.tag;if(i===5||i===6)e=e.stateNode,n?o.insertBefore(e,n):o.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(tf(e,n,o),e=e.sibling;e!==null;)tf(e,n,o),e=e.sibling}var xt=null,yn=!1;function ir(e,n,o){for(o=o.child;o!==null;)Lm(e,n,o),o=o.sibling}function Lm(e,n,o){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Sl,o)}catch{}switch(o.tag){case 5:At||_o(o,n);case 6:var i=xt,a=yn;xt=null,ir(e,n,o),xt=i,yn=a,xt!==null&&(yn?(e=xt,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):xt.removeChild(o.stateNode));break;case 18:xt!==null&&(yn?(e=xt,o=o.stateNode,e.nodeType===8?qd(e.parentNode,o):e.nodeType===1&&qd(e,o),Zi(e)):qd(xt,o.stateNode));break;case 4:i=xt,a=yn,xt=o.stateNode.containerInfo,yn=!0,ir(e,n,o),xt=i,yn=a;break;case 0:case 11:case 14:case 15:if(!At&&(i=o.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var l=a,p=l.destroy;l=l.tag,p!==void 0&&(l&2||l&4)&&Qc(o,n,p),a=a.next}while(a!==i)}ir(e,n,o);break;case 1:if(!At&&(_o(o,n),i=o.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=o.memoizedProps,i.state=o.memoizedState,i.componentWillUnmount()}catch(g){Ze(o,n,g)}ir(e,n,o);break;case 21:ir(e,n,o);break;case 22:o.mode&1?(At=(i=At)||o.memoizedState!==null,ir(e,n,o),At=i):ir(e,n,o);break;default:ir(e,n,o)}}function xg(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new B1),n.forEach(function(i){var a=X1.bind(null,e,i);o.has(i)||(o.add(i),i.then(a,a))})}}function xn(e,n){var o=n.deletions;if(o!==null)for(var i=0;i<o.length;i++){var a=o[i];try{var l=e,p=n,g=p;e:for(;g!==null;){switch(g.tag){case 5:xt=g.stateNode,yn=!1;break e;case 3:xt=g.stateNode.containerInfo,yn=!0;break e;case 4:xt=g.stateNode.containerInfo,yn=!0;break e}g=g.return}if(xt===null)throw Error(H(160));Lm(l,p,a),xt=null,yn=!1;var x=a.alternate;x!==null&&(x.return=null),a.return=null}catch(A){Ze(a,n,A)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)wm(n,e),n=n.sibling}function wm(e,n){var o=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xn(n,e),Rn(e),i&4){try{Hi(3,e,e.return),wl(3,e)}catch(W){Ze(e,e.return,W)}try{Hi(5,e,e.return)}catch(W){Ze(e,e.return,W)}}break;case 1:xn(n,e),Rn(e),i&512&&o!==null&&_o(o,o.return);break;case 5:if(xn(n,e),Rn(e),i&512&&o!==null&&_o(o,o.return),e.flags&32){var a=e.stateNode;try{Vi(a,"")}catch(W){Ze(e,e.return,W)}}if(i&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,p=o!==null?o.memoizedProps:l,g=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{g==="input"&&l.type==="radio"&&l.name!=null&&Jg(a,l),Rc(g,p);var A=Rc(g,l);for(p=0;p<x.length;p+=2){var G=x[p],D=x[p+1];G==="style"?t0(a,D):G==="dangerouslySetInnerHTML"?qg(a,D):G==="children"?Vi(a,D):hf(a,G,D,A)}switch(g){case"input":Sc(a,l);break;case"textarea":Zg(a,l);break;case"select":var b=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var U=l.value;U!=null?Uo(a,!!l.multiple,U,!1):b!==!!l.multiple&&(l.defaultValue!=null?Uo(a,!!l.multiple,l.defaultValue,!0):Uo(a,!!l.multiple,l.multiple?[]:"",!1))}a[ns]=l}catch(W){Ze(e,e.return,W)}}break;case 6:if(xn(n,e),Rn(e),i&4){if(e.stateNode===null)throw Error(H(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(W){Ze(e,e.return,W)}}break;case 3:if(xn(n,e),Rn(e),i&4&&o!==null&&o.memoizedState.isDehydrated)try{Zi(n.containerInfo)}catch(W){Ze(e,e.return,W)}break;case 4:xn(n,e),Rn(e);break;case 13:xn(n,e),Rn(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Vf=nt())),i&4&&xg(e);break;case 22:if(G=o!==null&&o.memoizedState!==null,e.mode&1?(At=(A=At)||G,xn(n,e),At=A):xn(n,e),Rn(e),i&8192){if(A=e.memoizedState!==null,(e.stateNode.isHidden=A)&&!G&&e.mode&1)for(te=e,G=e.child;G!==null;){for(D=te=G;te!==null;){switch(b=te,U=b.child,b.tag){case 0:case 11:case 14:case 15:Hi(4,b,b.return);break;case 1:_o(b,b.return);var N=b.stateNode;if(typeof N.componentWillUnmount=="function"){i=b,o=b.return;try{n=i,N.props=n.memoizedProps,N.state=n.memoizedState,N.componentWillUnmount()}catch(W){Ze(i,o,W)}}break;case 5:_o(b,b.return);break;case 22:if(b.memoizedState!==null){yg(D);continue}}U!==null?(U.return=b,te=U):yg(D)}G=G.sibling}e:for(G=null,D=e;;){if(D.tag===5){if(G===null){G=D;try{a=D.stateNode,A?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(g=D.stateNode,x=D.memoizedProps.style,p=x!=null&&x.hasOwnProperty("display")?x.display:null,g.style.display=e0("display",p))}catch(W){Ze(e,e.return,W)}}}else if(D.tag===6){if(G===null)try{D.stateNode.nodeValue=A?"":D.memoizedProps}catch(W){Ze(e,e.return,W)}}else if((D.tag!==22&&D.tag!==23||D.memoizedState===null||D===e)&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===e)break e;for(;D.sibling===null;){if(D.return===null||D.return===e)break e;G===D&&(G=null),D=D.return}G===D&&(G=null),D.sibling.return=D.return,D=D.sibling}}break;case 19:xn(n,e),Rn(e),i&4&&xg(e);break;case 21:break;default:xn(n,e),Rn(e)}}function Rn(e){var n=e.flags;if(n&2){try{e:{for(var o=e.return;o!==null;){if(vm(o)){var i=o;break e}o=o.return}throw Error(H(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(Vi(a,""),i.flags&=-33);var l=mg(e);tf(e,l,a);break;case 3:case 4:var p=i.stateNode.containerInfo,g=mg(e);ef(e,g,p);break;default:throw Error(H(161))}}catch(x){Ze(e,e.return,x)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function z1(e,n,o){te=e,Im(e)}function Im(e,n,o){for(var i=(e.mode&1)!==0;te!==null;){var a=te,l=a.child;if(a.tag===22&&i){var p=a.memoizedState!==null||Ca;if(!p){var g=a.alternate,x=g!==null&&g.memoizedState!==null||At;g=Ca;var A=At;if(Ca=p,(At=x)&&!A)for(te=a;te!==null;)p=te,x=p.child,p.tag===22&&p.memoizedState!==null?Sg(a):x!==null?(x.return=p,te=x):Sg(a);for(;l!==null;)te=l,Im(l),l=l.sibling;te=a,Ca=g,At=A}bg(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,te=l):bg(e)}}function bg(e){for(;te!==null;){var n=te;if(n.flags&8772){var o=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:At||wl(5,n);break;case 1:var i=n.stateNode;if(n.flags&4&&!At)if(o===null)i.componentDidMount();else{var a=n.elementType===n.type?o.memoizedProps:bn(n.type,o.memoizedProps);i.componentDidUpdate(a,o.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=n.updateQueue;l!==null&&ng(n,l,i);break;case 3:var p=n.updateQueue;if(p!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}ng(n,p,o)}break;case 5:var g=n.stateNode;if(o===null&&n.flags&4){o=g;var x=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&o.focus();break;case"img":x.src&&(o.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var A=n.alternate;if(A!==null){var G=A.memoizedState;if(G!==null){var D=G.dehydrated;D!==null&&Zi(D)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}At||n.flags&512&&qc(n)}catch(b){Ze(n,n.return,b)}}if(n===e){te=null;break}if(o=n.sibling,o!==null){o.return=n.return,te=o;break}te=n.return}}function yg(e){for(;te!==null;){var n=te;if(n===e){te=null;break}var o=n.sibling;if(o!==null){o.return=n.return,te=o;break}te=n.return}}function Sg(e){for(;te!==null;){var n=te;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{wl(4,n)}catch(x){Ze(n,o,x)}break;case 1:var i=n.stateNode;if(typeof i.componentDidMount=="function"){var a=n.return;try{i.componentDidMount()}catch(x){Ze(n,a,x)}}var l=n.return;try{qc(n)}catch(x){Ze(n,l,x)}break;case 5:var p=n.return;try{qc(n)}catch(x){Ze(n,p,x)}}}catch(x){Ze(n,n.return,x)}if(n===e){te=null;break}var g=n.sibling;if(g!==null){g.return=n.return,te=g;break}te=n.return}}var U1=Math.ceil,hl=$n.ReactCurrentDispatcher,$f=$n.ReactCurrentOwner,un=$n.ReactCurrentBatchConfig,Re=0,gt=null,st=null,bt=0,Zt=0,zo=Mr(0),ft=0,ls=null,Qr=0,Il=0,Yf=0,Fi=null,kt=null,Vf=0,qo=1/0,Dn=null,gl=!1,nf=null,xr=null,Oa=!1,fr=null,ml=0,$i=0,rf=null,Ya=-1,Va=0;function jt(){return Re&6?nt():Ya!==-1?Ya:Ya=nt()}function br(e){return e.mode&1?Re&2&&bt!==0?bt&-bt:T1.transition!==null?(Va===0&&(Va=p0()),Va):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:S0(e.type)),e):1}function An(e,n,o,i){if(50<$i)throw $i=0,rf=null,Error(H(185));cs(e,o,i),(!(Re&2)||e!==gt)&&(e===gt&&(!(Re&2)&&(Il|=o),ft===4&&dr(e,bt)),Ut(e,i),o===1&&Re===0&&!(n.mode&1)&&(qo=nt()+500,Rl&&Tr()))}function Ut(e,n){var o=e.callbackNode;Ty(e,n);var i=qa(e,e===gt?bt:0);if(i===0)o!==null&&Ih(o),e.callbackNode=null,e.callbackPriority=0;else if(n=i&-i,e.callbackPriority!==n){if(o!=null&&Ih(o),n===1)e.tag===0?M1(Eg.bind(null,e)):_0(Eg.bind(null,e)),y1(function(){!(Re&6)&&Tr()}),o=null;else{switch(h0(i)){case 1:o=yf;break;case 4:o=f0;break;case 16:o=Qa;break;case 536870912:o=u0;break;default:o=Qa}o=km(o,Nm.bind(null,e))}e.callbackPriority=n,e.callbackNode=o}}function Nm(e,n){if(Ya=-1,Va=0,Re&6)throw Error(H(327));var o=e.callbackNode;if(Yo()&&e.callbackNode!==o)return null;var i=qa(e,e===gt?bt:0);if(i===0)return null;if(i&30||i&e.expiredLanes||n)n=xl(e,i);else{n=i;var a=Re;Re|=2;var l=Om();(gt!==e||bt!==n)&&(Dn=null,qo=nt()+500,Vr(e,n));do try{F1();break}catch(g){Cm(e,g)}while(!0);Of(),hl.current=l,Re=a,st!==null?n=0:(gt=null,bt=0,n=ft)}if(n!==0){if(n===2&&(a=Nc(e),a!==0&&(i=a,n=of(e,a))),n===1)throw o=ls,Vr(e,0),dr(e,i),Ut(e,nt()),o;if(n===6)dr(e,i);else{if(a=e.current.alternate,!(i&30)&&!W1(a)&&(n=xl(e,i),n===2&&(l=Nc(e),l!==0&&(i=l,n=of(e,l))),n===1))throw o=ls,Vr(e,0),dr(e,i),Ut(e,nt()),o;switch(e.finishedWork=a,e.finishedLanes=i,n){case 0:case 1:throw Error(H(345));case 2:Hr(e,kt,Dn);break;case 3:if(dr(e,i),(i&130023424)===i&&(n=Vf+500-nt(),10<n)){if(qa(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){jt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Bc(Hr.bind(null,e,kt,Dn),n);break}Hr(e,kt,Dn);break;case 4:if(dr(e,i),(i&4194240)===i)break;for(n=e.eventTimes,a=-1;0<i;){var p=31-En(i);l=1<<p,p=n[p],p>a&&(a=p),i&=~l}if(i=a,i=nt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*U1(i/1960))-i,10<i){e.timeoutHandle=Bc(Hr.bind(null,e,kt,Dn),i);break}Hr(e,kt,Dn);break;case 5:Hr(e,kt,Dn);break;default:throw Error(H(329))}}}return Ut(e,nt()),e.callbackNode===o?Nm.bind(null,e):null}function of(e,n){var o=Fi;return e.current.memoizedState.isDehydrated&&(Vr(e,n).flags|=256),e=xl(e,n),e!==2&&(n=kt,kt=o,n!==null&&sf(n)),e}function sf(e){kt===null?kt=e:kt.push.apply(kt,e)}function W1(e){for(var n=e;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var i=0;i<o.length;i++){var a=o[i],l=a.getSnapshot;a=a.value;try{if(!Mn(l(),a))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function dr(e,n){for(n&=~Yf,n&=~Il,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var o=31-En(n),i=1<<o;e[o]=-1,n&=~i}}function Eg(e){if(Re&6)throw Error(H(327));Yo();var n=qa(e,0);if(!(n&1))return Ut(e,nt()),null;var o=xl(e,n);if(e.tag!==0&&o===2){var i=Nc(e);i!==0&&(n=i,o=of(e,i))}if(o===1)throw o=ls,Vr(e,0),dr(e,n),Ut(e,nt()),o;if(o===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Hr(e,kt,Dn),Ut(e,nt()),null}function Xf(e,n){var o=Re;Re|=1;try{return e(n)}finally{Re=o,Re===0&&(qo=nt()+500,Rl&&Tr())}}function qr(e){fr!==null&&fr.tag===0&&!(Re&6)&&Yo();var n=Re;Re|=1;var o=un.transition,i=Ce;try{if(un.transition=null,Ce=1,e)return e()}finally{Ce=i,un.transition=o,Re=n,!(Re&6)&&Tr()}}function Kf(){Zt=zo.current,ke(zo)}function Vr(e,n){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,b1(o)),st!==null)for(o=st.return;o!==null;){var i=o;switch(If(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ol();break;case 3:Zo(),ke(_t),ke(Mt),Bf();break;case 5:kf(i);break;case 4:Zo();break;case 13:ke($e);break;case 19:ke($e);break;case 10:jf(i.type._context);break;case 22:case 23:Kf()}o=o.return}if(gt=e,st=e=yr(e.current,null),bt=Zt=n,ft=0,ls=null,Yf=Il=Qr=0,kt=Fi=null,$r!==null){for(n=0;n<$r.length;n++)if(o=$r[n],i=o.interleaved,i!==null){o.interleaved=null;var a=i.next,l=o.pending;if(l!==null){var p=l.next;l.next=a,i.next=p}o.pending=i}$r=null}return e}function Cm(e,n){do{var o=st;try{if(Of(),Ha.current=pl,ul){for(var i=Ye.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}ul=!1}if(Zr=0,ht=ct=Ye=null,Wi=!1,is=0,$f.current=null,o===null||o.return===null){ft=1,ls=n,st=null;break}e:{var l=e,p=o.return,g=o,x=n;if(n=bt,g.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var A=x,G=g,D=G.tag;if(!(G.mode&1)&&(D===0||D===11||D===15)){var b=G.alternate;b?(G.updateQueue=b.updateQueue,G.memoizedState=b.memoizedState,G.lanes=b.lanes):(G.updateQueue=null,G.memoizedState=null)}var U=lg(p);if(U!==null){U.flags&=-257,dg(U,p,g,l,n),U.mode&1&&ag(l,A,n),n=U,x=A;var N=n.updateQueue;if(N===null){var W=new Set;W.add(x),n.updateQueue=W}else N.add(x);break e}else{if(!(n&1)){ag(l,A,n),Jf();break e}x=Error(H(426))}}else if(We&&g.mode&1){var F=lg(p);if(F!==null){!(F.flags&65536)&&(F.flags|=256),dg(F,p,g,l,n),Nf(Qo(x,g));break e}}l=x=Qo(x,g),ft!==4&&(ft=2),Fi===null?Fi=[l]:Fi.push(l),l=p;do{switch(l.tag){case 3:l.flags|=65536,n&=-n,l.lanes|=n;var v=hm(l,x,n);tg(l,v);break e;case 1:g=x;var E=l.type,L=l.stateNode;if(!(l.flags&128)&&(typeof E.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(xr===null||!xr.has(L)))){l.flags|=65536,n&=-n,l.lanes|=n;var B=gm(l,g,n);tg(l,B);break e}}l=l.return}while(l!==null)}Gm(o)}catch(K){n=K,st===o&&o!==null&&(st=o=o.return);continue}break}while(!0)}function Om(){var e=hl.current;return hl.current=pl,e===null?pl:e}function Jf(){(ft===0||ft===3||ft===2)&&(ft=4),gt===null||!(Qr&268435455)&&!(Il&268435455)||dr(gt,bt)}function xl(e,n){var o=Re;Re|=2;var i=Om();(gt!==e||bt!==n)&&(Dn=null,Vr(e,n));do try{H1();break}catch(a){Cm(e,a)}while(!0);if(Of(),Re=o,hl.current=i,st!==null)throw Error(H(261));return gt=null,bt=0,ft}function H1(){for(;st!==null;)jm(st)}function F1(){for(;st!==null&&!gy();)jm(st)}function jm(e){var n=Dm(e.alternate,e,Zt);e.memoizedProps=e.pendingProps,n===null?Gm(e):st=n,$f.current=null}function Gm(e){var n=e;do{var o=n.alternate;if(e=n.return,n.flags&32768){if(o=k1(o,n),o!==null){o.flags&=32767,st=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ft=6,st=null;return}}else if(o=D1(o,n,Zt),o!==null){st=o;return}if(n=n.sibling,n!==null){st=n;return}st=n=e}while(n!==null);ft===0&&(ft=5)}function Hr(e,n,o){var i=Ce,a=un.transition;try{un.transition=null,Ce=1,$1(e,n,o,i)}finally{un.transition=a,Ce=i}return null}function $1(e,n,o,i){do Yo();while(fr!==null);if(Re&6)throw Error(H(327));o=e.finishedWork;var a=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var l=o.lanes|o.childLanes;if(Ry(e,l),e===gt&&(st=gt=null,bt=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||Oa||(Oa=!0,km(Qa,function(){return Yo(),null})),l=(o.flags&15990)!==0,o.subtreeFlags&15990||l){l=un.transition,un.transition=null;var p=Ce;Ce=1;var g=Re;Re|=4,$f.current=null,_1(e,o),wm(o,e),f1(Dc),el=!!Pc,Dc=Pc=null,e.current=o,z1(o),my(),Re=g,Ce=p,un.transition=l}else e.current=o;if(Oa&&(Oa=!1,fr=e,ml=a),l=e.pendingLanes,l===0&&(xr=null),yy(o.stateNode),Ut(e,nt()),n!==null)for(i=e.onRecoverableError,o=0;o<n.length;o++)a=n[o],i(a.value,{componentStack:a.stack,digest:a.digest});if(gl)throw gl=!1,e=nf,nf=null,e;return ml&1&&e.tag!==0&&Yo(),l=e.pendingLanes,l&1?e===rf?$i++:($i=0,rf=e):$i=0,Tr(),null}function Yo(){if(fr!==null){var e=h0(ml),n=un.transition,o=Ce;try{if(un.transition=null,Ce=16>e?16:e,fr===null)var i=!1;else{if(e=fr,fr=null,ml=0,Re&6)throw Error(H(331));var a=Re;for(Re|=4,te=e.current;te!==null;){var l=te,p=l.child;if(te.flags&16){var g=l.deletions;if(g!==null){for(var x=0;x<g.length;x++){var A=g[x];for(te=A;te!==null;){var G=te;switch(G.tag){case 0:case 11:case 15:Hi(8,G,l)}var D=G.child;if(D!==null)D.return=G,te=D;else for(;te!==null;){G=te;var b=G.sibling,U=G.return;if(Rm(G),G===A){te=null;break}if(b!==null){b.return=U,te=b;break}te=U}}}var N=l.alternate;if(N!==null){var W=N.child;if(W!==null){N.child=null;do{var F=W.sibling;W.sibling=null,W=F}while(W!==null)}}te=l}}if(l.subtreeFlags&2064&&p!==null)p.return=l,te=p;else e:for(;te!==null;){if(l=te,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Hi(9,l,l.return)}var v=l.sibling;if(v!==null){v.return=l.return,te=v;break e}te=l.return}}var E=e.current;for(te=E;te!==null;){p=te;var L=p.child;if(p.subtreeFlags&2064&&L!==null)L.return=p,te=L;else e:for(p=E;te!==null;){if(g=te,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:wl(9,g)}}catch(K){Ze(g,g.return,K)}if(g===p){te=null;break e}var B=g.sibling;if(B!==null){B.return=g.return,te=B;break e}te=g.return}}if(Re=a,Tr(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Sl,e)}catch{}i=!0}return i}finally{Ce=o,un.transition=n}}return!1}function Ag(e,n,o){n=Qo(o,n),n=hm(e,n,1),e=mr(e,n,1),n=jt(),e!==null&&(cs(e,1,n),Ut(e,n))}function Ze(e,n,o){if(e.tag===3)Ag(e,e,o);else for(;n!==null;){if(n.tag===3){Ag(n,e,o);break}else if(n.tag===1){var i=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(xr===null||!xr.has(i))){e=Qo(o,e),e=gm(n,e,1),n=mr(n,e,1),e=jt(),n!==null&&(cs(n,1,e),Ut(n,e));break}}n=n.return}}function Y1(e,n,o){var i=e.pingCache;i!==null&&i.delete(n),n=jt(),e.pingedLanes|=e.suspendedLanes&o,gt===e&&(bt&o)===o&&(ft===4||ft===3&&(bt&130023424)===bt&&500>nt()-Vf?Vr(e,0):Yf|=o),Ut(e,n)}function Pm(e,n){n===0&&(e.mode&1?(n=Aa,Aa<<=1,!(Aa&130023424)&&(Aa=4194304)):n=1);var o=jt();e=Hn(e,n),e!==null&&(cs(e,n,o),Ut(e,o))}function V1(e){var n=e.memoizedState,o=0;n!==null&&(o=n.retryLane),Pm(e,o)}function X1(e,n){var o=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(o=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(H(314))}i!==null&&i.delete(n),Pm(e,o)}var Dm;Dm=function(e,n,o){if(e!==null)if(e.memoizedProps!==n.pendingProps||_t.current)Bt=!0;else{if(!(e.lanes&o)&&!(n.flags&128))return Bt=!1,P1(e,n,o);Bt=!!(e.flags&131072)}else Bt=!1,We&&n.flags&1048576&&z0(n,al,n.index);switch(n.lanes=0,n.tag){case 2:var i=n.type;$a(e,n),e=n.pendingProps;var a=Xo(n,Mt.current);$o(n,o),a=zf(null,n,i,e,a,o);var l=Uf();return n.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,zt(i)?(l=!0,il(n)):l=!1,n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Pf(n),a.updater=Ll,n.stateNode=a,a._reactInternals=n,$c(n,i,e,o),n=Xc(null,n,i,!0,l,o)):(n.tag=0,We&&l&&wf(n),Ot(null,n,a,o),n=n.child),n;case 16:i=n.elementType;e:{switch($a(e,n),e=n.pendingProps,a=i._init,i=a(i._payload),n.type=i,a=n.tag=J1(i),e=bn(i,e),a){case 0:n=Vc(null,n,i,e,o);break e;case 1:n=ug(null,n,i,e,o);break e;case 11:n=cg(null,n,i,e,o);break e;case 14:n=fg(null,n,i,bn(i.type,e),o);break e}throw Error(H(306,i,""))}return n;case 0:return i=n.type,a=n.pendingProps,a=n.elementType===i?a:bn(i,a),Vc(e,n,i,a,o);case 1:return i=n.type,a=n.pendingProps,a=n.elementType===i?a:bn(i,a),ug(e,n,i,a,o);case 3:e:{if(ym(n),e===null)throw Error(H(387));i=n.pendingProps,l=n.memoizedState,a=l.element,Y0(e,n),cl(n,i,null,o);var p=n.memoizedState;if(i=p.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},n.updateQueue.baseState=l,n.memoizedState=l,n.flags&256){a=Qo(Error(H(423)),n),n=pg(e,n,i,o,a);break e}else if(i!==a){a=Qo(Error(H(424)),n),n=pg(e,n,i,o,a);break e}else for(Qt=gr(n.stateNode.containerInfo.firstChild),qt=n,We=!0,Sn=null,o=F0(n,null,i,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ko(),i===a){n=Fn(e,n,o);break e}Ot(e,n,i,o)}n=n.child}return n;case 5:return V0(n),e===null&&Wc(n),i=n.type,a=n.pendingProps,l=e!==null?e.memoizedProps:null,p=a.children,kc(i,a)?p=null:l!==null&&kc(i,l)&&(n.flags|=32),bm(e,n),Ot(e,n,p,o),n.child;case 6:return e===null&&Wc(n),null;case 13:return Sm(e,n,o);case 4:return Df(n,n.stateNode.containerInfo),i=n.pendingProps,e===null?n.child=Jo(n,null,i,o):Ot(e,n,i,o),n.child;case 11:return i=n.type,a=n.pendingProps,a=n.elementType===i?a:bn(i,a),cg(e,n,i,a,o);case 7:return Ot(e,n,n.pendingProps,o),n.child;case 8:return Ot(e,n,n.pendingProps.children,o),n.child;case 12:return Ot(e,n,n.pendingProps.children,o),n.child;case 10:e:{if(i=n.type._context,a=n.pendingProps,l=n.memoizedProps,p=a.value,Pe(ll,i._currentValue),i._currentValue=p,l!==null)if(Mn(l.value,p)){if(l.children===a.children&&!_t.current){n=Fn(e,n,o);break e}}else for(l=n.child,l!==null&&(l.return=n);l!==null;){var g=l.dependencies;if(g!==null){p=l.child;for(var x=g.firstContext;x!==null;){if(x.context===i){if(l.tag===1){x=zn(-1,o&-o),x.tag=2;var A=l.updateQueue;if(A!==null){A=A.shared;var G=A.pending;G===null?x.next=x:(x.next=G.next,G.next=x),A.pending=x}}l.lanes|=o,x=l.alternate,x!==null&&(x.lanes|=o),Hc(l.return,o,n),g.lanes|=o;break}x=x.next}}else if(l.tag===10)p=l.type===n.type?null:l.child;else if(l.tag===18){if(p=l.return,p===null)throw Error(H(341));p.lanes|=o,g=p.alternate,g!==null&&(g.lanes|=o),Hc(p,o,n),p=l.sibling}else p=l.child;if(p!==null)p.return=l;else for(p=l;p!==null;){if(p===n){p=null;break}if(l=p.sibling,l!==null){l.return=p.return,p=l;break}p=p.return}l=p}Ot(e,n,a.children,o),n=n.child}return n;case 9:return a=n.type,i=n.pendingProps.children,$o(n,o),a=pn(a),i=i(a),n.flags|=1,Ot(e,n,i,o),n.child;case 14:return i=n.type,a=bn(i,n.pendingProps),a=bn(i.type,a),fg(e,n,i,a,o);case 15:return mm(e,n,n.type,n.pendingProps,o);case 17:return i=n.type,a=n.pendingProps,a=n.elementType===i?a:bn(i,a),$a(e,n),n.tag=1,zt(i)?(e=!0,il(n)):e=!1,$o(n,o),pm(n,i,a),$c(n,i,a,o),Xc(null,n,i,!0,e,o);case 19:return Em(e,n,o);case 22:return xm(e,n,o)}throw Error(H(156,n.tag))};function km(e,n){return c0(e,n)}function K1(e,n,o,i){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(e,n,o,i){return new K1(e,n,o,i)}function Zf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function J1(e){if(typeof e=="function")return Zf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mf)return 11;if(e===xf)return 14}return 2}function yr(e,n){var o=e.alternate;return o===null?(o=fn(e.tag,n,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=n,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,n=e.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function Xa(e,n,o,i,a,l){var p=2;if(i=e,typeof e=="function")Zf(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case No:return Xr(o.children,a,l,n);case gf:p=8,a|=8;break;case gc:return e=fn(12,o,n,a|2),e.elementType=gc,e.lanes=l,e;case mc:return e=fn(13,o,n,a),e.elementType=mc,e.lanes=l,e;case xc:return e=fn(19,o,n,a),e.elementType=xc,e.lanes=l,e;case Vg:return Nl(o,a,l,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $g:p=10;break e;case Yg:p=9;break e;case mf:p=11;break e;case xf:p=14;break e;case sr:p=16,i=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return n=fn(p,o,n,a),n.elementType=e,n.type=i,n.lanes=l,n}function Xr(e,n,o,i){return e=fn(7,e,i,n),e.lanes=o,e}function Nl(e,n,o,i){return e=fn(22,e,i,n),e.elementType=Vg,e.lanes=o,e.stateNode={isHidden:!1},e}function ac(e,n,o){return e=fn(6,e,null,n),e.lanes=o,e}function lc(e,n,o){return n=fn(4,e.children!==null?e.children:[],e.key,n),n.lanes=o,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Z1(e,n,o,i,a){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wd(0),this.expirationTimes=Wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wd(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Qf(e,n,o,i,a,l,p,g,x){return e=new Z1(e,n,o,g,x),n===1?(n=1,l===!0&&(n|=8)):n=0,l=fn(3,null,null,n),e.current=l,l.stateNode=e,l.memoizedState={element:i,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pf(l),e}function Q1(e,n,o){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Io,key:i==null?null:""+i,children:e,containerInfo:n,implementation:o}}function Bm(e){if(!e)return Er;e=e._reactInternals;e:{if(to(e)!==e||e.tag!==1)throw Error(H(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(zt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(H(171))}if(e.tag===1){var o=e.type;if(zt(o))return B0(e,o,n)}return n}function _m(e,n,o,i,a,l,p,g,x){return e=Qf(o,i,!0,e,a,l,p,g,x),e.context=Bm(null),o=e.current,i=jt(),a=br(o),l=zn(i,a),l.callback=n??null,mr(o,l,a),e.current.lanes=a,cs(e,a,i),Ut(e,i),e}function Cl(e,n,o,i){var a=n.current,l=jt(),p=br(a);return o=Bm(o),n.context===null?n.context=o:n.pendingContext=o,n=zn(l,p),n.payload={element:e},i=i===void 0?null:i,i!==null&&(n.callback=i),e=mr(a,n,p),e!==null&&(An(e,a,p,l),Wa(e,a,p)),p}function bl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Mg(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<n?o:n}}function qf(e,n){Mg(e,n),(e=e.alternate)&&Mg(e,n)}function q1(){return null}var zm=typeof reportError=="function"?reportError:function(e){console.error(e)};function eu(e){this._internalRoot=e}Ol.prototype.render=eu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(H(409));Cl(e,n,null,null)};Ol.prototype.unmount=eu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;qr(function(){Cl(null,e,null,null)}),n[Wn]=null}};function Ol(e){this._internalRoot=e}Ol.prototype.unstable_scheduleHydration=function(e){if(e){var n=x0();e={blockedOn:null,target:e,priority:n};for(var o=0;o<lr.length&&n!==0&&n<lr[o].priority;o++);lr.splice(o,0,e),o===0&&y0(e)}};function tu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Tg(){}function eS(e,n,o,i,a){if(a){if(typeof i=="function"){var l=i;i=function(){var A=bl(p);l.call(A)}}var p=_m(n,i,e,0,null,!1,!1,"",Tg);return e._reactRootContainer=p,e[Wn]=p.current,es(e.nodeType===8?e.parentNode:e),qr(),p}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var g=i;i=function(){var A=bl(x);g.call(A)}}var x=Qf(e,0,!1,null,null,!1,!1,"",Tg);return e._reactRootContainer=x,e[Wn]=x.current,es(e.nodeType===8?e.parentNode:e),qr(function(){Cl(n,x,o,i)}),x}function Gl(e,n,o,i,a){var l=o._reactRootContainer;if(l){var p=l;if(typeof a=="function"){var g=a;a=function(){var x=bl(p);g.call(x)}}Cl(n,p,e,a)}else p=eS(o,n,e,a,i);return bl(p)}g0=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var o=Pi(n.pendingLanes);o!==0&&(Sf(n,o|1),Ut(n,nt()),!(Re&6)&&(qo=nt()+500,Tr()))}break;case 13:qr(function(){var i=Hn(e,1);if(i!==null){var a=jt();An(i,e,1,a)}}),qf(e,1)}};Ef=function(e){if(e.tag===13){var n=Hn(e,134217728);if(n!==null){var o=jt();An(n,e,134217728,o)}qf(e,134217728)}};m0=function(e){if(e.tag===13){var n=br(e),o=Hn(e,n);if(o!==null){var i=jt();An(o,e,n,i)}qf(e,n)}};x0=function(){return Ce};b0=function(e,n){var o=Ce;try{return Ce=e,n()}finally{Ce=o}};Lc=function(e,n,o){switch(n){case"input":if(Sc(e,o),n=o.name,o.type==="radio"&&n!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var i=o[n];if(i!==e&&i.form===e.form){var a=Tl(i);if(!a)throw Error(H(90));Kg(i),Sc(i,a)}}}break;case"textarea":Zg(e,o);break;case"select":n=o.value,n!=null&&Uo(e,!!o.multiple,n,!1)}};o0=Xf;i0=qr;var tS={usingClientEntryPoint:!1,Events:[us,Go,Tl,n0,r0,Xf]},Oi={findFiberByHostInstance:Fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nS={bundleType:Oi.bundleType,version:Oi.version,rendererPackageName:Oi.rendererPackageName,rendererConfig:Oi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=l0(e),e===null?null:e.stateNode},findFiberByHostInstance:Oi.findFiberByHostInstance||q1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ja.isDisabled&&ja.supportsFiber)try{Sl=ja.inject(nS),In=ja}catch{}}tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tS;tn.createPortal=function(e,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tu(n))throw Error(H(200));return Q1(e,n,null,o)};tn.createRoot=function(e,n){if(!tu(e))throw Error(H(299));var o=!1,i="",a=zm;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),n=Qf(e,1,!1,null,null,o,!1,i,a),e[Wn]=n.current,es(e.nodeType===8?e.parentNode:e),new eu(n)};tn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=l0(n),e=e===null?null:e.stateNode,e};tn.flushSync=function(e){return qr(e)};tn.hydrate=function(e,n,o){if(!jl(n))throw Error(H(200));return Gl(null,e,n,!0,o)};tn.hydrateRoot=function(e,n,o){if(!tu(e))throw Error(H(405));var i=o!=null&&o.hydratedSources||null,a=!1,l="",p=zm;if(o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(l=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),n=_m(n,null,e,1,o??null,a,!1,l,p),e[Wn]=n.current,es(e),i)for(e=0;e<i.length;e++)o=i[e],a=o._getVersion,a=a(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,a]:n.mutableSourceEagerHydrationData.push(o,a);return new Ol(n)};tn.render=function(e,n,o){if(!jl(n))throw Error(H(200));return Gl(null,e,n,!1,o)};tn.unmountComponentAtNode=function(e){if(!jl(e))throw Error(H(40));return e._reactRootContainer?(qr(function(){Gl(null,null,e,!1,function(){e._reactRootContainer=null,e[Wn]=null})}),!0):!1};tn.unstable_batchedUpdates=Xf;tn.unstable_renderSubtreeIntoContainer=function(e,n,o,i){if(!jl(o))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return Gl(e,n,o,!1,i)};tn.version="18.3.1-next-f1338f8080-20240426";function Um(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Um)}catch(e){console.error(e)}}Um(),Ug.exports=tn;var rS=Ug.exports,Rg=rS;pc.createRoot=Rg.createRoot,pc.hydrateRoot=Rg.hydrateRoot;const oS=[{raw:"48247 FLUIDSHIELD MASK WITH VISOR 48247",brand:"48247 FLUIDSHIELD MASK WITH VISOR 48247",form:"other",dose:"",search:"48247 FLUIDSHIELD MASK WITH VISOR 48247"},{raw:"ABBOTT FREESTYLE LIBRA SENSOR KIT",brand:"ABBOTT FREESTYLE LIBRA SENSOR KIT",form:"other",dose:"",search:"ABBOTT FREESTYLE LIBRA SENSOR KIT"},{raw:"ABGEL STERISPON",brand:"ABGEL STERISPON",form:"other",dose:"",search:"ABGEL STERISPON"},{raw:"ABZORB DUSTING POWDER 120GM",brand:"ABZORB DUSTING POWDER 120GM",form:"powder",dose:"120GM",search:"ABZORB DUSTING POWDER 120GM"},{raw:"ACCU CHECK INSTANT 50S",brand:"ACCU CHECK INSTANT 50S",form:"other",dose:"",search:"ACCU CHECK INSTANT 50S"},{raw:"ACCU CHECK INSTANT KIT NEW",brand:"ACCU CHECK INSTANT KIT NEW",form:"other",dose:"",search:"ACCU CHECK INSTANT KIT NEW"},{raw:"ACCU CHECK INSTANT S METER",brand:"ACCU CHECK INSTANT S METER",form:"other",dose:"",search:"ACCU CHECK INSTANT S METER"},{raw:"ADMAG",brand:"ADMAG",form:"other",dose:"",search:"ADMAG"},{raw:"AEROMIST CHILD",brand:"AEROMIST CHILD",form:"other",dose:"",search:"AEROMIST CHILD"},{raw:"AEROMIST NEBULIZER KIT (ADULT)",brand:"AEROMIST NEBULIZER KIT (ADULT)",form:"other",dose:"",search:"AEROMIST NEBULIZER KIT (ADULT)"},{raw:"AIRZ FB SMARTULE",brand:"AIRZ FB SMARTULE",form:"other",dose:"",search:"AIRZ FB SMARTULE"},{raw:"ALBUREL 20% INJECTION 100 ML 100ML",brand:"ALBUREL 20% INJECTION 100 ML 100ML",form:"other",dose:"20%",search:"ALBUREL 20% INJECTION 100 ML 100ML"},{raw:"ALEX COUGH LOZENGES",brand:"ALEX COUGH LOZENGES",form:"other",dose:"",search:"ALEX COUGH LOZENGES"},{raw:"AMCHOPLAST PHMB 8*6",brand:"AMCHOPLAST PHMB",form:"other",dose:"",search:"AMCHOPLAST PHMB"},{raw:"ANAS DEE GEL 30GM",brand:"ANAS DEE GEL 30GM",form:"gel",dose:"30GM",search:"ANAS DEE GEL 30GM"},{raw:"ANMIL GOLD COCONUT OIL",brand:"ANMIL GOLD COCONUT OIL",form:"other",dose:"",search:"ANMIL GOLD COCONUT OIL"},{raw:"ASTHALIN RESPULES 2.5ML 1*2.5ML",brand:"ASTHALIN RESPULES 2.5ML 1*2.5ML",form:"other",dose:"2.5ML",search:"ASTHALIN RESPULES 2 5ML 1*2 5ML"},{raw:"ATCHOL 10 TAB 1 X 10",brand:"ATCHOL 10 TAB",form:"tablet",dose:"",search:"ATCHOL 10 TAB"},{raw:"ATCHOL 20 TAB 1*10",brand:"ATCHOL 20 TAB",form:"tablet",dose:"",search:"ATCHOL 20 TAB"},{raw:"AXACIP 100 ML(CIPRO)",brand:"AXACIP 100 ML(CIPRO)",form:"other",dose:"100 ML",search:"AXACIP 100 ML(CIPRO)"},{raw:"B D NEEDLE 18G",brand:"B D NEEDLE 18G",form:"other",dose:"",search:"B D NEEDLE 18G"},{raw:"B D NEEDLE 25G",brand:"B D NEEDLE 25G",form:"other",dose:"",search:"B D NEEDLE 25G"},{raw:"B D SPINAL NEEDLE 26G",brand:"B D SPINAL NEEDLE 26G",form:"other",dose:"",search:"B D SPINAL NEEDLE 26G"},{raw:"B D SPINAL NEEDLE 27G",brand:"B D SPINAL NEEDLE 27G",form:"other",dose:"",search:"B D SPINAL NEEDLE 27G"},{raw:"BACCIRUB 500ML",brand:"BACCIRUB 500ML",form:"other",dose:"500ML",search:"BACCIRUB 500ML"},{raw:"BACTRIGRAS 10CM*10CM",brand:"BACTRIGRAS 10CM*10CM",form:"other",dose:"",search:"BACTRIGRAS 10CM*10CM"},{raw:"BAIN CIRCUIT",brand:"BAIN CIRCUIT",form:"other",dose:"",search:"BAIN CIRCUIT"},{raw:"BASALOG 5X3 ML DOMESTIC",brand:"BASALOG 5X3 ML DOMESTIC",form:"other",dose:"3 ML",search:"BASALOG 5X3 ML DOMESTIC"},{raw:"BASUGINE 3ML CATRIDGE",brand:"BASUGINE 3ML CATRIDGE",form:"other",dose:"3ML",search:"BASUGINE 3ML CATRIDGE"},{raw:"BASUGINE PEN",brand:"BASUGINE PEN",form:"other",dose:"",search:"BASUGINE PEN"},{raw:"BD ARTERIAL CANNULA 20*45",brand:"BD ARTERIAL CANNULA",form:"other",dose:"",search:"BD ARTERIAL CANNULA"},{raw:"BD INSULIN U-40-6MM",brand:"BD INSULIN U-40-6MM",form:"other",dose:"",search:"BD INSULIN U 40 6MM"},{raw:"BD PEN NEEDLE 4MM",brand:"BD PEN NEEDLE 4MM",form:"other",dose:"",search:"BD PEN NEEDLE 4MM"},{raw:"BD PEN NEEDLE 6MM",brand:"BD PEN NEEDLE 6MM",form:"other",dose:"",search:"BD PEN NEEDLE 6MM"},{raw:"BED PAN PLASTIC",brand:"BED PAN PLASTIC",form:"other",dose:"",search:"BED PAN PLASTIC"},{raw:"BETADINE GARGLE 50ML",brand:"BETADINE GARGLE 50ML",form:"other",dose:"50ML",search:"BETADINE GARGLE 50ML"},{raw:"BI VALVE",brand:"BI VALVE",form:"other",dose:"",search:"BI VALVE"},{raw:"BILATERAL KNEE O DRAPE",brand:"BILATERAL KNEE O DRAPE",form:"other",dose:"",search:"BILATERAL KNEE O DRAPE"},{raw:"BT SET",brand:"BT SET",form:"other",dose:"",search:"BT SET"},{raw:"BUDECORT 0.5 RESPULES 1*2ML",brand:"BUDECORT 0.5 RESPULES",form:"other",dose:"2ML",search:"BUDECORT 0 5 RESPULES"},{raw:"BUFFOUNT CAP 1*100",brand:"BUFFOUNT CAP",form:"capsule",dose:"",search:"BUFFOUNT CAP"},{raw:"BUPOXONE -10 PATCH",brand:"BUPOXONE -10 PATCH",form:"other",dose:"",search:"BUPOXONE  10 PATCH"},{raw:"BUVALOR 10MG PATCH",brand:"BUVALOR 10MG PATCH",form:"other",dose:"10MG",search:"BUVALOR 10MG PATCH"},{raw:"CALCIQUICK D3 SHOT",brand:"CALCIQUICK D3 SHOT",form:"other",dose:"",search:"CALCIQUICK D3 SHOT"},{raw:"CALCIUM GLUCONATE INJ 10ML",brand:"CALCIUM GLUCONATE INJ 10ML",form:"injection",dose:"10ML",search:"CALCIUM GLUCONATE INJ 10ML"},{raw:"CAMERA COVER (SURGIWEAR)",brand:"CAMERA COVER (SURGIWEAR)",form:"other",dose:"",search:"CAMERA COVER (SURGIWEAR)"},{raw:"CANDID B CREAM 20GM",brand:"CANDID B CREAM 20GM",form:"cream",dose:"20GM",search:"CANDID B CREAM 20GM"},{raw:"CANDID MOUTH PAINT",brand:"CANDID MOUTH PAINT",form:"other",dose:"",search:"CANDID MOUTH PAINT"},{raw:"CANNULA FIXATOR",brand:"CANNULA FIXATOR",form:"other",dose:"",search:"CANNULA FIXATOR"},{raw:"CAP DALACIN C 300MG",brand:"DALACIN C 300MG",form:"capsule",dose:"300MG",search:"DALACIN C 300MG"},{raw:"CAP DEXORANGE",brand:"DEXORANGE",form:"capsule",dose:"",search:"DEXORANGE"},{raw:"CAP FLUDAC 20MG",brand:"FLUDAC 20MG",form:"capsule",dose:"20MG",search:"FLUDAC 20MG"},{raw:"CAP MYORIL MAXX",brand:"MYORIL MAXX",form:"capsule",dose:"",search:"MYORIL MAXX"},{raw:"CAP URIMAX D",brand:"URIMAX D",form:"capsule",dose:"",search:"URIMAX D"},{raw:"CAP VIZYLAC RICH",brand:"VIZYLAC RICH",form:"capsule",dose:"",search:"VIZYLAC RICH"},{raw:"CAP VIZYLAC",brand:"VIZYLAC",form:"capsule",dose:"",search:"VIZYLAC"},{raw:"CCM TAB 1*30T",brand:"CCM TAB",form:"tablet",dose:"",search:"CCM TAB"},{raw:"CENTRO TRIPLE LUMEN",brand:"CENTRO TRIPLE LUMEN",form:"other",dose:"",search:"CENTRO TRIPLE LUMEN"},{raw:"CETANIL M 50 TAB 10TAB",brand:"CETANIL M 50 TAB 10TAB",form:"tablet",dose:"",search:"CETANIL M 50 TAB 10TAB"},{raw:"CETANIL T 40MG TAB 1 X 10",brand:"CETANIL T 40MG TAB",form:"tablet",dose:"40MG",search:"CETANIL T 40MG TAB"},{raw:"CEVENCA 3LUMNE 7FR 16CM",brand:"CEVENCA 3LUMNE 7FR 16CM",form:"other",dose:"",search:"CEVENCA 3LUMNE 7FR 16CM"},{raw:"CHERICOF LS 100ML",brand:"CHERICOF LS 100ML",form:"other",dose:"100ML",search:"CHERICOF LS 100ML"},{raw:"CIPCAL D3 SACHET    ",brand:"CIPCAL D3 SACHET",form:"powder",dose:"",search:"CIPCAL D3 SACHET"},{raw:"CIPLADINE 20GM",brand:"CIPLADINE 20GM",form:"other",dose:"20GM",search:"CIPLADINE 20GM"},{raw:"CIPLADINE SOL 100ML",brand:"CIPLADINE SOL 100ML",form:"other",dose:"100ML",search:"CIPLADINE SOL 100ML"},{raw:"CIPLAR LA 40 TAB",brand:"CIPLAR LA 40 TAB",form:"tablet",dose:"",search:"CIPLAR LA 40 TAB"},{raw:"CLING DRAPE (SURGIWEAR))",brand:"CLING DRAPE (SURGIWEAR))",form:"other",dose:"",search:"CLING DRAPE (SURGIWEAR))"},{raw:"CLING DRAPE 5MTR",brand:"CLING DRAPE 5MTR",form:"other",dose:"",search:"CLING DRAPE 5MTR"},{raw:"CLOTH THAN",brand:"CLOTH THAN",form:"other",dose:"",search:"CLOTH THAN"},{raw:"COMBHIHALE FB 0.5",brand:"COMBHIHALE FB 0.5",form:"other",dose:"",search:"COMBHIHALE FB 0 5"},{raw:"COMFYPEN REUSABLE PEN",brand:"COMFYPEN REUSABLE PEN",form:"other",dose:"",search:"COMFYPEN REUSABLE PEN"},{raw:"CONCOR AM 2.5MG TAB 1*10",brand:"CONCOR AM 2.5MG TAB",form:"tablet",dose:"2.5MG",search:"CONCOR AM 2 5MG TAB"},{raw:"CONCOR AM 5 TAB 1*10T",brand:"CONCOR AM 5 TAB",form:"tablet",dose:"",search:"CONCOR AM 5 TAB"},{raw:"COTTON 500GM 500GM",brand:"COTTON 500GM 500GM",form:"other",dose:"500GM",search:"COTTON 500GM 500GM"},{raw:"CREPE 4''/10CM BOX",brand:"CREPE 4''/10CM BOX",form:"other",dose:"",search:"CREPE 4''/10CM BOX"},{raw:"CREPE 6'/15CM BOX",brand:"CREPE 6'/15CM BOX",form:"other",dose:"",search:"CREPE 6'/15CM BOX"},{raw:"CTD T AM 12.5/40/5 TAB",brand:"CTD T AM 12.5/40/5 TAB",form:"tablet",dose:"",search:"CTD T AM 12 5/40/5 TAB"},{raw:"D3-SURE NANO SHOT",brand:"D3-SURE NANO SHOT",form:"other",dose:"",search:"D3 SURE NANO SHOT"},{raw:"DERMARK",brand:"DERMARK",form:"other",dose:"",search:"DERMARK"},{raw:"DEXTROSE 25% 100ML",brand:"DEXTROSE 25% 100ML",form:"other",dose:"25%",search:"DEXTROSE 25% 100ML"},{raw:"DIABETIC SOCKS",brand:"DIABETIC SOCKS",form:"other",dose:"",search:"DIABETIC SOCKS"},{raw:"DIAPER ECO (XL)",brand:"DIAPER ECO (XL)",form:"other",dose:"",search:"DIAPER ECO (XL)"},{raw:"DIGITAL THERMOETER 1PACK",brand:"DIGITAL THERMOETER 1PACK",form:"other",dose:"",search:"DIGITAL THERMOETER 1PACK"},{raw:"DISPO NEEDLE 16G*1.5",brand:"DISPO NEEDLE 16G*1.5",form:"other",dose:"",search:"DISPO NEEDLE 16G*1 5"},{raw:"DISPO NEEDLE 20G*1",brand:"DISPO NEEDLE 20G*1",form:"other",dose:"",search:"DISPO NEEDLE 20G*1"},{raw:"DISPOSABLE  SYRING 20CC",brand:"DISPOSABLE  SYRING 20CC",form:"other",dose:"",search:"DISPOSABLE  SYRING 20CC"},{raw:"DISPOSABLE COAXIAL CIRCUIT WITH FLOW SENSOR",brand:"DISPOSABLE COAXIAL CIRCUIT WITH FLOW SENSOR",form:"other",dose:"",search:"DISPOSABLE COAXIAL CIRCUIT WITH FLOW SENSOR"},{raw:"DISPOVAN NEEDLE 18X1.5G",brand:"DISPOVAN NEEDLE 18X1.5G",form:"other",dose:"",search:"DISPOVAN NEEDLE 18X1 5G"},{raw:"DISPOVAN NEEDLE 24G",brand:"DISPOVAN NEEDLE 24G",form:"other",dose:"",search:"DISPOVAN NEEDLE 24G"},{raw:"DISPOVAN NEEDLE 26G",brand:"DISPOVAN NEEDLE 26G",form:"other",dose:"",search:"DISPOVAN NEEDLE 26G"},{raw:"DISPOVAN SYRINGE 50CC",brand:"DISPOVAN SYRINGE 50CC",form:"other",dose:"",search:"DISPOVAN SYRINGE 50CC"},{raw:"DNS 500ML 500ML",brand:"DNS 500ML 500ML",form:"other",dose:"500ML",search:"DNS 500ML 500ML"},{raw:"DOLO 650MG TAB 15'S 1*15T",brand:"DOLO 650MG TAB 15'S",form:"tablet",dose:"650MG",search:"DOLO 650MG TAB 15'S"},{raw:"DRAINABLE POUCH",brand:"DRAINABLE POUCH",form:"other",dose:"",search:"DRAINABLE POUCH"},{raw:"DUOLIN RESPULES 2.5 ML 1*2.5ML",brand:"DUOLIN RESPULES 2.5 ML 1*2.5ML",form:"other",dose:"2.5 ML",search:"DUOLIN RESPULES 2 5 ML 1*2 5ML"},{raw:"DYTOR 10 TAB 1*15",brand:"DYTOR 10 TAB",form:"tablet",dose:"",search:"DYTOR 10 TAB"},{raw:"DYTOR 40MG TAB 1*10T",brand:"DYTOR 40MG TAB",form:"tablet",dose:"40MG",search:"DYTOR 40MG TAB"},{raw:"DYTOR 5 TAB 1 X 15",brand:"DYTOR 5 TAB",form:"tablet",dose:"",search:"DYTOR 5 TAB"},{raw:"DYTOR PLUS 10 TAB",brand:"DYTOR PLUS 10 TAB",form:"tablet",dose:"",search:"DYTOR PLUS 10 TAB"},{raw:"ECG ELECTRODES",brand:"ECG ELECTRODES",form:"other",dose:"",search:"ECG ELECTRODES"},{raw:"ECOSPRIN AV 75/40 TAB",brand:"ECOSPRIN AV 75/40 TAB",form:"tablet",dose:"",search:"ECOSPRIN AV 75/40 TAB"},{raw:"ELECTRA (CAUTERY PENCIL)",brand:"ELECTRA (CAUTERY PENCIL)",form:"other",dose:"",search:"ELECTRA (CAUTERY PENCIL)"},{raw:"ELECTRAL 21.8GM",brand:"ELECTRAL 21.8GM",form:"other",dose:"21.8GM",search:"ELECTRAL 21 8GM"},{raw:"ENDOTACHEAL TUDE CUF 6.5MM",brand:"ENDOTACHEAL TUDE CUF 6.5MM",form:"other",dose:"",search:"ENDOTACHEAL TUDE CUF 6 5MM"},{raw:"ENDOTRA 5.0MM",brand:"ENDOTRA 5.0MM",form:"other",dose:"",search:"ENDOTRA 5 0MM"},{raw:"ENDOTRA TUBE -2.0MM",brand:"ENDOTRA TUBE -2.0MM",form:"other",dose:"",search:"ENDOTRA TUBE  2 0MM"},{raw:"ENDOTRA TUBE 2.5MM",brand:"ENDOTRA TUBE 2.5MM",form:"other",dose:"",search:"ENDOTRA TUBE 2 5MM"},{raw:"ENDOTRA TUBE 3.0MM",brand:"ENDOTRA TUBE 3.0MM",form:"other",dose:"",search:"ENDOTRA TUBE 3 0MM"},{raw:"ENDOTRA TUBE 4.0MM",brand:"ENDOTRA TUBE 4.0MM",form:"other",dose:"",search:"ENDOTRA TUBE 4 0MM"},{raw:"ENDOTRA TUBE 4.5MM",brand:"ENDOTRA TUBE 4.5MM",form:"other",dose:"",search:"ENDOTRA TUBE 4 5MM"},{raw:"ENDOTRA TUBE 5.5MM",brand:"ENDOTRA TUBE 5.5MM",form:"other",dose:"",search:"ENDOTRA TUBE 5 5MM"},{raw:"ENDOTRA TUBE 6.0MM",brand:"ENDOTRA TUBE 6.0MM",form:"other",dose:"",search:"ENDOTRA TUBE 6 0MM"},{raw:"ENDOTRACHEAL TUBE CUF  7.0MM",brand:"ENDOTRACHEAL TUBE CUF  7.0MM",form:"other",dose:"",search:"ENDOTRACHEAL TUBE CUF  7 0MM"},{raw:"ENDOTRACHEAL TUBE CUF  8.0MM",brand:"ENDOTRACHEAL TUBE CUF  8.0MM",form:"other",dose:"",search:"ENDOTRACHEAL TUBE CUF  8 0MM"},{raw:"ENDOTRACHEAL TUBE CUF  8.5MM",brand:"ENDOTRACHEAL TUBE CUF  8.5MM",form:"other",dose:"",search:"ENDOTRACHEAL TUBE CUF  8 5MM"},{raw:"ENDOTRACHEAL TUBE CUF 6.5MM",brand:"ENDOTRACHEAL TUBE CUF 6.5MM",form:"other",dose:"",search:"ENDOTRACHEAL TUBE CUF 6 5MM"},{raw:"ENDOTRACHEAL TUBE CUF 7.5MM",brand:"ENDOTRACHEAL TUBE CUF 7.5MM",form:"other",dose:"",search:"ENDOTRACHEAL TUBE CUF 7 5MM"},{raw:"ENDOTRACHEAL TUBE CUF 8.0MM",brand:"ENDOTRACHEAL TUBE CUF 8.0MM",form:"other",dose:"",search:"ENDOTRACHEAL TUBE CUF 8 0MM"},{raw:"ENEMA SOD. PHOSPHATE",brand:"ENEMA SOD. PHOSPHATE",form:"other",dose:"",search:"ENEMA SOD  PHOSPHATE"},{raw:"ENSURE DIABETIC VANILA 375GM",brand:"ENSURE DIABETIC VANILA 375GM",form:"other",dose:"375GM",search:"ENSURE DIABETIC VANILA 375GM"},{raw:"EPI KIT SFT NG-18",brand:"EPI KIT SFT NG-18",form:"other",dose:"",search:"EPI KIT SFT NG 18"},{raw:"ERLY PEN NEW",brand:"ERLY PEN NEW",form:"other",dose:"",search:"ERLY PEN NEW"},{raw:"ESTOGEL CREAM",brand:"ESTOGEL CREAM",form:"cream",dose:"",search:"ESTOGEL CREAM"},{raw:"EVERTEEN SANITARY PAD XL6",brand:"EVERTEEN SANITARY PAD XL6",form:"other",dose:"",search:"EVERTEEN SANITARY PAD XL6"},{raw:"EXAMINATION GLOVES LATEX S/M/L 1*100",brand:"EXAMINATION GLOVES LATEX S/M/L",form:"other",dose:"",search:"EXAMINATION GLOVES LATEX S/M/L"},{raw:"EXTEENA TRIO",brand:"EXTEENA TRIO",form:"other",dose:"",search:"EXTEENA TRIO"},{raw:"FEEDING BAG",brand:"FEEDING BAG",form:"other",dose:"",search:"FEEDING BAG"},{raw:"FEEDY FG 5",brand:"FEEDY FG 5",form:"other",dose:"",search:"FEEDY FG 5"},{raw:"FEEDY FG-06",brand:"FEEDY FG-06",form:"other",dose:"",search:"FEEDY FG 06"},{raw:"FEEDY FG-7",brand:"FEEDY FG-7",form:"other",dose:"",search:"FEEDY FG 7"},{raw:"FIASP PENPILL 100U/ML",brand:"FIASP PENPILL 100U/ML",form:"other",dose:"",search:"FIASP PENPILL 100U/ML"},{raw:"5X3ML",brand:"5X3ML",form:"other",dose:"3ML",search:"5X3ML"},{raw:"FLEXI MASK ADULT -2MTR",brand:"FLEXI MASK ADULT -2MTR",form:"other",dose:"",search:"FLEXI MASK ADULT  2MTR"},{raw:"FLEXI MASK-CHILD",brand:"FLEXI MASK-CHILD",form:"other",dose:"",search:"FLEXI MASK CHILD"},{raw:"FLEXO CATH FG-28",brand:"FLEXO CATH FG-28",form:"other",dose:"",search:"FLEXO CATH FG 28"},{raw:"FOLDING WALKER",brand:"FOLDING WALKER",form:"other",dose:"",search:"FOLDING WALKER"},{raw:"FOLEY CATH -18",brand:"FOLEY CATH -18",form:"other",dose:"",search:"FOLEY CATH  18"},{raw:"FOLEY TRAC 14NO 14",brand:"FOLEY TRAC 14NO 14",form:"other",dose:"",search:"FOLEY TRAC 14NO 14"},{raw:"FOLEY TRAC 16NO 1*1",brand:"FOLEY TRAC 16NO",form:"other",dose:"",search:"FOLEY TRAC 16NO"},{raw:"FORACORT 0.5 RESPULES",brand:"FORACORT 0.5 RESPULES",form:"other",dose:"",search:"FORACORT 0 5 RESPULES"},{raw:"FORACORT 200 SYNCOBREATHE",brand:"FORACORT 200 SYNCOBREATHE",form:"other",dose:"",search:"FORACORT 200 SYNCOBREATHE"},{raw:"FRESHCO ACTIVE 100ML",brand:"FRESHCO ACTIVE 100ML",form:"other",dose:"100ML",search:"FRESHCO ACTIVE 100ML"},{raw:"FRESUBIN ONCO 400GM",brand:"FRESUBIN ONCO 400GM",form:"other",dose:"400GM",search:"FRESUBIN ONCO 400GM"},{raw:"FULL FACE MASK NON VENTED",brand:"FULL FACE MASK NON VENTED",form:"other",dose:"",search:"FULL FACE MASK NON VENTED"},{raw:"GABAFIX GEL 30GM",brand:"GABAFIX GEL 30GM",form:"gel",dose:"30GM",search:"GABAFIX GEL 30GM"},{raw:"GAUZE SWAB 7.5CMX7.5CM 1PLY 1 X 20",brand:"GAUZE SWAB 7.5CMX7.5CM 1PLY",form:"other",dose:"",search:"GAUZE SWAB 7 5CMX7 5CM 1PLY"},{raw:"GAUZE SWAB STERILE 10X10",brand:"GAUZE SWAB STERILE",form:"other",dose:"",search:"GAUZE SWAB STERILE"},{raw:"GAUZE SWAB STERILE 5'",brand:"GAUZE SWAB STERILE 5'",form:"other",dose:"",search:"GAUZE SWAB STERILE 5'"},{raw:"GAUZE SWAB X -RAY 30*30*8",brand:"GAUZE SWAB X -RAY 30*30*8",form:"other",dose:"",search:"GAUZE SWAB X  RAY 30*30*8"},{raw:"GAUZE SWAB X-RAY N .S 30*30*8",brand:"GAUZE SWAB X-RAY N .S 30*30*8",form:"other",dose:"",search:"GAUZE SWAB X RAY N  S 30*30*8"},{raw:"GLYCERIN 50GM NICE",brand:"GLYCERIN 50GM NICE",form:"other",dose:"50GM",search:"GLYCERIN 50GM NICE"},{raw:"GLYCOHALE RESPULES",brand:"GLYCOHALE RESPULES",form:"other",dose:"",search:"GLYCOHALE RESPULES"},{raw:"GSI GENTLE STEP INSOLE 37",brand:"GSI GENTLE STEP INSOLE 37",form:"other",dose:"",search:"GSI GENTLE STEP INSOLE 37"},{raw:"GSI GENTLE STEP INSOLE 38",brand:"GSI GENTLE STEP INSOLE 38",form:"other",dose:"",search:"GSI GENTLE STEP INSOLE 38"},{raw:"GSI GENTLE STEP INSOLE 43",brand:"GSI GENTLE STEP INSOLE 43",form:"other",dose:"",search:"GSI GENTLE STEP INSOLE 43"},{raw:"GSI GENTLE STEP INSOLE 45",brand:"GSI GENTLE STEP INSOLE 45",form:"other",dose:"",search:"GSI GENTLE STEP INSOLE 45"},{raw:"GTN SORBITRATE CR 2.6MG TAB",brand:"GTN SORBITRATE CR 2.6MG TAB",form:"tablet",dose:"2.6MG",search:"GTN SORBITRATE CR 2 6MG TAB"},{raw:"GTT-75 PLUS SACHET",brand:"GTT-75 PLUS SACHET",form:"powder",dose:"",search:"GTT 75 PLUS SACHET"},{raw:"GUEDEL AIRWAY -2",brand:"GUEDEL AIRWAY -2",form:"other",dose:"",search:"GUEDEL AIRWAY  2"},{raw:"GUEDEL AIRWAY -3",brand:"GUEDEL AIRWAY -3",form:"other",dose:"",search:"GUEDEL AIRWAY  3"},{raw:"GUEDEL AIRWAY 1",brand:"GUEDEL AIRWAY 1",form:"other",dose:"",search:"GUEDEL AIRWAY 1"},{raw:"HEPAMERZ GRANULES 5GM",brand:"HEPAMERZ GRANULES 5GM",form:"other",dose:"5GM",search:"HEPAMERZ GRANULES 5GM"},{raw:"HI MASK ADULT",brand:"HI MASK ADULT",form:"other",dose:"",search:"HI MASK ADULT"},{raw:"HIP U DRAPE 2 SBL",brand:"HIP U DRAPE 2 SBL",form:"other",dose:"",search:"HIP U DRAPE 2 SBL"},{raw:"HME FILTER",brand:"HME FILTER",form:"other",dose:"",search:"HME FILTER"},{raw:"HUMALOG CART(LISPRO)-N",brand:"HUMALOG CART(LISPRO)-N",form:"other",dose:"",search:"HUMALOG CART(LISPRO) N"},{raw:"HUMALOG JUNIOR KWIK PEN",brand:"HUMALOG JUNIOR KWIK PEN",form:"other",dose:"",search:"HUMALOG JUNIOR KWIK PEN"},{raw:"HUMALOG KWIKPEN 200IU/ML",brand:"HUMALOG KWIKPEN 200IU/ML",form:"other",dose:"200IU",search:"HUMALOG KWIKPEN 200IU/ML"},{raw:"HUMALOG MIX 50 CART",brand:"HUMALOG MIX 50 CART",form:"other",dose:"",search:"HUMALOG MIX 50 CART"},{raw:"HUMAN MIXTARD HM 50PENFIL",brand:"HUMAN MIXTARD HM 50PENFIL",form:"other",dose:"",search:"HUMAN MIXTARD HM 50PENFIL"},{raw:"HUMAPEN ERGO 2",brand:"HUMAPEN ERGO 2",form:"other",dose:"",search:"HUMAPEN ERGO 2"},{raw:"HUMINSULIN  30/70 CARTG",brand:"HUMINSULIN  30/70 CARTG",form:"other",dose:"",search:"HUMINSULIN  30/70 CARTG"},{raw:"HYPERNEB 3% RESPULES",brand:"HYPERNEB 3% RESPULES",form:"other",dose:"3%",search:"HYPERNEB 3% RESPULES"},{raw:"INFLUVAC TETRA 0.5ML",brand:"INFLUVAC TETRA 0.5ML",form:"other",dose:"0.5ML",search:"INFLUVAC TETRA 0 5ML"},{raw:"INJ ACILOC 2ML",brand:"ACILOC 2ML",form:"injection",dose:"2ML",search:"ACILOC 2ML"},{raw:"INJ ADNEON 6MG",brand:"ADNEON 6MG",form:"injection",dose:"6MG",search:"ADNEON 6MG"},{raw:"INJ ADRALINE",brand:"ADRALINE",form:"injection",dose:"",search:"ADRALINE"},{raw:"INJ AGOTRIG 0.1",brand:"AGOTRIG 0.1",form:"injection",dose:"",search:"AGOTRIG 0 1"},{raw:"INJ AKTIV-D",brand:"AKTIV-D",form:"injection",dose:"",search:"AKTIV D"},{raw:"INJ AMBISTRYN -S GM",brand:"AMBISTRYN -S GM",form:"injection",dose:"",search:"AMBISTRYN  S GM"},{raw:"INJ AMIBIOTIC 2ML(AMIKACIN)",brand:"AMIBIOTIC 2ML(AMIKACIN)",form:"injection",dose:"2ML",search:"AMIBIOTIC 2ML(AMIKACIN)"},{raw:"INJ AMIODON 3ML",brand:"AMIODON 3ML",form:"injection",dose:"3ML",search:"AMIODON 3ML"},{raw:"INJ AMOXYLLIN CV 1.2GM",brand:"AMOXYLLIN CV 1.2GM",form:"injection",dose:"1.2GM",search:"AMOXYLLIN CV 1 2GM"},{raw:"INJ ANAWIN 0.5% 20ML",brand:"ANAWIN 0.5% 20ML",form:"injection",dose:"0.5%",search:"ANAWIN 0 5% 20ML"},{raw:"INJ ANAWIN HEAVY",brand:"ANAWIN HEAVY",form:"injection",dose:"",search:"ANAWIN HEAVY"},{raw:"INJ ARTACIL 2.5ML",brand:"ARTACIL 2.5ML",form:"injection",dose:"2.5ML",search:"ARTACIL 2 5ML"},{raw:"INJ ARTACIL 25MG",brand:"ARTACIL 25MG",form:"injection",dose:"25MG",search:"ARTACIL 25MG"},{raw:"INJ AVIL 2ML",brand:"AVIL 2ML",form:"injection",dose:"2ML",search:"AVIL 2ML"},{raw:"INJ BETT(T.T)",brand:"BETT(T.T)",form:"injection",dose:"",search:"BETT(T T)"},{raw:"INJ BUSCOGAST",brand:"BUSCOGAST",form:"injection",dose:"",search:"BUSCOGAST"},{raw:"INJ BUTADOL 1",brand:"BUTADOL 1",form:"injection",dose:"",search:"BUTADOL 1"},{raw:"INJ CAPRIN 25000",brand:"CAPRIN 25000",form:"injection",dose:"",search:"CAPRIN 25000"},{raw:"INJ CASFUNG 50MG",brand:"CASFUNG 50MG",form:"injection",dose:"50MG",search:"CASFUNG 50MG"},{raw:"INJ CEEFIX",brand:"CEEFIX",form:"injection",dose:"",search:"CEEFIX"},{raw:"INJ CEPROZONE S 1.5GM",brand:"CEPROZONE S 1.5GM",form:"injection",dose:"1.5GM",search:"CEPROZONE S 1 5GM"},{raw:"INJ CLARGER",brand:"CLARGER",form:"injection",dose:"",search:"CLARGER"},{raw:"INJ CLONEON 150MG",brand:"CLONEON 150MG",form:"injection",dose:"150MG",search:"CLONEON 150MG"},{raw:"INJ DERIPHYLLIN 2ML",brand:"DERIPHYLLIN 2ML",form:"injection",dose:"2ML",search:"DERIPHYLLIN 2ML"},{raw:"INJ DEXA 8MG",brand:"DEXA 8MG",form:"injection",dose:"8MG",search:"DEXA 8MG"},{raw:"INJ DEXEM 2ML",brand:"DEXEM 2ML",form:"injection",dose:"2ML",search:"DEXEM 2ML"},{raw:"INJ DEXONA 2ML",brand:"DEXONA 2ML",form:"injection",dose:"2ML",search:"DEXONA 2ML"},{raw:"INJ DOMIN",brand:"DOMIN",form:"injection",dose:"",search:"DOMIN"},{raw:"INJ DOTAMIN 5ML",brand:"DOTAMIN 5ML",form:"injection",dose:"5ML",search:"DOTAMIN 5ML"},{raw:"INJ DPOETIN 40MCG",brand:"DPOETIN 40MCG",form:"injection",dose:"40MCG",search:"DPOETIN 40MCG"},{raw:"INJ DROTIN",brand:"DROTIN",form:"injection",dose:"",search:"DROTIN"},{raw:"INJ DYTOR 2ML",brand:"DYTOR 2ML",form:"injection",dose:"2ML",search:"DYTOR 2ML"},{raw:"INJ ENCORATE 100",brand:"ENCORATE 100",form:"injection",dose:"",search:"ENCORATE 100"},{raw:"INJ EPIDOSIN 1ML",brand:"EPIDOSIN 1ML",form:"injection",dose:"1ML",search:"EPIDOSIN 1ML"},{raw:"INJ EPSOLIN 2ML",brand:"EPSOLIN 2ML",form:"injection",dose:"2ML",search:"EPSOLIN 2ML"},{raw:"INJ EVATOCIN 1ML",brand:"EVATOCIN 1ML",form:"injection",dose:"1ML",search:"EVATOCIN 1ML"},{raw:"INJ FEPINK -1000",brand:"FEPINK -1000",form:"injection",dose:"",search:"FEPINK  1000"},{raw:"INJ FONDARED 2.5",brand:"FONDARED 2.5",form:"injection",dose:"",search:"FONDARED 2 5"},{raw:"INJ FRAGMIN 2500",brand:"FRAGMIN 2500",form:"injection",dose:"",search:"FRAGMIN 2500"},{raw:"INJ GENTICYN 80MG",brand:"GENTICYN 80MG",form:"injection",dose:"80MG",search:"GENTICYN 80MG"},{raw:"INJ GERPOLY B 500000",brand:"GERPOLY B 500000",form:"injection",dose:"",search:"GERPOLY B 500000"},{raw:"INJ GERTA 1 G",brand:"GERTA 1 G",form:"injection",dose:"",search:"GERTA 1 G"},{raw:"INJ GLIPTOZA",brand:"GLIPTOZA",form:"injection",dose:"",search:"GLIPTOZA"},{raw:"INJ GLOOT 600MG",brand:"GLOOT 600MG",form:"injection",dose:"600MG",search:"GLOOT 600MG"},{raw:"INJ GLUCI 10ML",brand:"GLUCI 10ML",form:"injection",dose:"10ML",search:"GLUCI 10ML"},{raw:"INJ GUDGESIC AQ",brand:"GUDGESIC AQ",form:"injection",dose:"",search:"GUDGESIC AQ"},{raw:"INJ HEPARIN 25000",brand:"HEPARIN 25000",form:"injection",dose:"",search:"HEPARIN 25000"},{raw:"INJ HUCOG HP 2000",brand:"HUCOG HP 2000",form:"injection",dose:"",search:"HUCOG HP 2000"},{raw:"INJ HYDROCORTONE 100MG",brand:"HYDROCORTONE 100MG",form:"injection",dose:"100MG",search:"HYDROCORTONE 100MG"},{raw:"INJ HYTASONE PFS",brand:"HYTASONE PFS",form:"injection",dose:"",search:"HYTASONE PFS"},{raw:"INJ INCLAN(CLINDAMYCIN)",brand:"INCLAN(CLINDAMYCIN)",form:"injection",dose:"",search:"INCLAN(CLINDAMYCIN)"},{raw:"INJ INJEK-10",brand:"INJEK-10",form:"injection",dose:"",search:"INJEK 10"},{raw:"INJ JUSTIN AQ",brand:"JUSTIN AQ",form:"injection",dose:"",search:"JUSTIN AQ"},{raw:"INJ KENACORT HEXA 20MG",brand:"KENACORT HEXA 20MG",form:"injection",dose:"20MG",search:"KENACORT HEXA 20MG"},{raw:"INJ KENADION 10MG",brand:"KENADION 10MG",form:"injection",dose:"10MG",search:"KENADION 10MG"},{raw:"INJ KETANOV 1ML",brand:"KETANOV 1ML",form:"injection",dose:"1ML",search:"KETANOV 1ML"},{raw:"INJ LABEBLOC 20MG",brand:"LABEBLOC 20MG",form:"injection",dose:"20MG",search:"LABEBLOC 20MG"},{raw:"INJ LABITEZ",brand:"LABITEZ",form:"injection",dose:"",search:"LABITEZ"},{raw:"INJ LASIX 4ML",brand:"LASIX 4ML",form:"injection",dose:"4ML",search:"LASIX 4ML"},{raw:"INJ LESURIDE 2ML",brand:"LESURIDE 2ML",form:"injection",dose:"2ML",search:"LESURIDE 2ML"},{raw:"INJ LEVETRANOL 5ML",brand:"LEVETRANOL 5ML",form:"injection",dose:"5ML",search:"LEVETRANOL 5ML"},{raw:"INJ LEVOFLOXACIN IV",brand:"LEVOFLOXACIN IV",form:"injection",dose:"",search:"LEVOFLOXACIN IV"},{raw:"INJ LMWX 40MG",brand:"LMWX 40MG",form:"injection",dose:"40MG",search:"LMWX 40MG"},{raw:"INJ LMWX 60MG",brand:"LMWX 60MG",form:"injection",dose:"60MG",search:"LMWX 60MG"},{raw:"INJ LOPEZ 2ML",brand:"LOPEZ 2ML",form:"injection",dose:"2ML",search:"LOPEZ 2ML"},{raw:"INJ LOX 2%",brand:"LOX 2%",form:"injection",dose:"2%",search:"LOX 2%"},{raw:"INJ LOXICARD 2%(LIGNOCAINE)",brand:"LOXICARD 2%(LIGNOCAINE)",form:"injection",dose:"2%",search:"LOXICARD 2%(LIGNOCAINE)"},{raw:"INJ MAGNECURE",brand:"MAGNECURE",form:"injection",dose:"",search:"MAGNECURE"},{raw:"INJ MAGNEON 2ML",brand:"MAGNEON 2ML",form:"injection",dose:"2ML",search:"MAGNEON 2ML"},{raw:"INJ MEROZA 1GM",brand:"MEROZA 1GM",form:"injection",dose:"1GM",search:"MEROZA 1GM"},{raw:"INJ MEROZA 500MG",brand:"MEROZA 500MG",form:"injection",dose:"500MG",search:"MEROZA 500MG"},{raw:"INJ MEROZA XP",brand:"MEROZA XP",form:"injection",dose:"",search:"MEROZA XP"},{raw:"INJ METOPAL 5ML",brand:"METOPAL 5ML",form:"injection",dose:"5ML",search:"METOPAL 5ML"},{raw:"INJ MEZOLAM 5ML",brand:"MEZOLAM 5ML",form:"injection",dose:"5ML",search:"MEZOLAM 5ML"},{raw:"INJ MINOGRIN 100 MG",brand:"MINOGRIN 100 MG",form:"injection",dose:"100 MG",search:"MINOGRIN 100 MG"},{raw:"INJ MOUNJARO  KWIKPEN 15MG",brand:"MOUNJARO  KWIKPEN 15MG",form:"injection",dose:"15MG",search:"MOUNJARO  KWIKPEN 15MG"},{raw:"INJ MOUNJARO  VIAL 5/0.5",brand:"MOUNJARO  VIAL 5/0.5",form:"injection",dose:"",search:"MOUNJARO  VIAL 5/0 5"},{raw:"INJ MOUNJARO KWIKPEN 10MG",brand:"MOUNJARO KWIKPEN 10MG",form:"injection",dose:"10MG",search:"MOUNJARO KWIKPEN 10MG"},{raw:"INJ MUCINAC 2ML",brand:"MUCINAC 2ML",form:"injection",dose:"2ML",search:"MUCINAC 2ML"},{raw:"INJ MVI",brand:"MVI",form:"injection",dose:"",search:"MVI"},{raw:"INJ NEFCM 1K",brand:"NEFCM 1K",form:"injection",dose:"",search:"NEFCM 1K"},{raw:"INJ NEFCM 500MG",brand:"NEFCM 500MG",form:"injection",dose:"500MG",search:"NEFCM 500MG"},{raw:"INJ NEOROF 10MG/ML",brand:"NEOROF 10MG/ML",form:"injection",dose:"10MG",search:"NEOROF 10MG/ML"},{raw:"INJ NEOROF 20ML",brand:"NEOROF 20ML",form:"injection",dose:"20ML",search:"NEOROF 20ML"},{raw:"INJ NEOTAGMINE P 5ML",brand:"NEOTAGMINE P 5ML",form:"injection",dose:"5ML",search:"NEOTAGMINE P 5ML"},{raw:"INJ NEOVAC 10MG",brand:"NEOVAC 10MG",form:"injection",dose:"10MG",search:"NEOVAC 10MG"},{raw:"INJ NERVUP 1ML",brand:"NERVUP 1ML",form:"injection",dose:"1ML",search:"NERVUP 1ML"},{raw:"INJ NEUKINE 300MCG",brand:"NEUKINE 300MCG",form:"injection",dose:"300MCG",search:"NEUKINE 300MCG"},{raw:"INJ NEUROBION FORTE",brand:"NEUROBION FORTE",form:"injection",dose:"",search:"NEUROBION FORTE"},{raw:"INJ NEXTCLAV 1.2",brand:"NEXTCLAV 1.2",form:"injection",dose:"",search:"NEXTCLAV 1 2"},{raw:"INJ NITROCIN 5ML",brand:"NITROCIN 5ML",form:"injection",dose:"5ML",search:"NITROCIN 5ML"},{raw:"INJ NITROPLUS 5ML",brand:"NITROPLUS 5ML",form:"injection",dose:"5ML",search:"NITROPLUS 5ML"},{raw:"INJ NORAD 2ML",brand:"NORAD 2ML",form:"injection",dose:"2ML",search:"NORAD 2ML"},{raw:"INJ OFLOTAS",brand:"OFLOTAS",form:"injection",dose:"",search:"OFLOTAS"},{raw:"INJ OFLOX",brand:"OFLOX",form:"injection",dose:"",search:"OFLOX"},{raw:"INJ OLIMAB 60MG",brand:"OLIMAB 60MG",form:"injection",dose:"60MG",search:"OLIMAB 60MG"},{raw:"INJ ONDET",brand:"ONDET",form:"injection",dose:"",search:"ONDET"},{raw:"INJ PANTOTAS",brand:"PANTOTAS",form:"injection",dose:"",search:"PANTOTAS"},{raw:"INJ PARACAD",brand:"PARACAD",form:"injection",dose:"",search:"PARACAD"},{raw:"INJ PCM 100ML(INTAS)",brand:"PCM 100ML(INTAS)",form:"injection",dose:"100ML",search:"PCM 100ML(INTAS)"},{raw:"INJ PERINORM",brand:"PERINORM",form:"injection",dose:"",search:"PERINORM"},{raw:"INJ POTCL",brand:"POTCL",form:"injection",dose:"",search:"POTCL"},{raw:"INJ POTCL",brand:"POTCL",form:"injection",dose:"",search:"POTCL"},{raw:"INJ PREDA MET 40MG",brand:"PREDA MET 40MG",form:"injection",dose:"40MG",search:"PREDA MET 40MG"},{raw:"INJ PREDA MET 500MG",brand:"PREDA MET 500MG",form:"injection",dose:"500MG",search:"PREDA MET 500MG"},{raw:"INJ PREDAMET 1GM",brand:"PREDAMET 1GM",form:"injection",dose:"1GM",search:"PREDAMET 1GM"},{raw:"INJ PYROLATE",brand:"PYROLATE",form:"injection",dose:"",search:"PYROLATE"},{raw:"INJ Q-DULA 100MG",brand:"Q-DULA 100MG",form:"injection",dose:"100MG",search:"Q DULA 100MG"},{raw:"INJ QVASP 1ML",brand:"QVASP 1ML",form:"injection",dose:"1ML",search:"QVASP 1ML"},{raw:"INJ REMERGIN 1 M",brand:"REMERGIN 1 M",form:"injection",dose:"",search:"REMERGIN 1 M"},{raw:"INJ REMERGIN 4.5",brand:"REMERGIN 4.5",form:"injection",dose:"",search:"REMERGIN 4 5"},{raw:"INJ RENOCEL 10000",brand:"RENOCEL 10000",form:"injection",dose:"",search:"RENOCEL 10000"},{raw:"INJ RIXTAM EDTA 1.125",brand:"RIXTAM EDTA 1.125",form:"injection",dose:"",search:"RIXTAM EDTA 1 125"},{raw:"INJ ROKFOS 100ML",brand:"ROKFOS 100ML",form:"injection",dose:"100ML",search:"ROKFOS 100ML"},{raw:"INJ SODAC 25ML",brand:"SODAC 25ML",form:"injection",dose:"25ML",search:"SODAC 25ML"},{raw:"INJ STEMETIL 1ML",brand:"STEMETIL 1ML",form:"injection",dose:"1ML",search:"STEMETIL 1ML"},{raw:"INJ SUCOL 10ML",brand:"SUCOL 10ML",form:"injection",dose:"10ML",search:"SUCOL 10ML"},{raw:"INJ SUPACEF 1.5GM",brand:"SUPACEF 1.5GM",form:"injection",dose:"1.5GM",search:"SUPACEF 1 5GM"},{raw:"INJ SYNTROPAC 250MCG",brand:"SYNTROPAC 250MCG",form:"injection",dose:"250MCG",search:"SYNTROPAC 250MCG"},{raw:"INJ TAZACT 2.25GM",brand:"TAZACT 2.25GM",form:"injection",dose:"2.25GM",search:"TAZACT 2 25GM"},{raw:"INJ TAZACT 4.5GM",brand:"TAZACT 4.5GM",form:"injection",dose:"4.5GM",search:"TAZACT 4 5GM"},{raw:"INJ TERLIBLOC 1MG/10ML",brand:"TERLIBLOC 1MG/10ML",form:"injection",dose:"1MG",search:"TERLIBLOC 1MG/10ML"},{raw:"INJ TESTOVIRON 250MG-N",brand:"TESTOVIRON 250MG-N",form:"injection",dose:"250MG",search:"TESTOVIRON 250MG N"},{raw:"INJ TESTOVIRON DEPOT 100MG",brand:"TESTOVIRON DEPOT 100MG",form:"injection",dose:"100MG",search:"TESTOVIRON DEPOT 100MG"},{raw:"INJ THEMIDOL 2ML",brand:"THEMIDOL 2ML",form:"injection",dose:"2ML",search:"THEMIDOL 2ML"},{raw:"INJ TRAMAZAC 2ML",brand:"TRAMAZAC 2ML",form:"injection",dose:"2ML",search:"TRAMAZAC 2ML"},{raw:"INJ TRANEFIT",brand:"TRANEFIT",form:"injection",dose:"",search:"TRANEFIT"},{raw:"INJ TROPINE",brand:"TROPINE",form:"injection",dose:"",search:"TROPINE"},{raw:"INJ TROPINE",brand:"TROPINE",form:"injection",dose:"",search:"TROPINE"},{raw:"INJ TRUEPLAN 400MG",brand:"TRUEPLAN 400MG",form:"injection",dose:"400MG",search:"TRUEPLAN 400MG"},{raw:"INJ VANKING 1GM",brand:"VANKING 1GM",form:"injection",dose:"1GM",search:"VANKING 1GM"},{raw:"INJ VASOCON",brand:"VASOCON",form:"injection",dose:"",search:"VASOCON"},{raw:"INJ WEGOVY FLEX TOUCH 1MG",brand:"WEGOVY FLEX TOUCH 1MG",form:"injection",dose:"1MG",search:"WEGOVY FLEX TOUCH 1MG"},{raw:"INJ WEGOVY FLEX TOUCH 2.4MG",brand:"WEGOVY FLEX TOUCH 2.4MG",form:"injection",dose:"2.4MG",search:"WEGOVY FLEX TOUCH 2 4MG"},{raw:'INNOPORE CUTTER 1"',brand:'INNOPORE CUTTER 1"',form:"other",dose:"",search:'INNOPORE CUTTER 1"'},{raw:'INNOPORE CUTTER 3"',brand:'INNOPORE CUTTER 3"',form:"other",dose:"",search:'INNOPORE CUTTER 3"'},{raw:"INSTANT METER",brand:"INSTANT METER",form:"other",dose:"",search:"INSTANT METER"},{raw:"INSUGEN 30/70  REFIL",brand:"INSUGEN 30/70  REFIL",form:"other",dose:"",search:"INSUGEN 30/70  REFIL"},{raw:"INSUGEN 50/50",brand:"INSUGEN 50/50",form:"other",dose:"",search:"INSUGEN 50/50"},{raw:"INSUPEN PRO",brand:"INSUPEN PRO",form:"other",dose:"",search:"INSUPEN PRO"},{raw:"INTRA CATH 16 NO",brand:"INTRA CATH 16 NO",form:"other",dose:"",search:"INTRA CATH 16 NO"},{raw:"IOBAN 6640",brand:"IOBAN 6640",form:"other",dose:"",search:"IOBAN 6640"},{raw:"IOBAN 6650",brand:"IOBAN 6650",form:"other",dose:"",search:"IOBAN 6650"},{raw:"IPRAVENT RESPULES 2ML 1*2ML",brand:"IPRAVENT RESPULES 2ML",form:"other",dose:"2ML",search:"IPRAVENT RESPULES 2ML"},{raw:"ISOTROY 100ML",brand:"ISOTROY 100ML",form:"other",dose:"100ML",search:"ISOTROY 100ML"},{raw:"IV SET 1PACK",brand:"IV SET 1PACK",form:"other",dose:"",search:"IV SET 1PACK"},{raw:"K BIND SACHETS",brand:"K BIND SACHETS",form:"other",dose:"",search:"K BIND SACHETS"},{raw:"KLIK CLAMP",brand:"KLIK CLAMP",form:"other",dose:"",search:"KLIK CLAMP"},{raw:"KNEE DRAPE",brand:"KNEE DRAPE",form:"other",dose:"",search:"KNEE DRAPE"},{raw:"KNEE O DRAPE (160*250)SURGIWEAR",brand:"KNEE O DRAPE (160*250)SURGIWEAR",form:"other",dose:"",search:"KNEE O DRAPE (160*250)SURGIWEAR"},{raw:"KNEE O DRAPE(SURGIWEAR)",brand:"KNEE O DRAPE(SURGIWEAR)",form:"other",dose:"",search:"KNEE O DRAPE(SURGIWEAR)"},{raw:"LANCET",brand:"LANCET",form:"other",dose:"",search:"LANCET"},{raw:"LANTUS 100U SOLOSTAR",brand:"LANTUS 100U SOLOSTAR",form:"other",dose:"",search:"LANTUS 100U SOLOSTAR"},{raw:"LANTUS ALL STAR PEN",brand:"LANTUS ALL STAR PEN",form:"other",dose:"",search:"LANTUS ALL STAR PEN"},{raw:"LANTUS CARTRIDGES",brand:"LANTUS CARTRIDGES",form:"other",dose:"",search:"LANTUS CARTRIDGES"},{raw:"LARYNGEAL MASK 1.0(EXCEL)",brand:"LARYNGEAL MASK 1.0(EXCEL)",form:"other",dose:"",search:"LARYNGEAL MASK 1 0(EXCEL)"},{raw:"LARYNGEAL MASK 1.5(EXCEL)",brand:"LARYNGEAL MASK 1.5(EXCEL)",form:"other",dose:"",search:"LARYNGEAL MASK 1 5(EXCEL)"},{raw:"LARYNGEAL MASK 2.0(EXCEL)",brand:"LARYNGEAL MASK 2.0(EXCEL)",form:"other",dose:"",search:"LARYNGEAL MASK 2 0(EXCEL)"},{raw:"LARYNGEAL MASK 2.5(EXCEL)",brand:"LARYNGEAL MASK 2.5(EXCEL)",form:"other",dose:"",search:"LARYNGEAL MASK 2 5(EXCEL)"},{raw:"LARYNGEAL MASK 3.0(EXCEL)",brand:"LARYNGEAL MASK 3.0(EXCEL)",form:"other",dose:"",search:"LARYNGEAL MASK 3 0(EXCEL)"},{raw:"LARYNGEAL MASK 4.0(EXCEL)",brand:"LARYNGEAL MASK 4.0(EXCEL)",form:"other",dose:"",search:"LARYNGEAL MASK 4 0(EXCEL)"},{raw:"LARYNGEAL MASK 5.0(EXCEL)",brand:"LARYNGEAL MASK 5.0(EXCEL)",form:"other",dose:"",search:"LARYNGEAL MASK 5 0(EXCEL)"},{raw:"LEVOLIN 0.63 RESPULES (1*6)",brand:"LEVOLIN 0.63 RESPULES (1*6)",form:"other",dose:"",search:"LEVOLIN 0 63 RESPULES (1*6)"},{raw:"LIRAFIT INJ",brand:"LIRAFIT INJ",form:"injection",dose:"",search:"LIRAFIT INJ"},{raw:"LIZINTAS 300ML",brand:"LIZINTAS 300ML",form:"other",dose:"300ML",search:"LIZINTAS 300ML"},{raw:"LOBATE GM NEO",brand:"LOBATE GM NEO",form:"other",dose:"",search:"LOBATE GM NEO"},{raw:"LOX 2% JELLY 30GM 1*25GM",brand:"LOX 2% JELLY 30GM",form:"other",dose:"2%",search:"LOX 2% JELLY 30GM"},{raw:"LULIFIN CREAM 20GM",brand:"LULIFIN CREAM 20GM",form:"cream",dose:"20GM",search:"LULIFIN CREAM 20GM"},{raw:"MALE CATH MEDIUM",brand:"MALE CATH MEDIUM",form:"other",dose:"",search:"MALE CATH MEDIUM"},{raw:"MATTEY UNDERPADS(1X10)",brand:"MATTEY UNDERPADS(1X10)",form:"other",dose:"",search:"MATTEY UNDERPADS(1X10)"},{raw:"MAXMALA 50MG TAB",brand:"MAXMALA 50MG TAB",form:"tablet",dose:"50MG",search:"MAXMALA 50MG TAB"},{raw:"MEGAHEAL OINT 15GM",brand:"MEGAHEAL OINT 15GM",form:"ointment",dose:"15GM",search:"MEGAHEAL OINT 15GM"},{raw:"METOLAR XR 25MG CAP",brand:"METOLAR XR 25MG CAP",form:"capsule",dose:"25MG",search:"METOLAR XR 25MG CAP"},{raw:"METOLAR XR 50MG CAP",brand:"METOLAR XR 50MG CAP",form:"capsule",dose:"50MG",search:"METOLAR XR 50MG CAP"},{raw:"MINIPRESS  XL 5MGX30-B-10",brand:"MINIPRESS  XL 5MGX30-B-10",form:"other",dose:"5MG",search:"MINIPRESS  XL 5MGX30 B 10"},{raw:"MINIPRESS XL 2.5MG",brand:"MINIPRESS XL 2.5MG",form:"other",dose:"2.5MG",search:"MINIPRESS XL 2 5MG"},{raw:"MIXTARD 30 HM PENFILL",brand:"MIXTARD 30 HM PENFILL",form:"other",dose:"",search:"MIXTARD 30 HM PENFILL"},{raw:"MOIZ CREAM 50GM",brand:"MOIZ CREAM 50GM",form:"cream",dose:"50GM",search:"MOIZ CREAM 50GM"},{raw:"MOMATE CREAM 10GM",brand:"MOMATE CREAM 10GM",form:"cream",dose:"10GM",search:"MOMATE CREAM 10GM"},{raw:"MOUNT CATHETER",brand:"MOUNT CATHETER",form:"other",dose:"",search:"MOUNT CATHETER"},{raw:"MSSP-35 MIRU SKIN STAPLER",brand:"MSSP-35 MIRU SKIN STAPLER",form:"other",dose:"",search:"MSSP 35 MIRU SKIN STAPLER"},{raw:"MUCAINE GEL 350ML",brand:"MUCAINE GEL 350ML",form:"gel",dose:"350ML",search:"MUCAINE GEL 350ML"},{raw:"MUCUS EXTRACTOR",brand:"MUCUS EXTRACTOR",form:"other",dose:"",search:"MUCUS EXTRACTOR"},{raw:"MYLIFE AVEO TEST STRIPS",brand:"MYLIFE AVEO TEST STRIPS",form:"other",dose:"",search:"MYLIFE AVEO TEST STRIPS"},{raw:"NASOCLEAR 20ML",brand:"NASOCLEAR 20ML",form:"other",dose:"20ML",search:"NASOCLEAR 20ML"},{raw:"NEBZMART FB 0.5 MG SMARTULES 1 X 7",brand:"NEBZMART FB 0.5 MG SMARTULES",form:"other",dose:"0.5 MG",search:"NEBZMART FB 0 5 MG SMARTULES"},{raw:"NEBZMART GFB RESPULES",brand:"NEBZMART GFB RESPULES",form:"other",dose:"",search:"NEBZMART GFB RESPULES"},{raw:"NEL CATH FG 12",brand:"NEL CATH FG 12",form:"other",dose:"",search:"NEL CATH FG 12"},{raw:"NEL CATH FG 16",brand:"NEL CATH FG 16",form:"other",dose:"",search:"NEL CATH FG 16"},{raw:"NEL CATH FG14",brand:"NEL CATH FG14",form:"other",dose:"",search:"NEL CATH FG14"},{raw:"NEOFLON PRO 26GA.7MM",brand:"NEOFLON PRO 26GA.7MM",form:"other",dose:"",search:"NEOFLON PRO 26GA 7MM"},{raw:"NEOFLON PRO24GA .7MM",brand:"NEOFLON PRO24GA .7MM",form:"other",dose:"",search:"NEOFLON PRO24GA  7MM"},{raw:"NEOSPORIN EYE OINT 10GM",brand:"NEOSPORIN EYE OINT 10GM",form:"ointment",dose:"10GM",search:"NEOSPORIN EYE OINT 10GM"},{raw:"NEOSPORIN POWDER.10GM",brand:"NEOSPORIN POWDER.10GM",form:"powder",dose:"10GM",search:"NEOSPORIN POWDER 10GM"},{raw:"NEOSPORIN SKIN OINT 30GM 30GM",brand:"NEOSPORIN SKIN OINT 30GM 30GM",form:"ointment",dose:"30GM",search:"NEOSPORIN SKIN OINT 30GM 30GM"},{raw:"NOBEGLAR CARTRIDGE",brand:"NOBEGLAR CARTRIDGE",form:"other",dose:"",search:"NOBEGLAR CARTRIDGE"},{raw:"NODOSIS GST TAB",brand:"NODOSIS GST TAB",form:"tablet",dose:"",search:"NODOSIS GST TAB"},{raw:"NOVEFOS SACHET",brand:"NOVEFOS SACHET",form:"powder",dose:"",search:"NOVEFOS SACHET"},{raw:"NOVELON TAB",brand:"NOVELON TAB",form:"tablet",dose:"",search:"NOVELON TAB"},{raw:"NOVOPEN 4",brand:"NOVOPEN 4",form:"other",dose:"",search:"NOVOPEN 4"},{raw:"NOVORAPID FLEXPEN",brand:"NOVORAPID FLEXPEN",form:"other",dose:"",search:"NOVORAPID FLEXPEN"},{raw:"NOVORAPID PENFILL/5-N",brand:"NOVORAPID PENFILL/5-N",form:"other",dose:"",search:"NOVORAPID PENFILL/5 N"},{raw:"NS 0.3% 100ML",brand:"NS 0.3% 100ML",form:"other",dose:"0.3%",search:"NS 0 3% 100ML"},{raw:"NS 0.45 500ML",brand:"NS 0.45 500ML",form:"other",dose:"500ML",search:"NS 0 45 500ML"},{raw:"NS 0.9% 500ML",brand:"NS 0.9% 500ML",form:"other",dose:"0.9%",search:"NS 0 9% 500ML"},{raw:"NS 1 LTR",brand:"NS 1 LTR",form:"other",dose:"",search:"NS 1 LTR"},{raw:"NS 100ML INJ",brand:"NS 100ML INJ",form:"injection",dose:"100ML",search:"NS 100ML INJ"},{raw:"NS 3LTR",brand:"NS 3LTR",form:"other",dose:"",search:"NS 3LTR"},{raw:"ODIN NEB ONS 105",brand:"ODIN NEB ONS 105",form:"other",dose:"",search:"ODIN NEB ONS 105"},{raw:"OLICLINOMEL N4 1LTR",brand:"OLICLINOMEL N4 1LTR",form:"other",dose:"",search:"OLICLINOMEL N4 1LTR"},{raw:"OMNIGEL 30GM 30GM",brand:"OMNIGEL 30GM 30GM",form:"other",dose:"30GM",search:"OMNIGEL 30GM 30GM"},{raw:"ORAFAST GEL",brand:"ORAFAST GEL",form:"gel",dose:"",search:"ORAFAST GEL"},{raw:"ORS PROLYTE ORANGE P",brand:"ORS PROLYTE ORANGE P",form:"other",dose:"",search:"ORS PROLYTE ORANGE P"},{raw:"OXY SET ADULT",brand:"OXY SET ADULT",form:"other",dose:"",search:"OXY SET ADULT"},{raw:"OXYGEN MASK ADULT 1PACK",brand:"OXYGEN MASK ADULT 1PACK",form:"other",dose:"",search:"OXYGEN MASK ADULT 1PACK"},{raw:"P M O LINE(M TO F ) 200CM",brand:"P M O LINE(M TO F ) 200CM",form:"other",dose:"",search:"P M O LINE(M TO F ) 200CM"},{raw:"PARAFFIN GAUZE DRESSING",brand:"PARAFFIN GAUZE DRESSING",form:"other",dose:"",search:"PARAFFIN GAUZE DRESSING"},{raw:"PCM 100ML KAPLIFE",brand:"PCM 100ML KAPLIFE",form:"other",dose:"100ML",search:"PCM 100ML KAPLIFE"},{raw:"PEDIA DRIP PLUS",brand:"PEDIA DRIP PLUS",form:"other",dose:"",search:"PEDIA DRIP PLUS"},{raw:"PEGLEC  POWDER",brand:"PEGLEC  POWDER",form:"powder",dose:"",search:"PEGLEC  POWDER"},{raw:"PLASMALYTE A 500ML",brand:"PLASMALYTE A 500ML",form:"other",dose:"500ML",search:"PLASMALYTE A 500ML"},{raw:"PLETOZ 50 TAB 1*10T",brand:"PLETOZ 50 TAB",form:"tablet",dose:"",search:"PLETOZ 50 TAB"},{raw:"POLY DRAPE SHEET",brand:"POLY DRAPE SHEET",form:"other",dose:"",search:"POLY DRAPE SHEET"},{raw:"POLYVOL BURETTE SET 110ML",brand:"POLYVOL BURETTE SET 110ML",form:"other",dose:"110ML",search:"POLYVOL BURETTE SET 110ML"},{raw:"POUCH ARM S.TROP  (M)",brand:"POUCH ARM S.TROP  (M)",form:"other",dose:"",search:"POUCH ARM S TROP  (M)"},{raw:"POWER DROOL T PIECE",brand:"POWER DROOL T PIECE",form:"other",dose:"",search:"POWER DROOL T PIECE"},{raw:"PREDMET 4MG TAB",brand:"PREDMET 4MG TAB",form:"tablet",dose:"4MG",search:"PREDMET 4MG TAB"},{raw:"PREDMET 8MG TAB",brand:"PREDMET 8MG TAB",form:"tablet",dose:"8MG",search:"PREDMET 8MG TAB"},{raw:"PREGEB 75MG TAB 1*10",brand:"PREGEB 75MG TAB",form:"tablet",dose:"75MG",search:"PREGEB 75MG TAB"},{raw:"PRIMAPORE  20CM*10CM",brand:"PRIMAPORE  20CM*10CM",form:"other",dose:"",search:"PRIMAPORE  20CM*10CM"},{raw:"PRIMAPORE  8.3CM*6CM",brand:"PRIMAPORE  8.3CM*6CM",form:"other",dose:"",search:"PRIMAPORE  8 3CM*6CM"},{raw:"PRIMAPORE 15CM*8CM",brand:"PRIMAPORE 15CM*8CM",form:"other",dose:"",search:"PRIMAPORE 15CM*8CM"},{raw:"PRIMAPORE 25CM*10CM",brand:"PRIMAPORE 25CM*10CM",form:"other",dose:"",search:"PRIMAPORE 25CM*10CM"},{raw:"PRIMAPORE 30CM*10CM",brand:"PRIMAPORE 30CM*10CM",form:"other",dose:"",search:"PRIMAPORE 30CM*10CM"},{raw:"PRIMAPORE 35CM*10CM",brand:"PRIMAPORE 35CM*10CM",form:"other",dose:"",search:"PRIMAPORE 35CM*10CM"},{raw:"PRIMAPORE 6CM*8.3CM",brand:"PRIMAPORE 6CM*8.3CM",form:"other",dose:"",search:"PRIMAPORE 6CM*8 3CM"},{raw:"PROLENE MESH 15*15",brand:"PROLENE MESH",form:"other",dose:"",search:"PROLENE MESH"},{raw:"PROLENE MESH 7.6CM*15CM",brand:"PROLENE MESH 7.6CM*15CM",form:"other",dose:"",search:"PROLENE MESH 7 6CM*15CM"},{raw:"PROLYSE 15GM",brand:"PROLYSE 15GM",form:"other",dose:"15GM",search:"PROLYSE 15GM"},{raw:"PROTINEX DIABETES CARE 400GM",brand:"PROTINEX DIABETES CARE 400GM",form:"other",dose:"400GM",search:"PROTINEX DIABETES CARE 400GM"},{raw:"PROTOTAL WHEY VANILLA SACHETS",brand:"PROTOTAL WHEY VANILLA SACHETS",form:"other",dose:"",search:"PROTOTAL WHEY VANILLA SACHETS"},{raw:"PROZUCA VANILA FLV. 400GM",brand:"PROZUCA VANILA FLV. 400GM",form:"other",dose:"400GM",search:"PROZUCA VANILA FLV  400GM"},{raw:"PTQM1 PEG ASSIST MEN-S",brand:"PTQM1 PEG ASSIST MEN-S",form:"other",dose:"",search:"PTQM1 PEG ASSIST MEN S"},{raw:"REFRESH TEARS EYE DROP 10ML 1*10ML",brand:"REFRESH TEARS EYE DROP 10ML",form:"drops",dose:"10ML",search:"REFRESH TEARS EYE DROP 10ML"},{raw:"REGEN D 60MG 7.5GM",brand:"REGEN D 60MG 7.5GM",form:"other",dose:"60MG",search:"REGEN D 60MG 7 5GM"},{raw:"RESOURCE DIABETIC VANILLA 400G",brand:"RESOURCE DIABETIC VANILLA 400G",form:"other",dose:"",search:"RESOURCE DIABETIC VANILLA 400G"},{raw:"RESOURCE DIALYSIS 400GM",brand:"RESOURCE DIALYSIS 400GM",form:"other",dose:"400GM",search:"RESOURCE DIALYSIS 400GM"},{raw:"REVLAMER 400MG TAB",brand:"REVLAMER 400MG TAB",form:"tablet",dose:"400MG",search:"REVLAMER 400MG TAB"},{raw:"RL 500 ML",brand:"RL 500 ML",form:"other",dose:"500 ML",search:"RL 500 ML"},{raw:"ROMO ADK 24",brand:"ROMO ADK 24",form:"other",dose:"",search:"ROMO ADK 24"},{raw:"ROMO ADK 28",brand:"ROMO ADK 28",form:"other",dose:"",search:"ROMO ADK 28"},{raw:"ROMO DRAIN",brand:"ROMO DRAIN",form:"other",dose:"",search:"ROMO DRAIN"},{raw:"ROMO DRAIN",brand:"ROMO DRAIN",form:"other",dose:"",search:"ROMO DRAIN"},{raw:"ROMO VAC SET (FG-16)",brand:"ROMO VAC SET (FG-16)",form:"other",dose:"",search:"ROMO VAC SET (FG 16)"},{raw:"ROMO VAC SET(FG-12)",brand:"ROMO VAC SET(FG-12)",form:"other",dose:"",search:"ROMO VAC SET(FG 12)"},{raw:"ROMO VAC SET(FG-14)",brand:"ROMO VAC SET(FG-14)",form:"other",dose:"",search:"ROMO VAC SET(FG 14)"},{raw:"ROMOLENE FG 16",brand:"ROMOLENE FG 16",form:"other",dose:"",search:"ROMOLENE FG 16"},{raw:"ROSEDAY 10MG TAB/15S",brand:"ROSEDAY 10MG TAB/15S",form:"tablet",dose:"10MG",search:"ROSEDAY 10MG TAB/15S"},{raw:"ROSEDAY 20 TAB-N",brand:"ROSEDAY 20 TAB-N",form:"tablet",dose:"",search:"ROSEDAY 20 TAB N"},{raw:"ROSEDAY A 20MG CAP",brand:"ROSEDAY A 20MG CAP",form:"capsule",dose:"20MG",search:"ROSEDAY A 20MG CAP"},{raw:"ROSEDAY-F/10-N",brand:"ROSEDAY-F/10-N",form:"other",dose:"",search:"ROSEDAY F/10 N"},{raw:"RT041 MEDIUM",brand:"RT041 MEDIUM",form:"other",dose:"",search:"RT041 MEDIUM"},{raw:"RYBELSUS 3 MG TAB",brand:"RYBELSUS 3 MG TAB",form:"tablet",dose:"3 MG",search:"RYBELSUS 3 MG TAB"},{raw:"RYBELSUS 7 MG TAB",brand:"RYBELSUS 7 MG TAB",form:"tablet",dose:"7 MG",search:"RYBELSUS 7 MG TAB"},{raw:"RYBELSUS14 MG TAB",brand:"RYBELSUS14 MG TAB",form:"tablet",dose:"14 MG",search:"RYBELSUS14 MG TAB"},{raw:"RYBELSUS14 MG TAB",brand:"RYBELSUS14 MG TAB",form:"tablet",dose:"14 MG",search:"RYBELSUS14 MG TAB"},{raw:"RYLES TUBE FG16",brand:"RYLES TUBE FG16",form:"other",dose:"",search:"RYLES TUBE FG16"},{raw:"RYLES TUDE FG14",brand:"RYLES TUDE FG14",form:"other",dose:"",search:"RYLES TUDE FG14"},{raw:"RYLES TUDE FG14",brand:"RYLES TUDE FG14",form:"other",dose:"",search:"RYLES TUDE FG14"},{raw:"RYZODEG FLEXTOUCH PEN PEN",brand:"RYZODEG FLEXTOUCH PEN PEN",form:"other",dose:"",search:"RYZODEG FLEXTOUCH PEN PEN"},{raw:"RYZODEG PENFILL/5",brand:"RYZODEG PENFILL/5",form:"other",dose:"",search:"RYZODEG PENFILL/5"},{raw:"S 213 TRUSILK 2-0",brand:"S 213 TRUSILK 2-0",form:"other",dose:"",search:"S 213 TRUSILK 2 0"},{raw:"S 215",brand:"S 215",form:"other",dose:"",search:"S 215"},{raw:"SAMLOL INJ",brand:"SAMLOL INJ",form:"injection",dose:"",search:"SAMLOL INJ"},{raw:"SCALP VEIN SET NG-22",brand:"SCALP VEIN SET NG-22",form:"other",dose:"",search:"SCALP VEIN SET NG 22"},{raw:"SHOE COVER",brand:"SHOE COVER",form:"other",dose:"",search:"SHOE COVER"},{raw:"SILKO CATH FG12",brand:"SILKO CATH FG12",form:"other",dose:"",search:"SILKO CATH FG12"},{raw:"SILKO CATH FG14",brand:"SILKO CATH FG14",form:"other",dose:"",search:"SILKO CATH FG14"},{raw:"SILODAL 8 CAP-N",brand:"SILODAL 8 CAP-N",form:"capsule",dose:"",search:"SILODAL 8 CAP N"},{raw:"SILVEREX IONIC 20GM",brand:"SILVEREX IONIC 20GM",form:"other",dose:"20GM",search:"SILVEREX IONIC 20GM"},{raw:"SKIN TRACTION SET  PUFF",brand:"SKIN TRACTION SET  PUFF",form:"other",dose:"",search:"SKIN TRACTION SET  PUFF"},{raw:"SMART BODY ANALYSER MODEL SLINKY LITE (B)",brand:"SMART BODY ANALYSER MODEL SLINKY LITE (B)",form:"other",dose:"",search:"SMART BODY ANALYSER MODEL SLINKY LITE (B)"},{raw:"SN 1326 MONOGLYDE 3-0 PCT",brand:"SN 1326 MONOGLYDE 3-0 PCT",form:"other",dose:"",search:"SN 1326 MONOGLYDE 3 0 PCT"},{raw:"SN 3304",brand:"SN 3304",form:"other",dose:"",search:"SN 3304"},{raw:"SN 3328 SUTURE 3-0 70CM RC",brand:"SN 3328 SUTURE 3-0 70CM RC",form:"other",dose:"",search:"SN 3328 SUTURE 3 0 70CM RC"},{raw:"SN 3336 TRULON 2-0 RC",brand:"SN 3336 TRULON 2-0 RC",form:"other",dose:"",search:"SN 3336 TRULON 2 0 RC"},{raw:"SN 3338",brand:"SN 3338",form:"other",dose:"",search:"SN 3338"},{raw:"SN 3348 TRULON SUTURE RB",brand:"SN 3348 TRULON SUTURE RB",form:"other",dose:"",search:"SN 3348 TRULON SUTURE RB"},{raw:"SN 4241 TRUGUT 2-0 RB",brand:"SN 4241 TRUGUT 2-0 RB",form:"other",dose:"",search:"SN 4241 TRUGUT 2 0 RB"},{raw:"SN 4259 TRUGUT 1 RB",brand:"SN 4259 TRUGUT 1 RB",form:"other",dose:"",search:"SN 4259 TRUGUT 1 RB"},{raw:"SN 5028 TRUSILK RC 3-0",brand:"SN 5028 TRUSILK RC 3-0",form:"other",dose:"",search:"SN 5028 TRUSILK RC 3 0"},{raw:"SN 5062 TRUSILK",brand:"SN 5062 TRUSILK",form:"other",dose:"",search:"SN 5062 TRUSILK"},{raw:"SN 5333 TRUSILK 2-0 RB",brand:"SN 5333 TRUSILK 2-0 RB",form:"other",dose:"",search:"SN 5333 TRUSILK 2 0 RB"},{raw:"SN 5334 TRUSILK RB 76 CM",brand:"SN 5334 TRUSILK RB 76 CM",form:"other",dose:"",search:"SN 5334 TRUSILK RB 76 CM"},{raw:"SN 643 TRUBOND 2 TC HEAVY 1/2C",brand:"SN 643 TRUBOND 2 TC HEAVY 1/2C",form:"other",dose:"",search:"SN 643 TRUBOND 2 TC HEAVY 1/2C"},{raw:"SN 645 TRUBOND 5 TP HEAVY 1/2C",brand:"SN 645 TRUBOND 5 TP HEAVY 1/2C",form:"other",dose:"",search:"SN 645 TRUBOND 5 TP HEAVY 1/2C"},{raw:"SN 825",brand:"SN 825",form:"other",dose:"",search:"SN 825"},{raw:"SN 841 TRULENE 2-0 RB",brand:"SN 841 TRULENE 2-0 RB",form:"other",dose:"",search:"SN 841 TRULENE 2 0 RB"},{raw:"SN 842 TRULENE 0 RB",brand:"SN 842 TRULENE 0 RB",form:"other",dose:"",search:"SN 842 TRULENE 0 RB"},{raw:"SN 843 TRULENE 1 RBH",brand:"SN 843 TRULENE 1 RBH",form:"other",dose:"",search:"SN 843 TRULENE 1 RBH"},{raw:"SN 8726 ALLP/75 TRULENE",brand:"SN 8726 ALLP/75 TRULENE",form:"other",dose:"",search:"SN 8726 ALLP/75 TRULENE"},{raw:"SOFRABYE SKIN CREAM",brand:"SOFRABYE SKIN CREAM",form:"cream",dose:"",search:"SOFRABYE SKIN CREAM"},{raw:"SOFRAMYCIN SKIN CR 30GM",brand:"SOFRAMYCIN SKIN CR 30GM",form:"other",dose:"30GM",search:"SOFRAMYCIN SKIN CR 30GM"},{raw:"SPECLON (SAVLON)",brand:"SPECLON (SAVLON)",form:"other",dose:"",search:"SPECLON (SAVLON)"},{raw:"SPORLAC POWDER SACHET",brand:"SPORLAC POWDER SACHET",form:"powder",dose:"",search:"SPORLAC POWDER SACHET"},{raw:"SPUTUM CUP",brand:"SPUTUM CUP",form:"other",dose:"",search:"SPUTUM CUP"},{raw:"STERILE WATER 10ML",brand:"STERILE WATER 10ML",form:"other",dose:"10ML",search:"STERILE WATER 10ML"},{raw:"STERILE WATER 5 ML",brand:"STERILE WATER 5 ML",form:"other",dose:"5 ML",search:"STERILE WATER 5 ML"},{raw:"STYLET 4.0",brand:"STYLET 4.0",form:"other",dose:"",search:"STYLET 4 0"},{raw:"SUCTION CATHETER  FG-16",brand:"SUCTION CATHETER  FG-16",form:"other",dose:"",search:"SUCTION CATHETER  FG 16"},{raw:"SUCTION CATHETER FG-12",brand:"SUCTION CATHETER FG-12",form:"other",dose:"",search:"SUCTION CATHETER FG 12"},{raw:"SUCTION CATHETER FG-14",brand:"SUCTION CATHETER FG-14",form:"other",dose:"",search:"SUCTION CATHETER FG 14"},{raw:"SUCTION CATHETER FG-14",brand:"SUCTION CATHETER FG-14",form:"other",dose:"",search:"SUCTION CATHETER FG 14"},{raw:"SURGEON CAP",brand:"SURGEON CAP",form:"capsule",dose:"",search:"SURGEON CAP"},{raw:"SURGICAL BLADE NO.-10",brand:"SURGICAL BLADE NO.-10",form:"other",dose:"",search:"SURGICAL BLADE NO  10"},{raw:"SURGICAL BLADE NO.-11",brand:"SURGICAL BLADE NO.-11",form:"other",dose:"",search:"SURGICAL BLADE NO  11"},{raw:"SURGICAL GLOVES  6.5",brand:"SURGICAL GLOVES  6.5",form:"other",dose:"",search:"SURGICAL GLOVES  6 5"},{raw:"SURGICAL GLOVES 7.0",brand:"SURGICAL GLOVES 7.0",form:"other",dose:"",search:"SURGICAL GLOVES 7 0"},{raw:"SURGICAL GLOVES 7.5",brand:"SURGICAL GLOVES 7.5",form:"other",dose:"",search:"SURGICAL GLOVES 7 5"},{raw:"SURGICAL GLOVES 8.0",brand:"SURGICAL GLOVES 8.0",form:"other",dose:"",search:"SURGICAL GLOVES 8 0"},{raw:"SYRINE 5CC",brand:"SYRINE 5CC",form:"other",dose:"",search:"SYRINE 5CC"},{raw:"SYRINGE 10CC",brand:"SYRINGE 10CC",form:"other",dose:"",search:"SYRINGE 10CC"},{raw:"SYRINGE 20ML",brand:"SYRINGE 20ML",form:"other",dose:"20ML",search:"SYRINGE 20ML"},{raw:"SYRINGE 2CC",brand:"SYRINGE 2CC",form:"other",dose:"",search:"SYRINGE 2CC"},{raw:"SYRUP ALEX SF 100ML",brand:"SYRUP ALEX SF 100ML",form:"syrup",dose:"100ML",search:"SYRUP ALEX SF 100ML"},{raw:"SYRUP AMYRON",brand:"SYRUP AMYRON",form:"syrup",dose:"",search:"SYRUP AMYRON"},{raw:"SYRUP CHERICOFF 100ML",brand:"SYRUP CHERICOFF 100ML",form:"syrup",dose:"100ML",search:"SYRUP CHERICOFF 100ML"},{raw:"SYRUP DUPHALAC 250ML",brand:"SYRUP DUPHALAC 250ML",form:"syrup",dose:"250ML",search:"SYRUP DUPHALAC 250ML"},{raw:"SYRUP INSTARAFT 200 ML",brand:"SYRUP INSTARAFT 200 ML",form:"syrup",dose:"200 ML",search:"SYRUP INSTARAFT 200 ML"},{raw:"SYRUP INSTARAFT 200 ML MIXED BERRY FLV",brand:"SYRUP INSTARAFT 200 ML MIXED BERRY FLV",form:"syrup",dose:"200 ML",search:"SYRUP INSTARAFT 200 ML MIXED BERRY FLV"},{raw:"SYRUP JUFEX FORTE",brand:"SYRUP JUFEX FORTE",form:"syrup",dose:"",search:"SYRUP JUFEX FORTE"},{raw:"SYRUP LACTIHEP",brand:"SYRUP LACTIHEP",form:"syrup",dose:"",search:"SYRUP LACTIHEP"},{raw:"SYRUP LEVOLIN 100ML",brand:"SYRUP LEVOLIN 100ML",form:"syrup",dose:"100ML",search:"SYRUP LEVOLIN 100ML"},{raw:"SYRUP LOOZ 150ML",brand:"SYRUP LOOZ 150ML",form:"syrup",dose:"150ML",search:"SYRUP LOOZ 150ML"},{raw:"SYRUP LUPITUSS SF",brand:"SYRUP LUPITUSS SF",form:"syrup",dose:"",search:"SYRUP LUPITUSS SF"},{raw:"SYRUP MUCAINE GEL 200ML",brand:"SYRUP MUCAINE GEL 200ML",form:"syrup",dose:"200ML",search:"SYRUP MUCAINE GEL 200ML"},{raw:"SYRUP NEERI 200ML",brand:"SYRUP NEERI 200ML",form:"syrup",dose:"200ML",search:"SYRUP NEERI 200ML"},{raw:"SYRUP NEERI KFT",brand:"SYRUP NEERI KFT",form:"syrup",dose:"",search:"SYRUP NEERI KFT"},{raw:"SYRUP POTKLOR",brand:"SYRUP POTKLOR",form:"syrup",dose:"",search:"SYRUP POTKLOR"},{raw:"T-BACT CREAM 10GM",brand:"T-BACT CREAM 10GM",form:"cream",dose:"10GM",search:"T BACT CREAM 10GM"},{raw:"T-BACT OINT 15GM",brand:"T-BACT OINT 15GM",form:"ointment",dose:"15GM",search:"T BACT OINT 15GM"},{raw:"T-BACT OINT 5GM",brand:"T-BACT OINT 5GM",form:"ointment",dose:"5GM",search:"T BACT OINT 5GM"},{raw:"TAB ABIWAYS",brand:"ABIWAYS",form:"tablet",dose:"",search:"ABIWAYS"},{raw:"TAB ADDNA",brand:"ADDNA",form:"tablet",dose:"",search:"ADDNA"},{raw:"TAB AJADUO 25/5 MG",brand:"AJADUO 25/5 MG",form:"tablet",dose:"5 MG",search:"AJADUO 25/5 MG"},{raw:"TAB AJADUO M 25 FORTE",brand:"AJADUO M 25 FORTE",form:"tablet",dose:"",search:"AJADUO M 25 FORTE"},{raw:"TAB AKTIV-D",brand:"AKTIV-D",form:"tablet",dose:"",search:"AKTIV D"},{raw:"TAB ALDACTONE 100MG",brand:"ALDACTONE 100MG",form:"tablet",dose:"100MG",search:"ALDACTONE 100MG"},{raw:"TAB ALDACTONE 100MG",brand:"ALDACTONE 100MG",form:"tablet",dose:"100MG",search:"ALDACTONE 100MG"},{raw:"TAB ALDACTONE 50MG",brand:"ALDACTONE 50MG",form:"tablet",dose:"50MG",search:"ALDACTONE 50MG"},{raw:"TAB ALPRAX 0.25MG",brand:"ALPRAX 0.25MG",form:"tablet",dose:"0.25MG",search:"ALPRAX 0 25MG"},{raw:"TAB ALPRAX 0.5MG",brand:"ALPRAX 0.5MG",form:"tablet",dose:"0.5MG",search:"ALPRAX 0 5MG"},{raw:"TAB AMBULAX",brand:"AMBULAX",form:"tablet",dose:"",search:"AMBULAX"},{raw:"TAB AMBULAX-ET",brand:"AMBULAX-ET",form:"tablet",dose:"",search:"AMBULAX ET"},{raw:"TAB AMLONG 2.5",brand:"AMLONG 2.5",form:"tablet",dose:"",search:"AMLONG 2 5"},{raw:"TAB AMLONG 5MG",brand:"AMLONG 5MG",form:"tablet",dose:"5MG",search:"AMLONG 5MG"},{raw:"TAB ARBITEL TRIO 50MG",brand:"ARBITEL TRIO 50MG",form:"tablet",dose:"50MG",search:"ARBITEL TRIO 50MG"},{raw:"TAB ARKAMIN",brand:"ARKAMIN",form:"tablet",dose:"",search:"ARKAMIN"},{raw:"TAB ARNICOR 50MG",brand:"ARNICOR 50MG",form:"tablet",dose:"50MG",search:"ARNICOR 50MG"},{raw:"TAB ATCHOL F 10+160MG",brand:"ATCHOL F 10+160MG",form:"tablet",dose:"160MG",search:"ATCHOL F 10+160MG"},{raw:"TAB AZEE 500",brand:"AZEE 500",form:"tablet",dose:"",search:"AZEE 500"},{raw:"TAB BILAGRA 20MG",brand:"BILAGRA 20MG",form:"tablet",dose:"20MG",search:"BILAGRA 20MG"},{raw:"TAB BILAGRA M",brand:"BILAGRA M",form:"tablet",dose:"",search:"BILAGRA M"},{raw:"TAB BIO D3",brand:"BIO D3",form:"tablet",dose:"",search:"BIO D3"},{raw:"TAB BIOSIA 1000",brand:"BIOSIA 1000",form:"tablet",dose:"",search:"BIOSIA 1000"},{raw:"TAB BISOJOY 2.5",brand:"BISOJOY 2.5",form:"tablet",dose:"",search:"BISOJOY 2 5"},{raw:"TAB CALGYM 60K",brand:"CALGYM 60K",form:"tablet",dose:"",search:"CALGYM 60K"},{raw:"TAB CARCA 3.125MG",brand:"CARCA 3.125MG",form:"tablet",dose:"3.125MG",search:"CARCA 3 125MG"},{raw:"TAB CARLOC 6.25",brand:"CARLOC 6.25",form:"tablet",dose:"",search:"CARLOC 6 25"},{raw:"TAB CARVIDON MR",brand:"CARVIDON MR",form:"tablet",dose:"",search:"CARVIDON MR"},{raw:"TAB CEFTUM 500MG",brand:"CEFTUM 500MG",form:"tablet",dose:"500MG",search:"CEFTUM 500MG"},{raw:"TAB CETANIL M",brand:"CETANIL M",form:"tablet",dose:"",search:"CETANIL M"},{raw:"TAB CHYMORAL AP",brand:"CHYMORAL AP",form:"tablet",dose:"",search:"CHYMORAL AP"},{raw:"TAB CHYMORAL FORTE",brand:"CHYMORAL FORTE",form:"tablet",dose:"",search:"CHYMORAL FORTE"},{raw:"TAB CILACAR 10 MG",brand:"CILACAR 10 MG",form:"tablet",dose:"10 MG",search:"CILACAR 10 MG"},{raw:"TAB CILACAR C",brand:"CILACAR C",form:"tablet",dose:"",search:"CILACAR C"},{raw:"TAB CILACAR M 10/50",brand:"CILACAR M 10/50",form:"tablet",dose:"",search:"CILACAR M 10/50"},{raw:"TAB CILACAR TC 12.5",brand:"CILACAR TC 12.5",form:"tablet",dose:"",search:"CILACAR TC 12 5"},{raw:"TAB CILACAR TC 6.25MG",brand:"CILACAR TC 6.25MG",form:"tablet",dose:"6.25MG",search:"CILACAR TC 6 25MG"},{raw:"TAB CINTAPRO",brand:"CINTAPRO",form:"tablet",dose:"",search:"CINTAPRO"},{raw:"TAB CLARIBID 500 MG",brand:"CLARIBID 500 MG",form:"tablet",dose:"500 MG",search:"CLARIBID 500 MG"},{raw:"TAB CLARIBID OD 1GM",brand:"CLARIBID OD 1GM",form:"tablet",dose:"1GM",search:"CLARIBID OD 1GM"},{raw:"TAB CLOPITORVA 20",brand:"CLOPITORVA 20",form:"tablet",dose:"",search:"CLOPITORVA 20"},{raw:"TAB CO-SYMOXY 625",brand:"CO-SYMOXY 625",form:"tablet",dose:"",search:"CO SYMOXY 625"},{raw:"TAB COMBIFLAM",brand:"COMBIFLAM",form:"tablet",dose:"",search:"COMBIFLAM"},{raw:"TAB CONCOR 2.5",brand:"CONCOR 2.5",form:"tablet",dose:"",search:"CONCOR 2 5"},{raw:"TAB CONCOR 5MG",brand:"CONCOR 5MG",form:"tablet",dose:"5MG",search:"CONCOR 5MG"},{raw:"TAB CONCOR T 2.5+40MG",brand:"CONCOR T 2.5+40MG",form:"tablet",dose:"40MG",search:"CONCOR T 2 5+40MG"},{raw:"TAB CORDARONE 100MG",brand:"CORDARONE 100MG",form:"tablet",dose:"100MG",search:"CORDARONE 100MG"},{raw:"TAB CORDARONE X 200 MG",brand:"CORDARONE X 200 MG",form:"tablet",dose:"200 MG",search:"CORDARONE X 200 MG"},{raw:"TAB COSPAIQ SM 25/100/1000",brand:"COSPAIQ SM 25/100/1000",form:"tablet",dose:"",search:"COSPAIQ SM 25/100/1000"},{raw:"TAB COSPIAQ M 25/1000",brand:"COSPIAQ M 25/1000",form:"tablet",dose:"",search:"COSPIAQ M 25/1000"},{raw:"TAB COSPIAQ S 25/100",brand:"COSPIAQ S 25/100",form:"tablet",dose:"",search:"COSPIAQ S 25/100"},{raw:"TAB CTD 12.5MG",brand:"CTD 12.5MG",form:"tablet",dose:"12.5MG",search:"CTD 12 5MG"},{raw:"TAB DAPANORM M FORTE 5/1000MG",brand:"DAPANORM M FORTE 5/1000MG",form:"tablet",dose:"1000MG",search:"DAPANORM M FORTE 5/1000MG"},{raw:"TAB DAPANORM TRIO",brand:"DAPANORM TRIO",form:"tablet",dose:"",search:"DAPANORM TRIO"},{raw:"TAB DAPANORM TRIO FORTE",brand:"DAPANORM TRIO FORTE",form:"tablet",dose:"",search:"DAPANORM TRIO FORTE"},{raw:"TAB DAPATURN SM 10MG",brand:"DAPATURN SM 10MG",form:"tablet",dose:"10MG",search:"DAPATURN SM 10MG"},{raw:"TAB DAPLO  10 MG",brand:"DAPLO  10 MG",form:"tablet",dose:"10 MG",search:"DAPLO  10 MG"},{raw:"TAB DAPLO 5MG",brand:"DAPLO 5MG",form:"tablet",dose:"5MG",search:"DAPLO 5MG"},{raw:"TAB DAPLO M 10/500 MG",brand:"DAPLO M 10/500 MG",form:"tablet",dose:"500 MG",search:"DAPLO M 10/500 MG"},{raw:"TAB DAPLO M 5/500MG",brand:"DAPLO M 5/500MG",form:"tablet",dose:"500MG",search:"DAPLO M 5/500MG"},{raw:"TAB DAPLO MF 10/1000",brand:"DAPLO MF 10/1000",form:"tablet",dose:"",search:"DAPLO MF 10/1000"},{raw:"TAB DAPLO S 10+100",brand:"DAPLO S 10+100",form:"tablet",dose:"",search:"DAPLO S 10+100"},{raw:"TAB DAPLO SM 500",brand:"DAPLO SM 500",form:"tablet",dose:"",search:"DAPLO SM 500"},{raw:"TAB DEXAVAC 4MG",brand:"DEXAVAC 4MG",form:"tablet",dose:"4MG",search:"DEXAVAC 4MG"},{raw:"TAB DIAMICRON XR 60+500MG",brand:"DIAMICRON XR 60+500MG",form:"tablet",dose:"500MG",search:"DIAMICRON XR 60+500MG"},{raw:"TAB DIAMICRON XR MAX 60/1000",brand:"DIAMICRON XR MAX 60/1000",form:"tablet",dose:"",search:"DIAMICRON XR MAX 60/1000"},{raw:"TAB DIAMICRON XR MEX 30/500",brand:"DIAMICRON XR MEX 30/500",form:"tablet",dose:"",search:"DIAMICRON XR MEX 30/500"},{raw:"TAB DILNIP 10MG",brand:"DILNIP 10MG",form:"tablet",dose:"10MG",search:"DILNIP 10MG"},{raw:"TAB DISPRIN",brand:"DISPRIN",form:"tablet",dose:"",search:"DISPRIN"},{raw:"TAB DYTOR 20MG",brand:"DYTOR 20MG",form:"tablet",dose:"20MG",search:"DYTOR 20MG"},{raw:"TAB DYTOR PLUS 20",brand:"DYTOR PLUS 20",form:"tablet",dose:"",search:"DYTOR PLUS 20"},{raw:"TAB DYTOR PLUS 5MG",brand:"DYTOR PLUS 5MG",form:"tablet",dose:"5MG",search:"DYTOR PLUS 5MG"},{raw:"TAB DYTOR PLUS LS",brand:"DYTOR PLUS LS",form:"tablet",dose:"",search:"DYTOR PLUS LS"},{raw:"TAB ECOSPRIN AV 75/10",brand:"ECOSPRIN AV 75/10",form:"tablet",dose:"",search:"ECOSPRIN AV 75/10"},{raw:"TAB ECOSPRIN AV 75/20MG",brand:"ECOSPRIN AV 75/20MG",form:"tablet",dose:"20MG",search:"ECOSPRIN AV 75/20MG"},{raw:"TAB ECOSPRIN GOLD 20 MG",brand:"ECOSPRIN GOLD 20 MG",form:"tablet",dose:"20 MG",search:"ECOSPRIN GOLD 20 MG"},{raw:"TAB ECOSPRIN GOLD 40",brand:"ECOSPRIN GOLD 40",form:"tablet",dose:"",search:"ECOSPRIN GOLD 40"},{raw:"TAB EMESET 4MG",brand:"EMESET 4MG",form:"tablet",dose:"4MG",search:"EMESET 4MG"},{raw:"TAB EMESET 8MG",brand:"EMESET 8MG",form:"tablet",dose:"8MG",search:"EMESET 8MG"},{raw:"TAB EMPAGLYN 10MG",brand:"EMPAGLYN 10MG",form:"tablet",dose:"10MG",search:"EMPAGLYN 10MG"},{raw:"TAB EMPAGLYN 25MG",brand:"EMPAGLYN 25MG",form:"tablet",dose:"25MG",search:"EMPAGLYN 25MG"},{raw:"TAB EMPAGLYN M 12.5/1000",brand:"EMPAGLYN M 12.5/1000",form:"tablet",dose:"",search:"EMPAGLYN M 12 5/1000"},{raw:"TAB EMPAGLYN M 25/1000",brand:"EMPAGLYN M 25/1000",form:"tablet",dose:"",search:"EMPAGLYN M 25/1000"},{raw:"TAB EMPAGLYN TRIO 10/1000",brand:"EMPAGLYN TRIO 10/1000",form:"tablet",dose:"",search:"EMPAGLYN TRIO 10/1000"},{raw:"TAB EMPANORM M 12.5/500MG",brand:"EMPANORM M 12.5/500MG",form:"tablet",dose:"500MG",search:"EMPANORM M 12 5/500MG"},{raw:"TAB EMPHA M 12.5/500",brand:"EMPHA M 12.5/500",form:"tablet",dose:"",search:"EMPHA M 12 5/500"},{raw:"TAB EPTUS 25MG",brand:"EPTUS 25MG",form:"tablet",dose:"25MG",search:"EPTUS 25MG"},{raw:"TAB ESBIONS",brand:"ESBIONS",form:"tablet",dose:"",search:"ESBIONS"},{raw:"TAB ETIZOLA 0.25MG",brand:"ETIZOLA 0.25MG",form:"tablet",dose:"0.25MG",search:"ETIZOLA 0 25MG"},{raw:"TAB ETIZOLA 0.5",brand:"ETIZOLA 0.5",form:"tablet",dose:"",search:"ETIZOLA 0 5"},{raw:"TAB ETOSHINE 60MG",brand:"ETOSHINE 60MG",form:"tablet",dose:"60MG",search:"ETOSHINE 60MG"},{raw:"TAB ETOSHINE 90MG",brand:"ETOSHINE 90MG",form:"tablet",dose:"90MG",search:"ETOSHINE 90MG"},{raw:"TAB EUTHROX  125MCG",brand:"EUTHROX  125MCG",form:"tablet",dose:"125MCG",search:"EUTHROX  125MCG"},{raw:"TAB EUTHROX 50MCG",brand:"EUTHROX 50MCG",form:"tablet",dose:"50MCG",search:"EUTHROX 50MCG"},{raw:"TAB EUTHROX 75MCG",brand:"EUTHROX 75MCG",form:"tablet",dose:"75MCG",search:"EUTHROX 75MCG"},{raw:"TAB EUTHYROX 100MCG",brand:"EUTHYROX 100MCG",form:"tablet",dose:"100MCG",search:"EUTHYROX 100MCG"},{raw:"TAB EVION 400MG(NEW PACK)",brand:"EVION 400MG(NEW PACK)",form:"tablet",dose:"400MG",search:"EVION 400MG(NEW PACK)"},{raw:"TAB EVION LC",brand:"EVION LC",form:"tablet",dose:"",search:"EVION LC"},{raw:"TAB FARONEM 200MG",brand:"FARONEM 200MG",form:"tablet",dose:"200MG",search:"FARONEM 200MG"},{raw:"TAB FARONEM CV",brand:"FARONEM CV",form:"tablet",dose:"",search:"FARONEM CV"},{raw:"TAB FEBUSTAT 40MG",brand:"FEBUSTAT 40MG",form:"tablet",dose:"40MG",search:"FEBUSTAT 40MG"},{raw:"TAB FENOLIP 145MG",brand:"FENOLIP 145MG",form:"tablet",dose:"145MG",search:"FENOLIP 145MG"},{raw:"TAB FER 200MG",brand:"FER 200MG",form:"tablet",dose:"200MG",search:"FER 200MG"},{raw:"TAB FLORICOT 100MG",brand:"FLORICOT 100MG",form:"tablet",dose:"100MG",search:"FLORICOT 100MG"},{raw:"TAB FLOTRAL",brand:"FLOTRAL",form:"tablet",dose:"",search:"FLOTRAL"},{raw:"TAB FLOTRAL D",brand:"FLOTRAL D",form:"tablet",dose:"",search:"FLOTRAL D"},{raw:"TAB FLUVIR 75MG",brand:"FLUVIR 75MG",form:"tablet",dose:"75MG",search:"FLUVIR 75MG"},{raw:"TAB FOLVITE",brand:"FOLVITE",form:"tablet",dose:"",search:"FOLVITE"},{raw:"TAB FORCAN 150 MG(4'S)",brand:"FORCAN 150 MG(4'S)",form:"tablet",dose:"150 MG",search:"FORCAN 150 MG(4'S)"},{raw:"TAB GABANEURON 100MG",brand:"GABANEURON 100MG",form:"tablet",dose:"100MG",search:"GABANEURON 100MG"},{raw:"TAB GABANEURON 300MG",brand:"GABANEURON 300MG",form:"tablet",dose:"300MG",search:"GABANEURON 300MG"},{raw:"TAB GABANEURON NT 100MG",brand:"GABANEURON NT 100MG",form:"tablet",dose:"100MG",search:"GABANEURON NT 100MG"},{raw:"TAB GABANEURON NT 300MG",brand:"GABANEURON NT 300MG",form:"tablet",dose:"300MG",search:"GABANEURON NT 300MG"},{raw:"TAB GLIMY 1MG",brand:"GLIMY 1MG",form:"tablet",dose:"1MG",search:"GLIMY 1MG"},{raw:"TAB GLIMY 2MG",brand:"GLIMY 2MG",form:"tablet",dose:"2MG",search:"GLIMY 2MG"},{raw:"TAB GLIZID M XR 30+500",brand:"GLIZID M XR 30+500",form:"tablet",dose:"",search:"GLIZID M XR 30+500"},{raw:"TAB GLIZID MXR 60+500MG",brand:"GLIZID MXR 60+500MG",form:"tablet",dose:"500MG",search:"GLIZID MXR 60+500MG"},{raw:"TAB GLIZID XR 30 MG",brand:"GLIZID XR 30 MG",form:"tablet",dose:"30 MG",search:"GLIZID XR 30 MG"},{raw:"TAB GLIZID XR 30 MG",brand:"GLIZID XR 30 MG",form:"tablet",dose:"30 MG",search:"GLIZID XR 30 MG"},{raw:"TAB GLIZID XR 60MG",brand:"GLIZID XR 60MG",form:"tablet",dose:"60MG",search:"GLIZID XR 60MG"},{raw:"TAB GLUCONORM ZXR 60MG",brand:"GLUCONORM ZXR 60MG",form:"tablet",dose:"60MG",search:"GLUCONORM ZXR 60MG"},{raw:"TAB GLUCONORM ZXR FORTE 1GM",brand:"GLUCONORM ZXR FORTE 1GM",form:"tablet",dose:"1GM",search:"GLUCONORM ZXR FORTE 1GM"},{raw:"TAB GLUCRETA LM 1000MG",brand:"GLUCRETA LM 1000MG",form:"tablet",dose:"1000MG",search:"GLUCRETA LM 1000MG"},{raw:"TAB GLYCINORM M 60 OD",brand:"GLYCINORM M 60 OD",form:"tablet",dose:"",search:"GLYCINORM M 60 OD"},{raw:"TAB GUDCEF PLUS",brand:"GUDCEF PLUS",form:"tablet",dose:"",search:"GUDCEF PLUS"},{raw:"TAB HCQ 200",brand:"HCQ 200",form:"tablet",dose:"",search:"HCQ 200"},{raw:"TAB HCQS 200",brand:"HCQS 200",form:"tablet",dose:"",search:"HCQS 200"},{raw:"TAB HCQS 300",brand:"HCQS 300",form:"tablet",dose:"",search:"HCQS 300"},{raw:"TAB HISONE 10MG",brand:"HISONE 10MG",form:"tablet",dose:"10MG",search:"HISONE 10MG"},{raw:"TAB HISONE 5MG",brand:"HISONE 5MG",form:"tablet",dose:"5MG",search:"HISONE 5MG"},{raw:"TAB HOSIT D3",brand:"HOSIT D3",form:"tablet",dose:"",search:"HOSIT D3"},{raw:"TAB HOSIT L",brand:"HOSIT L",form:"tablet",dose:"",search:"HOSIT L"},{raw:"TAB IMEGLYN 500MG",brand:"IMEGLYN 500MG",form:"tablet",dose:"500MG",search:"IMEGLYN 500MG"},{raw:"TAB INDOCAP SR",brand:"INDOCAP SR",form:"tablet",dose:"",search:"INDOCAP SR"},{raw:"TAB INRAMED 5MG",brand:"INRAMED 5MG",form:"tablet",dose:"5MG",search:"INRAMED 5MG"},{raw:"TAB ISOLAZINE",brand:"ISOLAZINE",form:"tablet",dose:"",search:"ISOLAZINE"},{raw:"TAB ISTAMET D IR 500MG",brand:"ISTAMET D IR 500MG",form:"tablet",dose:"500MG",search:"ISTAMET D IR 500MG"},{raw:"TAB IVABID 5",brand:"IVABID 5",form:"tablet",dose:"",search:"IVABID 5"},{raw:"TAB KERENDIA 20MG",brand:"KERENDIA 20MG",form:"tablet",dose:"20MG",search:"KERENDIA 20MG"},{raw:"TAB LESURIDE",brand:"LESURIDE",form:"tablet",dose:"",search:"LESURIDE"},{raw:"TAB LEVIPIL 1GM",brand:"LEVIPIL 1GM",form:"tablet",dose:"1GM",search:"LEVIPIL 1GM"},{raw:"TAB LEVIPIL 500MG",brand:"LEVIPIL 500MG",form:"tablet",dose:"500MG",search:"LEVIPIL 500MG"},{raw:"TAB LEVOFLOX 500MG",brand:"LEVOFLOX 500MG",form:"tablet",dose:"500MG",search:"LEVOFLOX 500MG"},{raw:"TAB LIBRAX",brand:"LIBRAX",form:"tablet",dose:"",search:"LIBRAX"},{raw:"TAB LIBRIUM 10MG",brand:"LIBRIUM 10MG",form:"tablet",dose:"10MG",search:"LIBRIUM 10MG"},{raw:"TAB LINAXA 5MG",brand:"LINAXA 5MG",form:"tablet",dose:"5MG",search:"LINAXA 5MG"},{raw:"TAB LINAXA D 5/10MG",brand:"LINAXA D 5/10MG",form:"tablet",dose:"10MG",search:"LINAXA D 5/10MG"},{raw:"TAB LINAXA DM 500",brand:"LINAXA DM 500",form:"tablet",dose:"",search:"LINAXA DM 500"},{raw:"TAB LINAXA E 25",brand:"LINAXA E 25",form:"tablet",dose:"",search:"LINAXA E 25"},{raw:"TAB LINAXA EM 10/5/1000",brand:"LINAXA EM 10/5/1000",form:"tablet",dose:"",search:"LINAXA EM 10/5/1000"},{raw:"TAB LINAXA EM 25/5/1000",brand:"LINAXA EM 25/5/1000",form:"tablet",dose:"",search:"LINAXA EM 25/5/1000"},{raw:"TAB LINAXA M XR 5/500",brand:"LINAXA M XR 5/500",form:"tablet",dose:"",search:"LINAXA M XR 5/500"},{raw:"TAB LINERO DM 500MG",brand:"LINERO DM 500MG",form:"tablet",dose:"500MG",search:"LINERO DM 500MG"},{raw:"TAB LIPAGLYN 4MG",brand:"LIPAGLYN 4MG",form:"tablet",dose:"4MG",search:"LIPAGLYN 4MG"},{raw:"TAB LIPIKIND 20MG",brand:"LIPIKIND 20MG",form:"tablet",dose:"20MG",search:"LIPIKIND 20MG"},{raw:"TAB LIVOGEN",brand:"LIVOGEN",form:"tablet",dose:"",search:"LIVOGEN"},{raw:"TAB LIZOLID 600MG",brand:"LIZOLID 600MG",form:"tablet",dose:"600MG",search:"LIZOLID 600MG"},{raw:"TAB LONAZEP 0.5MG",brand:"LONAZEP 0.5MG",form:"tablet",dose:"0.5MG",search:"LONAZEP 0 5MG"},{raw:"TAB LONAZEP MD 0.25MG",brand:"LONAZEP MD 0.25MG",form:"tablet",dose:"0.25MG",search:"LONAZEP MD 0 25MG"},{raw:"TAB LOPEZ 2MG",brand:"LOPEZ 2MG",form:"tablet",dose:"2MG",search:"LOPEZ 2MG"},{raw:"TAB LOSAR 50MG",brand:"LOSAR 50MG",form:"tablet",dose:"50MG",search:"LOSAR 50MG"},{raw:"TAB LOSAR H",brand:"LOSAR H",form:"tablet",dose:"",search:"LOSAR H"},{raw:"TAB MEFTAL FORTE",brand:"MEFTAL FORTE",form:"tablet",dose:"",search:"MEFTAL FORTE"},{raw:"TAB MEGALIS 20MG",brand:"MEGALIS 20MG",form:"tablet",dose:"20MG",search:"MEGALIS 20MG"},{raw:"TAB MELOSET 3MG",brand:"MELOSET 3MG",form:"tablet",dose:"3MG",search:"MELOSET 3MG"},{raw:"TAB MESACOL OD",brand:"MESACOL OD",form:"tablet",dose:"",search:"MESACOL OD"},{raw:"TAB METOSARTAN 25MG",brand:"METOSARTAN 25MG",form:"tablet",dose:"25MG",search:"METOSARTAN 25MG"},{raw:"TAB METOSARTAN 50MG",brand:"METOSARTAN 50MG",form:"tablet",dose:"50MG",search:"METOSARTAN 50MG"},{raw:"TAB METOSARTAN CH 50+6.25MG",brand:"METOSARTAN CH 50+6.25MG",form:"tablet",dose:"6.25MG",search:"METOSARTAN CH 50+6 25MG"},{raw:"TAB METOSARTAN CH 50MG",brand:"METOSARTAN CH 50MG",form:"tablet",dose:"50MG",search:"METOSARTAN CH 50MG"},{raw:"TAB METSMALL 1000",brand:"METSMALL 1000",form:"tablet",dose:"",search:"METSMALL 1000"},{raw:"TAB METSMALL 500MG",brand:"METSMALL 500MG",form:"tablet",dose:"500MG",search:"METSMALL 500MG"},{raw:"TAB MIDORISE 5MG",brand:"MIDORISE 5MG",form:"tablet",dose:"5MG",search:"MIDORISE 5MG"},{raw:"TAB MIRAGO 25MG",brand:"MIRAGO 25MG",form:"tablet",dose:"25MG",search:"MIRAGO 25MG"},{raw:"TAB MODULA",brand:"MODULA",form:"tablet",dose:"",search:"MODULA"},{raw:"TAB MONTAIR BL",brand:"MONTAIR BL",form:"tablet",dose:"",search:"MONTAIR BL"},{raw:"TAB MONTAIR FX",brand:"MONTAIR FX",form:"tablet",dose:"",search:"MONTAIR FX"},{raw:"TAB MONTAIR LC",brand:"MONTAIR LC",form:"tablet",dose:"",search:"MONTAIR LC"},{raw:"TAB MONTEK AB",brand:"MONTEK AB",form:"tablet",dose:"",search:"MONTEK AB"},{raw:"TAB MUCINAC AB",brand:"MUCINAC AB",form:"tablet",dose:"",search:"MUCINAC AB"},{raw:"TAB NAPROSYN 250MG",brand:"NAPROSYN 250MG",form:"tablet",dose:"250MG",search:"NAPROSYN 250MG"},{raw:"TAB NATRISE",brand:"NATRISE",form:"tablet",dose:"",search:"NATRISE"},{raw:"TAB NAXDOM 500MG",brand:"NAXDOM 500MG",form:"tablet",dose:"500MG",search:"NAXDOM 500MG"},{raw:"TAB NEOMERCAZOLE 10MG",brand:"NEOMERCAZOLE 10MG",form:"tablet",dose:"10MG",search:"NEOMERCAZOLE 10MG"},{raw:"TAB NEOMERCAZOLE 20MG",brand:"NEOMERCAZOLE 20MG",form:"tablet",dose:"20MG",search:"NEOMERCAZOLE 20MG"},{raw:"TAB NERVUP OD",brand:"NERVUP OD",form:"tablet",dose:"",search:"NERVUP OD"},{raw:"TAB NEUROBION FORTE",brand:"NEUROBION FORTE",form:"tablet",dose:"",search:"NEUROBION FORTE"},{raw:"TAB NEUROSAGE LC",brand:"NEUROSAGE LC",form:"tablet",dose:"",search:"NEUROSAGE LC"},{raw:"TAB NEW FOLLIHAIR",brand:"NEW FOLLIHAIR",form:"tablet",dose:"",search:"NEW FOLLIHAIR"},{raw:"TAB NEXITO 10MG",brand:"NEXITO 10MG",form:"tablet",dose:"10MG",search:"NEXITO 10MG"},{raw:"TAB NEXITO 5MG",brand:"NEXITO 5MG",form:"tablet",dose:"5MG",search:"NEXITO 5MG"},{raw:"TAB NEXITO FORTE",brand:"NEXITO FORTE",form:"tablet",dose:"",search:"NEXITO FORTE"},{raw:"TAB NEXITO PLUS",brand:"NEXITO PLUS",form:"tablet",dose:"",search:"NEXITO PLUS"},{raw:"TAB NORMAXIN",brand:"NORMAXIN",form:"tablet",dose:"",search:"NORMAXIN"},{raw:"TAB NORTRYTOMER P 75MG",brand:"NORTRYTOMER P 75MG",form:"tablet",dose:"75MG",search:"NORTRYTOMER P 75MG"},{raw:"TAB NOVELON",brand:"NOVELON",form:"tablet",dose:"",search:"NOVELON"},{raw:"TAB NUCARNIT 500MG",brand:"NUCARNIT 500MG",form:"tablet",dose:"500MG",search:"NUCARNIT 500MG"},{raw:"TAB NUROMIST LC",brand:"NUROMIST LC",form:"tablet",dose:"",search:"NUROMIST LC"},{raw:"TAB OFLOX OZ",brand:"OFLOX OZ",form:"tablet",dose:"",search:"OFLOX OZ"},{raw:"TAB OLMIROSE TRIO 20MG",brand:"OLMIROSE TRIO 20MG",form:"tablet",dose:"20MG",search:"OLMIROSE TRIO 20MG"},{raw:"TAB ONDERO D 10MG",brand:"ONDERO D 10MG",form:"tablet",dose:"10MG",search:"ONDERO D 10MG"},{raw:"TAB ONECAN 150",brand:"ONECAN 150",form:"tablet",dose:"",search:"ONECAN 150"},{raw:"TAB ORCERIN GM",brand:"ORCERIN GM",form:"tablet",dose:"",search:"ORCERIN GM"},{raw:"TAB OXRA S 10/100MG",brand:"OXRA S 10/100MG",form:"tablet",dose:"100MG",search:"OXRA S 10/100MG"},{raw:"TAB PANCODYL 10000",brand:"PANCODYL 10000",form:"tablet",dose:"",search:"PANCODYL 10000"},{raw:"TAB PANLIPASE 25000MG",brand:"PANLIPASE 25000MG",form:"tablet",dose:"25000MG",search:"PANLIPASE 25000MG"},{raw:"TAB PANTOCID DSR",brand:"PANTOCID DSR",form:"tablet",dose:"",search:"PANTOCID DSR"},{raw:"TAB PANTOSEC 40MG",brand:"PANTOSEC 40MG",form:"tablet",dose:"40MG",search:"PANTOSEC 40MG"},{raw:"TAB PIOZ 15MG",brand:"PIOZ 15MG",form:"tablet",dose:"15MG",search:"PIOZ 15MG"},{raw:"TAB PIOZ MF 15+500MG",brand:"PIOZ MF 15+500MG",form:"tablet",dose:"500MG",search:"PIOZ MF 15+500MG"},{raw:"TAB PIVASTA 2MG",brand:"PIVASTA 2MG",form:"tablet",dose:"2MG",search:"PIVASTA 2MG"},{raw:"TAB PRAMIPEX 0.5MG",brand:"PRAMIPEX 0.5MG",form:"tablet",dose:"0.5MG",search:"PRAMIPEX 0 5MG"},{raw:"TAB PREDMET 16MG",brand:"PREDMET 16MG",form:"tablet",dose:"16MG",search:"PREDMET 16MG"},{raw:"TAB PREGEB D 75/20MG",brand:"PREGEB D 75/20MG",form:"tablet",dose:"20MG",search:"PREGEB D 75/20MG"},{raw:"TAB PREGEB DM 75+20",brand:"PREGEB DM 75+20",form:"tablet",dose:"",search:"PREGEB DM 75+20"},{raw:"TAB PREGEB M OD 75MG",brand:"PREGEB M OD 75MG",form:"tablet",dose:"75MG",search:"PREGEB M OD 75MG"},{raw:"TAB PREGEB NT",brand:"PREGEB NT",form:"tablet",dose:"",search:"PREGEB NT"},{raw:"TAB PREGEB OD 75MG",brand:"PREGEB OD 75MG",form:"tablet",dose:"75MG",search:"PREGEB OD 75MG"},{raw:"TAB PREGEM M 75MG",brand:"PREGEM M 75MG",form:"tablet",dose:"75MG",search:"PREGEM M 75MG"},{raw:"TAB PROSTADO",brand:"PROSTADO",form:"tablet",dose:"",search:"PROSTADO"},{raw:"TAB PROSTADO D",brand:"PROSTADO D",form:"tablet",dose:"",search:"PROSTADO D"},{raw:"TAB RABESEC DSR",brand:"RABESEC DSR",form:"tablet",dose:"",search:"RABESEC DSR"},{raw:"TAB RACAL XT",brand:"RACAL XT",form:"tablet",dose:"",search:"RACAL XT"},{raw:"TAB RACIPER 40MG",brand:"RACIPER 40MG",form:"tablet",dose:"40MG",search:"RACIPER 40MG"},{raw:"TAB RACIPER D",brand:"RACIPER D",form:"tablet",dose:"",search:"RACIPER D"},{raw:"TAB RANTAC 150MG",brand:"RANTAC 150MG",form:"tablet",dose:"150MG",search:"RANTAC 150MG"},{raw:"TAB RECLIDE MR 30MG",brand:"RECLIDE MR 30MG",form:"tablet",dose:"30MG",search:"RECLIDE MR 30MG"},{raw:"TAB REDOTIL",brand:"REDOTIL",form:"tablet",dose:"",search:"REDOTIL"},{raw:"TAB RIFAGUT 400MG",brand:"RIFAGUT 400MG",form:"tablet",dose:"400MG",search:"RIFAGUT 400MG"},{raw:"TAB RIFAGUT 550MG",brand:"RIFAGUT 550MG",form:"tablet",dose:"550MG",search:"RIFAGUT 550MG"},{raw:"TAB ROKO",brand:"ROKO",form:"tablet",dose:"",search:"ROKO"},{raw:"TAB ROZUCOR ASP 10",brand:"ROZUCOR ASP 10",form:"tablet",dose:"",search:"ROZUCOR ASP 10"},{raw:"TAB ROZUCOR CV 10",brand:"ROZUCOR CV 10",form:"tablet",dose:"",search:"ROZUCOR CV 10"},{raw:"TAB ROZUCOR CV 20",brand:"ROZUCOR CV 20",form:"tablet",dose:"",search:"ROZUCOR CV 20"},{raw:"TAB ROZUCOR F 20MG",brand:"ROZUCOR F 20MG",form:"tablet",dose:"20MG",search:"ROZUCOR F 20MG"},{raw:"TAB ROZUCOR F10MG",brand:"ROZUCOR F10MG",form:"tablet",dose:"10MG",search:"ROZUCOR F10MG"},{raw:"TAB ROZUCOR GOLD 20",brand:"ROZUCOR GOLD 20",form:"tablet",dose:"",search:"ROZUCOR GOLD 20"},{raw:"TAB RUTOVERGE FORTE D",brand:"RUTOVERGE FORTE D",form:"tablet",dose:"",search:"RUTOVERGE FORTE D"},{raw:"TAB SATVIT GOLD",brand:"SATVIT GOLD",form:"tablet",dose:"",search:"SATVIT GOLD"},{raw:"TAB SENSIVAL 25MG",brand:"SENSIVAL 25MG",form:"tablet",dose:"25MG",search:"SENSIVAL 25MG"},{raw:"TAB SHELCAL 500",brand:"SHELCAL 500",form:"tablet",dose:"",search:"SHELCAL 500"},{raw:"TAB SIAGLDE M 50/500",brand:"SIAGLDE M 50/500",form:"tablet",dose:"",search:"SIAGLDE M 50/500"},{raw:"TAB SIAGLIDE 100MG",brand:"SIAGLIDE 100MG",form:"tablet",dose:"100MG",search:"SIAGLIDE 100MG"},{raw:"TAB SIAGLIDE M 50/1000MG",brand:"SIAGLIDE M 50/1000MG",form:"tablet",dose:"1000MG",search:"SIAGLIDE M 50/1000MG"},{raw:"TAB SIAGLIDE M OD 100/500MG",brand:"SIAGLIDE M OD 100/500MG",form:"tablet",dose:"500MG",search:"SIAGLIDE M OD 100/500MG"},{raw:"TAB SILODAL 4MG",brand:"SILODAL 4MG",form:"tablet",dose:"4MG",search:"SILODAL 4MG"},{raw:"TAB SILODAL D 4MG",brand:"SILODAL D 4MG",form:"tablet",dose:"4MG",search:"SILODAL D 4MG"},{raw:"TAB SILODAL D 8MG",brand:"SILODAL D 8MG",form:"tablet",dose:"8MG",search:"SILODAL D 8MG"},{raw:"TAB SILODAL M 25 COMBIKIT",brand:"SILODAL M 25 COMBIKIT",form:"tablet",dose:"",search:"SILODAL M 25 COMBIKIT"},{raw:"TAB SITACIP DM 100/10/500MG",brand:"SITACIP DM 100/10/500MG",form:"tablet",dose:"500MG",search:"SITACIP DM 100/10/500MG"},{raw:"TAB SITACIP GM 50/1/1000",brand:"SITACIP GM 50/1/1000",form:"tablet",dose:"",search:"SITACIP GM 50/1/1000"},{raw:"TAB SITACIP GM 50/2/1000",brand:"SITACIP GM 50/2/1000",form:"tablet",dose:"",search:"SITACIP GM 50/2/1000"},{raw:"TAB SITAGLYN DM 100/500MG",brand:"SITAGLYN DM 100/500MG",form:"tablet",dose:"500MG",search:"SITAGLYN DM 100/500MG"},{raw:"TAB SITAXA DM 10/100/500",brand:"SITAXA DM 10/100/500",form:"tablet",dose:"",search:"SITAXA DM 10/100/500"},{raw:"TAB SOFTERON GOLD",brand:"SOFTERON GOLD",form:"tablet",dose:"",search:"SOFTERON GOLD"},{raw:"TAB STEMETIL MD",brand:"STEMETIL MD",form:"tablet",dose:"",search:"STEMETIL MD"},{raw:"TAB STORVAS EZ 20",brand:"STORVAS EZ 20",form:"tablet",dose:"",search:"STORVAS EZ 20"},{raw:"TAB SUITGLIP DM 100/10/500",brand:"SUITGLIP DM 100/10/500",form:"tablet",dose:"",search:"SUITGLIP DM 100/10/500"},{raw:"TAB SULIDAPA S 10/100MG",brand:"SULIDAPA S 10/100MG",form:"tablet",dose:"100MG",search:"SULIDAPA S 10/100MG"},{raw:"TAB SUPERMET XL 25",brand:"SUPERMET XL 25",form:"tablet",dose:"",search:"SUPERMET XL 25"},{raw:"TAB SUPRADYN",brand:"SUPRADYN",form:"tablet",dose:"",search:"SUPRADYN"},{raw:"TAB SYNDOPA PLUS",brand:"SYNDOPA PLUS",form:"tablet",dose:"",search:"SYNDOPA PLUS"},{raw:"TAB TELMA AM-H 40MG",brand:"TELMA AM-H 40MG",form:"tablet",dose:"40MG",search:"TELMA AM H 40MG"},{raw:"TAB TELMA BETA 25MG",brand:"TELMA BETA 25MG",form:"tablet",dose:"25MG",search:"TELMA BETA 25MG"},{raw:"TAB TELSAR LN 5",brand:"TELSAR LN 5",form:"tablet",dose:"",search:"TELSAR LN 5"},{raw:"TAB THYRONORM 100MCG",brand:"THYRONORM 100MCG",form:"tablet",dose:"100MCG",search:"THYRONORM 100MCG"},{raw:"TAB THYRONORM 112MCG",brand:"THYRONORM 112MCG",form:"tablet",dose:"112MCG",search:"THYRONORM 112MCG"},{raw:"TAB THYRONORM 12.5MCG",brand:"THYRONORM 12.5MCG",form:"tablet",dose:"12.5MCG",search:"THYRONORM 12 5MCG"},{raw:"TAB THYRONORM 125MCG",brand:"THYRONORM 125MCG",form:"tablet",dose:"125MCG",search:"THYRONORM 125MCG"},{raw:"TAB THYRONORM 150MCG",brand:"THYRONORM 150MCG",form:"tablet",dose:"150MCG",search:"THYRONORM 150MCG"},{raw:"TAB THYRONORM 25MCG",brand:"THYRONORM 25MCG",form:"tablet",dose:"25MCG",search:"THYRONORM 25MCG"},{raw:"TAB THYRONORM 37.5MCG",brand:"THYRONORM 37.5MCG",form:"tablet",dose:"37.5MCG",search:"THYRONORM 37 5MCG"},{raw:"TAB THYRONORM 50MCG",brand:"THYRONORM 50MCG",form:"tablet",dose:"50MCG",search:"THYRONORM 50MCG"},{raw:"TAB THYRONORM 62.5MCG",brand:"THYRONORM 62.5MCG",form:"tablet",dose:"62.5MCG",search:"THYRONORM 62 5MCG"},{raw:"TAB THYRONORM 75MCG",brand:"THYRONORM 75MCG",form:"tablet",dose:"75MCG",search:"THYRONORM 75MCG"},{raw:"TAB THYRONORM 88MCG",brand:"THYRONORM 88MCG",form:"tablet",dose:"88MCG",search:"THYRONORM 88MCG"},{raw:"TAB TOLVAT 15MG",brand:"TOLVAT 15MG",form:"tablet",dose:"15MG",search:"TOLVAT 15MG"},{raw:"TAB TONACT TG 20MG",brand:"TONACT TG 20MG",form:"tablet",dose:"20MG",search:"TONACT TG 20MG"},{raw:"TAB TORGLIP M OD 100/500MG",brand:"TORGLIP M OD 100/500MG",form:"tablet",dose:"500MG",search:"TORGLIP M OD 100/500MG"},{raw:"TAB TRENTAL 400MG",brand:"TRENTAL 400MG",form:"tablet",dose:"400MG",search:"TRENTAL 400MG"},{raw:"TAB ULTRA MAGNESIUM 200MG",brand:"ULTRA MAGNESIUM 200MG",form:"tablet",dose:"200MG",search:"ULTRA MAGNESIUM 200MG"},{raw:"TAB ULTRACET",brand:"ULTRACET",form:"tablet",dose:"",search:"ULTRACET"},{raw:"TAB URIBID 100MG",brand:"URIBID 100MG",form:"tablet",dose:"100MG",search:"URIBID 100MG"},{raw:"TAB URIHOLD 25MG",brand:"URIHOLD 25MG",form:"tablet",dose:"25MG",search:"URIHOLD 25MG"},{raw:"TAB URIHOLD 50MG",brand:"URIHOLD 50MG",form:"tablet",dose:"50MG",search:"URIHOLD 50MG"},{raw:"TAB URIMAX 0.4 MG (15PKG)",brand:"URIMAX 0.4 MG (15PKG)",form:"tablet",dose:"0.4 MG",search:"URIMAX 0 4 MG (15PKG)"},{raw:"TAB UROTONE",brand:"UROTONE",form:"tablet",dose:"",search:"UROTONE"},{raw:"TAB UROTONE DS",brand:"UROTONE DS",form:"tablet",dose:"",search:"UROTONE DS"},{raw:"TAB URSOCOL 300MG",brand:"URSOCOL 300MG",form:"tablet",dose:"300MG",search:"URSOCOL 300MG"},{raw:"TAB VERGICAL",brand:"VERGICAL",form:"tablet",dose:"",search:"VERGICAL"},{raw:"TAB VERGICAL JOINTS",brand:"VERGICAL JOINTS",form:"tablet",dose:"",search:"VERGICAL JOINTS"},{raw:"TAB VERGICAL MAX SOFTGEL",brand:"VERGICAL MAX SOFTGEL",form:"tablet",dose:"",search:"VERGICAL MAX SOFTGEL"},{raw:"TAB VERTIN 16MG",brand:"VERTIN 16MG",form:"tablet",dose:"16MG",search:"VERTIN 16MG"},{raw:"TAB VOLTAPRAZ 20MG",brand:"VOLTAPRAZ 20MG",form:"tablet",dose:"20MG",search:"VOLTAPRAZ 20MG"},{raw:"TAB WYSOLONE DT 20MG",brand:"WYSOLONE DT 20MG",form:"tablet",dose:"20MG",search:"WYSOLONE DT 20MG"},{raw:"TAB WYSOLONE DT 5MG",brand:"WYSOLONE DT 5MG",form:"tablet",dose:"5MG",search:"WYSOLONE DT 5MG"},{raw:"TAB ZOLEFRESH 10MG",brand:"ZOLEFRESH 10MG",form:"tablet",dose:"10MG",search:"ZOLEFRESH 10MG"},{raw:"TEGADERM 1610",brand:"TEGADERM 1610",form:"other",dose:"",search:"TEGADERM 1610"},{raw:"TEGADERM 8526",brand:"TEGADERM 8526",form:"other",dose:"",search:"TEGADERM 8526"},{raw:"TELMA 20/15 TAB-N",brand:"TELMA 20/15 TAB-N",form:"tablet",dose:"",search:"TELMA 20/15 TAB N"},{raw:"TELMA 40/15-N",brand:"TELMA 40/15-N",form:"other",dose:"",search:"TELMA 40/15 N"},{raw:"TELMA AM/15-N",brand:"TELMA AM/15-N",form:"other",dose:"",search:"TELMA AM/15 N"},{raw:"TELMA BETA 50MG TAB",brand:"TELMA BETA 50MG TAB",form:"tablet",dose:"50MG",search:"TELMA BETA 50MG TAB"},{raw:"TELMA CT 40/12.5MG",brand:"TELMA CT 40/12.5MG",form:"other",dose:"12.5MG",search:"TELMA CT 40/12 5MG"},{raw:"TAB",brand:"TAB",form:"tablet",dose:"",search:"TAB"},{raw:"TELMA CT 6.25MG",brand:"TELMA CT 6.25MG",form:"other",dose:"6.25MG",search:"TELMA CT 6 25MG"},{raw:"TELMA H/15-N",brand:"TELMA H/15-N",form:"other",dose:"",search:"TELMA H/15 N"},{raw:"TELVAS-3D 40 TAB 1*10T",brand:"TELVAS-3D 40 TAB",form:"tablet",dose:"",search:"TELVAS 3D 40 TAB"},{raw:"TERBINAFORCE CREAM 10GM",brand:"TERBINAFORCE CREAM 10GM",form:"cream",dose:"10GM",search:"TERBINAFORCE CREAM 10GM"},{raw:"TLT300 TRUTIE CLIP MEDIUM",brand:"TLT300 TRUTIE CLIP MEDIUM",form:"other",dose:"",search:"TLT300 TRUTIE CLIP MEDIUM"},{raw:"TLT400 TRUTIE CLIP LARGE",brand:"TLT400 TRUTIE CLIP LARGE",form:"other",dose:"",search:"TLT400 TRUTIE CLIP LARGE"},{raw:"TNA PERI 1000ML",brand:"TNA PERI 1000ML",form:"other",dose:"1000ML",search:"TNA PERI 1000ML"},{raw:"TRIMMER PLUS",brand:"TRIMMER PLUS",form:"other",dose:"",search:"TRIMMER PLUS"},{raw:"TRULICITY INJ 1.5ML",brand:"TRULICITY INJ 1.5ML",form:"injection",dose:"1.5ML",search:"TRULICITY INJ 1 5ML"},{raw:"TS 2317 TRUSYNTH 2-0 RB",brand:"TS 2317 TRUSYNTH 2-0 RB",form:"other",dose:"",search:"TS 2317 TRUSYNTH 2 0 RB"},{raw:"TS 2347 TRUSYNTH RB",brand:"TS 2347 TRUSYNTH RB",form:"other",dose:"",search:"TS 2347 TRUSYNTH RB"},{raw:"TS 2382 TRUSYNTH RB 2-0",brand:"TS 2382 TRUSYNTH RB 2-0",form:"other",dose:"",search:"TS 2382 TRUSYNTH RB 2 0"},{raw:"TS 2421 TRUSYNTH",brand:"TS 2421 TRUSYNTH",form:"other",dose:"",search:"TS 2421 TRUSYNTH"},{raw:"TS 2437 TRUSYNTH 3-0 RB",brand:"TS 2437 TRUSYNTH 3-0 RB",form:"other",dose:"",search:"TS 2437 TRUSYNTH 3 0 RB"},{raw:"TWIN SHOE MEDIUM",brand:"TWIN SHOE MEDIUM",form:"other",dose:"",search:"TWIN SHOE MEDIUM"},{raw:"URINE POT",brand:"URINE POT",form:"other",dose:"",search:"URINE POT"},{raw:"URO BAG",brand:"URO BAG",form:"other",dose:"",search:"URO BAG"},{raw:"UROMETER",brand:"UROMETER",form:"other",dose:"",search:"UROMETER"},{raw:"VACCU SUCTION SET",brand:"VACCU SUCTION SET",form:"other",dose:"",search:"VACCU SUCTION SET"},{raw:"VENFLON 18G",brand:"VENFLON 18G",form:"other",dose:"",search:"VENFLON 18G"},{raw:"VENFLON 20G",brand:"VENFLON 20G",form:"other",dose:"",search:"VENFLON 20G"},{raw:"VENFLON 22G 1*1",brand:"VENFLON 22G",form:"other",dose:"",search:"VENFLON 22G"},{raw:"VERTIN TAB 8MG-N/15",brand:"VERTIN TAB 8MG-N/15",form:"tablet",dose:"8MG",search:"VERTIN TAB 8MG N/15"},{raw:"VISAB POWDER 100GM",brand:"VISAB POWDER 100GM",form:"powder",dose:"100GM",search:"VISAB POWDER 100GM"},{raw:"WALKER INVALID ALL PODS-AL",brand:"WALKER INVALID ALL PODS-AL",form:"other",dose:"",search:"WALKER INVALID ALL PODS AL"},{raw:"WALKING STICKS QUADRIPOD",brand:"WALKING STICKS QUADRIPOD",form:"other",dose:"",search:"WALKING STICKS QUADRIPOD"},{raw:"WCS2B WOUND CARE SHOE MEDIUM",brand:"WCS2B WOUND CARE SHOE MEDIUM",form:"other",dose:"",search:"WCS2B WOUND CARE SHOE MEDIUM"},{raw:"WCS3B WOUND CARE SHOE LARGE",brand:"WCS3B WOUND CARE SHOE LARGE",form:"other",dose:"",search:"WCS3B WOUND CARE SHOE LARGE"},{raw:"WYSOLONE 10/15-N",brand:"WYSOLONE 10/15-N",form:"other",dose:"",search:"WYSOLONE 10/15 N"},{raw:"Y CONNECTOR 1/4",brand:"Y CONNECTOR 1/4",form:"other",dose:"",search:"Y CONNECTOR 1/4"},{raw:"INJ EMESET",brand:"EMESET",form:"injection",dose:"",search:"EMESET"},{raw:"INJ BUTRUM",brand:"BUTRUM",form:"injection",dose:"",search:"BUTRUM"},{raw:"FREESTYLE OPTIUM NEO METER KIT",brand:"FREESTYLE OPTIUM NEO METER KIT",form:"other",dose:"",search:"FREESTYLE OPTIUM NEO METER KIT"},{raw:"FREESTYLE OPTIUM STRIPS(PACK OF 25)",brand:"FREESTYLE OPTIUM STRIPS(PACK OF 25)",form:"other",dose:"",search:"FREESTYLE OPTIUM STRIPS(PACK OF 25)"},{raw:"INJ RETOLON 1MG",brand:"RETOLON 1MG",form:"injection",dose:"1MG",search:"RETOLON 1MG"},{raw:"INJ CUREVIT K",brand:"CUREVIT K",form:"injection",dose:"",search:"CUREVIT K"},{raw:"TAB ADLEAP 160",brand:"ADLEAP 160",form:"tablet",dose:"",search:"ADLEAP 160"},{raw:"INJ TERLISTAT 10ML",brand:"TERLISTAT 10ML",form:"injection",dose:"10ML",search:"TERLISTAT 10ML"},{raw:"SYRUP LACTIHEP",brand:"SYRUP LACTIHEP",form:"syrup",dose:"",search:"SYRUP LACTIHEP"},{raw:"INJ OFLOX",brand:"OFLOX",form:"injection",dose:"",search:"OFLOX"},{raw:"INJ LINOPLUS",brand:"LINOPLUS",form:"injection",dose:"",search:"LINOPLUS"},{raw:"INJ DENINTA 60MG",brand:"DENINTA 60MG",form:"injection",dose:"60MG",search:"DENINTA 60MG"},{raw:"DR ODIN DIGITAL THERMOMETER",brand:"DR ODIN DIGITAL THERMOMETER",form:"other",dose:"",search:"DR ODIN DIGITAL THERMOMETER"},{raw:"NEVANAC EYE DROP 5ML",brand:"NEVANAC EYE DROP 5ML",form:"drops",dose:"5ML",search:"NEVANAC EYE DROP 5ML"},{raw:"INJ AZEE 500MG",brand:"AZEE 500MG",form:"injection",dose:"500MG",search:"AZEE 500MG"},{raw:"INJ EUPEN 1GM",brand:"EUPEN 1GM",form:"injection",dose:"1GM",search:"EUPEN 1GM"},{raw:"INJ C-ONE 1GM",brand:"C-ONE 1GM",form:"injection",dose:"1GM",search:"C ONE 1GM"},{raw:"TAB SIAGLIDE 50MG",brand:"SIAGLIDE 50MG",form:"tablet",dose:"50MG",search:"SIAGLIDE 50MG"},{raw:"ENSURE VANILLA 375 GM",brand:"ENSURE VANILLA 375 GM",form:"other",dose:"375 GM",search:"ENSURE VANILLA 375 GM"},{raw:"INJ BONACORT 1ML",brand:"BONACORT 1ML",form:"injection",dose:"1ML",search:"BONACORT 1ML"},{raw:"PROTINEX DIABETES CARE 400GM",brand:"PROTINEX DIABETES CARE 400GM",form:"other",dose:"400GM",search:"PROTINEX DIABETES CARE 400GM"},{raw:"INJ CILAXIN",brand:"CILAXIN",form:"injection",dose:"",search:"CILAXIN"},{raw:"IOBAN 6640",brand:"IOBAN 6640",form:"other",dose:"",search:"IOBAN 6640"},{raw:"ACCU CHECK INSTANT KIT NEW",brand:"ACCU CHECK INSTANT KIT NEW",form:"other",dose:"",search:"ACCU CHECK INSTANT KIT NEW"},{raw:"ACCU CHECK INSTANT 50S",brand:"ACCU CHECK INSTANT 50S",form:"other",dose:"",search:"ACCU CHECK INSTANT 50S"},{raw:"PEGLEC POWDER",brand:"PEGLEC POWDER",form:"powder",dose:"",search:"PEGLEC POWDER"},{raw:"TAB TAMODEX 10MG",brand:"TAMODEX 10MG",form:"tablet",dose:"10MG",search:"TAMODEX 10MG"},{raw:"TAB LETERO 2.5MG",brand:"LETERO 2.5MG",form:"tablet",dose:"2.5MG",search:"LETERO 2 5MG"},{raw:"TAB EMPAZIO M 12.5+500MG",brand:"EMPAZIO M 12.5+500MG",form:"tablet",dose:"500MG",search:"EMPAZIO M 12 5+500MG"},{raw:"INJ LEVIPIL",brand:"LEVIPIL",form:"injection",dose:"",search:"LEVIPIL"},{raw:"INJ ARACHITOL 6L",brand:"ARACHITOL 6L",form:"injection",dose:"",search:"ARACHITOL 6L"},{raw:"TAB EMPAZIO MXR 25/1000MG",brand:"EMPAZIO MXR 25/1000MG",form:"tablet",dose:"1000MG",search:"EMPAZIO MXR 25/1000MG"},{raw:"INJ THIMIN",brand:"THIMIN",form:"injection",dose:"",search:"THIMIN"},{raw:"INJ SERENCE",brand:"SERENCE",form:"injection",dose:"",search:"SERENCE"},{raw:"HISONE 5MG TAB",brand:"HISONE 5MG TAB",form:"tablet",dose:"5MG",search:"HISONE 5MG TAB"},{raw:"CAP IMODIUM 2MG",brand:"IMODIUM 2MG",form:"capsule",dose:"2MG",search:"IMODIUM 2MG"},{raw:"INJ MOUNJARO VIAL 5/0.5",brand:"MOUNJARO VIAL 5/0.5",form:"injection",dose:"",search:"MOUNJARO VIAL 5/0 5"},{raw:"NICOTEX N T PATCH 7MG",brand:"NICOTEX N T PATCH 7MG",form:"other",dose:"7MG",search:"NICOTEX N T PATCH 7MG"},{raw:"PARAFFIN GAUZE 10CMX10CMX20 1*1",brand:"PARAFFIN GAUZE 10CMX10CMX20",form:"other",dose:"",search:"PARAFFIN GAUZE 10CMX10CMX20"},{raw:"GAMJEE ROLL 10CM *3MT",brand:"GAMJEE ROLL 10CM *3MT",form:"other",dose:"",search:"GAMJEE ROLL 10CM *3MT"},{raw:"SURGEON GOWN",brand:"SURGEON GOWN",form:"other",dose:"",search:"SURGEON GOWN"},{raw:"INJ CANSHIELD 50MG",brand:"CANSHIELD 50MG",form:"injection",dose:"50MG",search:"CANSHIELD 50MG"},{raw:"LIVSOURCE 450GM",brand:"LIVSOURCE 450GM",form:"other",dose:"450GM",search:"LIVSOURCE 450GM"},{raw:"INJ FLUCOX",brand:"FLUCOX",form:"injection",dose:"",search:"FLUCOX"},{raw:"HAEMODIALYSIS KIT TRIPLE LUMEN",brand:"HAEMODIALYSIS KIT TRIPLE LUMEN",form:"other",dose:"",search:"HAEMODIALYSIS KIT TRIPLE LUMEN"},{raw:"BUVALOR 5MG PATCH",brand:"BUVALOR 5MG PATCH",form:"other",dose:"5MG",search:"BUVALOR 5MG PATCH"},{raw:"INJ PAMORELIN LA 11.25MG",brand:"PAMORELIN LA 11.25MG",form:"injection",dose:"11.25MG",search:"PAMORELIN LA 11 25MG"},{raw:"INJ POLY-B",brand:"POLY-B",form:"injection",dose:"",search:"POLY B"},{raw:"CLONOTRIL 0.5 TAB 1*15",brand:"CLONOTRIL 0.5 TAB",form:"tablet",dose:"",search:"CLONOTRIL 0 5 TAB"},{raw:"SURGICAL GLOVES 6.5",brand:"SURGICAL GLOVES 6.5",form:"other",dose:"",search:"SURGICAL GLOVES 6 5"},{raw:"VENTILATOR CIRCUIT WTR",brand:"VENTILATOR CIRCUIT WTR",form:"other",dose:"",search:"VENTILATOR CIRCUIT WTR"},{raw:"INJ JUSTIN",brand:"JUSTIN",form:"injection",dose:"",search:"JUSTIN"},{raw:"DIAPER PANT AD CL(XL)",brand:"DIAPER PANT AD CL(XL)",form:"other",dose:"",search:"DIAPER PANT AD CL(XL)"},{raw:"INJ NEOMIT",brand:"NEOMIT",form:"injection",dose:"",search:"NEOMIT"},{raw:"ROSUVAS CV 20MG/75MG TABLET 1*10",brand:"ROSUVAS CV 20MG/75MG TABLET",form:"other",dose:"20MG",search:"ROSUVAS CV 20MG/75MG TABLET"},{raw:"NICOTEX PATCH 14MG/24HR",brand:"NICOTEX PATCH 14MG/24HR",form:"other",dose:"14MG",search:"NICOTEX PATCH 14MG/24HR"},{raw:"TRESIBA PENFIL 3ML",brand:"TRESIBA PENFIL 3ML",form:"other",dose:"3ML",search:"TRESIBA PENFIL 3ML"},{raw:"REGEN D GEL 15GM",brand:"REGEN D GEL 15GM",form:"gel",dose:"15GM",search:"REGEN D GEL 15GM"},{raw:"MINIPRESS XL 5MGX30-B-10",brand:"MINIPRESS XL 5MGX30-B-10",form:"other",dose:"5MG",search:"MINIPRESS XL 5MGX30 B 10"},{raw:"INJ QVASP",brand:"QVASP",form:"injection",dose:"",search:"QVASP"},{raw:"URETHRAL CATH R-90",brand:"URETHRAL CATH R-90",form:"other",dose:"",search:"URETHRAL CATH R 90"},{raw:"PLASMAYTE A 500ML",brand:"PLASMAYTE A 500ML",form:"other",dose:"500ML",search:"PLASMAYTE A 500ML"},{raw:"METSMALL 500 TAB",brand:"METSMALL 500 TAB",form:"tablet",dose:"",search:"METSMALL 500 TAB"},{raw:"SCROTAL SUPPORT (M)",brand:"SCROTAL SUPPORT (M)",form:"other",dose:"",search:"SCROTAL SUPPORT (M)"},{raw:"TAB ROZUCOR 20",brand:"ROZUCOR 20",form:"tablet",dose:"",search:"ROZUCOR 20"},{raw:"INJ WEGOVY FLEX TOUCH 0.25MG",brand:"WEGOVY FLEX TOUCH 0.25MG",form:"injection",dose:"0.25MG",search:"WEGOVY FLEX TOUCH 0 25MG"},{raw:"INJ WEGOVY FLEX TOUCH 0.5MG",brand:"WEGOVY FLEX TOUCH 0.5MG",form:"injection",dose:"0.5MG",search:"WEGOVY FLEX TOUCH 0 5MG"},{raw:"ECONORM SACHET",brand:"ECONORM SACHET",form:"powder",dose:"",search:"ECONORM SACHET"},{raw:"SYRUP CREMAFFIN",brand:"SYRUP CREMAFFIN",form:"syrup",dose:"",search:"SYRUP CREMAFFIN"},{raw:"SYRUP DUPHALAC 150ML",brand:"SYRUP DUPHALAC 150ML",form:"syrup",dose:"150ML",search:"SYRUP DUPHALAC 150ML"},{raw:"INSUGEN 30/70 REFIL",brand:"INSUGEN 30/70 REFIL",form:"other",dose:"",search:"INSUGEN 30/70 REFIL"},{raw:"POVIDINE IODINE SOLU.10%",brand:"POVIDINE IODINE SOLU.10%",form:"other",dose:"10%",search:"POVIDINE IODINE SOLU 10%"},{raw:"TAB CIPLAR LA 20MG",brand:"CIPLAR LA 20MG",form:"tablet",dose:"20MG",search:"CIPLAR LA 20MG"},{raw:"BI-LATERAL KNEE DRAPE SHEET",brand:"BI-LATERAL KNEE DRAPE SHEET",form:"other",dose:"",search:"BI LATERAL KNEE DRAPE SHEET"},{raw:"EXERCISING BALL",brand:"EXERCISING BALL",form:"other",dose:"",search:"EXERCISING BALL"},{raw:"GUEDEL AIRWAY -4",brand:"GUEDEL AIRWAY -4",form:"other",dose:"",search:"GUEDEL AIRWAY  4"},{raw:"NEL CATH FG 14",brand:"NEL CATH FG 14",form:"other",dose:"",search:"NEL CATH FG 14"},{raw:"ZIG ZAG COTTON 500GM",brand:"ZIG ZAG COTTON 500GM",form:"other",dose:"500GM",search:"ZIG ZAG COTTON 500GM"},{raw:"SYNOPAD 10CM*10CM",brand:"SYNOPAD 10CM*10CM",form:"other",dose:"",search:"SYNOPAD 10CM*10CM"},{raw:"SYNOPAD 10CM*20CM",brand:"SYNOPAD 10CM*20CM",form:"other",dose:"",search:"SYNOPAD 10CM*20CM"},{raw:"TUR SET",brand:"TUR SET",form:"other",dose:"",search:"TUR SET"},{raw:"POVI IODINE SCRUB 7.5% 500ML",brand:"POVI IODINE SCRUB 7.5% 500ML",form:"other",dose:"7.5%",search:"POVI IODINE SCRUB 7 5% 500ML"},{raw:"TAB MEGANEURON",brand:"MEGANEURON",form:"tablet",dose:"",search:"MEGANEURON"},{raw:"INJ PURECEF S 1.5GM",brand:"PURECEF S 1.5GM",form:"injection",dose:"1.5GM",search:"PURECEF S 1 5GM"},{raw:"SN 5036 TRUSILK 2-0 RC",brand:"SN 5036 TRUSILK 2-0 RC",form:"other",dose:"",search:"SN 5036 TRUSILK 2 0 RC"},{raw:"SN 4242 TRUGUT 0 RB",brand:"SN 4242 TRUGUT 0 RB",form:"other",dose:"",search:"SN 4242 TRUGUT 0 RB"},{raw:"RESOURCE HIPRO VANILLA 400GM",brand:"RESOURCE HIPRO VANILLA 400GM",form:"other",dose:"400GM",search:"RESOURCE HIPRO VANILLA 400GM"},{raw:"INJ LOX 2% ADRENALINE",brand:"LOX 2% ADRENALINE",form:"injection",dose:"2%",search:"LOX 2% ADRENALINE"},{raw:"ENSURE DIABETIC CHOCLATE 375GM",brand:"ENSURE DIABETIC CHOCLATE 375GM",form:"other",dose:"375GM",search:"ENSURE DIABETIC CHOCLATE 375GM"},{raw:"INJ MOUNJARO KWIKPEN 5MG",brand:"MOUNJARO KWIKPEN 5MG",form:"injection",dose:"5MG",search:"MOUNJARO KWIKPEN 5MG"},{raw:"TAB DILZEM CD 90",brand:"DILZEM CD 90",form:"tablet",dose:"",search:"DILZEM CD 90"},{raw:"TAB VERQUVO 2.5MG",brand:"VERQUVO 2.5MG",form:"tablet",dose:"2.5MG",search:"VERQUVO 2 5MG"},{raw:"SYRUP CREMAFFIN PLUS 225ML",brand:"SYRUP CREMAFFIN PLUS 225ML",form:"syrup",dose:"225ML",search:"SYRUP CREMAFFIN PLUS 225ML"},{raw:"INJ PROMIPEN",brand:"PROMIPEN",form:"injection",dose:"",search:"PROMIPEN"},{raw:"INJ EPILEVEM",brand:"EPILEVEM",form:"injection",dose:"",search:"EPILEVEM"},{raw:"TAB MIDORISE 2.5",brand:"MIDORISE 2.5",form:"tablet",dose:"",search:"MIDORISE 2 5"},{raw:"INJ VPRESS 20U/ML",brand:"VPRESS 20U/ML",form:"injection",dose:"",search:"VPRESS 20U/ML"},{raw:"POUCH ARM S.TROP (M)",brand:"POUCH ARM S.TROP (M)",form:"other",dose:"",search:"POUCH ARM S TROP (M)"},{raw:"GAMJEE ROLL 3M*15CM",brand:"GAMJEE ROLL 3M*15CM",form:"other",dose:"",search:"GAMJEE ROLL 3M*15CM"},{raw:"TAB CILACAR T",brand:"CILACAR T",form:"tablet",dose:"",search:"CILACAR T"},{raw:"TAB CILACAR TM 50MG",brand:"CILACAR TM 50MG",form:"tablet",dose:"50MG",search:"CILACAR TM 50MG"},{raw:"INJ QUCORT 100MG",brand:"QUCORT 100MG",form:"injection",dose:"100MG",search:"QUCORT 100MG"},{raw:"SYRUP ZINCOVIT 200ML",brand:"SYRUP ZINCOVIT 200ML",form:"syrup",dose:"200ML",search:"SYRUP ZINCOVIT 200ML"},{raw:"DISPOSABLE SYRING 20CC",brand:"DISPOSABLE SYRING 20CC",form:"other",dose:"",search:"DISPOSABLE SYRING 20CC"},{raw:"TAB ZOLEFRESH 5MG",brand:"ZOLEFRESH 5MG",form:"tablet",dose:"5MG",search:"ZOLEFRESH 5MG"},{raw:"CIPCAL D3 SACHET ",brand:"CIPCAL D3 SACHET",form:"powder",dose:"",search:"CIPCAL D3 SACHET"},{raw:"INJ PANTODIL",brand:"PANTODIL",form:"injection",dose:"",search:"PANTODIL"},{raw:"INJ LEVOFLOX",brand:"LEVOFLOX",form:"injection",dose:"",search:"LEVOFLOX"},{raw:"KETRIPLIN CREAM",brand:"KETRIPLIN CREAM",form:"cream",dose:"",search:"KETRIPLIN CREAM"},{raw:"TAB BIO D3 PLUS",brand:"BIO D3 PLUS",form:"tablet",dose:"",search:"BIO D3 PLUS"},{raw:"LOOZ ENEMA 275ML",brand:"LOOZ ENEMA 275ML",form:"other",dose:"275ML",search:"LOOZ ENEMA 275ML"},{raw:"POUCH ARM S.TROP (XL)",brand:"POUCH ARM S.TROP (XL)",form:"other",dose:"",search:"POUCH ARM S TROP (XL)"},{raw:"KNEE IMMOBILIZER (XL)",brand:"KNEE IMMOBILIZER (XL)",form:"other",dose:"",search:"KNEE IMMOBILIZER (XL)"},{raw:"KNEE IMMOBILIZER (XXL)",brand:"KNEE IMMOBILIZER (XXL)",form:"other",dose:"",search:"KNEE IMMOBILIZER (XXL)"},{raw:"SKIN TRACTION SET PUFF",brand:"SKIN TRACTION SET PUFF",form:"other",dose:"",search:"SKIN TRACTION SET PUFF"},{raw:"OC OSTEOSTITCH ALL INSIDE MENISCAL REPAIR SYSTEM",brand:"OC OSTEOSTITCH ALL INSIDE MENISCAL REPAIR SYSTEM",form:"other",dose:"",search:"OC OSTEOSTITCH ALL INSIDE MENISCAL REPAIR SYSTEM"},{raw:"LIGHTWAVE SUCTION ABLATOR(RFA)",brand:"LIGHTWAVE SUCTION ABLATOR(RFA)",form:"other",dose:"",search:"LIGHTWAVE SUCTION ABLATOR(RFA)"},{raw:"HINEX HIGH PROTEIN 400GM JAR",brand:"HINEX HIGH PROTEIN 400GM JAR",form:"other",dose:"400GM",search:"HINEX HIGH PROTEIN 400GM JAR"},{raw:"PRIMAPORE 8.3CM*6CM",brand:"PRIMAPORE 8.3CM*6CM",form:"other",dose:"",search:"PRIMAPORE 8 3CM*6CM"},{raw:"TAB MONTAIR AB 200",brand:"MONTAIR AB 200",form:"tablet",dose:"",search:"MONTAIR AB 200"},{raw:"FIASP FLEXTOUCH PEN 100/ML",brand:"FIASP FLEXTOUCH PEN 100/ML",form:"other",dose:"",search:"FIASP FLEXTOUCH PEN 100/ML"},{raw:"TAB DILZEM CD 90MG",brand:"DILZEM CD 90MG",form:"tablet",dose:"90MG",search:"DILZEM CD 90MG"},{raw:"MQM1B MEDSURG MEN-S",brand:"MQM1B MEDSURG MEN-S",form:"other",dose:"",search:"MQM1B MEDSURG MEN S"},{raw:"INJ EMESET 4ML",brand:"EMESET 4ML",form:"injection",dose:"4ML",search:"EMESET 4ML"},{raw:"INJ ONDEE",brand:"ONDEE",form:"injection",dose:"",search:"ONDEE"},{raw:"ANTHEM FEMORAL PS COCCR SIZE 4 LEFT N",brand:"ANTHEM FEMORAL PS COCCR SIZE 4 LEFT N",form:"other",dose:"",search:"ANTHEM FEMORAL PS COCCR SIZE 4 LEFT N"},{raw:"GNS II CMT TIB SIZE 2 LEFT",brand:"GNS II CMT TIB SIZE 2 LEFT",form:"other",dose:"",search:"GNS II CMT TIB SIZE 2 LEFT"},{raw:"PS HI-FLEX XLPE INSERT SZ 1-2 13MM",brand:"PS HI-FLEX XLPE INSERT SZ 1-2 13MM",form:"other",dose:"",search:"PS HI FLEX XLPE INSERT SZ 1 2 13MM"},{raw:"ANTHEM FEMORAL PS COCR SIZE 4 RIGHT N",brand:"ANTHEM FEMORAL PS COCR SIZE 4 RIGHT N",form:"other",dose:"",search:"ANTHEM FEMORAL PS COCR SIZE 4 RIGHT N"},{raw:"GNS II CMT TIB SIZE 2 RIGHT",brand:"GNS II CMT TIB SIZE 2 RIGHT",form:"other",dose:"",search:"GNS II CMT TIB SIZE 2 RIGHT"},{raw:"PALACOS R +G BONE CEMENT 40 GM",brand:"PALACOS R +G BONE CEMENT 40 GM",form:"other",dose:"40 GM",search:"PALACOS R +G BONE CEMENT 40 GM"},{raw:"STRYKER BLADE",brand:"STRYKER BLADE",form:"other",dose:"",search:"STRYKER BLADE"},{raw:"TAB OSTEOFOS 70MG",brand:"OSTEOFOS 70MG",form:"tablet",dose:"70MG",search:"OSTEOFOS 70MG"},{raw:'MICROPORE 3"',brand:'MICROPORE 3"',form:"other",dose:"",search:'MICROPORE 3"'},{raw:"PRIMAPORE 20CM*10CM",brand:"PRIMAPORE 20CM*10CM",form:"other",dose:"",search:"PRIMAPORE 20CM*10CM"},{raw:"TAB BRILINTA 90",brand:"BRILINTA 90",form:"tablet",dose:"",search:"BRILINTA 90"},{raw:"INJ IROHIGH 1G",brand:"IROHIGH 1G",form:"injection",dose:"",search:"IROHIGH 1G"},{raw:"LULIFIN CREAM 30GM",brand:"LULIFIN CREAM 30GM",form:"cream",dose:"30GM",search:"LULIFIN CREAM 30GM"},{raw:"TAB EUTHROX 125MCG",brand:"EUTHROX 125MCG",form:"tablet",dose:"125MCG",search:"EUTHROX 125MCG"}],iS=oS.filter(e=>["tablet","capsule","injection","syrup","cream","gel","drops","inhaler","ointment","suspension","powder","lotion"].includes(e.form)).map(e=>({raw:e.raw,brand:e.brand,form:e.form,dose:e.dose,tokens:af(e.brand).split(/\s+/),norm:af(e.brand)}));function af(e){return(e||"").toUpperCase().replace(/[^A-Z0-9\s.]/g," ").replace(/\bTAB\b|\bCAP\b|\bINJ\b|\bSYP\b/g,"").replace(/\s+/g," ").trim()}function Ga(e,n){const o=e.length,i=n.length;if(o===0)return i;if(i===0)return o;const a=Array.from({length:o+1},(l,p)=>[p]);for(let l=1;l<=i;l++)a[0][l]=l;for(let l=1;l<=o;l++)for(let p=1;p<=i;p++)a[l][p]=Math.min(a[l-1][p]+1,a[l][p-1]+1,a[l-1][p-1]+(e[l-1]===n[p-1]?0:1));return a[o][i]}function sS(e,n){const o=af(e),i=o.split(/\s+/);if(n.norm===o)return 100;if(n.tokens[0]===i[0]){const g=Ga(o,n.norm),x=Math.max(o.length,n.norm.length);return(x-g)/x*100+20}const a=n.tokens.filter(g=>g.length>2&&i.some(x=>x===g||Ga(x,g)<=1)).length;if(a>0){const g=Ga(o,n.norm),x=Math.max(o.length,n.norm.length);return(x-g)/x*100+a*10}const l=Ga(o,n.norm),p=Math.max(o.length,n.norm.length);return(p-l)/p*100}function Wm(e){if(!e||e.length<2)return null;let n=0,o=null;for(const i of iS){const a=sS(e,i);a>n&&(n=a,o=i)}return n>60&&o?{matched:o.raw,brand:o.brand,form:o.form,dose:o.dose,confidence:Math.round(n)}:null}function vg(e){if(!e)return e;const n={...e};return Array.isArray(n.previous_medications)&&(n.previous_medications=n.previous_medications.map(o=>{const i=Wm(o.name);return i&&i.confidence>65?{...o,name:i.brand,_matched:i.matched,_confidence:i.confidence}:o})),n}function Lg(e){if(!e)return e;const n={...e};return Array.isArray(n.medications_confirmed)&&(n.medications_confirmed=n.medications_confirmed.map(o=>{const i=Wm(o.name);return i&&i.confidence>65?{...o,name:i.brand,_matched:i.matched,_confidence:i.confidence}:o})),n}const vo={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},ie=window.location.origin;async function Hm(e,n,o){var A,G,D,b,U;const i=o==="multi"?"en":o,l="HbA1c:2,eGFR:2,creatinine:2,TSH:2,LDL:2,HDL:2,triglycerides:2,metformin:2,insulin:2,thyronorm:2,dianorm:1,glimepiride:1,telmisartan:1,amlodipine:1,rosuvastatin:1,atorvastatin:1,dapagliflozin:1,empagliflozin:1,sitagliptin:1,vildagliptin:1,proteinuria:1,nephropathy:1,retinopathy:1,neuropathy:1,CABG:1,dyslipidemia:1,hypothyroidism:1,ecosprin:1,concor:1,dytor:1,atchol:1,telma:1,amlong:1,cetanil:1,ciplar:1,lantus:1,tresiba:1,novorapid:1,humalog:1,jardiance:1,forxiga:1,shelcal:1,euthrox:1,glimy:1,mixtard:1".split(",").map(N=>`keywords=${encodeURIComponent(N)}`).join("&"),p=`https://api.deepgram.com/v1/listen?model=nova-2&language=${i}&smart_format=true&punctuate=true&paragraphs=true&${l}`,g=await fetch(p,{method:"POST",headers:{Authorization:`Token ${n}`,"Content-Type":e.type||"audio/webm"},body:e});if(!g.ok)throw new Error(`Transcription error ${g.status}: ${(await g.text().catch(()=>"")).slice(0,120)}`);return((U=(b=(D=(G=(A=(await g.json()).results)==null?void 0:A.channels)==null?void 0:G[0])==null?void 0:D.alternatives)==null?void 0:b[0])==null?void 0:U.transcript)||""}async function Fm(e,n,o){const i=o==="hi"?"hi":"en",a=new FormData;a.append("file",e,"audio.webm"),a.append("model","whisper-1"),a.append("language",i),a.append("prompt","Medical consultation in India. Terms: HbA1c, eGFR, creatinine, TSH, LDL, HDL, metformin, insulin, telmisartan, amlodipine, rosuvastatin, dapagliflozin, empagliflozin, thyronorm, dianorm, glimepiride, canagliflozin, proteinuria, nephropathy, retinopathy, CABG, dyslipidemia, hypothyroidism. Patient names in Hindi may be spoken.");const l=await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${n}`},body:a});if(!l.ok)throw new Error(`Whisper error ${l.status}: ${(await l.text().catch(()=>"")).slice(0,120)}`);return(await l.json()).text||""}const Pl="Thyronorm,Euthrox,Euthyrox,Telma,Telma AM,Telma H,Telma CT,Telma Beta,Concor,Concor AM,Concor T,Ecosprin AV,Ecosprin Gold,Atchol,Atchol F,Dytor,Dytor Plus,Amlong,Cetanil,Cetanil M,Ciplar LA,Glimy,Rosuvas CV,Dolo,Mixtard,Huminsulin,Lantus,Tresiba,Novorapid,Humalog,Clopitab,Dianorm,Glycomet,Amaryl,Jalra,Galvus,Forxiga,Jardiance,Pan D,Razo D,Shelcal,Calnex,Uprise D3,Stamlo,Cardivas,Atorva,Rozavel,Arkamin,Prazopress,Minipress,Lasix,Aldactone,Eltroxin,Thyrox,Cilacar,Amlokind,Telmikind,Metapure,Obimet,Gluconorm",$m={diabetes:{patterns:/glycomet|metformin|glizid|gliclazide|glimepiride|glimy|amaryl|galvus|vildagliptin|jalra|sitagliptin|forxiga|dapagliflozin|jardiance|empagliflozin|dianorm|gluconorm|cetanil|mixtard|huminsulin|lantus|tresiba|novorapid|humalog|insulin|ozempic|rybelsus|semaglutide|liraglutide|reclimet|istavel/i,biomarkers:["hba1c","fpg"]},weight:{patterns:/forxiga|dapagliflozin|jardiance|empagliflozin|ozempic|rybelsus|semaglutide|liraglutide|trulicity|dulaglutide|victoza|saxenda|mounjaro|tirzepatide|metformin|glycomet|reclimet/i,biomarkers:["weight"]},bp:{patterns:/telma|telmisartan|amlong|amlodipine|concor|bisoprolol|stamlo|cilacar|cilnidipine|arkamin|clonidine|prazopress|minipress|dytor|torsemide|lasix|furosemide|aldactone|metoprolol|atenolol|ramipril|enalapril|losartan|cardivas|carvedilol|ciplar|propranolol|metosartan/i,biomarkers:["bp"]},lipid:{patterns:/atchol|atorva|atorvastatin|rosuvas|rosuvastatin|rozavel|ecosprin|clopitab|fenofibrate|torglip/i,biomarkers:["ldl","triglycerides","hdl"]},thyroid:{patterns:/thyronorm|eltroxin|thyrox|euthrox|levothyroxine/i,biomarkers:["tsh"]},kidney:{patterns:/forxiga|dapagliflozin|jardiance|empagliflozin|telma|telmisartan|ramipril|enalapril|losartan/i,biomarkers:["egfr","creatinine","uacr"]}};function aS(e,n){const o=[];for(const[i,a]of Object.entries($m))a.biomarkers.includes(e)&&n.forEach(l=>{const p=(l.pharmacy_match||l.name||l||"").toString();a.patterns.test(p)&&o.push(p)});return[...new Set(o)]}const lS=`You are a clinical documentation assistant for Gini Advanced Care Hospital, Mohali.
Structure the MO's verbal summary into JSON. Output ONLY valid JSON. No backticks.

{"diagnoses":[{"id":"hypo","label":"Hypothyroidism (Since 2000)","status":"Controlled"}],"chief_complaints":["Tingling in feet for 3 months","Fatigue","Increased thirst"],"complications":[{"name":"Nephropathy","status":"+","detail":"eGFR 29, CKD Stage 4","severity":"high"}],"history":{"family":"Father CAD post-CABG, Mother DM","past_medical_surgical":"NIL","personal":"Non-smoker, no alcohol","covid":"No exposure","vaccination":"Completed"},"previous_medications":[{"name":"THYRONORM 88","composition":"Levothyroxine 88mcg","dose":"88mcg","frequency":"OD","timing":"Empty stomach morning"}],"investigations":[{"test":"TSH","value":7.2,"unit":"mIU/L","flag":"HIGH","critical":false,"ref":"0.4-4.0"},{"test":"HbA1c","value":6.0,"unit":"%","flag":null,"critical":false,"ref":"<6.5"}],"missing_investigations":["HDL","Total Cholesterol"]}

RULES:
- IDs: dm2,htn,cad,ckd,hypo,obesity,dyslipidemia
- chief_complaints: Extract ALL symptoms patient reports (tingling, fatigue, breathlessness, chest pain, frequent urination, blurry vision, weight gain, etc). Array of strings. MUST be filled  at least 1 complaint.
- Status MUST be exactly one of: "Controlled", "Uncontrolled", "New". NO other values like "Active", "Present", "Suboptimal". If newly diagnosed use "New". If on treatment but not at target use "Uncontrolled". If stable/at target use "Controlled".
- If BMI>=25 or weight concern mentioned, ALWAYS add obesity diagnosis with id:"obesity"
- flag: "HIGH"/"LOW"/null. critical:true ONLY if dangerous (HbA1c>10, eGFR<30, Cr>2)
- Include ALL investigations mentioned with values, units, flags
- Include vital signs as investigations if mentioned (BP, Pulse, Weight, BMI)
- Indian brand names: identify composition
- MEDICINE NAME MATCHING: Use EXACT brand names from Gini pharmacy: ${Pl}. When doctor says a medicine name, match to the closest brand. E.g. "thyro norm 88""THYRONORM 88MCG", "telma 40""TELMA 40", "ecosprin gold""ECOSPRIN GOLD", "atchol 10""ATCHOL 10", "concor am""CONCOR AM", "dytor 10""DYTOR 10"
- Keep label SHORT (max 8 words)
- complications severity: "high" if active/dangerous, "low" if stable`,dS=`Extract clinical decisions from consultant's verbal notes. Output ONLY valid JSON. No backticks.
Hindi: "uss ke baad"=after that, "phor hum"=then we, "karenge"=will do, "dena hai"=give, "band karo"=stop, "badhao"=increase, "pe focus karenge"=will focus on

{"assessment_summary":"Patient-friendly 1-2 line summary of what's happening and what we're doing","key_issues":["Poor glycemic control - HbA1c 7.5","Blood pressure control needed","Weight management"],"diet_lifestyle":[{"advice":"Calorie-restricted diet","detail":"Focus on complex carbs, avoid sugar","category":"Diet","helps":["dm2","obesity"]},{"advice":"Walking 10,000 steps daily","detail":"Start gradual, increase weekly","category":"Exercise","helps":["dm2","htn"]}],"medications_confirmed":[{"name":"TAB METFORMIN 500","composition":"Metformin 500mg","dose":"500mg","frequency":"OD to BD (titrate)","timing":"After meals","route":"Oral","forDiagnosis":["dm2"],"isNew":true}],"medications_needs_clarification":[{"what_consultant_said":"SGLT2 inhibitor","drug_class":"SGLT2 inhibitor","missing":["brand_name"],"suggested_options":["Dapagliflozin 10mg","Empagliflozin 25mg"],"forDiagnosis":["dm2"],"default_timing":"Before breakfast","default_dose":"10mg"}],"monitoring":["SMBG daily fasting"],"investigations_to_order":["TFT","UACR"],"follow_up":{"duration":"6 weeks","tests_to_bring":["HbA1c","RFT","Lipid profile"]},"future_plan":[{"condition":"If weight not reducing in 6 weeks","action":"Consider GLP-1 RA"}],"goals":[{"marker":"HbA1c","current":"7.5%","target":"<6.5%","timeline":"3 months","priority":"critical"},{"marker":"BP","current":"149/85","target":"<130/80","timeline":"4 weeks","priority":"high"},{"marker":"Weight","current":"85kg","target":"80kg","timeline":"6 weeks","priority":"high"}],"self_monitoring":[{"title":"Blood Sugar Monitoring","instructions":["Check fasting sugar daily morning","Check post-meal sugar 2hrs after lunch twice a week","Maintain diary with date, time, value"],"targets":"Fasting 90-130 mg/dL, Post-meal <180 mg/dL","alert":"If sugar <70: eat 3 glucose tablets IMMEDIATELY, recheck in 15 min"}]}

CRITICAL MEDICATION RULES:
1. For EVERY medication, ALWAYS fill timing:
   - SGLT2i (dapagliflozin/empagliflozin): "Before breakfast"
   - Metformin: "After meals" 
   - Sulfonylureas (glimepiride/gliclazide): "Before breakfast"
   - Statins (atorvastatin/rosuvastatin): "At bedtime"
   - Thyroid (levothyroxine): "Empty stomach, 30min before breakfast"
   - ACE/ARB (telmisartan/losartan): "Morning" or "Morning + Evening"
   - Insulin: "Before meals" or "At bedtime" (specify which)
   - Aspirin: "After lunch"
2. If timing not mentioned explicitly, INFER from drug class. NEVER leave timing empty.
3. If dose range given ("500mg to 1g"), put full range in dose field
4. For needs_clarification items, ALWAYS include default_timing and default_dose based on drug class
5. Extract ALL medications including those to continue from previous
6. MEDICINE NAME MATCHING: Use EXACT brand names from Gini pharmacy: ${Pl}. Match spoken names: "thyro norm""THYRONORM", "telma am""TELMA AM", "ecosprin""ECOSPRIN AV", "atchol""ATCHOL", "concor""CONCOR", "dytor""DYTOR"
7. If INSULIN is prescribed, ALWAYS add an "insulin_education" section:
   {"insulin_education":{"type":"Basal/Premix/Bolus","device":"Pen/Syringe","injection_sites":["Abdomen","Thigh"],"storage":"Keep in fridge, room temp vial valid 28 days","titration":"Increase by 2 units every 3 days if fasting >130","hypo_management":"If sugar <70: 3 glucose tablets, recheck 15 min","needle_disposal":"Use sharps container, never reuse needles"}}
   Fill titration based on consultant's instructions. If not specified, use standard protocols.`,cS=`Extract ALL test results from this lab report image. Return ONLY valid JSON, no backticks.
{"lab_name":"name of laboratory/hospital that performed tests","report_date":"YYYY-MM-DD","collection_date":"YYYY-MM-DD or null","patient_on_report":{"name":"","age":"","sex":""},"panels":[{"panel_name":"Panel","tests":[{"test_name":"","result":0.0,"result_text":null,"unit":"","flag":null,"ref_range":""}]}]}
CRITICAL RULES:
- report_date: MUST extract the date tests were performed/collected/reported. Look for "Date:", "Report Date:", "Sample Date:", "Collection Date:" in the header. Format as YYYY-MM-DD.
- lab_name: Extract the laboratory/hospital name from the report header.
- test_name: Use SHORT STANDARD names. Map to these canonical names when applicable:
  HbA1c, FBS, PPBS, Fasting Insulin, C-Peptide, Total Cholesterol, LDL, HDL, Triglycerides, VLDL, Non-HDL,
  Creatinine, BUN, Uric Acid, eGFR, UACR, Sodium, Potassium, Calcium, Phosphorus,
  TSH, T3, T4, Free T3, Free T4,
  SGPT (ALT), SGOT (AST), ALP, GGT, Total Bilirubin, Direct Bilirubin, Albumin, Total Protein,
  Hemoglobin, WBC, RBC, Platelets, MCV, MCH, MCHC, ESR, CRP,
  Vitamin D, Vitamin B12, Ferritin, Iron, TIBC, Folate,
  PSA, Urine Routine, Microalbumin
  Example: "Glycated Hemoglobin"  "HbA1c", "Fasting Blood Sugar"  "FBS", "Fasting Plasma Glucose"  "FBS", "Post Prandial Blood Sugar"  "PPBS"
- flag: "H" high, "L" low, null normal.
- ref_range: extract reference range as shown (e.g. "4.0-6.5").
- result: numeric value. result_text: only if result is non-numeric (e.g. "Positive", "Reactive").`,fS=`Extract findings from this medical imaging/diagnostic report. Return ONLY valid JSON, no backticks.
{
  "report_type":"DEXA|X-Ray|MRI|Ultrasound|ABI|VPT|Fundus|ECG|Echo|CT|PFT|NCS",
  "patient_on_report":{"name":"","age":"","sex":""},
  "date":"YYYY-MM-DD or null",
  "findings":[{"parameter":"","value":"","unit":"","interpretation":"Normal|Abnormal|Borderline","detail":""}],
  "impression":"overall summary string",
  "recommendations":"string or null"
}
EXTRACTION RULES BY TYPE:
- DEXA: T-score (spine, hip, femoral neck), BMD values, Z-score  flag osteoporosis/osteopenia
- X-Ray: findings, fractures, alignment, soft tissue, joint space
- MRI: disc bulge/herniation levels, spinal canal stenosis, ligament tears, signal changes
- Ultrasound: organ dimensions, echogenicity, lesions, free fluid, Doppler findings
- ABI (Ankle-Brachial Index): ABI ratio per limb (>0.9 normal, 0.7-0.9 mild, <0.7 severe PAD)
- VPT (Vibration Perception Threshold): voltage readings per site, grade (normal <15V, mild 15-25V, severe >25V)
- Fundus: retinopathy grade (none/mild NPDR/moderate NPDR/severe NPDR/PDR), macular edema, disc changes
- ECG: rate, rhythm, axis, intervals (PR, QRS, QTc), ST changes, conduction blocks
- Echo: EF%, chamber dimensions, valve function, wall motion, diastolic function
- PFT: FEV1, FVC, FEV1/FVC ratio, DLCO
- NCS (Nerve Conduction): nerve velocities, amplitudes, latencies per nerve
Extract ALL numeric values. If value is a range or description, put in "detail" field.`,uS=`You are Gini AI, a clinical decision support assistant for doctors at Gini Advanced Care Hospital, Mohali.
You have access to the patient's data (provided below). Answer questions about:
- This patient's history, medications, labs, trends
- Drug interactions, dosing guidelines, side effects
- Clinical guidelines (ADA, ESC, KDIGO, NICE, ATS) relevant to this patient
- Differential diagnoses based on patient presentation
- Suggested investigations or referrals
RULES:
- Always reference specific patient data when answering
- Cite guideline sources (e.g., "Per ADA 2024 Standards of Care...")
- Flag drug interactions or contraindications proactively
- Use Indian brand names alongside generics
- Be concise but clinically thorough
- If unsure, say so  never fabricate clinical data
- Language: English with Hindi/Punjabi medical terms OK`,pS=`Extract patient info. ONLY valid JSON, no backticks.
{"name":"string or null","age":"number or null","sex":"Male/Female or null","phone":"string or null","fileNo":"string or null","dob":"YYYY-MM-DD or null","abhaId":"string or null","aadhaar":"string or null","healthId":"string or null","govtId":"string or null","govtIdType":"Aadhaar/Passport/DrivingLicense or null"}
IMPORTANT: Always return name in ENGLISH/ROMAN script, never Hindi/Devanagari. Transliterate if needed: " ""Himmat Singh", " ""Kamla Devi".
Parse dates: "1949 august 1"="1949-08-01". "file p_100"fileNo:"P_100". Calculate age from DOB.
ABHA ID format: XX-XXXX-XXXX-XXXX. Aadhaar: 12-digit number.`,hS=`You are a medical record parser. Extract structured data from this old prescription/consultation note.
Return ONLY valid JSON, no backticks.
{
  "visit_date":"YYYY-MM-DD or null",
  "doctor_name":"string or null",
  "specialty":"string or null",
  "diagnoses":[{"id":"dm2","label":"Type 2 DM (since 2015)","status":"Controlled"}],
  "medications":[{"name":"MEDICINE NAME","dose":"dose","frequency":"OD/BD/TDS","timing":"Morning/Night"}],
  "vitals":{"bp_sys":null,"bp_dia":null,"weight":null,"height":null,"pulse":null},
  "advice":["string"],
  "follow_up":"string or null"
}
RULES:
- Diagnosis IDs: dm2,dm1,htn,cad,ckd,hypo,obesity,dyslipidemia,asthma,copd,pcos,oa,ra,liver,stroke,epilepsy,depression,anxiety,gerd,ibs
- Status: "Controlled","Uncontrolled","New" based on context
- MEDICINE: Use EXACT brand names from prescription, capitalize properly
- Extract ALL medicines even if partially readable
- Parse Hindi/Punjabi terms: "sugar ki dawai"=diabetes medication, "BP ki goli"=antihypertensive
- If date not found, return null
- Name must be in English/Roman script`,gS=`Extract ALL test results from this medical report. Return ONLY valid JSON, no backticks.
{
  "report_type":"Blood Test|Thyroid Panel|Lipid Profile|Kidney Function|Liver Function|HbA1c|CBC|Urine|Other",
  "lab_name":"string or null",
  "report_date":"YYYY-MM-DD or null",
  "patient_on_report":{"name":"","age":"","sex":""},
  "tests":[{"test_name":"HbA1c","result":8.2,"unit":"%","flag":"HIGH","ref_range":"4.0-6.5","critical":false}]
}
RULES:
- flag: "HIGH" if above range, "LOW" if below, null if normal
- critical: true if dangerously out of range (e.g., K+ >6, glucose >400, creatinine >5)
- Include ALL tests found, even basic ones
- Normalize test names: "Glycosylated Haemoglobin""HbA1c", "Serum Creatinine""Creatinine", "TSH (Ultrasensitive)""TSH"
- result must be numeric where possible
- If text result like "Positive"/"Negative", put in result_text field and set result to null`,mS=`You are a clinical documentation assistant. Extract patient data from this consultation dictation.
Hindi: "patient ka naam"=name, "sugar"=diabetes, "BP"=blood pressure, "dawai"=medicine
Output ONLY valid JSON, no backticks.

{"patient":{"name":"string","age":"number","sex":"Male/Female","phone":"string or null","fileNo":"string or null","dob":"YYYY-MM-DD or null"},"vitals":{"bp_sys":"number or null","bp_dia":"number or null","pulse":"number or null","spo2":"number or null","weight":"number or null","height":"number or null"},"mo":{"diagnoses":[{"id":"dm2","label":"Type 2 DM (10 years)","status":"Uncontrolled"}],"complications":[{"name":"string","status":"Active/Resolved","detail":"string"}],"history":{"family":"","past_medical_surgical":"","personal":""},"previous_medications":[{"name":"METFORMIN 500MG","composition":"Metformin 500mg","dose":"500mg","frequency":"BD","timing":"After meals"}],"investigations":[{"test":"HbA1c","value":8.5,"unit":"%","flag":"HIGH","critical":false,"ref":"<6.5"}],"chief_complaints":["symptom1","symptom2"],"compliance":"Good/Partial/Poor  brief note"}}

RULES:
- Diagnosis IDs: dm2,dm1,htn,cad,ckd,hypo,obesity,dyslipidemia,dfu,masld,nephropathy
- Status: "Controlled", "Uncontrolled", or "New" ONLY
- MEDICINE NAMES: Use EXACT Gini pharmacy brands: ${Pl}
- Extract ALL lab values with flags (HIGH/LOW/null)
- Include ALL medications (existing + new)
- Name in English/Roman script only
- chief_complaints: ALL symptoms mentioned`,xS=`You are a clinical treatment plan assistant for Gini Advanced Care Hospital, India.
From this consultation dictation, generate the treatment plan. Output ONLY valid JSON, no backticks.

{"assessment_summary":"Dear [FirstName]: patient-friendly 2-3 line summary of findings and plan","key_issues":["Issue 1"],"diet_lifestyle":[{"advice":"string","detail":"string","category":"Diet/Exercise/Critical/Sleep","helps":["dm2"]}],"medications_confirmed":[{"name":"BRAND NAME","composition":"Generic","dose":"dose","frequency":"OD/BD/TDS","timing":"Morning/Night","route":"Oral","forDiagnosis":["dm2"],"isNew":false}],"medications_needs_clarification":[],"goals":[{"marker":"HbA1c","current":"8.5%","target":"<7%","timeline":"3 months"}],"follow_up":{"duration":"6 weeks","tests_to_bring":["HbA1c"]},"self_monitoring":[{"title":"Blood Sugar","instructions":["Check fasting daily"],"targets":"Fasting 90-130","alert":"If <70: eat glucose"}],"future_plan":[{"condition":"If HbA1c not below 7","action":"Add GLP-1 RA"}]}

RULES:
- MEDICINE NAMES: Use EXACT Gini pharmacy brands: ${Pl}
- ALL medications: existing (isNew:false) AND new (isNew:true). Fill timing from drug class if not stated
- assessment_summary: patient-friendly, address by first name, cover ALL findings
- diet_lifestyle: 3-5 OBJECTS. categories: Diet/Exercise/Critical/Sleep/Stress
- goals: 2-4 items with current values from labs/vitals
- self_monitoring: 2-4 OBJECTS grouped by what to monitor
- future_plan: OBJECTS with {condition, action}. "If X  Y" format
- follow_up: include duration and tests_to_bring`,bS=`Extract vitals. ONLY valid JSON, no backticks.
{"bp_sys":"number or null","bp_dia":"number or null","pulse":"number or null","temp":"number or null","spo2":"number or null","weight":"number or null","height":"number or null","waist":"number or null","body_fat":"number or null","muscle_mass":"number or null"}
"BP 140 over 90"->bp_sys:140,bp_dia:90. "waist 36 inches"->waist:36. "body fat 28 percent"->body_fat:28. "muscle mass 32 kg"->muscle_mass:32`;async function Lo(e,n){try{const o=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":void 0,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:8e3,messages:[{role:"user",content:`${e}

INPUT:
${n}`}]})});if(!o.ok)return{data:null,error:`API ${o.status}: ${(await o.text().catch(()=>"")).slice(0,120)}`};const i=await o.json();if(i.error)return{data:null,error:i.error.message};const a=(i.content||[]).map(p=>p.text||"").join("");if(!a)return{data:null,error:"Empty response"};let l=a.replace(/```json\s*/g,"").replace(/```\s*/g,"").trim();try{return{data:JSON.parse(l),error:null}}catch{l=l.replace(/,\s*([}\]])/g,"$1").replace(/\n/g," ");const p=g=>{const x=(g.match(/{/g)||[]).length,A=(g.match(/}/g)||[]).length,G=(g.match(/\[/g)||[]).length,D=(g.match(/\]/g)||[]).length;for(let b=0;b<G-D;b++)g+="]";for(let b=0;b<x-A;b++)g+="}";return g};try{return{data:JSON.parse(p(l)),error:null}}catch{for(let g=l.length;g>50;g-=10)try{const x=p(l.slice(0,g).replace(/,\s*$/,""));return{data:JSON.parse(x),error:null}}catch{}return{data:null,error:"Parse failed. Try shorter input."}}}}catch(o){return{data:null,error:o.message}}}async function wg(e,n,o=4e3){try{const i=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":void 0,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-haiku-4-5-20251001",max_tokens:o,messages:[{role:"user",content:`${e}

INPUT:
${n}`}]})});if(!i.ok)return{data:null,error:`API ${i.status}: ${(await i.text().catch(()=>"")).slice(0,120)}`};const a=await i.json();if(a.error)return{data:null,error:a.error.message};const l=(a.content||[]).map(g=>g.text||"").join("");if(!l)return{data:null,error:"Empty response"};let p=l.replace(/```json\s*/g,"").replace(/```\s*/g,"").trim();try{return{data:JSON.parse(p),error:null}}catch{p=p.replace(/,\s*([}\]])/g,"$1").replace(/\n/g," ");const g=x=>{const A=(x.match(/{/g)||[]).length,G=(x.match(/}/g)||[]).length,D=(x.match(/\[/g)||[]).length,b=(x.match(/\]/g)||[]).length;for(let U=0;U<D-b;U++)x+="]";for(let U=0;U<A-G;U++)x+="}";return x};try{return{data:JSON.parse(g(p)),error:null}}catch{for(let x=p.length;x>50;x-=10)try{return{data:JSON.parse(g(p.slice(0,x).replace(/,\s*$/,""))),error:null}}catch{}return{data:null,error:"Parse failed."}}}}catch(i){return{data:null,error:i.message}}}async function dc(e){const n=await new Promise(a=>{const l=new FileReader;l.onload=()=>a(l.result.split(",")[1]),l.readAsDataURL(e)}),o=window.location.origin,i=await fetch(`${o}/api/convert-heic`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64:n})});if(!i.ok){const a=await i.json().catch(()=>({}));throw new Error(a.error||"Server conversion failed")}return await i.json()}function cc(e){var n,o;return((n=e.name)==null?void 0:n.toLowerCase().endsWith(".heic"))||((o=e.name)==null?void 0:o.toLowerCase().endsWith(".heif"))||e.type==="image/heic"||e.type==="image/heif"}async function Pa(e,n){try{const i=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":void 0,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:8e3,messages:[{role:"user",content:[n==="application/pdf"?{type:"document",source:{type:"base64",media_type:"application/pdf",data:e}}:{type:"image",source:{type:"base64",media_type:n,data:e}},{type:"text",text:cS}]}]})});if(!i.ok)return{data:null,error:`API ${i.status}`};const a=await i.json();if(a.error)return{data:null,error:a.error.message};let p=(a.content||[]).map(g=>g.text||"").join("").replace(/```json\s*/g,"").replace(/```\s*/g,"").trim();try{return{data:JSON.parse(p),error:null}}catch{p=p.replace(/,\s*([}\]])/g,"$1");const g=(p.match(/{/g)||[]).length,x=(p.match(/}/g)||[]).length;for(let A=0;A<g-x;A++)p+="}";try{return{data:JSON.parse(p),error:null}}catch{return{data:null,error:"Parse failed"}}}}catch(o){return{data:null,error:o.message}}}async function Da(e,n){try{const i=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":void 0,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:8e3,messages:[{role:"user",content:[n==="application/pdf"?{type:"document",source:{type:"base64",media_type:"application/pdf",data:e}}:{type:"image",source:{type:"base64",media_type:n,data:e}},{type:"text",text:fS}]}]})});if(!i.ok)return{data:null,error:`API ${i.status}`};const a=await i.json();if(a.error)return{data:null,error:a.error.message};let p=(a.content||[]).map(g=>g.text||"").join("").replace(/```json\s*/g,"").replace(/```\s*/g,"").trim();try{return{data:JSON.parse(p),error:null}}catch{p=p.replace(/,\s*([}\]])/g,"$1");const g=(p.match(/{/g)||[]).length,x=(p.match(/}/g)||[]).length;for(let A=0;A<g-x;A++)p+="}";try{return{data:JSON.parse(p),error:null}}catch{return{data:null,error:"Parse failed"}}}}catch(o){return{data:null,error:o.message}}}async function yS(e,n){try{const o=uS+(n?`

PATIENT DATA:
${n}`:`

No patient loaded.`),i=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":void 0,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:4e3,system:o,messages:e})});if(!i.ok)return{text:null,error:`API ${i.status}`};const a=await i.json();return a.error?{text:null,error:a.error.message}:{text:(a.content||[]).map(l=>l.text||"").join(""),error:null}}catch(o){return{text:null,error:o.message}}}const SS=`Fix medical transcription errors in this text. Return ONLY the corrected text, nothing else.
Common fixes needed:
- Drug names: "thyro norm""Thyronorm", "die a norm""Dianorm", "telma""Telma", "ecosprin""Ecosprin", "atchol""Atchol", "concor""Concor", "dytor""Dytor", "gluco""Gluco", "rosu""Rosuvastatin"
- Gini pharmacy brands: Thyronorm,Euthrox,Euthyrox,Telma,Concor,Ecosprin,Atchol,Dytor,Amlong,Cetanil,Ciplar,Glimy,Dolo,Lantus,Tresiba,Novorapid,Humalog,Mixtard,Jardiance,Forxiga,Pan D,Shelcal,Stamlo,Atorva,Rozavel
- Lab tests: "H B A one C"/"hba1c""HbA1c", "e GFR""eGFR", "T S H""TSH", "LDL"/"HDL" keep as-is
- Medical: "die a betis""diabetes", "hyper tension""hypertension", "thyroid ism""thyroidism"
- Numbers: Keep all numbers exactly as spoken
- Hindi words: Keep as-is (don't translate)
- Names: Convert Hindi script to English/Roman: " ""Himmat Singh"
Do NOT add, remove, or rearrange content. Only fix spelling of medical terms.`;async function fc(e){if(!e||e.length<10)return e;try{const n=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":void 0,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-haiku-4-5-20251001",max_tokens:2e3,messages:[{role:"user",content:`${SS}

TEXT:
${e}`}]})});return n.ok&&((await n.json()).content||[]).map(a=>a.text||"").join("").trim()||e}catch{return e}}function Pn({onTranscript:e,dgKey:n,whisperKey:o,label:i,color:a,compact:l}){const[p,g]=S.useState(null),[x,A]=S.useState(""),[G,D]=S.useState(""),[b,U]=S.useState(""),[N,W]=S.useState(null),[F,v]=S.useState(0),[E,L]=S.useState("en"),[B,K]=S.useState(n?"deepgram":"whisper"),[z,q]=S.useState(!0),Z=S.useRef(null),me=S.useRef([]),C=S.useRef(null),Ie=S.useRef(null),ne=S.useRef(null),Oe=S.useRef(null),Wt=S.useRef([]),Tt=S.useRef(""),T=S.useRef(null),ve=S.useRef(null),Y=S.useRef(null),ce=S.useRef(null);S.useEffect(()=>{Y.current=p},[p]);const se=async oe=>B==="whisper"&&o?await Fm(oe,o,E):await Hm(oe,n,E),Se=async()=>{U(""),D(""),A(""),Wt.current=[],Tt.current="";try{const oe=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:16e3}});ve.current=oe;const ut=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm",vt=new MediaRecorder(oe,{mimeType:ut,audioBitsPerSecond:32e3});me.current=[],vt.ondataavailable=ye=>{ye.data.size>0&&me.current.push(ye.data)},Z.current=vt,vt.start(1e3);const qe=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3});T.current=qe;const O=qe.createMediaStreamSource(oe),Q=qe.createScriptProcessor(4096,1,1);ce.current=Q;const ot=`wss://api.deepgram.com/v1/listen?model=nova-2&language=${E==="hi"?"hi":"en"}&smart_format=true&punctuate=true&interim_results=true&encoding=linear16&sample_rate=16000&channels=1`,Xe=new WebSocket(ot,["token",n]);Oe.current=Xe,Xe.onopen=()=>{Q.onaudioprocess=ye=>{if(Xe.readyState===WebSocket.OPEN){const Te=ye.inputBuffer.getChannelData(0),Ke=new Int16Array(Te.length);for(let Be=0;Be<Te.length;Be++)Ke[Be]=Math.max(-32768,Math.min(32767,Math.floor(Te[Be]*32768)));Xe.send(Ke.buffer)}},O.connect(Q),Q.connect(qe.destination)},Xe.onmessage=ye=>{var Te,Ke;try{const Be=JSON.parse(ye.data);if(Be.type==="Results"&&((Ke=(Te=Be.channel)==null?void 0:Te.alternatives)!=null&&Ke[0])){const Lr=Be.channel.alternatives[0].transcript||"";Be.is_final?(Lr&&Wt.current.push(Lr),Tt.current=""):Tt.current=Lr;const Lt=[...Wt.current,Tt.current].filter(Boolean).join(" ");D(Lt)}}catch{}},Xe.onerror=()=>{U("Streaming failed  try Upload instead"),je(),g("recorded")},Xe.onclose=async()=>{var Te,Ke;const ye=Wt.current.filter(Boolean).join(" ");if(ye){((Te=Z.current)==null?void 0:Te.state)!=="inactive"&&((Ke=Z.current)==null||Ke.stop()),await new Promise(vr=>setTimeout(vr,200));const Be=new Blob(me.current,{type:ut});if(C.current=Be,W(URL.createObjectURL(Be)),z){g("cleaning");const vr=await fc(ye);A(vr)}else A(ye);g("done")}else Y.current==="recording"&&(U("No speech detected  try again or speak louder"),g(null))},g("recording"),v(0),Ie.current=setInterval(()=>v(ye=>ye+1),1e3)}catch{U("Mic access denied. Use Upload or paste text.")}},je=()=>{if(ce.current)try{ce.current.disconnect()}catch{}if(T.current)try{T.current.close()}catch{}ve.current&&ve.current.getTracks().forEach(oe=>oe.stop())},Ht=async(oe,ut)=>{try{const vt=oe||await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:16e3}});ut||(ut=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm");const qe=new MediaRecorder(vt,{mimeType:ut,audioBitsPerSecond:32e3});me.current=[],qe.ondataavailable=O=>{O.data.size>0&&me.current.push(O.data)},qe.onstop=async()=>{const O=new Blob(me.current,{type:ut});C.current=O,W(URL.createObjectURL(O)),vt.getTracks().forEach(Q=>Q.stop()),g("transcribing");try{let Q=await se(O);if(!Q)throw new Error("Empty  try again or speak louder");z&&(g("cleaning"),Q=await fc(Q)),A(Q),g("done")}catch(Q){U(Q.message),g("recorded")}},Z.current=qe,qe.start(1e3),oe||(g("recording"),v(0),Ie.current=setInterval(()=>v(O=>O+1),1e3))}catch{U("Mic access denied. Use Upload or paste text.")}},ge=()=>{B==="deepgram"||!o&&n?Se():Ht()},rt=()=>{var oe,ut,vt;clearInterval(Ie.current),je(),((oe=Z.current)==null?void 0:oe.state)!=="inactive"&&((ut=Z.current)==null||ut.stop()),((vt=Oe.current)==null?void 0:vt.readyState)===WebSocket.OPEN&&(Oe.current.send(JSON.stringify({type:"CloseStream"})),setTimeout(()=>{var qe;((qe=Oe.current)==null?void 0:qe.readyState)===WebSocket.OPEN&&Oe.current.close()},500))},Qe=oe=>{const ut=oe.target.files[0];ut&&(C.current=ut,W(URL.createObjectURL(ut)),g("recorded"),U(""))},He=async()=>{if(C.current){g("transcribing"),U("");try{let oe=await se(C.current);if(!oe)throw new Error("Empty  try again or paste manually");z&&(g("cleaning"),oe=await fc(oe)),A(oe),g("done")}catch(oe){U(oe.message),g("recorded")}}},Rt=()=>{var oe;g(null),A(""),D(""),W(null),C.current=null,U(""),v(0),Wt.current=[],Tt.current="",je(),((oe=Oe.current)==null?void 0:oe.readyState)===WebSocket.OPEN&&Oe.current.close()},Rr=oe=>`${Math.floor(oe/60)}:${String(oe%60).padStart(2,"0")}`;return t.jsxs("div",{style:{border:`2px solid ${p==="recording"?"#ef4444":p==="cleaning"?"#f59e0b":"#e2e8f0"}`,borderRadius:8,padding:l?8:12,background:p==="recording"?"#fef2f2":p==="cleaning"?"#fffbeb":"white",marginBottom:8},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[t.jsxs("div",{style:{fontSize:l?11:13,fontWeight:700,color:"#1e293b"},children:[" ",i]}),t.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center"},children:[o&&n&&t.jsx("div",{style:{display:"flex",gap:1,background:"#f1f5f9",borderRadius:4,padding:1},children:[{v:"deepgram",l:"DG"},{v:"whisper",l:"W"}].map(oe=>t.jsx("button",{onClick:()=>K(oe.v),style:{padding:"1px 5px",fontSize:8,fontWeight:700,borderRadius:3,cursor:"pointer",background:B===oe.v?"#1e293b":"transparent",color:B===oe.v?"white":"#94a3b8",border:"none"},children:oe.l},oe.v))}),t.jsx("button",{onClick:()=>q(oe=>!oe),style:{padding:"1px 5px",fontSize:8,fontWeight:700,borderRadius:3,cursor:"pointer",background:z?"#059669":"#f1f5f9",color:z?"white":"#94a3b8",border:"none"},title:"AI cleanup of medical terms",children:"AI"}),t.jsx("div",{style:{display:"flex",gap:1},children:[{v:"en",l:"EN"},{v:"hi",l:"HI"}].map(oe=>t.jsx("button",{onClick:()=>L(oe.v),style:{padding:"1px 5px",fontSize:9,fontWeight:700,borderRadius:3,cursor:"pointer",background:E===oe.v?a:"white",color:E===oe.v?"white":"#94a3b8",border:`1px solid ${E===oe.v?a:"#e2e8f0"}`},children:oe.l},oe.v))})]})]}),!p&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{display:"flex",gap:6},children:[t.jsx("button",{onClick:ge,style:{flex:1,background:"#dc2626",color:"white",border:"none",padding:l?"6px":"10px",borderRadius:6,fontSize:l?11:13,fontWeight:700,cursor:"pointer"},children:" Record"}),t.jsx("button",{onClick:()=>{var oe;return(oe=ne.current)==null?void 0:oe.click()},style:{flex:1,background:a,color:"white",border:"none",padding:l?"6px":"10px",borderRadius:6,fontSize:l?11:13,fontWeight:700,cursor:"pointer"},children:" Upload"}),t.jsx("input",{ref:ne,type:"file",accept:"audio/*,.ogg,.mp3,.wav,.m4a,.webm",onChange:Qe,style:{display:"none"}})]}),t.jsx("textarea",{placeholder:"Or paste transcript here and click outside...",onBlur:oe=>{oe.target.value.trim()&&(A(oe.target.value.trim()),g("done"))},style:{width:"100%",minHeight:l?30:44,marginTop:6,padding:6,border:"1px solid #e2e8f0",borderRadius:4,fontSize:12,fontFamily:"inherit",resize:"vertical",boxSizing:"border-box",color:"#64748b"}})]}),p==="recording"&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[t.jsxs("div",{style:{fontSize:18,fontWeight:800,color:"#dc2626"},children:[t.jsx("span",{style:{display:"inline-block",width:8,height:8,borderRadius:"50%",background:"#dc2626",marginRight:6,animation:"pulse 1s infinite"}}),Rr(F)]}),t.jsx("button",{onClick:rt,style:{background:"#1e293b",color:"white",border:"none",padding:"6px 20px",borderRadius:6,fontSize:12,fontWeight:700,cursor:"pointer"},children:" Stop"})]}),G&&t.jsxs("div",{style:{background:"#fff",border:"1px solid #fecaca",borderRadius:4,padding:8,fontSize:13,lineHeight:1.6,color:"#374151",minHeight:40,maxHeight:150,overflow:"auto"},children:[G,t.jsx("span",{style:{display:"inline-block",width:2,height:14,background:"#dc2626",marginLeft:2,animation:"pulse 0.5s infinite"}})]}),!G&&t.jsx("div",{style:{fontSize:11,color:"#94a3b8",textAlign:"center",padding:6},children:" Listening... speak now"})]}),p==="cleaning"&&t.jsxs("div",{style:{textAlign:"center",padding:10},children:[t.jsx("div",{style:{fontSize:14,animation:"pulse 1s infinite"},children:""}),t.jsx("div",{style:{fontSize:11,color:"#92400e",fontWeight:600},children:"Fixing medical terms..."})]}),p==="recorded"&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[t.jsx("audio",{src:N,controls:!0,style:{flex:1,height:30}}),t.jsx("button",{onClick:Rt,style:{background:"#f1f5f9",border:"1px solid #e2e8f0",padding:"3px 6px",borderRadius:3,fontSize:10,cursor:"pointer"},children:""})]}),t.jsx("button",{onClick:He,style:{width:"100%",background:a,color:"white",border:"none",padding:"8px",borderRadius:6,fontSize:12,fontWeight:700,cursor:"pointer"},children:" Transcribe"})]}),p==="transcribing"&&t.jsxs("div",{style:{textAlign:"center",padding:10},children:[t.jsx("div",{style:{fontSize:18,animation:"pulse 1s infinite"},children:""}),t.jsx("div",{style:{fontSize:11,color:"#475569"},children:"Transcribing..."})]}),p==="done"&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,marginBottom:3},children:[t.jsx("span",{style:{color:"#059669",fontWeight:700,fontSize:11},children:" Ready"}),t.jsx("button",{onClick:Rt,style:{marginLeft:"auto",background:"#f1f5f9",border:"1px solid #e2e8f0",padding:"1px 5px",borderRadius:3,fontSize:9,cursor:"pointer"},children:"Redo"})]}),t.jsx("textarea",{value:x,onChange:oe=>A(oe.target.value),ref:oe=>{oe&&(oe.style.height="auto",oe.style.height=Math.max(100,oe.scrollHeight)+"px")},style:{width:"100%",minHeight:100,padding:8,border:"1px solid #e2e8f0",borderRadius:4,fontSize:13,fontFamily:"inherit",resize:"vertical",lineHeight:1.6,boxSizing:"border-box",overflow:"hidden"}}),t.jsx("button",{onClick:()=>{x&&e(x)},style:{marginTop:3,width:"100%",background:"#059669",color:"white",border:"none",padding:"7px",borderRadius:6,fontSize:12,fontWeight:700,cursor:"pointer"},children:" Use This"})]}),b&&t.jsxs("div",{style:{marginTop:4,background:"#fef2f2",border:"1px solid #fecaca",borderRadius:4,padding:"3px 8px",fontSize:11,color:"#dc2626"},children:[" ",b]})]})}const Ln={dm2:"#dc2626",htn:"#ea580c",cad:"#d97706",ckd:"#7c3aed",hypo:"#2563eb",obesity:"#92400e",dyslipidemia:"#0891b2"},Ym={dm2:"Type 2 Diabetes (DM)",dm1:"Type 1 Diabetes (DM)",htn:"High Blood Pressure (Hypertension)",cad:"Heart Disease (CAD)",ckd:"Kidney Disease (CKD)",hypo:"Thyroid  Low (Hypothyroidism)",obesity:"Weight Management (Obesity)",dyslipidemia:"High Cholesterol (Dyslipidemia)",liver:"Fatty Liver (MASLD/NAFLD)",asthma:"Asthma",copd:"COPD",pcos:"PCOS","overactive-bladder":"Overactive Bladder","diabetic-neuropathy":"Diabetic Neuropathy","diabetic-nephropathy":"Diabetic Nephropathy","diabetic-retinopathy":"Diabetic Retinopathy",osas:"Sleep Apnea (OSAS)",gerd:"Acid Reflux (GERD)",ibs:"IBS",depression:"Depression",anxiety:"Anxiety","subclinical-hypothyroidism":"Subclinical Hypothyroidism",hashimotos:"Hashimoto's Thyroiditis"},Ig=({id:e,friendly:n})=>t.jsx("span",{style:{display:"inline-block",fontSize:9,fontWeight:700,background:(Ln[e]||"#64748b")+"18",color:Ln[e]||"#64748b",border:`1px solid ${Ln[e]||"#64748b"}35`,borderRadius:10,padding:"1px 5px",marginRight:2},children:n?Ym[e]||e:e==null?void 0:e.toUpperCase()}),zr=({msg:e,onDismiss:n})=>e?t.jsxs("div",{style:{marginTop:4,background:"#fef2f2",border:"1px solid #fecaca",borderRadius:6,padding:"6px 10px",fontSize:12,color:"#dc2626"},children:[" ",e," ",t.jsx("button",{onClick:n,style:{marginLeft:6,background:"#dc2626",color:"white",border:"none",padding:"2px 8px",borderRadius:4,fontSize:11,cursor:"pointer"},children:"Dismiss"})]}):null,Jt=({id:e,title:n,color:o,hidden:i,onToggle:a,children:l})=>i?t.jsxs("div",{className:"no-print",style:{marginBottom:4,opacity:.4,display:"flex",alignItems:"center",gap:4,cursor:"pointer"},onClick:a,children:[t.jsx("span",{style:{fontSize:9,color:"#94a3b8"},children:""}),t.jsx("span",{style:{fontSize:10,color:"#94a3b8",textDecoration:"line-through"},children:n})]}):t.jsxs("div",{style:{marginBottom:14,position:"relative"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,borderBottom:`2px solid ${o}`,paddingBottom:3,marginBottom:6},children:[t.jsx("div",{style:{fontSize:12,fontWeight:800,color:o,flex:1},children:n}),t.jsx("button",{className:"no-print",onClick:a,title:"Hide this section",style:{background:"#fee2e2",border:"none",borderRadius:3,padding:"1px 5px",fontSize:9,cursor:"pointer",color:"#dc2626",fontWeight:700},children:""})]}),l]}),an=({value:e,onChange:n,style:o})=>{const[i,a]=S.useState(!1),[l,p]=S.useState(e);return S.useEffect(()=>p(e),[e]),i?t.jsx("input",{value:l,onChange:g=>p(g.target.value),onBlur:()=>{n(l),a(!1)},onKeyDown:g=>{g.key==="Enter"&&(n(l),a(!1))},autoFocus:!0,style:{...o,border:"1px solid #3b82f6",borderRadius:3,padding:"1px 4px",outline:"none",background:"#eff6ff",width:"100%",boxSizing:"border-box"}}):t.jsx("span",{onClick:()=>a(!0),style:{...o,cursor:"pointer",borderBottom:"1px dashed transparent"},className:"editable-hover",children:e})},wo=({onClick:e})=>t.jsx("button",{className:"no-print",onClick:e,title:"Remove",style:{background:"#fee2e2",border:"none",borderRadius:3,padding:"0 4px",fontSize:9,cursor:"pointer",color:"#dc2626",fontWeight:700,lineHeight:"16px"},children:""}),xe=(e,n)=>e&&Array.isArray(e[n])?e[n]:[],ln=e=>typeof e=="string"?e:(e==null?void 0:e.test)||(e==null?void 0:e.name)||(e==null?void 0:e.marker)||JSON.stringify(e);function ES(){var Op,jp,Gp,Pp,Dp,kp,Bp,_p,zp,Up,Wp,Hp,Fp,$p,Yp,Vp,Xp,Kp,Jp,Zp,Qp,qp,eh,th,nh,rh,oh,ih,sh,ah,lh,dh,ch,fh,uh,ph,hh,gh;const[e,n]=S.useState("setup"),[o,i]=S.useState(""),[a,l]=S.useState(""),[p,g]=S.useState(!1),[x,A]=S.useState("Dr. Beant"),[G,D]=S.useState("Dr. Bhansali"),[b,U]=S.useState({name:"",phone:"",dob:"",fileNo:"",age:"",sex:"Male",abhaId:"",aadhaar:"",healthId:"",govtId:"",govtIdType:"",address:""}),[N,W]=S.useState({bp_sys:"",bp_dia:"",pulse:"",temp:"",spo2:"",weight:"",height:"",bmi:"",waist:"",body_fat:"",muscle_mass:""}),[F,v]=S.useState(null),[E,L]=S.useState(null),[B,K]=S.useState(null),[z,q]=S.useState(""),[Z,me]=S.useState(""),[C,Ie]=S.useState(null),[ne,Oe]=S.useState(null),[Wt,Tt]=S.useState(!1),[T,ve]=S.useState(null),[Y,ce]=S.useState(new Set),[se,Se]=S.useState({}),[je,Ht]=S.useState({}),[ge,rt]=S.useState({}),[Qe,He]=S.useState({}),[Rt,Rr]=S.useState(""),[oe,ut]=S.useState(!1),[vt,qe]=S.useState(""),[O,Q]=S.useState([]),[be,ot]=S.useState(""),[Xe,ye]=S.useState(!1),[Te,Ke]=S.useState(""),[Be,vr]=S.useState(""),[Lr,Lt]=S.useState([]),[wr,Ir]=S.useState(null),[ri,no]=S.useState(null),[hs,Dl]=S.useState(!1),[kl,nu]=S.useState(!1),[Yn,Bl]=S.useState(""),[oi,ru]=S.useState(""),[gs,ou]=S.useState([]),[ms,_l]=S.useState(!1),[xs,iu]=S.useState(null),[Vm,su]=S.useState(!1),[Vn,au]=S.useState(null),[zl,lu]=S.useState(null),[Xm,du]=S.useState(!1),Ul=S.useRef(null),Km=S.useRef(null),Wl=S.useRef([]),[Xn,cu]=S.useState(null),[fu,uu]=S.useState(""),[pu,hu]=S.useState(""),[gu,mu]=S.useState(""),[bs,xu]=S.useState([]),[ys,bu]=S.useState(null),[Ss,yu]=S.useState(!1),[Su,Eu]=S.useState(null),[et,ii]=S.useState(null),[Jm,Au]=S.useState(!1),[Hl,Zm]=S.useState("month"),[Mu,Qm]=S.useState(null),[Tu,qm]=S.useState(null),[Kn,ex]=S.useState(null),[si,tx]=S.useState(null),[Fl,nx]=S.useState(null),[Jn,rx]=S.useState("today"),[ro,LS]=S.useState(""),[Ru,vu]=S.useState(!1),[Es,Lu]=S.useState(""),[$l,Yl]=S.useState(""),[As,wu]=S.useState(!1),[oo,ox]=S.useState("summary"),[ix,sx]=S.useState(null),[ax,lx]=S.useState(null),[Nr,Cn]=S.useState([]),[Ms,Iu]=S.useState(new Date().toISOString().slice(0,10)),[Vl,dx]=S.useState(null);S.useRef(null);const[Xl,Zn]=S.useState(""),[ee,Ts]=S.useState(null),Nu={visit_date:"",visit_type:"OPD",doctor_name:"",specialty:"",vitals:{bp_sys:"",bp_dia:"",weight:"",height:""},diagnoses:[{id:"",label:"",status:"New"}],medications:[{name:"",dose:"",frequency:"",timing:""}],labs:[{test_name:"",result:"",unit:"",flag:"",ref_range:""}]},[Fe,_e]=S.useState({...Nu}),[Rs,io]=S.useState([]),[Cu,Ou]=S.useState(!1),[vs,ai]=S.useState(""),[Ls,ju]=S.useState(!1),[Kl,ws]=S.useState(!1),[Gu,Qn]=S.useState([]),[qn,cx]=S.useState("rx"),[Is,Ns]=S.useState(""),[Cs,li]=S.useState(!1),[Tn,di]=S.useState([]),[Pu,Du]=S.useState(!1),[Jl,gn]=S.useState(""),[fx,Os]=S.useState(0),[ae,Zl]=S.useState(null),[ux,Ql]=S.useState(!1),[ql,px]=S.useState("all"),[hx,gx]=S.useState(null),[js,mx]=S.useState("All"),[On,ku]=S.useState(""),[xx,bx]=S.useState(null),[de,Ft]=S.useState(null);S.useEffect(()=>{de&&ee&&de.id&&de.id!==ee&&(console.log(` patientFullData (id=${de.id}) doesn't match dbPatientId (${ee})  clearing stale data`),Ft(null)),de&&!ee&&(console.log(` New patient mode but patientFullData still set (id=${de.id})  clearing`),Ft(null))},[ee,de]);const P=!de||!ee||de.id!==ee?null:de,[Cr,er]=S.useState([]);S.useRef(null);const[ed,Gs]=S.useState([]),[Ps,td]=S.useState(""),[so,Bu]=S.useState(!1),nd=S.useRef(null),[ao,rd]=S.useState(()=>localStorage.getItem("gini_auth_token")||""),[ue,od]=S.useState(()=>{try{return JSON.parse(localStorage.getItem("gini_doctor")||"null")}catch{return null}}),[Ne,yx]=S.useState([]),[id,_u]=S.useState(""),[sd,Sx]=S.useState(""),[zu,Ds]=S.useState(""),[ks,Uu]=S.useState(!1),[Wu,Hu]=S.useState(""),[$t,ci]=S.useState(!1),[Ex,fi]=S.useState(null),[Bs,Or]=S.useState([]),[Ax,ad]=S.useState(!1),[Le,mn]=S.useState({dt:"",tm:"",ty:"OPD",sp:"",doc:"",notes:"",labPickup:"hospital",labTests:[]}),[_s,Fu]=S.useState(null),[tt,tr]=S.useState([]),[ld,ui]=S.useState(""),[Je,zs]=S.useState({medCompliance:"",dietExercise:"",sideEffects:"",newSymptoms:"",challenges:""}),[pi,Us]=S.useState([]),[hi,gi]=S.useState([]),[lo,Mx]=S.useState("General"),[Yt,jr]=S.useState({}),[Tx,Rx]=S.useState(null),[Ws,mi]=S.useState(""),[at,Gr]=S.useState([]),[lt,nr]=S.useState([]),[co,fo]=S.useState(""),[Hs,uo]=S.useState(!1),[he,po]=S.useState(null),[xi,dd]=S.useState(null),[rr,or]=S.useState({}),[Fs,$u]=S.useState(!1),[wS,IS]=S.useState(!1),[Yu,cd]=S.useState(!1),[pt,bi]=S.useState({}),[Vt,yi]=S.useState({}),[Si,fd]=S.useState(!1),vx={stop:["Duplication with Gini prescription","Drug interaction","Not clinically indicated","Side effects reported","Patient preference","Not effective","Replaced by better alternative","Contraindicated","Completed course"],hold:["Pending lab results","Fasting / pre-procedure","Temporary side effect","Dose adjustment needed","Drug interaction  temporary","Patient preference","Reassess at next visit"]},rn={"Type 2 DM":{icon:"",color:"#dc2626",biomarkers:["HbA1c","FBS","PPBS","C-Peptide","Fasting Insulin","HOMA-IR","Fructosamine"],autoDetect:[{test:"HbA1c",op:">",val:6.5},{test:"FBS",op:">",val:126},{test:"PPBS",op:">",val:200}],questions:[{id:"dx_age",label:"Age at diagnosis",type:"text",placeholder:"e.g. 42"},{id:"dx_how",label:"How diagnosed",type:"select",options:["Routine checkup","Symptoms","Incidental","Hospitalization","Screening"]},{id:"initial_hba1c",label:"Initial HbA1c",type:"text",placeholder:"e.g. 9.2%"},{id:"initial_rx",label:"Initial treatment",type:"text",placeholder:"e.g. Metformin 500mg BD"},{id:"insulin",label:"Insulin history",type:"select",options:["Never used","Currently on","Used in past","Only during hospitalization"]},{id:"hypo",label:"Hypoglycemia",type:"select",options:["Never","Rare (1-2/yr)","Occasional (monthly)","Frequent (weekly)"]},{id:"complications",label:"Complications",type:"multi",options:["Retinopathy","Nephropathy","Neuropathy","Foot ulcer","Cardiac","ED","None known"]},{id:"control",label:"Current control",type:"select",options:["Well controlled","Moderate","Poorly controlled","Unknown"]}]},Hypertension:{icon:"",color:"#7c3aed",biomarkers:["BP Systolic","BP Diastolic","Creatinine","eGFR","K+","Na+"],autoDetect:[{test:"BP Systolic",op:">",val:140,vitalKey:"bp_sys"},{test:"BP Diastolic",op:">",val:90,vitalKey:"bp_dia"}],questions:[{id:"dx_age",label:"Age at diagnosis",type:"text",placeholder:""},{id:"highest_bp",label:"Highest BP",type:"text",placeholder:"e.g. 180/110"},{id:"target_organ",label:"Target organ damage",type:"multi",options:["LVH","Retinopathy","CKD","Stroke","None"]},{id:"compliance",label:"Compliance",type:"select",options:["Regular","Sometimes misses","Often misses","Self-adjusts"]}]},Hypothyroid:{icon:"",color:"#6366f1",biomarkers:["TSH","Free T3","Free T4","Anti-TPO"],autoDetect:[{test:"TSH",op:">",val:5}],questions:[{id:"dx_age",label:"Age at diagnosis",type:"text",placeholder:""},{id:"last_tsh",label:"Last TSH",type:"text",placeholder:"e.g. 5.2"},{id:"current_dose",label:"Thyroxine dose",type:"text",placeholder:"e.g. 75 mcg"},{id:"symptoms",label:"Symptoms",type:"multi",options:["Fatigue","Weight gain","Hair loss","Cold intolerance","Constipation","None"]}]},Hyperthyroid:{icon:"",color:"#6366f1",biomarkers:["TSH","Free T3","Free T4","Anti-TPO","TRAb"],autoDetect:[{test:"TSH",op:"<",val:.4}],questions:[{id:"dx_age",label:"Age at diagnosis",type:"text",placeholder:""},{id:"symptoms",label:"Symptoms",type:"multi",options:["Palpitations","Weight loss","Tremor","Heat intolerance","Anxiety","None"]}]},Dyslipidemia:{icon:"",color:"#f59e0b",biomarkers:["Total Cholesterol","LDL","HDL","Triglycerides","VLDL","Non-HDL"],autoDetect:[{test:"LDL",op:">",val:130},{test:"Triglycerides",op:">",val:200},{test:"Total Cholesterol",op:">",val:240}],questions:[{id:"type",label:"Type",type:"select",options:["High LDL","High TG","Low HDL","Mixed","Familial"]},{id:"on_statin",label:"Statin",type:"select",options:["Yes","No  intolerant","No  not prescribed","Stopped"]},{id:"statin_se",label:"Side effects",type:"multi",options:["None","Muscle pain","Elevated LFT","GI symptoms"]}]},Obesity:{icon:"",color:"#059669",biomarkers:["BMI","Waist circumference","Weight","Fasting Insulin","HOMA-IR"],autoDetect:[],questions:[{id:"max_wt",label:"Max weight",type:"text",placeholder:"e.g. 105 kg"},{id:"onset",label:"Onset",type:"select",options:["Childhood","Adolescence","After marriage","Post-pregnancy","Gradual","Medication"]},{id:"osa",label:"Sleep apnea",type:"select",options:["No","Snoring only","Diagnosed OSA","On CPAP"]}]},PCOS:{icon:"",color:"#e11d48",biomarkers:["LH","FSH","Testosterone","DHEAS","AMH","Fasting Insulin"],autoDetect:[],questions:[{id:"menstrual",label:"Menstrual pattern",type:"select",options:["Regular","Irregular","Oligomenorrhea","Amenorrhea"]},{id:"fertility",label:"Fertility",type:"select",options:["Not trying","No issues","Difficulty","IVF history","Completed"]},{id:"features",label:"Features",type:"multi",options:["Hirsutism","Acne","Hair thinning","Acanthosis","Weight gain"]}]},CKD:{icon:"",color:"#0d9488",biomarkers:["Creatinine","eGFR","Urine ACR","BUN","K+","Phosphate","PTH"],autoDetect:[{test:"eGFR",op:"<",val:60},{test:"Creatinine",op:">",val:1.5}],questions:[{id:"stage",label:"Stage",type:"select",options:["1","2","3a","3b","4","5","Dialysis","Unknown"]},{id:"cause",label:"Cause",type:"select",options:["Diabetic","Hypertensive","IgA","PKD","Unknown","Other"]},{id:"nephro",label:"Nephrologist",type:"select",options:["Yes-regular","Yes-occasional","No","Referred"]}]},CAD:{icon:"",color:"#ef4444",biomarkers:["NT-proBNP","hs-CRP","Troponin","LDL"],autoDetect:[],questions:[{id:"type",label:"Type",type:"select",options:["Stable angina","ACS/MI","Post-CABG","Post-PCI","Heart failure"]},{id:"ef",label:"Ejection fraction",type:"text",placeholder:"e.g. 55%"}]},"Vit D Deficiency":{icon:"",color:"#ca8a04",biomarkers:["Vitamin D","Calcium","Phosphate"],autoDetect:[{test:"Vitamin D",op:"<",val:30},{test:"Vit D",op:"<",val:30}],questions:[]},"B12 Deficiency":{icon:"",color:"#0ea5e9",biomarkers:["Vitamin B12","MCV","Homocysteine"],autoDetect:[{test:"Vitamin B12",op:"<",val:200},{test:"Vit B12",op:"<",val:200}],questions:[]},Other:{icon:"",color:"#64748b",biomarkers:[],autoDetect:[],questions:[{id:"name",label:"Condition",type:"text",placeholder:"e.g. Rheumatoid Arthritis"},{id:"status",label:"Status",type:"select",options:["Active","Remission","Resolved","Monitoring"]}]}},Vu=Object.keys(rn).filter(r=>r!=="Other"),Lx=["Appendectomy","Cholecystectomy","CABG","PTCA/Stenting","Hysterectomy","C-Section","Thyroidectomy","Bariatric surgery","Knee/Hip replacement","Hernia repair","Cataract surgery"],wx=["Penicillin","Sulfonamides","NSAIDs","Aspirin","Metformin","Contrast dye","Iodine","Latex","None known"],[we,$s]=S.useState([]),[ud,Ys]=S.useState({}),[wt,jn]=S.useState([]),[pd,Xu]=S.useState(""),[Xt,ho]=S.useState([]),[hd,Ku]=S.useState(""),[go,Vs]=S.useState({dm:!1,htn:!1,cardiac:!1,thyroid:!1,cancer:!1,ckd:!1,obesity:!1,notes:""}),[Ix,Ju]=S.useState([]),[NS,CS]=S.useState(""),[gd,Nx]=S.useState(""),[Ei,Zu]=S.useState([]),[it,mt]=S.useState([]),mo=S.useRef(new Set),Xs=S.useRef(null),md=S.useRef([]);md.current=it;const Qu=S.useRef(null),[Kt,xo]=S.useState([]),[It,Ai]=S.useState(""),bo=r=>{$s(s=>s.includes(r)?s.filter(d=>d!==r):[...s,r])},xd=(r,s,d)=>Ys(c=>({...c,[r]:{...c[r]||{},[s]:d}})),Cx=(r,s,d)=>{var u;const c=((u=ud[r])==null?void 0:u[s])||[];xd(r,s,c.includes(d)?c.filter(f=>f!==d):[...c,d])},Ox=gd?Vu.filter(r=>r.toLowerCase().includes(gd.toLowerCase())):Vu,qu=()=>{if(!(F!=null&&F.panels))return;const r=F.panels.flatMap(c=>c.tests),s=[];Object.entries(rn).forEach(([c,u])=>{if(c!=="Other")for(const f of u.autoDetect||[]){const h=r.find(m=>(m.test_name||"").toLowerCase().includes(f.test.toLowerCase()));if(h){const m=parseFloat(h.result);isNaN(m)||(f.op===">"&&m>f.val||f.op==="<"&&m<f.val)&&s.push({name:c,test:h.test_name,value:`${h.result} ${h.unit||""}`,flag:h.flag,reason:`${h.test_name} ${h.result} (ref: ${f.op}${f.val})`})}if(f.vitalKey&&N[f.vitalKey]){const m=parseFloat(N[f.vitalKey]);!isNaN(m)&&(f.op===">"&&m>f.val||f.op==="<"&&m<f.val)&&s.push({name:c,test:f.test,value:N[f.vitalKey],flag:"H",reason:`${f.test} ${N[f.vitalKey]}`})}}});const d=[...new Map(s.map(c=>[c.name,c])).values()];return Zu(d),d},ep=r=>{const s=rn[r];if(!s||!(F!=null&&F.panels))return[];const d=F.panels.flatMap(c=>c.tests);return s.biomarkers.map(c=>{const u=d.find(f=>(f.test_name||"").toLowerCase().includes(c.toLowerCase()));return{name:c,found:!!u,value:u?`${u.result}${u.unit?" "+u.unit:""}`:null,flag:(u==null?void 0:u.flag)||null}})},tp=()=>{var d;const r=((d=F==null?void 0:F.panels)==null?void 0:d.flatMap(c=>c.tests.map(u=>(u.test_name||"").toLowerCase())))||[],s=[];return we.forEach(c=>{const u=rn[c];u&&u.biomarkers.forEach(f=>{r.some(h=>h.includes(f.toLowerCase()))||s.push({test:f,forCondition:c})})}),[...new Map(s.map(c=>[c.test,c])).values()]},Ks="gini_scribe_session",np=()=>{try{const r={patient:b,vitals:N,dbPatientId:ee,tab:e,visitActive:$t,visitId:Ex,complaints:tt,hxConditions:we,hxCondData:ud,hxSurgeries:wt,hxAllergies:Xt,hxFamilyHx:go,examData:Yt,examNotes:Ws,examSpecialty:lo,assessDx:at,assessLabs:lt,assessNotes:co,moTranscript:z,conTranscript:Z,moName:x,conName:G,appointments:Bs,intakeReports:it.map(s=>({...s,base64:void 0})),nextVisitDate:It,labRequisition:Kt,medRecon:pt,medReconReasons:Vt,hxHospitalizations:Ix,savedAt:Date.now()};localStorage.setItem(Ks,JSON.stringify(r))}catch(r){console.log("Session save error:",r.message)}};S.useEffect(()=>{var r,s,d,c,u,f,h,m,j,w;try{const R=JSON.parse(localStorage.getItem(Ks)||"null");R&&R.savedAt&&Date.now()-R.savedAt<8*60*60*1e3&&(r=R.patient)!=null&&r.name&&(U(R.patient),W(R.vitals||N),R.dbPatientId&&Ts(R.dbPatientId),n(R.tab||"dashboard"),R.visitActive&&(ci(!0),fi(R.visitId)),(s=R.complaints)!=null&&s.length&&tr(R.complaints),(d=R.hxConditions)!=null&&d.length&&$s(R.hxConditions),R.hxCondData&&Ys(R.hxCondData),(c=R.hxSurgeries)!=null&&c.length&&jn(R.hxSurgeries),(u=R.hxAllergies)!=null&&u.length&&ho(R.hxAllergies),R.hxFamilyHx&&Vs(R.hxFamilyHx),R.examData&&jr(R.examData),R.examNotes&&mi(R.examNotes),(f=R.assessDx)!=null&&f.length&&Gr(R.assessDx),(h=R.assessLabs)!=null&&h.length&&nr(R.assessLabs),R.assessNotes&&fo(R.assessNotes),R.moTranscript&&q(R.moTranscript),R.conTranscript&&me(R.conTranscript),R.moName&&A(R.moName),R.conName&&D(R.conName),(m=R.appointments)!=null&&m.length&&Or(R.appointments),R.nextVisitDate&&Ai(R.nextVisitDate),(j=R.labRequisition)!=null&&j.length&&xo(R.labRequisition),R.medRecon&&bi(R.medRecon),R.medReconReasons&&yi(R.medReconReasons),(w=R.hxHospitalizations)!=null&&w.length&&Ju(R.hxHospitalizations),console.log("Session restored:",R.patient.name))}catch(R){console.log("Session restore error:",R.message)}},[]),S.useEffect(()=>{b.name&&np()},[b,N,e,$t,tt,we,Yt,at,lt,z,Z,Bs,It]),S.useEffect(()=>{if((e==="consultant"||e==="plan")&&$t&&!C&&(tt.length>0||at.length>0||we.length>0)){const r={dm2:"Type 2 DM",htn:"Hypertension",hypo:"Hypothyroid",hyper:"Hyperthyroid",dyslip:"Dyslipidemia",obesity:"Obesity",pcos:"PCOS",ckd:"CKD",cad:"CAD",vitd:"Vit D Deficiency",b12:"B12 Deficiency"},s=[...at.map(h=>({id:h,label:r[h]||h,status:"Uncontrolled"})),...we.filter(h=>!at.some(m=>(r[m]||"").toLowerCase()===h.toLowerCase())).map(h=>({id:h.toLowerCase().replace(/\s+/g,"_"),label:h,status:"Active"}))],d=new Set(["HbA1c","FBS","PPBS","TSH","LDL","HDL","Triglycerides","Total Cholesterol","Creatinine","eGFR","UACR","Vitamin D","Vitamin B12","Hemoglobin","SGPT (ALT)","SGOT (AST)","CRP","Ferritin"]),c=F?(F.panels||[]).flatMap(h=>(h.tests||[]).filter(m=>m.flag==="H"||m.flag==="L"||d.has(ea(m.test_name))).map(m=>{const j=ea(m.test_name),w=h.report_date||F.report_date||"";return{test:j,value:parseFloat(m.result)||m.result,unit:m.unit||"",flag:m.flag==="H"?"HIGH":m.flag==="L"?"LOW":null,ref:m.ref_range||"",date:w,from_report:!0}})):[],u=[],f=new Set;c.forEach(h=>{f.has(h.test)||(f.add(h.test),u.push(h))}),Ie({chief_complaints:tt.length>0?tt:["Follow-up"],diagnoses:s,previous_medications:[],investigations:u,history:{family:Object.entries(go).filter(([h,m])=>m===!0).map(([h])=>h).join(", ")||"",past_medical_surgical:wt.map(h=>`${h.name}${h.year?` (${h.year})`:""}${h.hospital?` @ ${h.hospital}`:""}`).join(", ")||"",personal:""},compliance:""})}},[e]),S.useEffect(()=>{(e==="outcomes"||e==="docs")&&ee&&ie&&((async()=>{try{const s=await(await fetch(`${ie}/api/patients/${ee}`,{headers:ze()})).json();s.id&&Ft(s)}catch{}})(),e==="outcomes"&&To(ee))},[e]);const Js={General:[{id:"gen",l:"General",ic:"",o:["Well-built","Obese","Thin","Pale","Icteric","Cyanosed","Clubbing","Lymphadenopathy","Edema"]},{id:"skin",l:"Skin",ic:"",o:["Normal","Acanthosis Nigricans","Shin Spots","Dry","Xanthoma","Candidiasis","Skin Tags"]},{id:"eyes",l:"Eyes",ic:"",o:["Normal","Pallor","Xanthelasma","Icterus","Fundus Normal","DR Background","DR Proliferative"]},{id:"neck",l:"Neck",ic:"",o:["Normal","Goitre Gr1","Goitre Gr2","Goitre Gr3","Acanthosis","Skin Tags","Thyroid Nodule"]},{id:"cvs",l:"CVS",ic:"",o:["S1S2 Normal","Murmur","Irregular Rhythm","Raised JVP","Displaced Apex"]},{id:"resp",l:"Respiratory",ic:"",o:["BAEL","Wheeze","Crepitations","Rhonchi","Reduced Air Entry","Pleural Effusion"]},{id:"abd",l:"Abdomen",ic:"",o:["Soft NT","Striae","Hepatomegaly","Splenomegaly","Ascites","Tenderness"]},{id:"cns",l:"CNS",ic:"",o:["Alert Oriented","Confused","Focal Deficit","DTR Normal","DTR Reduced","DTR Absent"]},{id:"limb",l:"Lower Limb",ic:"",o:["Normal","Edema Pitting","Shin Spots","Hair Loss","Varicose Veins","DVT Signs"]},{id:"foot",l:"Diabetic Foot",ic:"",o:["Normal","Dry","Calluses","Fissures","Ulcer Active","Ulcer Healed","Charcot","Monofilament Reduced","Vibration Reduced"]}],Ortho:[{id:"knee",l:"Knee",ic:"",o:["Normal ROM","Restricted","Crepitus","Effusion","Varus","Valgus","Lachman+","McMurray+","Drawer+"]},{id:"hip",l:"Hip",ic:"",o:["Normal ROM","Restricted IR","Restricted ER","Trendelenburg+","FABER+"]},{id:"shoulder",l:"Shoulder",ic:"",o:["Normal ROM","Restricted Abduction","Impingement+","Neer+","Hawkins+","Drop Arm+"]},{id:"spine",l:"Spine",ic:"",o:["Normal","Kyphosis","Scoliosis","Tenderness","SLR+","SLRT+","Muscle Spasm"]},{id:"wrist",l:"Wrist/Hand",ic:"",o:["Normal","Tinel+","Phalen+","Deformity","Swelling","Trigger Finger"]}],Pulmo:[{id:"ausc",l:"Auscultation",ic:"",o:["Clear Bilateral","Wheeze","Fine Crepts","Coarse Crepts","Rhonchi","Stridor","Reduced BS"]},{id:"pattern",l:"Breathing",ic:"",o:["Normal","Tachypnea","Bradypnea","Kussmaul","Cheyne-Stokes","Orthopnea"]},{id:"chest",l:"Chest",ic:"",o:["Normal","Barrel Chest","Pigeon Chest","Asymmetric","Intercostal Recession"]},{id:"perc",l:"Percussion",ic:"",o:["Resonant","Dull","Stony Dull","Hyper-resonant"]}],Cardio:[{id:"pulse",l:"Pulse",ic:"",o:["Regular","Irregularly Irregular","Regularly Irregular","Bounding","Thready","Radio-femoral Delay"]},{id:"jvp",l:"JVP",ic:"",o:["Normal","Raised","Not Visible","Kussmaul Sign+"]},{id:"prec",l:"Precordium",ic:"",o:["Apex Normal","Apex Displaced","Thrill","Heave","S1S2 Normal","S3 Gallop","S4 Gallop","Murmur Systolic","Murmur Diastolic"]},{id:"periph",l:"Peripheral",ic:"",o:["Normal","Pedal Edema","Sacral Edema","Calf Tenderness","Varicose Veins"]}]},jx=["Routine follow-up","Increased thirst","Frequent urination","Weight gain","Weight loss","Fatigue","Blurred vision","Tingling/numbness","Foot pain","Wound not healing","Hair loss","Palpitations","Dizziness","Headache","Chest pain","Breathlessness","Joint pain","Back pain","Knee pain","Swelling feet","Nausea","Abdominal pain","Fever","Cough","Sleep issues"],Pr=[{id:"dm2",l:"Type 2 DM",cl:"#dc2626"},{id:"dm1",l:"Type 1 DM",cl:"#dc2626"},{id:"htn",l:"Hypertension",cl:"#7c3aed"},{id:"thyroid",l:"Hypothyroid",cl:"#6366f1"},{id:"hyperthyroid",l:"Hyperthyroid",cl:"#6366f1"},{id:"dyslip",l:"Dyslipidemia",cl:"#f59e0b"},{id:"ckd",l:"CKD",cl:"#0d9488"},{id:"obesity",l:"Obesity",cl:"#059669"},{id:"pcos",l:"PCOS",cl:"#e11d48"},{id:"cad",l:"CAD",cl:"#ef4444"},{id:"osteo",l:"Osteoporosis",cl:"#78716c"},{id:"nafld",l:"NAFLD/MAFLD",cl:"#a16207"},{id:"vitd",l:"Vit D Deficiency",cl:"#ca8a04"},{id:"b12",l:"B12 Deficiency",cl:"#0ea5e9"},{id:"gout",l:"Gout",cl:"#be123c"},{id:"osa",l:"OSA",cl:"#475569"},{id:"neuropathy",l:"DM Neuropathy",cl:"#9333ea"},{id:"retinopathy",l:"DM Retinopathy",cl:"#be185d"},{id:"nephropathy",l:"DM Nephropathy",cl:"#0f766e"},{id:"bph",l:"BPH",cl:"#64748b"},{id:"other",l:"Other",cl:"#475569"}],Gx=["HbA1c","FBS","PPBS","RFT","UACR","Lipid Panel","Vit D","Vit B12","TSH","FT3/FT4","LFT","CBC","Urine R/M","K+","Na+","Ca+","Phosphate","PTH","Iron Studies","Fasting Insulin","C-Peptide","HOMA-IR","hs-CRP","NT-proBNP","PSA","Testosterone","AMH","LH/FSH","Cortisol","HbElectrophoresis","Fundus","ABI","VPT","Echo","ECG","DEXA","USG Abdomen","Doppler","NCS/EMG"],bd=(r,s,d)=>{s(r.includes(d)?r.filter(c=>c!==d):[...r,d])},Px=(r,s)=>{const d=r+"_v",c=Yt[d]||[];jr({...Yt,[d]:c.includes(s)?c.filter(u=>u!==s):[...c,s]})},Dx=r=>{const s=r+"_n";jr({...Yt,[s]:!Yt[s]})},kx=()=>{const r=Js[lo]||[],s={};r.forEach(d=>{(Yt[d.id+"_v"]||[]).length||(s[d.id+"_n"]=!0)}),jr({...Yt,...s})},yo=()=>{const r=[];return Object.entries(Js).forEach(([s,d])=>{d.forEach(c=>{const u=Yt[c.id+"_v"]||[],f=Yt[c.id+"_n"];u.length>0?r.push(`${c.l}: ${u.join(", ")}`):f&&r.push(`${c.l}: NAD`)})}),Ws&&r.push(`Notes: ${Ws}`),r.join(". ")},yd=r=>{ci(!0),fi(Date.now().toString()),tr([]),ui(""),jr({}),mi(""),Gr([]),nr([]),fo(""),uo(!1),r&&Or(s=>s.map(d=>d.id===r?{...d,st:"in-progress"}:d)),n("intake")},rp=()=>{ci(!1),fi(null),n("dashboard")},op=r=>{r?(Fu(r.id),mn({dt:r.dt||"",tm:r.tm||"",ty:r.ty||"OPD",sp:r.sp||"",doc:r.doc||"",notes:r.notes||""})):(Fu(null),mn({dt:"",tm:"",ty:"OPD",sp:"",doc:"",notes:""})),ad(!0)},Bx=()=>{Or(_s?r=>r.map(s=>s.id===_s?{...s,...Le}:s):r=>[...r,{id:"apt_"+Date.now(),...Le,st:"scheduled"}]),ad(!1)},_x=r=>{Or(s=>s.filter(d=>d.id!==r))},ze=(r={})=>({"Content-Type":"application/json",...ao?{"x-auth-token":ao}:{},...r});S.useEffect(()=>{ie&&fetch(`${ie}/api/doctors`).then(r=>r.json()).then(yx).catch(()=>{})},[]),S.useEffect(()=>{ao&&ie&&fetch(`${ie}/api/auth/me`,{headers:{"x-auth-token":ao}}).then(r=>r.json()).then(r=>{r.authenticated||(rd(""),od(null),localStorage.removeItem("gini_auth_token"),localStorage.removeItem("gini_doctor"))}).catch(()=>{})},[]);const ip=async()=>{if(!sd||!id){Ds("Select doctor and enter PIN");return}Uu(!0),Ds("");try{const r=await fetch(`${ie}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctor_id:parseInt(sd),pin:id})}),s=await r.json();r.ok&&s.token?(rd(s.token),od(s.doctor),localStorage.setItem("gini_auth_token",s.token),localStorage.setItem("gini_doctor",JSON.stringify(s.doctor)),s.doctor.role==="mo"?A(s.doctor.short_name):s.doctor.role==="lab"||s.doctor.role==="nurse"||s.doctor.role==="tech"?n("labportal"):D(s.doctor.short_name)):Ds(s.error||"Login failed")}catch{Ds("Connection error")}Uu(!1),_u("")},zx=()=>{ao&&fetch(`${ie}/api/auth/logout`,{method:"POST",headers:{"x-auth-token":ao}}).catch(()=>{}),rd(""),od(null),localStorage.removeItem("gini_auth_token"),localStorage.removeItem("gini_doctor")};S.useEffect(()=>{const r=setInterval(()=>{if(b.name&&(C||T||Rt))try{const s={patient:b,vitals:N,moData:C,conData:T,moTranscript:z,conTranscript:Z,quickTranscript:Rt,moName:x,conName:G,timestamp:Date.now()};localStorage.setItem("gini_draft",JSON.stringify(s)),Hu(" "+new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}catch{}},6e4);return()=>clearInterval(r)},[b,N,C,T,z,Z,Rt,x,G]),S.useEffect(()=>{try{const r=JSON.parse(localStorage.getItem("gini_draft"));r&&r.timestamp>Date.now()-36e5&&Hu(" Draft available from "+new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}catch{}},[]),S.useEffect(()=>{try{const r=JSON.parse(localStorage.getItem("gini_patients")||"[]");Q(r)}catch{}},[]);const Sd=async()=>{var d,c;if(!b.name)return;Zn(" Saving...");const r={id:Date.now().toString(),date:new Date().toISOString(),patient:{...b},vitals:{...N},labData:F,moData:C,conData:T,moTranscript:z,conTranscript:Z,quickTranscript:Rt,moName:x,conName:G},s=JSON.parse(localStorage.getItem("gini_patients")||"[]");if(s.unshift(r),localStorage.setItem("gini_patients",JSON.stringify(s.slice(0,500))),Q(s),ie)try{const u=new AbortController,f=setTimeout(()=>u.abort(),3e4);Zn(" Saving to DB...");const h=await fetch(`${ie}/api/consultations`,{method:"POST",headers:ze(),body:JSON.stringify({patient:b,vitals:N,moData:C,conData:T,moTranscript:z,conTranscript:Z,quickTranscript:Rt,moName:x,conName:G,planEdits:{...se,medRecon:pt,medReconReasons:Vt},moDoctorId:((d=Ne.find(m=>m.short_name===x))==null?void 0:d.id)||null,conDoctorId:((c=Ne.find(m=>m.short_name===G))==null?void 0:c.id)||null}),signal:u.signal});if(clearTimeout(f),h.ok){const m=await h.json();if(m.success){Zn(` Saved (DB #${m.consultation_id})`),Ts(m.patient_id);try{const R=await(await fetch(`${ie}/api/patients/${m.patient_id}`)).json();Ft(R),io(R.consultations||[])}catch(w){console.log("Refresh after save:",w.message)}if(T&&m.patient_id&&Xs.current!==m.consultation_id){Xs.current=m.consultation_id;const w={doc_type:"prescription",title:`Prescription  ${G}  ${new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}`,file_name:`rx_${m.consultation_id}.json`,extracted_data:{patient:{name:b.name,age:b.age,sex:b.sex,phone:b.phone,fileNo:b.fileNo},doctor:G,mo:x,date:new Date().toISOString(),diagnoses:(C==null?void 0:C.diagnoses)||[],medications:T.medications_confirmed||[],diet_lifestyle:T.diet_lifestyle||[],investigations_ordered:T.investigations_ordered||[],follow_up:T.follow_up||{},vitals:{...N},chief_complaints:(C==null?void 0:C.chief_complaints)||[],assessment_summary:T.assessment_summary||"",goals:T.goals||[],plan_edits:se},doc_date:new Date().toISOString().split("T")[0],source:"scribe",notes:`Consultation by ${G}`,consultation_id:m.consultation_id};fetch(`${ie}/api/patients/${m.patient_id}/documents`,{method:"POST",headers:ze(),body:JSON.stringify(w)}).catch(R=>console.log("Rx doc save:",R.message))}for(const w of Cr.filter(R=>R.data))m.patient_id&&fetch(`${ie}/api/patients/${m.patient_id}/documents`,{method:"POST",headers:ze(),body:JSON.stringify({doc_type:w.data.report_type||w.type,title:`${w.data.report_type||w.type}  ${w.fileName}`,file_name:w.fileName,extracted_data:w.data,doc_date:w.data.date||new Date().toISOString().split("T")[0],source:"upload",notes:w.data.impression,consultation_id:m.consultation_id})}).catch(R=>console.log("Imaging doc save:",R.message));const j=md.current;m.patient_id&&j.some(w=>w.data&&!w.saved)&&(console.log(` Auto-flushing ${j.filter(w=>w.data&&!w.saved).length} intake reports after consult save...`),Md(m.patient_id))}else Zn(" Local only  "+(m.error||"failed").slice(0,40))}else{const m=await h.text().catch(()=>"");console.error("DB save HTTP error:",h.status,m),Zn(" Local only  Server "+h.status)}}catch(u){console.error("DB save error:",u),Zn(u.name==="AbortError"?" Local only  timeout":" Local only  "+u.message.slice(0,30))}else Zn(" Saved locally");setTimeout(()=>Zn(""),4e3)},[Zs,Ed]=S.useState([]),Qs=async(r,s,d)=>{if(!ie){Ed([]);return}try{const c=new URLSearchParams({limit:"30"});r&&r.length>=2&&c.set("q",r),s&&c.set("period",s),d&&c.set("doctor",d);const f=await(await fetch(`${ie}/api/patients?${c}`)).json();Ed(Array.isArray(f)?f:[])}catch{Ed([])}},sp=async()=>{const r=!Xe;if(ye(r),r&&(Qs("",Te,Be),ie))try{const[s,d]=await Promise.all([fetch(`${ie}/api/doctors`),fetch(`${ie}/api/stats`)]);Lt(await s.json()),Ir(await d.json())}catch{}},Ad=async r=>{var s;if(U({name:r.name||"",phone:r.phone||"",age:r.age||"",sex:r.sex||"Male",fileNo:r.file_no||"",dob:r.dob?String(r.dob).slice(0,10):"",abhaId:r.abha_id||"",healthId:r.health_id||"",aadhaar:r.aadhaar||"",govtId:r.govt_id||"",govtIdType:r.govt_id_type||"",address:r.address||""}),Ts(r.id),Ft(null),io([]),Ns(""),di([]),gn(""),Os(0),ai(""),ws(!1),Qn([]),ma(!1),Oe(null),v(null),L(null),K(null),q(""),me(""),Rr(""),Ie(null),ve(null),Ht({}),He({}),ce(new Set),Se({}),ci(!1),fi(null),tr([]),ui(""),zs({medCompliance:"",dietExercise:"",sideEffects:"",newSymptoms:"",challenges:""}),Us([]),gi([]),mt([]),xo([]),mo.current.clear(),Xs.current=null,na.current=!1,Ai(""),bi({}),yi({}),po(null),uo(!1),dd(null),cd(!1),or({}),ia("merge"),er([]),Cn([]),Zl(null),no(null),fd(!1),Gr([]),nr([]),fo(""),jr({}),mi(""),$s([]),Ys({}),jn([]),ho([]),nu(!1),Bl(""),ru(""),ou([]),iu(null),au(null),lu(null),cu(null),uu(""),hu(""),mu(""),xu([]),bu(null),Eu(null),ie&&r.id)try{const c=await(await fetch(`${ie}/api/patients/${r.id}`)).json();Ft(c),io(c.consultations||[]);const u=(c.consultations||[]).sort((f,h)=>{const m=new Date(h.visit_date)-new Date(f.visit_date);return m!==0?m:new Date(h.created_at)-new Date(f.created_at)});if(u.length>0){const f=u[0],m=await(await fetch(`${ie}/api/consultations/${f.id}`)).json();m.mo_data&&Ie(m.mo_data),m.con_data&&ve(m.con_data),m.mo_transcript&&q(m.mo_transcript),m.con_transcript&&me(m.con_transcript)}if(((s=c.vitals)==null?void 0:s.length)>0){const f=c.vitals[0];W(h=>({...h,bp_sys:f.bp_sys||"",bp_dia:f.bp_dia||"",pulse:f.pulse||"",spo2:f.spo2||"",weight:f.weight||"",height:f.height||"",bmi:f.bmi||""}))}To(r.id)}catch{}ye(!1),n("dashboard")};O.filter(r=>{var d,c,u,f;if(!be)return!0;const s=be.toLowerCase();return(((d=r.patient)==null?void 0:d.name)||"").toLowerCase().includes(s)||(((c=r.patient)==null?void 0:c.phone)||"").includes(s)||(((u=r.patient)==null?void 0:u.fileNo)||"").toLowerCase().includes(s)||(((f=r.patient)==null?void 0:f.abhaId)||"").includes(s)});const ap=S.useRef(null),Dt=r=>He(s=>({...s,[r]:null})),lp=()=>{U({name:"",phone:"",dob:"",fileNo:"",age:"",sex:"Male",abhaId:"",aadhaar:"",healthId:"",govtId:"",govtIdType:"",address:""}),W({bp_sys:"",bp_dia:"",pulse:"",temp:"",spo2:"",weight:"",height:"",bmi:"",waist:"",body_fat:"",muscle_mass:""}),v(null),L(null),K(null),q(""),me(""),Rr(""),Ie(null),ve(null),Ht({}),He({}),ce(new Set),Se({}),ci(!1),fi(null),tr([]),ui(""),zs({medCompliance:"",dietExercise:"",sideEffects:"",newSymptoms:"",challenges:""}),Us([]),gi([]),$s([]),Ys({}),jn([]),ho([]),Vs({dm:!1,htn:!1,cardiac:!1,thyroid:!1,cancer:!1,ckd:!1,obesity:!1,notes:""}),Ju([]),Zu([]),jr({}),mi(""),Gr([]),nr([]),fo(""),po(null),uo(!1),dd(null),cd(!1),mt([]),xo([]),mo.current.clear(),Ai(""),bi({}),yi({}),Xs.current=null,na.current=!1,Ts(null),Ft(null),io([]),Oe(null),Or([]),er([]),Cn([]),Zl(null),Ql(!1),no(null),Dl(!1),fd(!1),ii(null),or({}),ia("merge"),Ns(""),di([]),gn(""),Os(0),ai(""),ws(!1),Qn([]),localStorage.removeItem(Ks),n("patient")};S.useEffect(()=>{try{const r=vo==null?void 0:vo.VITE_DEEPGRAM_KEY,s=vo==null?void 0:vo.VITE_OPENAI_KEY;r&&r.length>10&&i(r),s&&s.length>10&&l(s),(r&&r.length>10||s&&s.length>10)&&(g(!0),n("patient"))}catch{}},[]);const Dr=(r,s)=>{U(d=>{const c={...d,[r]:s};if(r==="dob"&&s){const u=Math.floor((Date.now()-new Date(s).getTime())/315576e5);c.age=u>0?String(u):""}return c})},Ux=async r=>{rt(c=>({...c,pv:!0})),Dt("pv");const{data:s,error:d}=await Lo(pS,r);d?He(c=>({...c,pv:d})):s&&U(c=>({name:s.name||c.name,phone:s.phone||c.phone,dob:s.dob||c.dob,fileNo:s.fileNo||c.fileNo,age:s.age?String(s.age):c.age,sex:s.sex||c.sex})),rt(c=>({...c,pv:!1}))},dp=(r,s)=>{W(d=>{const c={...d,[r]:s};if((r==="weight"||r==="height")&&c.weight&&c.height){const u=parseFloat(c.height)/100;c.bmi=u>0?(parseFloat(c.weight)/(u*u)).toFixed(1):""}return c})},cp=async r=>{rt(c=>({...c,vv:!0})),Dt("vv");const{data:s,error:d}=await Lo(bS,r);d?He(c=>({...c,vv:d})):s&&W(c=>{const u={...c};if(s.bp_sys&&(u.bp_sys=String(s.bp_sys)),s.bp_dia&&(u.bp_dia=String(s.bp_dia)),s.pulse&&(u.pulse=String(s.pulse)),s.temp&&(u.temp=String(s.temp)),s.spo2&&(u.spo2=String(s.spo2)),s.weight&&(u.weight=String(s.weight)),s.height&&(u.height=String(s.height)),u.weight&&u.height){const f=parseFloat(u.height)/100;u.bmi=f>0?(parseFloat(u.weight)/(f*f)).toFixed(1):""}return u}),rt(c=>({...c,vv:!1}))},Wx=async r=>{const s=r.target.files[0];if(s)if(cc(s))try{const d=await dc(s);L({base64:d.base64,mediaType:"image/jpeg",fileName:s.name})}catch(d){He(c=>({...c,lab:"HEIC: "+((d==null?void 0:d.message)||"conversion failed")}))}else{const d=new FileReader;d.onload=c=>L({base64:c.target.result.split(",")[1],mediaType:s.type.startsWith("image/")?s.type:"application/pdf",fileName:s.name}),d.readAsDataURL(s)}},fp=async()=>{var d;if(!E)return;rt(c=>({...c,lab:!0})),Dt("lab");const{data:r,error:s}=await Pa(E.base64,E.mediaType);if(s)He(c=>({...c,lab:s}));else{if(v(r),(d=r==null?void 0:r.patient_on_report)!=null&&d.name&&b.name){const c=r.patient_on_report.name.toLowerCase(),u=b.name.toLowerCase();c&&u&&!c.includes(u.split(" ")[0])&&!u.includes(c.split(" ")[0])?K(`Report: "${r.patient_on_report.name}"  "${b.name}"`):K(null)}r&&ee&&ie&&await ta({id:"single_lab_"+Date.now(),type:"lab",base64:E.base64,mediaType:E.mediaType,fileName:E.fileName},r)}rt(c=>({...c,lab:!1}))},Hx=async(r,s)=>{const d=Array.from(r.target.files||[]);if(d.length)for(const c of d)if(cc(c))try{const u=await dc(c);er(f=>[...f,{id:Date.now()+Math.random(),type:s||"Unknown",base64:u.base64,mediaType:"image/jpeg",fileName:c.name,data:null,extracting:!1,error:null}])}catch(u){er(f=>[...f,{id:Date.now()+Math.random(),type:s||"Unknown",base64:null,mediaType:null,fileName:c.name,data:null,extracting:!1,error:"HEIC: "+((u==null?void 0:u.message)||"conversion failed")}])}else{const u=await new Promise(f=>{const h=new FileReader;h.onload=m=>f(m.target.result),h.readAsDataURL(c)});er(f=>[...f,{id:Date.now()+Math.random(),type:s||"Unknown",base64:u.split(",")[1],mediaType:c.type.startsWith("image/")?c.type:"application/pdf",fileName:c.name,data:null,extracting:!1,error:null}])}},Fx=async r=>{er(u=>u.map(f=>f.id===r?{...f,extracting:!0,error:null}:f));const s=Cr.find(u=>u.id===r);if(!s)return;const{data:d,error:c}=await Da(s.base64,s.mediaType);if(er(u=>u.map(f=>f.id===r?{...f,extracting:!1,data:d,error:c}:f)),d&&ee&&ie)try{const f=await(await fetch(`${ie}/api/patients/${ee}/documents`,{method:"POST",headers:ze(),body:JSON.stringify({doc_type:d.report_type||s.type,title:`${d.report_type||s.type}  ${s.fileName}`,file_name:s.fileName,extracted_data:d,doc_date:d.date||new Date().toISOString().split("T")[0],source:"upload",notes:d.impression})})).json();f.id&&await qs(f.id,s.base64,s.mediaType,s.fileName)}catch(u){console.log("Doc save failed:",u.message)}},$x=r=>er(s=>s.filter(d=>d.id!==r)),up=async(r,s)=>{const d=Array.from(r.target.files||[]);if(!d.length)return;r.target.value="";const c=["Blood Test","Thyroid Panel","Lipid Profile","Kidney Function","Liver Function","HbA1c","CBC","Urine","Other Lab"].includes(s);for(const u of d){let f,h;if(cc(u))try{f=(await dc(u)).base64,h="image/jpeg"}catch(m){Cn(j=>[...j,{id:Date.now()+Math.random(),type:s,category:c?"lab":"imaging",base64:null,mediaType:null,fileName:u.name,date:Ms,extracting:!1,extracted:!0,data:null,error:"HEIC: "+((m==null?void 0:m.message)||"conversion failed"),saved:!1}]);continue}else f=(await new Promise(j=>{const w=new FileReader;w.onload=R=>j(R.target.result),w.readAsDataURL(u)})).split(",")[1],h=u.type||"image/jpeg";Cn(m=>[...m,{id:Date.now()+Math.random(),type:s,category:c?"lab":"imaging",base64:f,mediaType:h,fileName:u.name,date:Ms,extracting:!1,extracted:!1,data:null,error:null,saved:!1}])}},pp=async r=>{Cn(m=>m.map(j=>j.id===r?{...j,extracting:!0,error:null}:j));const s=Nr.find(m=>m.id===r);if(!s)return;const d=s.category==="lab",c=d?Pa:Da,{data:u,error:f}=await c(s.base64,s.mediaType),h=(u==null?void 0:u.report_date)||s.date||Ms||new Date().toISOString().split("T")[0];if(Cn(m=>m.map(j=>j.id===r?{...j,extracting:!1,extracted:!0,data:u,error:f,date:h}:j)),u&&ee&&ie)try{const m={doc_type:d?"lab_report":u.report_type||s.type,title:`${s.type}  ${s.fileName}`,file_name:s.fileName,extracted_data:u,doc_date:h,source:`upload_${(ue==null?void 0:ue.short_name)||"lab"}`,notes:d?`${(u.panels||[]).reduce((R,M)=>R+M.tests.length,0)} tests extracted`:u.impression||""},w=await(await fetch(`${ie}/api/patients/${ee}/documents`,{method:"POST",headers:ze(),body:JSON.stringify(m)})).json();if(w.id&&await qs(w.id,s.base64,s.mediaType,s.fileName),d&&u.panels)for(const R of u.panels)for(const M of R.tests)await fetch(`${ie}/api/patients/${ee}/labs`,{method:"POST",headers:ze(),body:JSON.stringify({test_name:ea(M.test_name),result:String(M.result_text||M.result),unit:M.unit||"",flag:M.flag||"N",ref_range:M.ref_range||"",test_date:h})});if(Cn(R=>R.map(M=>M.id===r?{...M,saved:!0}:M)),ee)try{const R=await fetch(`${ie}/api/patients/${ee}`,{headers:ze()}).then(M=>M.json());Ft(R)}catch{}}catch(m){console.log("Lab save failed:",m.message),Cn(j=>j.map(w=>w.id===r?{...w,error:"Save failed: "+m.message}:w))}},Yx=r=>Cn(s=>s.filter(d=>d.id!==r)),qs=async(r,s,d,c)=>{try{await fetch(`${ie}/api/documents/${r}/upload-file`,{method:"POST",headers:ze(),body:JSON.stringify({base64:s,mediaType:d,fileName:c})})}catch(u){console.log("File upload failed:",u.message)}},Vx=(()=>{const r={},s=(d,...c)=>c.forEach(u=>{r[u.toLowerCase().trim()]=d});return s("HbA1c","glycated hemoglobin","glycated haemoglobin","hba1c","glycosylated hemoglobin","a1c","hemoglobin a1c","haemoglobin a1c","glycated hb"),s("FBS","fasting blood sugar","fasting glucose","fasting plasma glucose","fpg","fbs","fbg","fasting blood glucose","blood sugar fasting","glucose fasting"),s("PPBS","post prandial blood sugar","pp glucose","ppg","ppbs","post prandial glucose","pp blood sugar","blood sugar pp","glucose pp","2hr pp glucose","pp2bs"),s("Total Cholesterol","total cholesterol","cholesterol total","cholesterol, total","serum cholesterol","t.cholesterol"),s("LDL","ldl cholesterol","ldl-c","ldl-cholesterol","ldl cholesterol (direct)","ldl direct","low density lipoprotein"),s("HDL","hdl cholesterol","hdl-c","hdl-cholesterol","hdl cholesterol (direct)","high density lipoprotein"),s("Triglycerides","triglycerides","triglyceride","tg","trigs","serum triglycerides"),s("VLDL","vldl cholesterol","vldl-c","vldl","very low density lipoprotein"),s("Non-HDL","non-hdl cholesterol","non hdl cholesterol","nonhdl","non-hdl","non hdl"),s("Creatinine","creatinine","serum creatinine","creatinine, serum","s. creatinine","creatinine (serum)"),s("BUN","blood urea nitrogen","bun","urea","blood urea","serum urea"),s("Uric Acid","uric acid","serum uric acid","uric acid, serum","s. uric acid"),s("eGFR","egfr","estimated gfr","gfr","glomerular filtration rate"),s("UACR","uacr","urine albumin creatinine ratio","microalbumin","urine microalbumin","albumin creatinine ratio"),s("Sodium","sodium","na","na+","serum sodium"),s("Potassium","potassium","k","k+","serum potassium"),s("Calcium","calcium","ca","serum calcium","calcium, total"),s("TSH","tsh","thyroid stimulating hormone","serum tsh","tsh ultrasensitive","tsh (ultrasensitive)"),s("T3","t3","total t3","triiodothyronine"),s("T4","t4","total t4","thyroxine"),s("Free T3","free t3","ft3"),s("Free T4","free t4","ft4","free thyroxine"),s("SGPT (ALT)","sgpt","alt","sgpt (alt)","alanine aminotransferase","sgpt(alt)","alt (sgpt)","alanine transaminase","sgpt (alt), serum"),s("SGOT (AST)","sgot","ast","sgot (ast)","aspartate aminotransferase","sgot(ast)","ast (sgot)","aspartate transaminase","sgot (ast), serum"),s("ALP","alp","alkaline phosphatase","alkaline phosphatase (alp)","alk phosphatase","alkaline phosphatase (alp), serum"),s("GGT","ggt","gamma gt","gamma glutamyl transferase","gamma-glutamyl transferase"),s("Total Bilirubin","total bilirubin","bilirubin total","bilirubin, total","s. bilirubin","serum bilirubin"),s("Direct Bilirubin","direct bilirubin","bilirubin direct","bilirubin, direct","conjugated bilirubin"),s("Albumin","albumin","serum albumin","s. albumin"),s("Total Protein","total protein","protein total","serum total protein","s. protein"),s("Hemoglobin","hemoglobin","haemoglobin","hb","hgb"),s("WBC","wbc","white blood cells","total wbc","total leucocyte count","tlc","leucocyte count"),s("RBC","rbc","red blood cells","total rbc","erythrocyte count"),s("Platelets","platelets","platelet count","plt"),s("ESR","esr","erythrocyte sedimentation rate","sed rate"),s("CRP","crp","c-reactive protein","hs-crp","c reactive protein"),s("Vitamin D","vitamin d","25-hydroxy vitamin d","25-oh vitamin d","vit d","25 hydroxy vitamin d","vitamin d3","vitamin d total","vitamin d 25 hydroxy","25(oh) vitamin d"),s("Vitamin B12","vitamin b12","vit b12","b12","cyanocobalamin","cobalamin"),s("Ferritin","ferritin","serum ferritin","s. ferritin"),s("Iron","iron","serum iron","s. iron","iron, serum"),s("TIBC","tibc","total iron binding capacity","iron binding capacity"),s("Fasting Insulin","fasting insulin","insulin fasting","serum insulin","insulin"),s("C-Peptide","c-peptide","c peptide","c-peptide fasting"),s("PSA","psa","prostate specific antigen"),s("Phosphorus","phosphorus","phosphate","serum phosphorus","inorganic phosphorus"),r})(),ea=r=>{if(!r)return r;const s=r.toLowerCase().trim();return Vx[s]||r},ta=async(r,s,d)=>{const c=d||ee;if(!ie||!s||!c)return!1;if(mo.current.has(r.id))return!0;mo.current.add(r.id);try{const u=r.type==="lab",f=s.report_date||s.collection_date||s.date||null,h=await fetch(`${ie}/api/patients/${c}/documents`,{method:"POST",headers:ze(),body:JSON.stringify({doc_type:u?"lab_report":s.report_type||r.type,title:`${u?s.lab_name||"Lab Report":s.report_type||r.type}  ${r.fileName}`,file_name:r.fileName,extracted_data:s,doc_date:f,source:s.lab_name||`intake_${(ue==null?void 0:ue.short_name)||"mo"}`,notes:u?`${s.lab_name||""} | ${(s.panels||[]).reduce((j,w)=>j+w.tests.length,0)} tests | ${f||""}`:s.impression||""})});if(!h.ok)return console.error("Doc save HTTP error:",h.status,await h.text()),mo.current.delete(r.id),!1;const m=await h.json();if(console.log(" Document saved:",m.id,r.fileName),m.id&&r.base64&&await qs(m.id,r.base64,r.mediaType,r.fileName),u&&s.panels)for(const j of s.panels)for(const w of j.tests||[])await fetch(`${ie}/api/patients/${c}/labs`,{method:"POST",headers:ze(),body:JSON.stringify({test_name:ea(w.test_name),result:String(w.result_text||w.result),unit:w.unit||"",flag:w.flag||"N",ref_range:w.ref_range||"",test_date:f})}).catch(()=>{});return mt(j=>j.map(w=>w.id===r.id?{...w,saved:!0,saveError:null}:w)),!0}catch(u){return mo.current.delete(r.id),mt(f=>f.map(h=>h.id===r.id?{...h,saveError:u.message}:h)),!1}},Md=async r=>{const s=r||ee;if(!s){alert("Search or create patient first");return}const d=md.current.filter(c=>c.data&&!c.saved);for(const c of d)mt(u=>u.map(f=>f.id===c.id?{...f,saving:!0}:f)),await ta(c,c.data,s),mt(u=>u.map(f=>f.id===c.id?{...f,saving:!1}:f));try{const u=await(await fetch(`${ie}/api/patients/${s}`,{headers:ze()})).json();(u.patient||u.id)&&Ft(u)}catch{}};S.useEffect(()=>{ee&&it.some(r=>r.data&&!r.saved)&&(console.log(` dbPatientId set (${ee}), auto-saving ${it.filter(r=>r.data&&!r.saved).length} unsaved intake reports...`),Md(ee))},[ee]);const hp=async r=>{try{const d=await(await fetch(`${ie}/api/documents/${r}/file-url`,{headers:ze()})).json();d.url?window.open(d.url,"_blank"):alert("No file attached to this document")}catch(s){alert("Failed to load file: "+s.message)}},gp=async()=>{var h,m,j,w,R,M,$,y,_;if(!Ps.trim()||so)return;const r=Ps.trim();td("");const s=[...ed,{role:"user",content:r}];Gs(s),Bu(!0);let d="";b.name&&(d+=`Patient: ${b.name}, ${b.age}Y/${b.sex}
`),(h=C==null?void 0:C.diagnoses)!=null&&h.length&&(d+=`Diagnoses: ${C.diagnoses.map(k=>`${k.label} (${k.status})`).join(", ")}
`),(m=T==null?void 0:T.medications_confirmed)!=null&&m.length&&(d+=`Current Meds: ${T.medications_confirmed.map(k=>`${k.name} ${k.dose} ${k.frequency}`).join(", ")}
`),(j=C==null?void 0:C.investigations)!=null&&j.length&&(d+=`Recent Labs: ${C.investigations.map(k=>`${k.test}: ${k.value} ${k.unit||""} ${k.flag||""}`).join(", ")}
`),N.bp_sys&&(d+=`Vitals: BP ${N.bp_sys}/${N.bp_dia}, Pulse ${N.pulse}, SpO2 ${N.spo2}%, Wt ${N.weight}kg, BMI ${N.bmi}
`),(w=C==null?void 0:C.chief_complaints)!=null&&w.length&&(d+=`Chief Complaints: ${C.chief_complaints.join(", ")}
`),(R=C==null?void 0:C.complications)!=null&&R.length&&(d+=`Complications: ${C.complications.map(k=>`${k.name}: ${k.status}`).join(", ")}
`),($=(M=C==null?void 0:C.history)==null?void 0:M.medical)!=null&&$.length&&(d+=`Medical History: ${C.history.medical.join(", ")}
`),Cr.filter(k=>k.data).length&&(d+=`Imaging: ${Cr.filter(k=>k.data).map(k=>`${k.data.report_type}: ${k.data.impression}`).join("; ")}
`),de&&((y=de.diagnoses)!=null&&y.length&&(d+=`All Diagnoses: ${de.diagnoses.map(k=>`${k.label}:${k.status}`).join(", ")}
`),(_=de.medications)!=null&&_.length&&(d+=`All Meds (active): ${de.medications.filter(k=>k.is_active).map(k=>`${k.name} ${k.dose||""}`).join(", ")}
`));const c=s.map(k=>({role:k.role,content:k.content})),{text:u,error:f}=await yS(c,d);Gs(f?k=>[...k,{role:"assistant",content:` Error: ${f}`}]:k=>[...k,{role:"assistant",content:u}]),Bu(!1),setTimeout(()=>{var k;return(k=nd.current)==null?void 0:k.scrollTo(0,nd.current.scrollHeight)},100)},na=S.useRef(!1),Xx=async()=>{var r,s;if(ee&&ie&&T&&!na.current){na.current=!0;try{const d={doc_type:"prescription",title:`Treatment Plan  ${G||"Doctor"}  ${new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}`,file_name:`plan_${ee}_${Date.now()}.json`,extracted_data:{patient:{name:b.name,age:b.age,sex:b.sex,phone:b.phone,fileNo:b.fileNo},doctor:G,mo:x,date:new Date().toISOString(),diagnoses:(C==null?void 0:C.diagnoses)||[],complications:(C==null?void 0:C.complications)||[],medications:T.medications_confirmed||[],diet_lifestyle:T.diet_lifestyle||[],self_monitoring:T.self_monitoring||[],goals:T.goals||[],follow_up:T.follow_up||{},future_plan:T.future_plan||[],chief_complaints:(C==null?void 0:C.chief_complaints)||[],assessment_summary:T.assessment_summary||"",investigations:(C==null?void 0:C.investigations)||[],vitals:{...N},plan_edits:se},doc_date:new Date().toISOString().split("T")[0],source:"scribe_print",notes:`Printed by ${(ue==null?void 0:ue.name)||G}`,consultation_id:((s=(r=P==null?void 0:P.consultations)==null?void 0:r[0])==null?void 0:s.id)||null},u=await(await fetch(`${ie}/api/patients/${ee}/documents`,{method:"POST",headers:ze(),body:JSON.stringify(d)})).json();if(u.id){console.log(" Plan saved as document #"+u.id);try{const f=document.querySelector("[data-plan-area]")||document.querySelector(".print-area");if(f){window.html2pdf||await new Promise((w,R)=>{const M=document.createElement("script");M.src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js",M.onload=w,M.onerror=R,document.head.appendChild(M)});const h=await window.html2pdf().set({margin:[8,8,8,8],filename:`Treatment_Plan_${b.name}_${new Date().toISOString().split("T")[0]}.pdf`,image:{type:"jpeg",quality:.95},html2canvas:{scale:2,useCORS:!0,logging:!1},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(f).outputPdf("blob"),m=new FileReader,j=await new Promise(w=>{m.onload=()=>w(m.result.split(",")[1]),m.readAsDataURL(h)});await qs(u.id,j,"application/pdf",`Treatment_Plan_${b.name}.pdf`),console.log(" PDF uploaded for plan #"+u.id)}}catch(f){console.log("PDF generation:",f.message)}}}catch(d){console.log("Plan save on print:",d.message)}}window.print()},Kx=async()=>{var u,f,h,m,j,w;Dl(!0),no(null);let r="";b.name&&(r+=`Patient: ${b.name}, ${b.age}Y/${b.sex}
`);const s=xe(C,"diagnoses");s.length&&(r+=`Diagnoses: ${s.map(R=>`${R.label} (${R.status})`).join(", ")}
`);const d=xe(T,"medications_confirmed").length>0?xe(T,"medications_confirmed"):xe(C,"previous_medications");if(d.length&&(r+=`Current Meds: ${d.map(R=>`${R.name} ${R.dose} ${R.frequency||R.timing||""}`).join(", ")}
`),(u=C==null?void 0:C.investigations)!=null&&u.length&&(r+=`Recent Labs: ${C.investigations.map(R=>`${R.test}: ${R.value} ${R.unit||""} (ref: ${R.ref||""})`).join(", ")}
`),N.bp_sys&&(r+=`Vitals: BP ${N.bp_sys}/${N.bp_dia}, Pulse ${N.pulse}, Wt ${N.weight}kg, BMI ${N.bmi}
`),(f=C==null?void 0:C.complications)!=null&&f.length&&(r+=`Complications: ${C.complications.map(R=>`${R.name}: ${R.status} ${R.detail||""}`).join(", ")}
`),(h=de==null?void 0:de.lab_results)!=null&&h.length){const R=de.lab_results.slice(0,15).map(M=>`${M.test_name}: ${M.result} ${M.unit||""} (${M.test_date||""})`);r+=`Lab History: ${R.join(", ")}
`}(m=T==null?void 0:T.investigations_ordered)!=null&&m.length&&(r+=`Investigations Ordered: ${T.investigations_ordered.map(ln).join(", ")}
`),T!=null&&T.follow_up&&(r+=`Follow-up: ${T.follow_up.duration||""} ${T.follow_up.date||""}
`),(j=T==null?void 0:T.diet_lifestyle)!=null&&j.length&&(r+=`Lifestyle: ${T.diet_lifestyle.map(R=>typeof R=="string"?R:R.advice).join(", ")}
`),(w=T==null?void 0:T.goals)!=null&&w.length&&(r+=`Goals: ${T.goals.map(R=>`${R.marker}: ${R.current}  ${R.target}`).join(", ")}
`);const c=`You are a clinical pharmacist and quality reviewer auditing a prescription at Gini Advanced Care Hospital. 
Review the prescription below and return a JSON array of findings. Each finding is an object:
{"type":"warning"|"suggestion"|"good"|"missing","category":"Medication"|"Lab"|"Diagnosis"|"Monitoring"|"Guidelines","text":"concise finding","detail":"1-2 line explanation","priority":"high"|"medium"|"low"}

CHECK FOR:
1. MISSING MEDICATIONS  based on diagnoses, are any standard-of-care drugs missing? (e.g., DM2 patient without statin, HTN without ACEi/ARB, CKD without SGLT2i if eGFR allows)
2. DRUG INTERACTIONS  any known interactions between current meds?
3. MISSING LABS  based on diagnoses, any overdue screenings? (e.g., annual UACR for diabetes, annual lipids, periodic TFTs for thyroid patients, HbA1c every 3-6 months)
4. DOSE ISSUES  any dose adjustments needed based on labs? (e.g., Metformin dose vs eGFR, statin dose vs LDL target)
5. GUIDELINE COMPLIANCE  ADA 2024, ESC, KDIGO guidelines: is the prescription following current guidelines? Where is it deviating?
6. WHAT'S DONE WELL  acknowledge good practices (e.g., appropriate insulin titration, comprehensive lab panel ordered)
7. MONITORING GAPS  any vitals or home monitoring missing? (e.g., SMBG for insulin patients, home BP monitoring for HTN)
8. PERSONALIZATION  note any areas where the doctor has made personalized choices that differ from standard guidelines but may be clinically appropriate

Return ONLY valid JSON array. No markdown, no explanation outside the JSON.
Example: [{"type":"warning","category":"Medication","text":"No statin prescribed","detail":"ADA recommends statin therapy for all DM patients >40y with any ASCVD risk factor","priority":"high"}]`;try{const y=((await(await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":void 0,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:3e3,system:c,messages:[{role:"user",content:r}]})})).json()).content||[]).map(k=>k.text||"").join("").replace(/```json|```/g,"").trim(),_=JSON.parse(y);no(Array.isArray(_)?_:[])}catch(R){no([{type:"warning",text:"Review failed: "+R.message,detail:"",priority:"high"}])}Dl(!1)},Jx=["Type 2 Diabetes","Type 1 Diabetes","Hypertension","Thyroid","PCOS","Dyslipidemia","CKD","Obesity","Fatty Liver","CAD","Asthma/COPD","Diabetic Neuropathy","Diabetic Nephropathy","General Medicine","Other"],Zx=["dose_adjustment","new_medication","medication_switch","lifestyle_change","referral","investigation_ordered","de-escalation","protocol_deviation"],Qx=async()=>{var s,d;if(!ie)return;const r=(d=(s=de==null?void 0:de.consultations)==null?void 0:s[0])==null?void 0:d.id;_l(!0);try{const c={patient_id:ee||null,doctor_id:(ue==null?void 0:ue.id)||null,doctor_name:G||(ue==null?void 0:ue.name)||"",reasoning_text:Yn,primary_condition:oi,reasoning_tags:gs,capture_method:Vn?Yn?"both":"audio":"text",patient_context:ee?void 0:`Patient: ${b.name||"?"}, ${b.age||"?"}Y/${b.sex||"?"}, Phone: ${b.phone||"?"}`},u=r?`${ie}/api/consultations/${r}/reasoning`:`${ie}/api/reasoning`,h=await(await fetch(u,{method:"POST",headers:ze(),body:JSON.stringify(c)})).json();if(h.error){alert("Save failed: "+h.error),_l(!1);return}if(iu(h),Vn&&h.id){const m=new FileReader;m.onload=async()=>{const j=m.result.split(",")[1];await fetch(`${ie}/api/reasoning/${h.id}/audio`,{method:"POST",headers:ze(),body:JSON.stringify({base64:j,duration:Math.round(Vn.size/3200)})}),Yn&&await fetch(`${ie}/api/reasoning/${h.id}`,{method:"PUT",headers:ze(),body:JSON.stringify({audio_transcript:Yn,transcription_status:"completed"})})},m.readAsDataURL(Vn)}}catch(c){alert("Save failed: "+c.message)}_l(!1)},qx=async()=>{try{const r=await navigator.mediaDevices.getUserMedia({audio:!0});Km.current=r;const s=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm",d=new MediaRecorder(r,{mimeType:s});Wl.current=[],d.ondataavailable=c=>{c.data.size>0&&Wl.current.push(c.data)},d.onstop=async()=>{const c=new Blob(Wl.current,{type:s});au(c),lu(URL.createObjectURL(c)),r.getTracks().forEach(u=>u.stop()),du(!0);try{let u="";o?u=await Hm(c,o,"en"):a&&(u=await Fm(c,a,"en")),u&&Bl(f=>f?f+`

`+u:u)}catch(u){console.log("CR transcription failed:",u.message)}du(!1)},Ul.current=d,d.start(250),su(!0)}catch{alert("Microphone access denied")}},eb=()=>{var r;((r=Ul.current)==null?void 0:r.state)==="recording"&&Ul.current.stop(),su(!1)},tb=["Different protocol for Indian patients","Cost/affordability consideration","Patient-specific factor AI missed","Drug combination preference","Dosage adjustment preference","Outdated guideline reference","AI overly cautious","AI missed contraindication","Other"],nb=async()=>{var s,d,c,u;if(!ie||!ee||!Xn)return;const r=(d=(s=de==null?void 0:de.consultations)==null?void 0:s[0])==null?void 0:d.id;if(r){yu(!0);try{const f={patient_id:ee,doctor_id:(ue==null?void 0:ue.id)||null,doctor_name:G||(ue==null?void 0:ue.name)||"",ai_rx_analysis:JSON.stringify(ri),ai_model:"claude-sonnet-4.5",agreement_level:Xn,feedback_text:fu,correct_approach:pu,reason_for_difference:gu,disagreement_tags:bs,primary_condition:oi||((u=(c=xe(C,"diagnoses"))==null?void 0:c[0])==null?void 0:u.label)||"",medications_involved:xe(T,"medications_confirmed").map(m=>m.name).filter(Boolean),severity:ys},h=await fetch(`${ie}/api/consultations/${r}/rx-feedback`,{method:"POST",headers:ze(),body:JSON.stringify(f)});Eu(await h.json())}catch(f){alert("Save failed: "+f.message)}yu(!1)}},Td=async r=>{if(ie){Au(!0),ii(null);try{const d=await(await fetch(`${ie}/api/reports/clinical-intelligence?period=${r||Hl}`,{headers:ze()})).json();d&&d.overview?ii(d):ii({overview:{cr_total:0,cr_month:0,rx_total:0,rx_month:0,agreement:[],audio_hours:0},reasoning_feed:[],rx_feed:[],doctor_stats:[],disagreement_tags:[]})}catch(s){console.error("CI report error:",s.message),ii({overview:{cr_total:0,cr_month:0,rx_total:0,rx_month:0,agreement:[],audio_hours:0},reasoning_feed:[],rx_feed:[],doctor_stats:[],disagreement_tags:[],_error:s.message})}Au(!1)}},So=async(r,s)=>{if(ie){vu(!0);try{const d=new URLSearchParams;r&&d.set("period",r),s&&d.set("doctor",s);const[c,u,f]=await Promise.all([fetch(`${ie}/api/reports/today?${d}`),fetch(`${ie}/api/reports/diagnoses`),fetch(`${ie}/api/reports/doctors`)]);ex(await c.json()),tx(await u.json()),nx(await f.json())}catch(d){console.error("Report load error:",d)}vu(!1)}},mp=async()=>{if(!(!Es.trim()||!ie)){wu(!0),Yl("");try{const s=await(await fetch(`${ie}/api/reports/query-data`)).json(),d=JSON.stringify(s.patients.slice(0,100),null,0),f=await(await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":void 0,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:3e3,system:`You are a clinical analytics assistant for Gini Advanced Care Hospital, Mohali.
You have access to structured patient data from the hospital database. Analyze and answer the query.
Be specific with numbers, names, and trends. Use tables for comparisons. Keep answers concise.
If the data doesn't contain enough info to answer accurately, say so.
Format: Use markdown. Bold key numbers. Use tables where helpful.`,messages:[{role:"user",content:`HOSPITAL DATA (${s.patient_count} patients):
${d}

QUERY: ${Es}`}]})})).json();Yl((f.content||[]).map(h=>h.text||"").join(""))}catch(r){Yl("Error: "+r.message)}wu(!1)}},xp=async r=>{var h,m;const s=r||z;if(!s)return;rt(j=>({...j,mo:!0})),Dt("mo");let d="";if(F!=null&&F.panels&&(d=`

LAB RESULTS:
${F.panels.flatMap(w=>w.tests.map(R=>`${R.test_name}: ${R.result_text||R.result} ${R.unit||""} ${R.flag==="H"?"[HIGH]":R.flag==="L"?"[LOW]":""}`)).join(`
`)}`),N.bp_sys&&(d+=`
VITALS: BP ${N.bp_sys}/${N.bp_dia}, Pulse ${N.pulse}, SpO2 ${N.spo2}%, Wt ${N.weight}kg, BMI ${N.bmi}`),((h=P==null?void 0:P.consultations)==null?void 0:h.length)>0){d+=`

FOLLOW-UP VISIT CONTEXT:`,Je.medCompliance&&(d+=`
Medication Compliance: ${Je.medCompliance}`),Je.dietExercise&&(d+=`
Diet/Exercise Adherence: ${Je.dietExercise}`),Je.sideEffects&&(d+=`
Side Effects: ${Je.sideEffects}`),Je.newSymptoms&&(d+=`
New Symptoms: ${Je.newSymptoms}`),Je.challenges&&(d+=`
Challenges: ${Je.challenges}`);const j=[...new Map((P.diagnoses||[]).map(M=>[M.diagnosis_id||M.label,M])).values()];j.length&&(d+=`
Known Diagnoses: ${j.map(M=>`${M.label} (${M.status})`).join(", ")}`),pi.length&&(d+=`
New external medicines: ${pi.map(M=>`${M.name} ${M.dose} ${M.doctor?`(from ${M.doctor})`:""}`).join(", ")}`),hi.length&&(d+=`
New conditions since last visit: ${hi.join(", ")}`);const w=P.consultations[0],R=((m=w==null?void 0:w.con_data)==null?void 0:m.goals)||[];R.length&&(d+=`
Previous Goals: ${R.map(M=>`${M.marker}: ${M.current}  target ${M.target}`).join(", ")}`)}const c=Cr.filter(j=>j.data);c.length>0&&(d+=`

IMAGING REPORTS:
${c.map(j=>`${j.data.report_type}: ${j.data.impression||""} ${(j.data.findings||[]).map(w=>`${w.parameter}=${w.value}${w.unit||""} (${w.interpretation})`).join(", ")}`).join(`
`)}`);const{data:u,error:f}=await Lo(lS,s+d);f?He(j=>({...j,mo:f})):u?Ie(vg(u)):He(j=>({...j,mo:"No data returned"})),rt(j=>({...j,mo:!1}))},rb=async()=>{var c,u;$u(!0);const r=[];tt.length&&r.push("Chief Complaints: "+tt.join(", "));const s=yo();if(s&&r.push("Examination: "+s),at.length){const f=at.map(h=>{var m;return((m=Pr.find(j=>j.id===h))==null?void 0:m.l)||h});r.push("Diagnoses: "+f.join(", "))}if(co&&r.push("Notes: "+co),N.bp_sys&&r.push(`Vitals: BP ${N.bp_sys}/${N.bp_dia}, Pulse ${N.pulse}, SpO2 ${N.spo2}, Wt ${N.weight}kg, BMI ${N.bmi}`),F!=null&&F.panels){const f=F.panels.flatMap(h=>h.tests.map(m=>`${m.test_name}: ${m.result_text||m.result} ${m.unit||""} ${m.flag==="H"?"[HIGH]":m.flag==="L"?"[LOW]":""}`));r.push("Labs: "+f.join(", "))}if((c=de==null?void 0:de.medications)!=null&&c.length&&r.push("Current Medications: "+de.medications.slice(0,15).map(f=>`${f.name} ${f.dose||""} ${f.frequency||""}`).join(", ")),((u=P==null?void 0:P.consultations)==null?void 0:u.length)>0){const f=[];Je.medCompliance&&f.push(`Med Compliance: ${Je.medCompliance}`),Je.dietExercise&&f.push(`Diet/Exercise: ${Je.dietExercise}`),Je.sideEffects&&f.push(`Side Effects: ${Je.sideEffects}`),Je.newSymptoms&&f.push(`New Symptoms: ${Je.newSymptoms}`),Je.challenges&&f.push(`Challenges: ${Je.challenges}`),f.length&&r.push("Follow-up Assessment: "+f.join(", ")),pi.length&&r.push("New external medicines: "+pi.map(h=>`${h.name} ${h.dose} ${h.doctor?`(from ${h.doctor})`:""}`).join(", ")),hi.length&&r.push("New conditions: "+hi.join(", "))}const d=`You are an endocrinology AI assistant. Given the clinical data below, provide:
1. DIAGNOSES: List each diagnosis with status (Controlled/Uncontrolled/New) and brief reasoning
2. TREATMENT_PLAN: For each medication suggest ADD/CONTINUE/MODIFY/STOP with brief reason
3. INVESTIGATIONS: Tests you'd order with reason
4. RED_FLAGS: Any urgent concerns

CRITICAL CLASSIFICATION RULES:
- Type 2 DM: HbA1c < 7% = "Controlled", HbA1c 7-8% = "Uncontrolled", HbA1c > 8% = "Uncontrolled" (severely)
- Hypertension: BP < 130/80 = "Controlled"
- Dyslipidemia: LDL at target for risk category = "Controlled"
- Do NOT mark a condition as "Uncontrolled" if the key biomarker is within accepted target range

Respond as JSON: {"diagnoses":[{"label":"...","status":"...","reason":"..."}],"treatment_plan":[{"action":"ADD|CONTINUE|MODIFY|STOP","drug":"...","detail":"...","reason":"..."}],"investigations":["..."],"red_flags":["..."]}

CLINICAL DATA:
${r.join(`
`)}`;try{const{data:f,error:h}=await Lo(d,"Analyze this patient and provide your independent clinical assessment.");f&&(po(f),uo(!0))}catch(f){console.error("Shadow AI:",f)}$u(!1)},ob=()=>{if(!he)return;dd(JSON.parse(JSON.stringify(he)));const r=(he.treatment_plan||[]).filter(d=>{const c=d.drug||`tx_${(he.treatment_plan||[]).indexOf(d)}`;return rr[c]!=="disagree"}),s={assessment_summary:`${b.name}: ${(he.diagnoses||[]).map(d=>`${d.label} (${d.status})`).join(", ")}. ${(he.red_flags||[]).length>0?" "+he.red_flags[0]:""}`,key_issues:(he.diagnoses||[]).map(d=>`${d.label}  ${d.status}: ${d.reason}`),medications_confirmed:r.filter(d=>d.action!=="STOP").map(d=>({name:(d.drug||"").toUpperCase(),composition:d.drug||"",dose:d.dose||d.detail||"",frequency:d.frequency||"OD",timing:d.timing||"Morning",route:"Oral",forDiagnosis:d.forDiagnosis||[],isNew:d.action==="ADD",_shadowAction:d.action,_shadowReason:d.reason})),medications_stopped:r.filter(d=>d.action==="STOP").map(d=>({name:(d.drug||"").toUpperCase(),reason:d.reason||""})),investigations_ordered:(he.investigations||[]).map(ln),diet_lifestyle:[],follow_up:{duration:"6 weeks",tests_to_bring:(he.investigations||[]).slice(0,5).map(ln)},goals:[],self_monitoring:[],future_plan:[],_fromShadow:!0};ve(s),n("plan")},bp=(r,s,d,c)=>{po(u=>{var h;const f={...u};return(h=f[r])!=null&&h[s]&&(f[r]=[...f[r]],f[r][s]={...f[r][s],[d]:c}),f})},yp=(r,s)=>{po(d=>({...d,[r]:[...d[r]||[],s]}))},Sp=(r,s)=>{po(d=>({...d,[r]:(d[r]||[]).filter((c,u)=>u!==s)}))},Ep=()=>{const r=de;if(!r)return null;const s=(r.consultations||[]).sort((re,Me)=>{const I=new Date(Me.visit_date)-new Date(re.visit_date);return I!==0?I:new Date(Me.created_at)-new Date(re.created_at)}),d=s.length>0,c=s[0];s[1];const u=r.diagnoses||[],f=[],h=new Set;u.forEach(re=>{h.has(re.diagnosis_id||re.label)||(h.add(re.diagnosis_id||re.label),f.push(re))});const m=(r.medications||[]).filter(re=>c?re.consultation_id===c.id:!0),j=m.length>0?m:(r.medications||[]).slice(0,15),w=(r.vitals||[]).sort((re,Me)=>new Date(Me.recorded_at)-new Date(re.recorded_at)),R=N.bp_sys?N:w[0],M=w.length>1?w[1]:null,$={};(r.lab_results||[]).forEach(re=>{$[re.test_name]||($[re.test_name]=[]),$[re.test_name].push(re)});const y=[],_=["HbA1c","Fasting Glucose","FBS","PPBS","Post Prandial Glucose","Creatinine","eGFR","EGFR","Total Cholesterol","LDL","HDL","Triglycerides","TSH","SGPT","ALT","SGOT","AST","Hemoglobin","Hb","UACR","Microalbumin"];Object.entries($).forEach(([re,Me])=>{const I=Me.sort((Ue,dt)=>new Date(dt.test_date)-new Date(Ue.test_date)),V=I[0],X=I[1];if(!(V!=null&&V.result))return;const fe=_.some(Ue=>re.toLowerCase().includes(Ue.toLowerCase()));if(!fe&&I.length<2)return;const pe=parseFloat(V.result),Ge=X?parseFloat(X.result):null;let Ct="stable";if(Ge!==null&&!isNaN(pe)&&!isNaN(Ge)){const Ue=(pe-Ge)/Math.abs(Ge||1)*100;Ue>10?Ct="worsening":Ue<-10&&(Ct="improving")}(fe||Ct!=="stable")&&y.push({name:re,latest:V.result,latestUnit:V.unit||"",latestDate:V.test_date,latestFlag:V.flag,previous:(X==null?void 0:X.result)||null,prevDate:(X==null?void 0:X.test_date)||null,trend:Ct,isKey:fe})});const k=c!=null&&c.visit_date?String(c.visit_date).slice(0,10):null,le=k?(r.lab_results||[]).filter(re=>re.test_date&&String(re.test_date).slice(0,10)>k):[],Ae=c?Math.round((Date.now()-new Date(c.visit_date))/864e5):null;let J="";if(d){J+=`FOLLOW-UP PATIENT  ${b.name}, ${b.age}Y/${b.sex}`,b.fileNo&&(J+=`, File #${b.fileNo}`),J+=`

`,J+=`KNOWN CONDITIONS: ${f.map(I=>`${I.label} (${I.status})`).join(", ")||"None recorded"}

`,J+=`LAST VISIT: ${c.visit_date?new Date(c.visit_date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"Unknown"}  ${Ae} days ago`,c.con_name&&(J+=`  seen by ${c.con_name}`),J+=`

`,J+=`CURRENT MEDICATIONS:
${j.length?j.map(I=>`   ${I.name} ${I.dose||""} ${I.timing||I.frequency||""}`).join(`
`):"  None recorded"}

`;const re=y.filter(I=>I.trend==="improving"),Me=y.filter(I=>I.trend==="worsening");if(re.length&&(J+=` IMPROVING: ${re.map(I=>`${I.name} ${I.previous}${I.latest}${I.latestUnit}`).join(", ")}
`),Me.length&&(J+=` WORSENING: ${Me.map(I=>`${I.name} ${I.previous}${I.latest}${I.latestUnit}`).join(", ")}
`),le.length&&(J+=`
 NEW LABS (${le.length}): ${[...new Set(le.map(I=>I.test_name))].join(", ")}
`),R!=null&&R.bp_sys){if(J+=`
TODAY'S VITALS: BP ${R.bp_sys}/${R.bp_dia}`,M!=null&&M.bp_sys&&(J+=` (prev: ${M.bp_sys}/${M.bp_dia})`),R.weight&&(J+=`, Wt ${R.weight}kg`,M!=null&&M.weight)){const I=(parseFloat(R.weight)-parseFloat(M.weight)).toFixed(1);I!=0&&(J+=` (${I>0?"+":""}${I}kg)`)}R.bmi&&(J+=`, BMI ${R.bmi}`),J+=`
`}}else J+=`NEW PATIENT  ${b.name}, ${b.age}Y/${b.sex}`,b.fileNo&&(J+=`, File #${b.fileNo}`),b.address&&(J+=`
Address: ${b.address}`),J+=`

`,C&&(J+=`CHIEF COMPLAINTS: ${(C.chief_complaints||[]).join(", ")||""}

`,J+=`DIAGNOSES: ${xe(C,"diagnoses").map(re=>`${re.label} (${re.status})`).join(", ")||"To be determined"}

`,J+=`MEDICATIONS: ${xe(C,"previous_medications").map(re=>`${re.name} ${re.dose||""}`).join(", ")||"None"}

`),R!=null&&R.bp_sys&&(J+=`VITALS: BP ${R.bp_sys}/${R.bp_dia}, Pulse ${R.pulse||""}, Wt ${R.weight||""}kg, BMI ${R.bmi||""}
`);return{isFollowUp:d,daysSince:Ae,briefText:J,diagnoses:f,medications:j,labTrends:y,newLabs:le,improving:y.filter(re=>re.trend==="improving"),worsening:y.filter(re=>re.trend==="worsening"),currentVitals:R,prevVitals:M,lastVisit:c,totalVisits:s.length}},Ap=async()=>{if(!Z)return;rt(c=>({...c,con:!0})),Dt("con");let r=Z;if(C){const c=xe(C,"diagnoses").map(m=>m.label).join(", "),u=xe(C,"previous_medications").map(m=>`${m.name} ${m.dose}`).join(", "),f=xe(C,"investigations").map(m=>`${m.test}: ${m.value}${m.unit}`).join(", ");r+=`

PATIENT CONTEXT FROM MO:
Diagnoses: ${c}
Previous Meds: ${u}
Investigations: ${f}`,N.bp_sys&&(r+=`
Vitals: BP ${N.bp_sys}/${N.bp_dia}, Wt ${N.weight}kg, BMI ${N.bmi}`);const h=Cr.filter(m=>m.data);h.length>0&&(r+=`
Imaging: ${h.map(m=>`${m.data.report_type}: ${m.data.impression||(m.data.findings||[]).map(j=>`${j.parameter}=${j.value}`).join(", ")}`).join("; ")}`)}if(kr==="merge"&&he){const c=(he.treatment_plan||[]).filter(h=>{const m=h.drug||`tx_${(he.treatment_plan||[]).indexOf(h)}`;return rr[m]!=="disagree"}),u=(he.treatment_plan||[]).filter(h=>{const m=h.drug||`tx_${(he.treatment_plan||[]).indexOf(h)}`;return rr[m]==="disagree"});let f=`

 AI SHADOW ANALYSIS (adopted by consultant as baseline) `;f+=`
Diagnoses: ${(he.diagnoses||[]).map(h=>`${h.label} (${h.status})  ${h.reason}`).join("; ")}`,c.length>0&&(f+=`
Adopted Treatment Plan:`,c.forEach(h=>{f+=`
  ${h.action}: ${h.drug} ${h.dose||""} ${h.frequency||""} ${h.timing||""}  ${h.reason||""}`})),u.length>0&&(f+=`
Rejected by consultant (DO NOT include):`,u.forEach(h=>{f+=`
  ${h.action}: ${h.drug}  REJECTED`})),(he.investigations||[]).length>0&&(f+=`
Suggested investigations: ${he.investigations.map(ln).join(", ")}`),(he.red_flags||[]).length>0&&(f+=`
Red flags: ${he.red_flags.join("; ")}`),f+=`

IMPORTANT: The consultant's verbal notes OVERRIDE the AI baseline. If the consultant says "change insulin to bedtime" or "add vitamin D" or "stop the second statin", apply those changes to the AI baseline. The final output should be the MERGED result: AI baseline + consultant's modifications.`,f+=`
If consultant says "agree with AI" or doesn't mention specific changes, keep the AI recommendations as-is.`,f+=`
 END AI CONTEXT `,r+=f}const{data:s,error:d}=await Lo(dS,r);d?He(c=>({...c,con:d})):s?ve(Lg(s)):He(c=>({...c,con:"No data returned"})),rt(c=>({...c,con:!1}))},Rd=(r,s,d)=>Ht(c=>({...c,[r]:{...c[r]||{},[s]:d}})),Mp=[...xe(T,"medications_confirmed").length>0?xe(T,"medications_confirmed"):xe(C,"previous_medications").map(r=>({...r,isNew:!1,route:r.route||"Oral"})),...xe(T,"medications_needs_clarification").map((r,s)=>{const d=je[s]||{};return d.resolved_name?{...r,name:d.resolved_name,dose:d.resolved_dose||r.default_dose||"",frequency:d.resolved_freq||"OD",timing:d.resolved_timing||r.default_timing||"",resolved:!0,isNew:!0}:null}).filter(Boolean)],on=(()=>{const r=(P==null?void 0:P.medications)||[];if(r.length===0)return xe(C,"previous_medications").map(d=>({...d,prescriber:"Previous",isNew:!1,route:d.route||"Oral"}));const s=new Set;return r.filter(d=>{const c=(d.name||"").toUpperCase().replace(/\s+/g,"");return s.has(c)?!1:(s.add(c),d.is_active!==!1)}).map(d=>({name:d.name||d.pharmacy_match||"",composition:d.composition||"",dose:d.dose||"",frequency:d.frequency||"",timing:d.timing||"",route:d.route||"Oral",isNew:d.is_new||!1,forDiagnosis:d.for_diagnosis?[d.for_diagnosis]:[],prescriber:d.prescriber||d.con_name||"External",specialty:"",hospital:"",visitDate:d.prescribed_date||d.started_date||d.created_at||"",consultationId:d.consultation_id}))})(),Tp=(()=>{const r=(P==null?void 0:P.medications)||[];if(r.length===0)return[];const s={};return r.filter(d=>d.is_active!==!1).forEach(d=>{const c=d.prescriber||d.con_name||"Unknown",u=c.match(/^(.+?)\s*\(([^)]+)\)\s*$/),f=u?u[1].trim():c,h=u?u[2].trim():"",m=f;s[m]||(s[m]={doctor:f,specialty:h,hospital:"",date:d.prescribed_date||d.created_at,meds:[]});const j=(d.name||"").toUpperCase().replace(/\s+/g,"");s[m].meds.some(w=>(w.name||"").toUpperCase().replace(/\s+/g,"")===j)||s[m].meds.push({name:d.name||"",composition:d.composition||"",dose:d.dose||"",frequency:d.frequency||"",timing:d.timing||"",route:d.route||"Oral",isNew:d.is_new||!1,prescriber:c,visitDate:d.prescribed_date||d.created_at||""}),d.prescribed_date&&(!s[m].date||d.prescribed_date>s[m].date)&&(s[m].date=d.prescribed_date),h&&!s[m].specialty&&(s[m].specialty=h)}),Object.values(s).sort((d,c)=>(c.date||"").localeCompare(d.date||""))})(),ib=()=>{const r=[...Br.map(h=>({...h,prescriber:G||"Gini",isGini:!0})),...on.filter(h=>pt[h.name]!=="stop"&&pt[h.name]!=="hold")],s=new Set,d=[];r.forEach(h=>{const m=(h.name||"").toUpperCase().replace(/\s+/g,"");s.has(m)||(s.add(m),d.push(h))});const c=[{id:"morning",label:" Morning",time:"7:00 AM",match:h=>/morn|wake|empty.?stomach|OD(?!\s*HS)/i.test(h)&&!/before.*break|30.*min/i.test(h)},{id:"beforeBreak",label:" Before Breakfast (30 min)",time:"7:30 AM",match:h=>/before.*break|30.*min.*before|empty.*stomach.*break|before.*meal.*morn/i.test(h)},{id:"afterBreak",label:" After Breakfast",time:"8:30 AM",match:h=>/after.*break|after.*meal.*morn|BD|TDS/i.test(h)&&!/before/i.test(h)},{id:"afterLunch",label:" After Lunch",time:"1:30 PM",match:h=>/after.*lunch|lunch|afternoon|BD.*after|TDS/i.test(h)},{id:"evening",label:" Evening",time:"5:00 PM",match:h=>/evening|5.*pm|SOS|as.*needed|repeat|fever/i.test(h)},{id:"afterDinner",label:" After Dinner",time:"8:30 PM",match:h=>/after.*dinner|after.*meal.*night|BD/i.test(h)},{id:"bedtime",label:" Night / Bedtime",time:"10:00 PM",match:h=>/night|HS|bedtime|bed|10.*pm|with.*milk|at.*bed/i.test(h)},{id:"asDirected",label:" As Directed",time:"",match:()=>!1}],u=/atorva|rosuvasta|atchol|lipitor|crestor|statin|simva|pravasta|fluvasta/i,f=c.map(h=>({...h,meds:[]}));return d.forEach(h=>{var R,M,$,y,_,k,le,Ae;const m=`${h.timing||""} ${h.frequency||""}`.trim(),j=(h.name||"").toUpperCase();let w=!1;if(u.test(j)?((R=f.find(J=>J.id==="bedtime"))==null||R.meds.push(h),w=!0):/BD/i.test(m)&&!/TDS/i.test(m)?((M=f.find(J=>J.id==="afterBreak"))==null||M.meds.push(h),($=f.find(J=>J.id==="afterDinner"))==null||$.meds.push(h),w=!0):/TDS/i.test(m)&&((y=f.find(J=>J.id==="afterBreak"))==null||y.meds.push(h),(_=f.find(J=>J.id==="afterLunch"))==null||_.meds.push(h),(k=f.find(J=>J.id==="afterDinner"))==null||k.meds.push(h),w=!0),!w){for(const J of f)if(J.match(m)){J.meds.push(h),w=!0;break}}w||(/OD/i.test(m)?(le=f.find(J=>J.id==="morning"))==null||le.meds.push(h):(Ae=f.find(J=>J.id==="asDirected"))==null||Ae.meds.push(h))}),f.filter(h=>h.meds.length>0)},Nt=r=>ce(s=>{const d=new Set(s);return d.has(r)?d.delete(r):d.add(r),d}),vd=(r,s)=>Se(d=>({...d,[r]:s})),Eo=(r,s)=>se[r]!==void 0?se[r]:s,sb=r=>Se(s=>({...s,_removedMeds:[...s._removedMeds||[],r]})),ab=r=>Se(s=>({...s,_removedDiags:[...s._removedDiags||[],r]})),lb=r=>Se(s=>({...s,_removedLifestyle:[...s._removedLifestyle||[],r]})),db=r=>Se(s=>({...s,_removedGoals:[...s._removedGoals||[],r]})),cb=r=>Se(s=>({...s,_removedMonitors:[...s._removedMonitors||[],r]})),fb=r=>Se(s=>({...s,_removedFuture:[...s._removedFuture||[],r]})),ub=()=>{ce(new Set),Se({})},Ld=(r,s,d)=>{const c=(T==null?void 0:T.medications_confirmed)||[],u=c.indexOf(r);if(u>=0){const m=[...c];m[u]={...m[u],[s]:d},ve(j=>({...j,medications_confirmed:m}));return}const f=(C==null?void 0:C.previous_medications)||[],h=f.indexOf(r);if(h>=0){const m=[...f];m[h]={...m[h],[s]:d},Ie(j=>({...j,previous_medications:m}))}},wd=(r,s,d)=>{const c=(T==null?void 0:T.diet_lifestyle)||[],u=c.indexOf(r);if(u>=0){const f=[...c];f[u]=typeof f[u]=="string"?{advice:d,detail:"",category:"Exercise",helps:[]}:{...f[u],[s]:d},ve(h=>({...h,diet_lifestyle:f}))}},Id=r=>{if(!T)return;const s={...T,medications_confirmed:[...T.medications_confirmed||[],r]};ve(s)},Rp=r=>{if(!T)return;const s={...T,diet_lifestyle:[...T.diet_lifestyle||[],r]};ve(s)},pb=r=>{if(!T)return;const s={...T,goals:[...T.goals||[],r]};ve(s)},hb=r=>{C&&Ie(s=>({...s,chief_complaints:[...s.chief_complaints||[],r]}))},[vp,Ao]=S.useState(null),[Mi,ra]=S.useState(""),[Gn,Ti]=S.useState({name:"",dose:"",frequency:"OD",timing:"Morning"}),[oa,Nd]=S.useState(!1),[Mo,Cd]=S.useState(""),[kr,ia]=S.useState("merge"),[sa,Lp]=S.useState(!1),gb=()=>{var u;const r=(u=de==null?void 0:de.consultations)==null?void 0:u[0];if(!r)return;const s=(de==null?void 0:de.medications)||[],d=(de==null?void 0:de.diagnoses)||[];let c=`PREVIOUS PRESCRIPTION (copied for editing):
`;d.length&&(c+=`Diagnoses: ${d.map(f=>`${f.label} - ${f.status}`).join(", ")}
`),s.length&&(c+=`Medications:
`,s.forEach(f=>{c+=`- ${f.name} ${f.dose||""} ${f.frequency||""} ${f.timing||""}
`})),r.con_name&&(c+=`Last seen by: ${r.con_name}
`),me(c),ve(null)},mb=()=>{Mo.trim()&&(me(Mo),ve(null),Nd(!1),Cd(""))},xb=()=>{let r=`GINI ADVANCED CARE HOSPITAL  Treatment Plan
`;r+=`Patient: ${b.name} | ${b.age}Y/${b.sex} | ${b.phone||""} | ${b.fileNo||""}
`,r+=`Doctor: ${G} | Date: ${new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}
`,r+=`${"".repeat(50)}

`,T!=null&&T.assessment_summary&&(r+=`SUMMARY:
${Eo("summary",T.assessment_summary)}

`);const s=((C==null?void 0:C.chief_complaints)||[]).filter(c=>!["no gmi","no hypoglycemia","routine follow-up"].some(u=>String(c).toLowerCase().includes(u)));s.length&&(r+=`CHIEF COMPLAINTS: ${s.join(", ")}

`),aa.length&&(r+=`DIAGNOSES:
`,aa.forEach(c=>{r+=` ${c.label}  ${c.status}
`}),r+=`
`),Br.length&&(r+=`MEDICATIONS:
`,Br.forEach(c=>{r+=` ${c.name} | ${c.dose||""} | ${c.frequency||""} ${c.timing||""} | For: ${(c.forDiagnosis||[]).join(", ")||""}
`}),r+=`
`),da.length&&(r+=`GOALS:
`,da.forEach(c=>{r+=` ${c.marker}: ${c.current||""}  ${c.target||""} (${c.timeline||""})
`}),r+=`
`),la.length&&(r+=`LIFESTYLE:
`,la.forEach(c=>{r+=typeof c=="string"?` ${c}
`:` ${c.advice}${c.detail?`  ${c.detail}`:""}
`}),r+=`
`);const d=((T==null?void 0:T.investigations_ordered)||(T==null?void 0:T.investigations_to_order)||[]).map(ln);d.length&&(r+=`INVESTIGATIONS: ${d.join(", ")}

`),ca.length&&(r+=`SELF-MONITORING:
`,ca.forEach(c=>{r+=typeof c=="string"?` ${c}
`:` ${c.title}${c.targets?`  Target: ${c.targets}`:""}
`}),r+=`
`),T!=null&&T.follow_up&&(r+=`FOLLOW-UP: ${T.follow_up.timing||T.follow_up.when||""}
`,T.follow_up.instructions&&(r+=`Instructions: ${T.follow_up.instructions}
`)),navigator.clipboard.writeText(r).then(()=>{Lp(!0),setTimeout(()=>Lp(!1),2e3)})},aa=xe(C,"diagnoses").filter((r,s)=>!(se._removedDiags||[]).includes(s)),Br=Mp.filter((r,s)=>!(se._removedMeds||[]).includes(s)),la=xe(T,"diet_lifestyle").filter((r,s)=>!(se._removedLifestyle||[]).includes(s)),da=xe(T,"goals").filter((r,s)=>!(se._removedGoals||[]).includes(s)),ca=xe(T,"self_monitoring").filter((r,s)=>!(se._removedMonitors||[]).includes(s)),wp=xe(T,"future_plan").filter((r,s)=>!(se._removedFuture||[]).includes(s)),Od=r=>{_e(s=>{const d={...s};return r==="diagnoses"&&(d.diagnoses=[...d.diagnoses,{id:"",label:"",status:"New"}]),r==="medications"&&(d.medications=[...d.medications,{name:"",dose:"",frequency:"",timing:""}]),r==="labs"&&(d.labs=[...d.labs,{test_name:"",result:"",unit:"",flag:"",ref_range:""}]),d})},jd=(r,s)=>{_e(d=>{const c={...d};return c[r]=c[r].filter((u,f)=>f!==s),c})},bb=async()=>{if(vs.trim()){ju(!0);try{const{data:r,error:s}=await Lo(hS,vs);r&&!s&&(_e(d=>{var c,u;return{...d,visit_date:r.visit_date||d.visit_date,doctor_name:r.doctor_name||d.doctor_name,specialty:r.specialty||d.specialty,vitals:{...d.vitals,...r.vitals||{}},diagnoses:((c=r.diagnoses)==null?void 0:c.length)>0?r.diagnoses:d.diagnoses,medications:((u=r.medications)==null?void 0:u.length)>0?r.medications:d.medications}}),ws(!0))}catch(r){console.error("Rx extract error:",r)}ju(!1)}},yb=(r,s)=>{var u;const d=(u=r.target.files)==null?void 0:u[0];if(!d)return;const c=new FileReader;c.onload=()=>{const f=c.result.split(",")[1],h=d.type||"image/jpeg";Qn(m=>[...m,{type:s,fileName:d.name,base64:f,mediaType:h,extracted:null,extracting:!1,error:null}])},c.readAsDataURL(d),r.target.value=""},Sb=async r=>{var d;const s=Gu[r];if(s){Qn(c=>c.map((u,f)=>f===r?{...u,extracting:!0,error:null}:u));try{const c=s.mediaType==="application/pdf"?{type:"document",source:{type:"base64",media_type:"application/pdf",data:s.base64}}:{type:"image",source:{type:"base64",media_type:s.mediaType,data:s.base64}};let m=((await(await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":void 0,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:8e3,messages:[{role:"user",content:[c,{type:"text",text:gS}]}]})})).json()).content||[]).map(w=>w.text||"").join("").replace(/```json\s*/g,"").replace(/```\s*/g,"").trim();const j=JSON.parse(m);if(((d=j.tests)==null?void 0:d.length)>0){const w=j.tests.map(R=>{var M;return{test_name:R.test_name,result:((M=R.result)==null?void 0:M.toString())||R.result_text||"",unit:R.unit||"",flag:R.flag||"",ref_range:R.ref_range||""}});_e(R=>({...R,labs:[...R.labs.filter(M=>M.test_name),...w]})),j.report_date&&!Fe.visit_date&&_e(R=>({...R,visit_date:j.report_date}))}Qn(w=>w.map((R,M)=>M===r?{...R,extracting:!1,extracted:j}:R))}catch(c){console.error("Report extract error:",c),Qn(u=>u.map((f,h)=>h===r?{...f,extracting:!1,error:c.message}:f))}}},Eb=r=>{Qn(s=>s.filter((d,c)=>c!==r))},Ab=async()=>{var r,s;if(Is.trim()){li(!0),di([]),gn(" Splitting visits...");try{const d=`You are a clinical data extraction AI. The user is pasting ALL visit history for a patient from another EMR system.

TASK: Split this into INDIVIDUAL VISITS. Each visit has a date and its own data.

Output ONLY valid JSON array, no backticks:
[
  {
    "visit_date": "YYYY-MM-DD",
    "doctor_name": "Dr. Name",
    "visit_type": "OPD",
    "vitals": { "bp_sys": null, "bp_dia": null, "weight": null, "height": null, "bmi": null, "pulse": null },
    "diagnoses": [{"id": "dm2", "label": "Type 2 DM", "status": "Controlled"}],
    "medications": [{"name": "BRAND NAME", "dose": "500mg", "frequency": "BD", "timing": "After meals"}],
    "labs": [{"test_name": "HbA1c", "result": "5.3", "unit": "%", "flag": "N", "ref_range": "<6.5"}],
    "chief_complaints": ["symptom1"],
    "notes": "Brief summary of this visit"
  }
]

RULES:
- Split by FOLLOW UP dates. Each date = separate visit object
- Extract ALL lab values for each visit date with proper units and flags (H/L/N)
- Extract vitals: height (cm), weight (kg), BMI, BP (split sys/dia), waist circumference
- Extract medications at each visit (they may change between visits)
- Diagnosis IDs: dm2,dm1,htn,cad,ckd,hypo,obesity,dyslipidemia,dfu,masld,nephropathy,osas,hashimotos
- Sort visits by date ASCENDING (oldest first)
- If a visit only has labs and no treatment changes, still create a visit entry
- flag: "H" if above range, "L" if below, "N" if normal
- Convert dates like "16/9/25" to "2025-09-16", "2nd December 2023" to "2023-12-02"
- Include the LATEST/TODAY visit as well
- ALWAYS include the full diagnosis list for EVERY visit (not just the first one)

TEXT TO PARSE:
`+Is.trim(),u=await(await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":void 0,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-haiku-4-5-20251001",max_tokens:8e3,messages:[{role:"user",content:d}]})})).json();if(console.log("Bulk API response:",JSON.stringify(u).slice(0,500)),u.error){gn(" API error: "+u.error.message),li(!1);return}const f=(((s=(r=u.content)==null?void 0:r[0])==null?void 0:s.text)||"").trim();if(!f){gn(" Empty response from AI"),li(!1);return}const h=f.replace(/^```json\n?|```$/g,"").trim(),m=JSON.parse(h);if(!Array.isArray(m)||m.length===0){gn(" Could not parse visits. Try reformatting."),li(!1);return}m.sort((j,w)=>new Date(j.visit_date)-new Date(w.visit_date)),di(m),gn(` Found ${m.length} visits. Review and click Save All.`)}catch(d){gn(" Parse error: "+d.message)}li(!1)}},Mb=async()=>{if(!ee||!Tn.length)return;Du(!0),Os(0);let r=0;for(const s of Tn){try{gn(`Saving visit ${r+1}/${Tn.length}: ${s.visit_date}...`);const d={visit_date:s.visit_date,visit_type:s.visit_type||"OPD",doctor_name:s.doctor_name||"",specialty:s.specialty||"",vitals:s.vitals||{},diagnoses:(s.diagnoses||[]).filter(f=>f.label),medications:(s.medications||[]).filter(f=>f.name),labs:(s.labs||[]).filter(f=>f.test_name&&f.result),notes:s.notes||""};(await(await fetch(`${ie}/api/patients/${ee}/history`,{method:"POST",headers:ze(),body:JSON.stringify(d)})).json()).success&&r++}catch(d){console.log("Bulk save error for",s.visit_date,d.message)}Os(r)}if(gn(` Saved ${r}/${Tn.length} visits!`),Du(!1),ee)try{const d=await(await fetch(`${ie}/api/patients/${ee}`,{headers:ze()})).json();d.id&&(Ft(d),io(d.consultations||[])),To(ee)}catch{}},Tb=async()=>{if(!(!ee||!Fe.visit_date)){Ou(!0);try{const r={visit_date:Fe.visit_date,visit_type:Fe.visit_type,doctor_name:Fe.doctor_name,specialty:Fe.specialty,vitals:Fe.vitals,diagnoses:Fe.diagnoses.filter(c=>c.label),medications:Fe.medications.filter(c=>c.name),labs:Fe.labs.filter(c=>c.test_name&&c.result)};if((await(await fetch(`${ie}/api/patients/${ee}/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json()).success){_e({...Nu,diagnoses:[{id:"",label:"",status:"New"}],medications:[{name:"",dose:"",frequency:"",timing:""}],labs:[{test_name:"",result:"",unit:"",flag:"",ref_range:""}]}),ai(""),ws(!1),Qn([]);const u=await(await fetch(`${ie}/api/patients/${ee}`)).json();io(u.consultations||[]),Ft(u),To(ee)}}catch(r){console.error("History save error:",r)}Ou(!1)}},To=async(r,s)=>{if(!(!ie||!r)){Ql(!0);try{const d=s||ql,c=d&&d!=="all"?`${ie}/api/patients/${r}/outcomes?period=${d}`:`${ie}/api/patients/${r}/outcomes`,f=await(await fetch(c)).json();Zl(f)}catch{}Ql(!1)}},fa=r=>{try{const s=String(r);return(s.length===10?new Date(s+"T12:00:00"):new Date(s)).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"2-digit"})}catch{return""}},Rb=({data:r,width:s=200,height:d=55,color:c="#2563eb",label:u,unit:f,target:h,lowerBetter:m,valueKey:j})=>{const[w,R]=S.useState(null);if(!r||r.length===0)return t.jsx("div",{style:{background:"white",borderRadius:12,padding:"10px 14px",border:"1px solid #f1f5f9",boxShadow:"0 1px 2px rgba(0,0,0,0.03)"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#cbd5e1"},children:u}),t.jsx("div",{style:{fontSize:10,color:"#cbd5e1"},children:"No data"})]})});const M=j||"result",$=r.map(X=>parseFloat(X[M]||X.result||X.bp_sys||X.weight||X.waist||X.body_fat||X.muscle_mass||0)),y=r.map(X=>X.test_date||X.date),_=Math.min(...$)*.92,le=Math.max(...$)*1.08-_||1,Ae=$.map((X,fe)=>`${fe/Math.max($.length-1,1)*s},${d-(X-_)/le*d}`).join(" "),J=$[$.length-1],re=$[0],Me=J<re?"":J>re?"":"";let I;if(h){const X=m!==!1?J<=h:J>=h,fe=m!==!1?J<=h*1.15:J>=h*.85;I=X?"#059669":fe?"#d97706":"#dc2626"}else I=(m!==!1?J<=re:J>=re)?"#059669":"#dc2626";const V=h?d-(h-_)/le*d:null;return t.jsxs("div",{style:{background:"white",borderRadius:12,padding:"10px 14px",border:"1px solid #f1f5f9",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",position:"relative"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#475569"},children:u}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsxs("span",{style:{fontSize:15,fontWeight:800,color:I},children:[J,f]}),t.jsx("span",{style:{fontSize:12,color:I,fontWeight:700},children:Me})]})]}),t.jsxs("svg",{viewBox:`0 0 ${s} ${d}`,style:{width:"100%",height:d,overflow:"visible"},onMouseLeave:()=>R(null),children:[h&&V>=0&&V<=d&&t.jsxs(t.Fragment,{children:[t.jsx("line",{x1:"0",y1:V,x2:s,y2:V,stroke:"#10b981",strokeDasharray:"3,3",strokeWidth:"0.8",opacity:"0.5"}),t.jsxs("text",{x:s-2,y:V-3,fill:"#10b981",fontSize:"7",textAnchor:"end",opacity:"0.7",children:["target ",h]})]}),t.jsx("polygon",{points:`0,${d} ${Ae} ${s},${d}`,fill:`${c}10`}),t.jsx("polyline",{points:Ae,fill:"none",stroke:c,strokeWidth:"2",strokeLinejoin:"round"}),$.map((X,fe)=>{const pe=fe/Math.max($.length-1,1)*s,Ge=d-(X-_)/le*d;return t.jsxs("g",{onMouseEnter:()=>R(fe),style:{cursor:"pointer"},children:[t.jsx("circle",{cx:pe,cy:Ge,r:w===fe?5:3,fill:w===fe?c:"white",stroke:c,strokeWidth:"2"}),t.jsx("circle",{cx:pe,cy:Ge,r:"12",fill:"transparent"})]},fe)}),w!==null&&(()=>{const X=w/Math.max($.length-1,1)*s,fe=d-($[w]-_)/le*d,pe=X<s/2?X+8:X-65;return t.jsxs("g",{children:[t.jsx("line",{x1:X,y1:0,x2:X,y2:d,stroke:c,strokeWidth:"0.5",strokeDasharray:"2,2",opacity:"0.4"}),t.jsx("rect",{x:pe,y:Math.max(fe-28,0),width:"60",height:"22",rx:"4",fill:"#1e293b",opacity:"0.9"}),t.jsxs("text",{x:pe+30,y:Math.max(fe-18,10),fill:"white",fontSize:"8",fontWeight:"700",textAnchor:"middle",children:[$[w],f]}),t.jsx("text",{x:pe+30,y:Math.max(fe-10,18),fill:"#94a3b8",fontSize:"6",textAnchor:"middle",children:fa(y[w])})]})})()]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:8,color:"#94a3b8",marginTop:4},children:[t.jsx("span",{children:fa(y[0])}),t.jsxs("span",{style:{color:"#cbd5e1"},children:[$.length," reading",$.length!==1?"s":""]}),t.jsx("span",{children:fa(y[y.length-1])})]})]})},[ua,Ip]=S.useState(""),[pa,Np]=S.useState(!1),vb=async()=>{var r,s,d,c,u,f,h,m,j;if(!(!ae||!de)){Np(!0);try{const w={patient:{name:b.name,age:b.age,sex:b.sex},diagnoses:((r=de.diagnoses)==null?void 0:r.map(y=>`${y.label}: ${y.status}`))||[],medications:((s=de.medications)==null?void 0:s.filter(y=>y.is_active).map(y=>`${y.name} ${y.dose} ${y.frequency}`))||[],labs:((d=de.lab_results)==null?void 0:d.slice(0,15).map(y=>`${y.test_name}: ${y.result} ${y.unit} (${y.flag||"normal"}) on ${y.test_date}`))||[],vitals_trend:{hba1c:(c=ae.hba1c)==null?void 0:c.map(y=>`${y.result}% on ${y.test_date}`),bp:(u=ae.bp)==null?void 0:u.map(y=>`${y.bp_sys}/${y.bp_dia} on ${y.date}`),weight:(f=ae.weight)==null?void 0:f.map(y=>`${y.weight}kg on ${y.date}`)},diagnosis_journey:(h=ae.diagnosis_journey)==null?void 0:h.slice(0,20).map(y=>`${y.label}: ${y.status} on ${y.visit_date}`)},R=`You are a caring doctor writing a health journey summary for the patient.
Based on this data, write a 4-6 sentence plain English summary of the patient's health journey.
Include: 1) What conditions they have and how long 2) What's improving and what's not 3) What the biggest concerns are 4) An encouraging note about what's working.
Use simple language a patient can understand. Be specific with numbers. Use the patient's name.

Patient Data: ${JSON.stringify(w)}

Write ONLY the summary paragraph, no headers or formatting.`,$=await(await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":void 0,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:500,messages:[{role:"user",content:R}]})})).json();Ip(((j=(m=$.content)==null?void 0:m[0])==null?void 0:j.text)||"Could not generate summary.")}catch(w){Ip("Error: "+w.message)}Np(!1)}},sn=(ue==null?void 0:ue.role)==="lab"||(ue==null?void 0:ue.role)==="nurse"||(ue==null?void 0:ue.role)==="tech",_r=(()=>{var c,u;if(!((c=de==null?void 0:de.lab_results)!=null&&c.length)||!((u=de==null?void 0:de.consultations)!=null&&u.length))return[];const s=[...de.consultations].sort((f,h)=>{const m=new Date(h.visit_date)-new Date(f.visit_date);return m!==0?m:new Date(h.created_at)-new Date(f.created_at)})[0],d=s!=null&&s.visit_date?String(s.visit_date).slice(0,10):null;return d?de.lab_results.filter(f=>f.test_date?String(f.test_date).slice(0,10)>d:!1):[]})(),ha=_r.length>0,Lb=[{id:"setup",label:"",show:!p},{id:"dashboard",label:" Dashboard",show:p&&(!!ee||!!b.name)},{id:"quick",label:" Quick",show:p&&!sn&&!$t},{id:"patient",label:"",show:p&&!$t},{id:"intake",label:" Intake",show:p&&!sn&&$t},{id:"hxclinical",label:" History",show:p&&!sn&&$t},{id:"exam",label:" Exam",show:p&&!sn&&$t},{id:"assess",label:" Assess",show:p&&!sn&&$t},{id:"mo",label:" MO",show:p&&!sn&&!$t,badge:ha},{id:"consultant",label:" Con",show:p&&!sn,badge:ha},{id:"plan",label:" Plan",show:p&&!sn,badge:ha},{id:"docs",label:" Docs",show:p&&(!!ee||!!b.name)},{id:"labportal",label:" Upload",show:p&&!!ie&&sn},{id:"history",label:" Hx",show:p&&!sn&&(!!ee||!!b.name)},{id:"outcomes",label:"",show:p&&!sn&&!!ee},{id:"ai",label:" AI",show:p&&!sn},{id:"reports",label:" Reports",show:p&&!!ie&&((ue==null?void 0:ue.role)==="admin"||(ue==null?void 0:ue.role)==="consultant")},{id:"ci",label:" CI",show:p&&!!ie&&((ue==null?void 0:ue.role)==="admin"||(ue==null?void 0:ue.role)==="consultant")}],[ga,ma]=S.useState(!1),[wb,Cp]=S.useState(!1),Ib=()=>{const s=`

--- NEW LAB RESULTS (since last visit) ---
${_r.map(d=>`${d.test_name}: ${d.result} ${d.unit||""} ${d.flag==="H"?"(HIGH)":d.flag==="L"?"(LOW)":""} [${d.test_date}]`).join(`
`)}
--- END NEW LABS ---`;me(d=>(d||"")+s),Cp(!0),ma(!1),ve(null)},Gd=ha?wb?t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"6px 10px",marginBottom:8,background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:8},children:[t.jsx("span",{style:{fontSize:12},children:""}),t.jsxs("span",{style:{fontSize:11,fontWeight:600,color:"#059669"},children:[_r.length," new lab results included"]}),t.jsx("div",{style:{flex:1}}),t.jsx("button",{onClick:()=>{Cp(!1),ma(!0)},style:{fontSize:9,background:"white",border:"1px solid #bbf7d0",borderRadius:4,padding:"2px 6px",cursor:"pointer",color:"#64748b"},children:"Review again"})]}):t.jsxs("div",{style:{background:"linear-gradient(135deg,#fffbeb,#fef3c7)",border:"1px solid #f59e0b",borderRadius:8,padding:"8px 12px",marginBottom:8},children:[t.jsxs("div",{onClick:()=>ma(!ga),style:{display:"flex",alignItems:"center",gap:6,cursor:"pointer"},children:[t.jsx("span",{style:{fontSize:14},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{fontSize:11,fontWeight:700,color:"#92400e"},children:[_r.length," New Lab Results Since Last Visit"]}),!ga&&t.jsxs("div",{style:{fontSize:9,color:"#a16207",marginTop:2},children:[[...new Set(_r.map(r=>r.test_name))].slice(0,6).join(", "),[...new Set(_r.map(r=>r.test_name))].length>6&&" ..."]})]}),t.jsx("span",{style:{fontSize:9,color:"#a16207",fontWeight:600},children:ga?" Hide":" Review"})]}),ga&&t.jsxs("div",{style:{marginTop:8,borderTop:"1px solid #fcd34d",paddingTop:8},children:[t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10,marginBottom:8},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"rgba(245,158,11,.15)"},children:[t.jsx("th",{style:{textAlign:"left",padding:"3px 6px",fontSize:9,fontWeight:700,color:"#92400e"},children:"Test"}),t.jsx("th",{style:{textAlign:"center",padding:"3px 6px",fontSize:9,fontWeight:700,color:"#92400e"},children:"Result"}),t.jsx("th",{style:{textAlign:"center",padding:"3px 6px",fontSize:9,fontWeight:700,color:"#92400e"},children:"Ref"}),t.jsx("th",{style:{textAlign:"center",padding:"3px 6px",fontSize:9,fontWeight:700,color:"#92400e"},children:"Date"})]})}),t.jsx("tbody",{children:_r.map((r,s)=>{var d;return t.jsxs("tr",{style:{borderBottom:"1px solid #fde68a"},children:[t.jsx("td",{style:{padding:"3px 6px",fontWeight:600},children:r.test_name}),t.jsxs("td",{style:{padding:"3px 6px",textAlign:"center",fontWeight:700,color:r.flag==="H"?"#dc2626":r.flag==="L"?"#2563eb":"#059669"},children:[r.result," ",r.unit||""," ",r.flag==="H"?"":r.flag==="L"?"":""]}),t.jsx("td",{style:{padding:"3px 6px",textAlign:"center",fontSize:9,color:"#94a3b8"},children:r.ref_range||""}),t.jsx("td",{style:{padding:"3px 6px",textAlign:"center",fontSize:9,color:"#64748b"},children:((d=r.test_date)==null?void 0:d.split("T")[0])||""})]},s)})})]}),t.jsx("button",{onClick:Ib,style:{width:"100%",background:"linear-gradient(135deg,#f59e0b,#d97706)",color:"white",border:"none",padding:"8px",borderRadius:6,fontSize:12,fontWeight:700,cursor:"pointer"},children:" Include in Treatment Plan"})]})]}):null,Pd=t.jsxs("div",{className:"no-print",style:{marginTop:12,border:`2px solid ${xs?"#059669":"#0ea5e9"}`,borderRadius:10,overflow:"hidden"},children:[t.jsxs("div",{onClick:()=>nu(!kl),style:{background:xs?"linear-gradient(135deg,#059669,#10b981)":"linear-gradient(135deg,#0ea5e9,#0284c7)",color:"white",padding:"8px 12px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("span",{style:{fontSize:14},children:""}),t.jsx("span",{style:{fontWeight:700,fontSize:12},children:"Clinical Reasoning"}),xs&&t.jsx("span",{style:{fontSize:9,background:"rgba(255,255,255,.25)",padding:"1px 8px",borderRadius:8},children:" Saved"})]}),t.jsx("span",{style:{fontSize:11,opacity:.8},children:kl?"":" Capture why"})]}),kl&&t.jsxs("div",{style:{padding:12,background:"#f0f9ff"},children:[t.jsxs("div",{style:{marginBottom:8},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#0c4a6e",marginBottom:4},children:"Primary Condition"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:Jx.map(r=>t.jsx("button",{onClick:()=>ru(r),style:{fontSize:9,padding:"3px 8px",borderRadius:8,border:`1px solid ${oi===r?"#0ea5e9":"#e2e8f0"}`,background:oi===r?"#e0f2fe":"white",color:oi===r?"#0369a1":"#64748b",cursor:"pointer",fontWeight:600},children:r},r))})]}),t.jsx("textarea",{value:Yn,onChange:r=>Bl(r.target.value),rows:4,placeholder:"Why did you make these treatment decisions? What factors influenced dosage, drug choice, or lifestyle recommendations?",style:{width:"100%",border:"1px solid #bae6fd",borderRadius:8,padding:10,fontSize:12,marginBottom:8,resize:"vertical",boxSizing:"border-box",lineHeight:1.5}}),t.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",marginBottom:8},children:[Vm?t.jsx("button",{onClick:eb,style:{display:"flex",alignItems:"center",gap:4,background:"#1e293b",color:"white",border:"none",padding:"6px 12px",borderRadius:6,fontSize:11,fontWeight:700,cursor:"pointer",animation:"pulse 1.5s infinite"},children:" Stop Recording"}):t.jsx("button",{onClick:qx,style:{display:"flex",alignItems:"center",gap:4,background:"#dc2626",color:"white",border:"none",padding:"6px 12px",borderRadius:6,fontSize:11,fontWeight:700,cursor:"pointer"},children:" Record Reasoning"}),zl&&t.jsx("audio",{src:zl,controls:!0,style:{height:30,flex:1}}),Vn&&!zl&&t.jsx("span",{style:{fontSize:10,color:"#059669"},children:" Audio ready"}),Xm&&t.jsx("span",{style:{fontSize:10,color:"#0ea5e9",fontWeight:600},children:" Transcribing..."})]}),t.jsxs("div",{style:{marginBottom:8},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#0c4a6e",marginBottom:4},children:"Decision Tags"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:Zx.map(r=>t.jsx("button",{onClick:()=>ou(s=>s.includes(r)?s.filter(d=>d!==r):[...s,r]),style:{fontSize:9,padding:"3px 8px",borderRadius:8,border:`1px solid ${gs.includes(r)?"#0ea5e9":"#e2e8f0"}`,background:gs.includes(r)?"#e0f2fe":"white",color:gs.includes(r)?"#0369a1":"#64748b",cursor:"pointer",fontWeight:600},children:r.replace(/_/g," ")},r))})]}),xs?t.jsxs("div",{style:{textAlign:"center",padding:6,fontSize:11,fontWeight:700,color:"#059669"},children:[" Clinical reasoning saved",ee?"  captured for AI training":" (standalone  will link when patient is created)"]}):t.jsx("button",{onClick:Qx,disabled:ms||!Yn&&!Vn,style:{width:"100%",background:ms?"#94a3b8":Yn||Vn?"#0ea5e9":"#cbd5e1",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:12,fontWeight:700,cursor:ms||!Yn&&!Vn?"not-allowed":"pointer"},children:ms?" Saving...":ee?" Save Clinical Reasoning":" Save Reasoning (standalone)"})]})]}),Nb=async r=>{Rr(r),rt(d=>({...d,quick:!0})),He(d=>({...d,quick:null})),qe(" Sending to AI (parallel mode)...");const s=Date.now();try{const[d,c]=await Promise.all([(async()=>(qe(" Extracting patient data..."),await wg(mS,r,3e3)))(),(async()=>await wg(xS,r,4e3))()]);if(qe(" Building treatment plan..."),d.error&&c.error)throw new Error(`Extract: ${d.error} | Plan: ${c.error}`);const u=d.data||{},f=c.data||{};if(u.patient){const m=u.patient;let j=m.age;if(m.dob&&!j){const w=new Date(m.dob);isNaN(w)||(j=Math.floor((Date.now()-w.getTime())/(365.25*24*60*60*1e3)))}U(w=>({...w,name:m.name||w.name,age:j||w.age,sex:m.sex||w.sex,phone:m.phone||w.phone,fileNo:m.fileNo||w.fileNo,dob:m.dob||w.dob}))}if(u.vitals){const m=u.vitals;if(W(j=>({...j,bp_sys:m.bp_sys||j.bp_sys,bp_dia:m.bp_dia||j.bp_dia,pulse:m.pulse||j.pulse,spo2:m.spo2||j.spo2,weight:m.weight||j.weight,height:m.height||j.height})),m.weight&&m.height){const j=parseFloat(m.height)/100;j>0&&W(w=>({...w,bmi:(parseFloat(m.weight)/(j*j)).toFixed(1)}))}}u.mo&&Ie(vg(u.mo)),f&&ve(Lg(f));const h=((Date.now()-s)/1e3).toFixed(1);qe(` Done in ${h}s`),n("plan")}catch(d){He(c=>({...c,quick:d.message})),qe("")}finally{rt(d=>({...d,quick:!1}))}};return t.jsxs("div",{style:{fontFamily:"'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif",maxWidth:1100,margin:"0 auto",padding:"8px 12px",background:"#fff",minHeight:"100vh"},children:[!ue&&Ne.length>0&&t.jsx("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg,#0f172a 0%,#1e3a5f 50%,#0f172a 100%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:t.jsxs("div",{style:{background:"white",borderRadius:20,padding:"36px 32px",width:360,boxShadow:"0 20px 60px rgba(0,0,0,0.4)"},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[t.jsx("div",{style:{width:52,height:52,background:"#1e293b",borderRadius:14,display:"inline-flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:900,fontSize:22,marginBottom:8},children:"G"}),t.jsx("div",{style:{fontSize:20,fontWeight:800,color:"#0f172a"},children:"Gini Scribe"}),t.jsx("div",{style:{fontSize:12,color:"#64748b",marginTop:2},children:"Gini Advanced Care Hospital"})]}),t.jsxs("div",{style:{marginBottom:14},children:[t.jsx("label",{style:{fontSize:11,fontWeight:700,color:"#475569",display:"block",marginBottom:4},children:"Select Doctor"}),t.jsxs("select",{value:sd,onChange:r=>Sx(r.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:10,fontSize:13,background:"#f8fafc",cursor:"pointer"},children:[t.jsx("option",{value:"",children:"Choose your name..."}),Ne.filter(r=>r.role==="admin").length>0&&t.jsx("optgroup",{label:"Admin",children:Ne.filter(r=>r.role==="admin").map(r=>t.jsxs("option",{value:r.id,children:[r.name,"  ",r.specialty]},r.id))}),Ne.filter(r=>r.role==="consultant").length>0&&t.jsx("optgroup",{label:"Consultants",children:Ne.filter(r=>r.role==="consultant").map(r=>t.jsxs("option",{value:r.id,children:[r.name,"  ",r.specialty]},r.id))}),Ne.filter(r=>r.role==="mo").length>0&&t.jsx("optgroup",{label:"Medical Officers",children:Ne.filter(r=>r.role==="mo").map(r=>t.jsx("option",{value:r.id,children:r.name},r.id))}),Ne.filter(r=>r.role==="nurse").length>0&&t.jsx("optgroup",{label:"Nursing",children:Ne.filter(r=>r.role==="nurse").map(r=>t.jsx("option",{value:r.id,children:r.name},r.id))}),Ne.filter(r=>r.role==="coordinator").length>0&&t.jsx("optgroup",{label:"Coordinators",children:Ne.filter(r=>r.role==="coordinator").map(r=>t.jsx("option",{value:r.id,children:r.name},r.id))}),Ne.filter(r=>r.role==="lab").length>0&&t.jsx("optgroup",{label:"Laboratory",children:Ne.filter(r=>r.role==="lab").map(r=>t.jsx("option",{value:r.id,children:r.name},r.id))}),Ne.filter(r=>r.role==="tech").length>0&&t.jsx("optgroup",{label:"Technicians",children:Ne.filter(r=>r.role==="tech").map(r=>t.jsx("option",{value:r.id,children:r.name},r.id))}),Ne.filter(r=>r.role==="pharmacy").length>0&&t.jsx("optgroup",{label:"Pharmacy",children:Ne.filter(r=>r.role==="pharmacy").map(r=>t.jsx("option",{value:r.id,children:r.name},r.id))}),Ne.filter(r=>r.role==="reception").length>0&&t.jsx("optgroup",{label:"Reception",children:Ne.filter(r=>r.role==="reception").map(r=>t.jsx("option",{value:r.id,children:r.name},r.id))}),Ne.filter(r=>["guest","longevity"].includes(r.role)).length>0&&t.jsx("optgroup",{label:"Other",children:Ne.filter(r=>["guest","longevity"].includes(r.role)).map(r=>t.jsxs("option",{value:r.id,children:[r.name,"  ",r.specialty]},r.id))})]})]}),t.jsxs("div",{style:{marginBottom:18},children:[t.jsx("label",{style:{fontSize:11,fontWeight:700,color:"#475569",display:"block",marginBottom:4},children:"PIN"}),t.jsx("input",{type:"password",value:id,onChange:r=>_u(r.target.value),placeholder:"Enter 4-digit PIN",maxLength:4,onKeyDown:r=>r.key==="Enter"&&ip(),style:{width:"100%",padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:10,fontSize:18,letterSpacing:8,textAlign:"center",boxSizing:"border-box"}})]}),zu&&t.jsxs("div",{style:{fontSize:11,color:"#dc2626",textAlign:"center",marginBottom:8,fontWeight:600},children:[" ",zu]}),t.jsx("button",{onClick:ip,disabled:ks,style:{width:"100%",padding:"12px",background:ks?"#94a3b8":"#1e293b",color:"white",border:"none",borderRadius:10,fontSize:14,fontWeight:700,cursor:ks?"wait":"pointer"},children:ks?" Logging in...":" Login"}),t.jsx("div",{style:{textAlign:"center",marginTop:12,fontSize:10,color:"#94a3b8"},children:"Default PIN: see admin  v7.8"})]})}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8,paddingBottom:8,borderBottom:"2px solid #1e293b"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("div",{style:{width:32,height:32,background:"linear-gradient(135deg,#1e293b,#334155)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:900,fontSize:14},children:"G"}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:15,fontWeight:800,color:"#1e293b",lineHeight:1.1},children:"Gini Scribe"}),ue&&t.jsxs("div",{style:{fontSize:10,color:"#64748b",fontWeight:500},children:[ue.name,ue.specialty?`  ${ue.specialty}`:""]})]})]}),t.jsx("div",{style:{flex:1}}),Wu&&t.jsx("span",{style:{fontSize:9,color:"#94a3b8"},children:Wu}),Xl&&t.jsx("span",{style:{fontSize:11,color:Xl.includes("")?"#059669":"#f59e0b",fontWeight:600},children:Xl}),t.jsxs("div",{style:{display:"flex",gap:6},children:[p&&t.jsx("button",{onClick:sp,style:{background:Xe?"#1e293b":"#f1f5f9",color:Xe?"white":"#1e293b",border:"1px solid #cbd5e1",padding:"8px 14px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",gap:4,boxShadow:"0 1px 2px rgba(0,0,0,.05)",transition:"all .15s"},children:" Find"}),b.name&&t.jsx("button",{onClick:Sd,style:{background:"#2563eb",color:"white",border:"none",padding:"8px 14px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",gap:4,boxShadow:"0 1px 3px rgba(37,99,235,.3)",transition:"all .15s"},children:" Save"}),b.name&&t.jsx("button",{onClick:lp,style:{background:"#059669",color:"white",border:"none",padding:"8px 14px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",gap:4,boxShadow:"0 1px 3px rgba(5,150,105,.3)",transition:"all .15s"},children:"+ New"}),ue&&t.jsx("button",{onClick:zx,style:{background:"#fef2f2",color:"#dc2626",border:"1px solid #fecaca",padding:"8px 10px",borderRadius:8,fontSize:11,fontWeight:700,cursor:"pointer"},children:"Logout"})]})]}),b.name&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 10px",marginBottom:8,background:"linear-gradient(135deg,#eff6ff,#f0fdf4)",borderRadius:8,border:"1px solid #bfdbfe"},children:[t.jsx("div",{style:{width:28,height:28,borderRadius:"50%",background:"linear-gradient(135deg,#3b82f6,#1e40af)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:800,fontSize:12,flexShrink:0},children:b.name.charAt(0).toUpperCase()}),t.jsxs("div",{style:{flex:1,minWidth:0},children:[t.jsx("span",{style:{fontSize:13,fontWeight:700,color:"#1e293b"},children:b.name}),t.jsxs("span",{style:{fontSize:11,color:"#64748b",marginLeft:6},children:[b.age,"Y/",(Op=b.sex)==null?void 0:Op.charAt(0)]}),b.fileNo&&t.jsx("span",{style:{fontSize:10,color:"#2563eb",fontWeight:600,marginLeft:6,background:"#dbeafe",padding:"1px 6px",borderRadius:4},children:b.fileNo}),b.phone&&t.jsxs("span",{style:{fontSize:10,color:"#64748b",marginLeft:6},children:[" ",b.phone]})]}),ee&&t.jsxs("span",{style:{fontSize:9,color:"#059669",fontWeight:600,background:"#dcfce7",padding:"2px 6px",borderRadius:4},children:["DB #",ee]})]}),Xe&&t.jsxs("div",{style:{position:"fixed",inset:0,background:"#f8fafc",zIndex:9998,display:"flex",flexDirection:"column",overflow:"hidden"},children:[t.jsxs("div",{style:{padding:"12px 16px",background:"white",borderBottom:"1px solid #e2e8f0",boxShadow:"0 1px 3px rgba(0,0,0,.05)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[t.jsx("button",{onClick:()=>ye(!1),style:{background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:8,padding:"8px 12px",fontSize:13,fontWeight:700,cursor:"pointer",color:"#475569"},children:" Back"}),t.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#1e293b"},children:"Find Patient"}),t.jsx("div",{style:{flex:1}}),wr&&t.jsx("div",{style:{display:"flex",gap:8},children:[{label:"Total",val:wr.total_patients,color:"#475569"},{label:"Today",val:wr.today,color:"#2563eb"},{label:"This Week",val:wr.this_week,color:"#059669"}].map(r=>t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:18,fontWeight:800,color:r.color},children:r.val}),t.jsx("div",{style:{fontSize:9,fontWeight:600,color:"#94a3b8"},children:r.label})]},r.label))})]}),t.jsx("input",{value:be,onChange:r=>{ot(r.target.value),Qs(r.target.value,Te,Be)},placeholder:"Search by name, phone, or file number...",style:{width:"100%",padding:"12px 16px",border:"2px solid #e2e8f0",borderRadius:10,fontSize:15,boxSizing:"border-box",outline:"none",background:"#f8fafc"},autoFocus:!0,onFocus:r=>r.target.style.borderColor="#2563eb",onBlur:r=>r.target.style.borderColor="#e2e8f0"}),t.jsxs("div",{style:{display:"flex",gap:6,marginTop:8,flexWrap:"wrap"},children:[[{label:"All",val:""},{label:" Today",val:"today"},{label:"This Week",val:"week"},{label:"This Month",val:"month"}].map(r=>t.jsx("button",{onClick:()=>{Ke(r.val),Qs(be,r.val,Be)},style:{padding:"6px 14px",borderRadius:20,fontSize:12,fontWeight:600,cursor:"pointer",border:Te===r.val?"2px solid #2563eb":"1px solid #e2e8f0",background:Te===r.val?"#eff6ff":"white",color:Te===r.val?"#2563eb":"#64748b"},children:r.label},r.val)),t.jsxs("select",{value:Be,onChange:r=>{vr(r.target.value),Qs(be,Te,r.target.value)},style:{padding:"6px 12px",borderRadius:8,fontSize:12,fontWeight:600,border:"1px solid #e2e8f0",color:"#475569",cursor:"pointer"},children:[t.jsx("option",{value:"",children:"All Doctors"}),Lr.map(r=>t.jsxs("option",{value:r.name,children:[r.name," (",r.patient_count,")"]},r.name))]})]})]}),t.jsx("div",{style:{flex:1,overflow:"auto",padding:"8px 16px"},children:Zs.length>0?t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:11,fontWeight:700,color:"#94a3b8",padding:"8px 4px",borderBottom:"1px solid #f1f5f9"},children:[Zs.length," patient",Zs.length>1?"s":""," found"]}),Zs.map(r=>{var s;return t.jsxs("div",{onClick:()=>Ad(r),style:{display:"flex",alignItems:"center",gap:12,padding:"12px",borderRadius:10,cursor:"pointer",borderBottom:"1px solid #f1f5f9",transition:"all .15s",background:"white",marginTop:4},onMouseEnter:d=>d.currentTarget.style.background="#f0f9ff",onMouseLeave:d=>d.currentTarget.style.background="white",children:[t.jsx("div",{style:{width:44,height:44,borderRadius:"50%",background:"linear-gradient(135deg,#3b82f6,#1e40af)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:800,fontSize:18,flexShrink:0},children:(r.name||"?").charAt(0).toUpperCase()}),t.jsxs("div",{style:{flex:1,minWidth:0},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("strong",{style:{fontSize:15,color:"#1e293b"},children:r.name}),t.jsxs("span",{style:{fontSize:12,color:"#94a3b8"},children:[r.age,"Y/",(s=r.sex)==null?void 0:s.charAt(0)]}),r.file_no&&t.jsx("span",{style:{fontSize:11,color:"#2563eb",fontWeight:600,background:"#eff6ff",padding:"1px 6px",borderRadius:4},children:r.file_no})]}),r.diagnosis_labels&&t.jsx("div",{style:{fontSize:11,color:"#64748b",marginTop:2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.diagnosis_labels}),r.phone&&t.jsxs("div",{style:{fontSize:11,color:"#94a3b8",marginTop:1},children:[" ",r.phone]})]}),t.jsxs("div",{style:{textAlign:"right",flexShrink:0},children:[t.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#2563eb"},children:[r.visit_count||0," visits"]}),r.last_visit&&t.jsx("div",{style:{fontSize:11,color:"#94a3b8"},children:new Date(String(r.last_visit).slice(0,10)+"T12:00:00").toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"2-digit"})}),r.last_doctor&&t.jsx("div",{style:{fontSize:10,color:"#059669",fontWeight:600},children:r.last_doctor})]})]},`db-${r.id}`)})]}):t.jsxs("div",{style:{textAlign:"center",padding:40,color:"#94a3b8"},children:[t.jsx("div",{style:{fontSize:40,marginBottom:8},children:""}),t.jsx("div",{style:{fontSize:14,fontWeight:600},children:be?"No patients found":"Search or use filters above"}),t.jsx("div",{style:{fontSize:12,marginTop:4},children:"Try name, phone number, or file number"})]})})]}),t.jsx("div",{style:{display:"flex",gap:0,marginBottom:10,borderRadius:8,overflow:"hidden",border:"1px solid #e2e8f0"},children:Lb.filter(r=>r.show!==!1).map(r=>t.jsxs("button",{onClick:()=>n(r.id),style:{flex:1,padding:"8px 4px",fontSize:11,fontWeight:700,cursor:"pointer",border:"none",background:e===r.id?r.id==="quick"?"#dc2626":"#1e293b":"white",color:e===r.id?"white":"#64748b",position:"relative",letterSpacing:"-0.01em"},children:[r.label,r.badge&&e!==r.id&&t.jsx("span",{style:{position:"absolute",top:2,right:2,width:7,height:7,borderRadius:"50%",background:"#f59e0b",border:"1px solid white"}})]},r.id))}),$t&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 12px",marginBottom:8,background:"linear-gradient(135deg,#059669,#10b981)",borderRadius:8,color:"white"},children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"white",animation:"pulse 1.5s infinite"}}),t.jsxs("span",{style:{fontSize:12,fontWeight:800,flex:1},children:[" VISIT IN PROGRESS  ",b.name||"Patient"]}),t.jsx("button",{onClick:()=>{Sd(),np()},style:{background:"rgba(255,255,255,.3)",border:"none",color:"white",padding:"4px 10px",borderRadius:5,fontSize:10,fontWeight:700,cursor:"pointer"},children:" Save"}),t.jsx("button",{onClick:()=>{Sd(),rp(),localStorage.removeItem(Ks)},style:{background:"rgba(255,255,255,.2)",border:"none",color:"white",padding:"4px 10px",borderRadius:5,fontSize:10,fontWeight:700,cursor:"pointer"},children:" Save & End"}),t.jsx("button",{onClick:rp,style:{background:"rgba(255,255,255,.15)",border:"none",color:"white",padding:"4px 8px",borderRadius:5,fontSize:10,fontWeight:700,cursor:"pointer"},children:" End"})]}),e==="setup"&&t.jsxs("div",{style:{maxWidth:420,margin:"0 auto",padding:"14px 0"},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:14},children:[t.jsx("div",{style:{fontSize:32},children:""}),t.jsx("div",{style:{fontSize:15,fontWeight:800},children:"Voice Transcription Setup"}),t.jsx("div",{style:{fontSize:11,color:"#94a3b8"},children:"Enter at least one key. Both enables A/B testing."})]}),t.jsxs("div",{style:{marginBottom:10},children:[t.jsxs("label",{style:{fontSize:11,fontWeight:600,color:"#475569"},children:["Deepgram Key ",t.jsx("span",{style:{color:"#94a3b8",fontWeight:400},children:"(faster, 0.35/min)"})]}),t.jsx("input",{type:"password",value:o,onChange:r=>i(r.target.value),placeholder:"Paste Deepgram API key...",style:{width:"100%",padding:"8px 12px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:13,fontFamily:"monospace",boxSizing:"border-box",marginTop:3}})]}),t.jsxs("div",{style:{marginBottom:10},children:[t.jsxs("label",{style:{fontSize:11,fontWeight:600,color:"#475569"},children:["OpenAI Key ",t.jsx("span",{style:{color:"#94a3b8",fontWeight:400},children:"(Whisper  better Hindi, 0.50/min)"})]}),t.jsx("input",{type:"password",value:a,onChange:r=>l(r.target.value),placeholder:"Paste OpenAI API key...",style:{width:"100%",padding:"8px 12px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:13,fontFamily:"monospace",boxSizing:"border-box",marginTop:3}})]}),t.jsx("button",{onClick:()=>{(o.length>10||a.length>10)&&(g(!0),n("patient"))},style:{width:"100%",background:o.length>10||a.length>10?"#059669":"#94a3b8",color:"white",border:"none",padding:"12px",borderRadius:8,fontSize:14,fontWeight:700,cursor:o.length>10||a.length>10?"pointer":"not-allowed"},children:o.length>10||a.length>10?" Start":"Enter at least one key"})]}),e==="dashboard"&&t.jsxs("div",{children:[t.jsx("div",{style:{background:"linear-gradient(135deg,#1e293b,#334155)",borderRadius:14,padding:20,color:"white",marginBottom:12},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.jsx("div",{style:{width:56,height:56,borderRadius:"50%",background:"linear-gradient(135deg,#3b82f6,#60a5fa)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:900,fontSize:24,flexShrink:0},children:(b.name||"?").charAt(0).toUpperCase()}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:20,fontWeight:800},children:b.name||"New Patient"}),t.jsxs("div",{style:{fontSize:13,opacity:.8,marginTop:2},children:[b.age?`${b.age}Y`:"",b.sex?`  ${b.sex}`:"",b.fileNo?`  ${b.fileNo}`:"",!ee&&t.jsx("span",{style:{marginLeft:6,background:"#f59e0b",padding:"2px 8px",borderRadius:4,fontSize:10,fontWeight:700},children:"NEW"})]}),b.phone&&t.jsxs("div",{style:{fontSize:12,opacity:.6,marginTop:1},children:[" ",b.phone]})]}),t.jsx("button",{onClick:()=>n("patient"),style:{background:"rgba(255,255,255,.15)",border:"1px solid rgba(255,255,255,.2)",color:"white",padding:"6px 12px",borderRadius:8,fontSize:11,fontWeight:600,cursor:"pointer"},children:" Edit"})]})}),ee&&P&&t.jsxs("div",{style:{background:"linear-gradient(135deg,#f0f9ff,#faf5ff)",borderRadius:12,border:"2px solid #c7d2fe",padding:14,marginBottom:12},children:[t.jsx("div",{style:{fontSize:11,color:"#374151",lineHeight:1.7,padding:"8px 12px",background:"white",borderRadius:8,border:"1px solid #e9d5ff",marginBottom:10},children:t.jsxs("b",{children:[b.name," | ",b.age,"Y/",((jp=b.sex)==null?void 0:jp.charAt(0))||"?"," | ",((P==null?void 0:P.diagnoses)||[]).slice(0,4).map(r=>r.label||r.diagnosis_id).join(" + ")||"No known dx"," | ",((P==null?void 0:P.medications)||[]).length," meds | ",((Gp=P==null?void 0:P.consultations)==null?void 0:Gp.length)||0," visits"]})}),(()=>{const r=[],s=(P==null?void 0:P.labs)||[],d=s.find(f=>f.test_name==="HbA1c");d&&parseFloat(d.result)>8&&r.push({t:" HbA1c "+d.result+"%  uncontrolled",c:"#dc2626",bg:"#fef2f2"});const c=s.find(f=>f.test_name==="Creatinine"||f.test_name==="Cr");c&&parseFloat(c.result)>1.3&&r.push({t:" Cr "+c.result+"  renal concern",c:"#92400e",bg:"#fef3c7"});const u=s.find(f=>f.test_name==="eGFR");return u&&parseFloat(u.result)<60&&r.push({t:" eGFR "+u.result+"  CKD",c:"#92400e",bg:"#fef3c7"}),r.length>0?t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginBottom:8},children:r.map((f,h)=>t.jsx("span",{style:{fontSize:9,background:f.bg,color:f.c,padding:"3px 8px",borderRadius:4,fontWeight:700},children:f.t},h))}):null})(),((P==null?void 0:P.diagnoses)||[]).length>0&&t.jsxs("div",{style:{marginBottom:8},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#6d28d9",marginBottom:4},children:"CONDITIONS"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:[...new Map(((P==null?void 0:P.diagnoses)||[]).map(r=>[r.diagnosis_id||r.label,r])).values()].slice(0,8).map((r,s)=>t.jsx("span",{style:{fontSize:10,padding:"3px 8px",borderRadius:5,fontWeight:600,background:r.status==="Uncontrolled"?"#fef2f2":r.status==="Controlled"?"#f0fdf4":"#fefce8",color:r.status==="Uncontrolled"?"#dc2626":r.status==="Controlled"?"#059669":"#92400e"},children:r.label||r.diagnosis_id},s))})]}),((P==null?void 0:P.labs)||[]).length>0&&t.jsxs("div",{style:{marginBottom:8},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#6d28d9",marginBottom:4},children:" KEY LABS"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:["HbA1c","FBS","PPBS","Creatinine","eGFR","LDL","TSH","Vit D","Vit B12"].map(r=>{const s=((P==null?void 0:P.labs)||[]).find(d=>d.test_name===r);return s?t.jsxs("span",{style:{fontSize:10,padding:"2px 6px",borderRadius:4,fontWeight:600,background:s.flag==="H"?"#fef2f2":s.flag==="L"?"#eff6ff":"#f0fdf4",color:s.flag==="H"?"#dc2626":s.flag==="L"?"#2563eb":"#059669",border:`1px solid ${s.flag==="H"?"#fecaca":s.flag==="L"?"#bfdbfe":"#bbf7d0"}`},children:[r,": ",t.jsx("b",{children:s.result}),s.unit?" "+s.unit:""," ",s.flag==="H"?"":s.flag==="L"?"":""]},r):null})})]}),((P==null?void 0:P.medications)||[]).length>0&&t.jsxs("div",{style:{marginBottom:8},children:[t.jsxs("div",{style:{fontSize:10,fontWeight:700,color:"#6d28d9",marginBottom:4},children:[" MEDICATIONS (",((P==null?void 0:P.medications)||[]).length,")"]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:((P==null?void 0:P.medications)||[]).slice(0,10).map((r,s)=>t.jsxs("div",{style:{fontSize:10,padding:"2px 6px",background:s%2?"#f8fafc":"white",borderRadius:3},children:[t.jsx("strong",{children:r.name})," ",t.jsxs("span",{style:{color:"#64748b"},children:[r.dose||""," ",r.frequency||""]})]},s))})]}),((P==null?void 0:P.documents)||[]).length>0&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#6d28d9",marginBottom:4},children:" RECENT DOCUMENTS"}),((P==null?void 0:P.documents)||[]).slice(0,4).map((r,s)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"3px 0",fontSize:10,borderBottom:s<3?"1px solid #f1f5f9":"none"},children:[t.jsx("span",{children:r.doc_type==="lab"?"":r.doc_type==="prescription"?"":""}),t.jsx("span",{style:{fontWeight:700,flex:1},children:r.title||r.doc_type}),t.jsx("span",{style:{fontSize:9,color:"#94a3b8"},children:r.doc_date?new Date(r.doc_date).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}):""})]},s))]})]}),ee&&t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8,marginBottom:12},children:[t.jsxs("div",{style:{background:"#eff6ff",borderRadius:10,padding:12,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:22,fontWeight:800,color:"#2563eb"},children:((Pp=P==null?void 0:P.consultations)==null?void 0:Pp.length)||0}),t.jsx("div",{style:{fontSize:10,fontWeight:600,color:"#64748b"},children:"Total Visits"})]}),t.jsxs("div",{style:{background:"#fef3c7",borderRadius:10,padding:12,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:22,fontWeight:800,color:"#d97706"},children:(kp=(Dp=P==null?void 0:P.consultations)==null?void 0:Dp[0])!=null&&kp.visit_date?new Date(String(P.consultations[0].visit_date).slice(0,10)+"T12:00:00").toLocaleDateString("en-IN",{day:"2-digit",month:"short"}):""}),t.jsx("div",{style:{fontSize:10,fontWeight:600,color:"#64748b"},children:"Last Visit"})]}),t.jsxs("div",{style:{background:"#f0fdf4",borderRadius:10,padding:12,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:22,fontWeight:800,color:"#059669"},children:(_p=(Bp=P==null?void 0:P.labs)==null?void 0:Bp.find(r=>r.test_name==="HbA1c"))!=null&&_p.result?`${P.labs.find(r=>r.test_name==="HbA1c").result}%`:""}),t.jsx("div",{style:{fontSize:10,fontWeight:600,color:"#64748b"},children:"Last HbA1c"})]})]}),t.jsxs("div",{style:{marginBottom:12},children:[t.jsx("button",{onClick:()=>yd(null),style:{width:"100%",padding:"14px",background:"linear-gradient(135deg,#059669,#10b981)",color:"white",border:"none",borderRadius:10,fontSize:15,fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,boxShadow:"0 2px 8px rgba(5,150,105,.25)"},children:" Start Visit"}),t.jsxs("div",{style:{display:"flex",gap:6,marginTop:6},children:[t.jsx("button",{onClick:()=>op(null),style:{flex:1,padding:"10px",background:"#eff6ff",border:"1.5px solid #bfdbfe",borderRadius:8,fontSize:12,fontWeight:700,cursor:"pointer",color:"#1e40af"},children:" Book Appointment"}),t.jsx("button",{onClick:()=>{yd(null)},style:{flex:1,padding:"10px",background:"#fef3c7",border:"1.5px solid #fde68a",borderRadius:8,fontSize:12,fontWeight:700,cursor:"pointer",color:"#92400e"},children:" Walk-in Visit"})]})]}),Ax&&t.jsxs("div",{style:{background:"white",border:"2px solid #3b82f6",borderRadius:12,padding:16,marginBottom:12},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10},children:[t.jsx("span",{style:{fontSize:14,fontWeight:800,color:"#1e40af"},children:_s?" Edit Appointment":" New Appointment"}),t.jsx("button",{onClick:()=>ad(!1),style:{background:"none",border:"none",cursor:"pointer",fontSize:14,color:"#94a3b8"},children:""})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:"Date"}),t.jsx("input",{type:"date",value:Le.dt,onChange:r=>mn({...Le,dt:r.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:"Time"}),t.jsx("input",{type:"time",value:Le.tm,onChange:r=>mn({...Le,tm:r.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:"Type"}),t.jsx("div",{style:{display:"flex",gap:3},children:["OPD","Follow-up","IPD","Lab"].map(r=>t.jsx("button",{onClick:()=>mn({...Le,ty:r}),style:{padding:"5px 10px",borderRadius:6,fontSize:10,fontWeight:600,cursor:"pointer",border:`1.5px solid ${Le.ty===r?"#2563eb":"#e2e8f0"}`,background:Le.ty===r?"#eff6ff":"white",color:Le.ty===r?"#2563eb":"#64748b"},children:r},r))})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:"Specialty"}),t.jsxs("select",{value:Le.sp,onChange:r=>mn({...Le,sp:r.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,boxSizing:"border-box"},children:[t.jsx("option",{value:"",children:"Select"}),["Endocrinology","Cardiology","Neurology","Orthopaedics","Urology","Pulmonology","General Medicine","Ophthalmology","Dermatology"].map(r=>t.jsx("option",{children:r},r))]})]}),t.jsxs("div",{style:{gridColumn:"1/-1"},children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:"Doctor"}),t.jsxs("select",{value:Le.doc,onChange:r=>mn({...Le,doc:r.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,boxSizing:"border-box"},children:[t.jsx("option",{value:"",children:"Select"}),Ne.map(r=>t.jsxs("option",{value:r.short_name||r.name,children:[r.name,r.specialty?`  ${r.specialty}`:""]},r.id))]})]}),t.jsxs("div",{style:{gridColumn:"1/-1"},children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:"Notes"}),t.jsx("input",{value:Le.notes,onChange:r=>mn({...Le,notes:r.target.value}),placeholder:"Fasting required...",style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,boxSizing:"border-box"}})]}),Le.ty==="Lab"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{gridColumn:"1/-1"},children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569",marginBottom:4,display:"block"},children:"Sample Collection"}),t.jsx("div",{style:{display:"flex",gap:4},children:[{v:"hospital",l:" At Hospital",bg:"#eff6ff",cl:"#2563eb"},{v:"home",l:" Home Pickup",bg:"#f0fdf4",cl:"#059669"}].map(r=>t.jsx("button",{onClick:()=>mn({...Le,labPickup:r.v}),style:{flex:1,padding:"8px",borderRadius:6,fontSize:11,fontWeight:700,cursor:"pointer",border:`2px solid ${Le.labPickup===r.v?r.cl:"#e2e8f0"}`,background:Le.labPickup===r.v?r.bg:"white",color:Le.labPickup===r.v?r.cl:"#64748b"},children:r.l},r.v))}),Le.labPickup==="home"&&t.jsx("div",{style:{marginTop:4,padding:6,background:"#fffbeb",borderRadius:6,border:"1px solid #fde68a",fontSize:10,color:"#92400e"},children:" Home pickup: 200 extra charge. Fasting samples before 8:30 AM."})]}),t.jsxs("div",{style:{gridColumn:"1/-1"},children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569",marginBottom:4,display:"block"},children:"Tests / Packages"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3,marginBottom:6},children:["HbA1c","Lipid Panel","RFT","LFT","CBC","Thyroid","Vit D","Vit B12","FBS","PPBS","Urine R/M","UACR","Iron Studies"].map(r=>t.jsx("button",{onClick:()=>{const s=Le.labTests||[];mn({...Le,labTests:s.includes(r)?s.filter(d=>d!==r):[...s,r]})},style:{padding:"4px 8px",borderRadius:5,fontSize:10,fontWeight:600,cursor:"pointer",border:`1.5px solid ${(Le.labTests||[]).includes(r)?"#059669":"#e2e8f0"}`,background:(Le.labTests||[]).includes(r)?"#f0fdf4":"white",color:(Le.labTests||[]).includes(r)?"#059669":"#64748b"},children:r},r))}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:[{l:" DM Panel (HbA1c+FBS+PPBS+RFT+UACR)",tests:["HbA1c","FBS","PPBS","RFT","UACR"]},{l:" Annual Health (CBC+LFT+RFT+Lipid+Thyroid+VitD)",tests:["CBC","LFT","RFT","Lipid Panel","Thyroid","Vit D"]},{l:" Cardiac (Lipid+hs-CRP+NT-proBNP+ECG)",tests:["Lipid Panel"]}].map(r=>t.jsx("button",{onClick:()=>{const s=Le.labTests||[],d=[...new Set([...s,...r.tests])];mn({...Le,labTests:d})},style:{padding:"5px 10px",borderRadius:6,fontSize:10,fontWeight:600,cursor:"pointer",border:"1.5px solid #7c3aed20",background:"#faf5ff",color:"#6d28d9"},children:r.l},r.l))}),(Le.labTests||[]).length>0&&t.jsxs("div",{style:{marginTop:4,fontSize:10,color:"#059669",fontWeight:700},children:[" ",(Le.labTests||[]).length," tests: ",(Le.labTests||[]).join(", ")]})]})]}),t.jsx("button",{onClick:Bx,style:{gridColumn:"1/-1",padding:"10px",background:"#059669",color:"white",border:"none",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer"},children:_s?" Update":" Book Appointment"})]})]}),Bs.length>0&&t.jsxs("div",{style:{marginBottom:12},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#94a3b8",marginBottom:6,letterSpacing:".5px"},children:"UPCOMING APPOINTMENTS"}),Bs.map(r=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",borderRadius:8,marginBottom:4,background:r.ty==="Lab"?"#f0fdf4":"#f8fafc",border:`1px solid ${r.ty==="Lab"?"#bbf7d0":"#e2e8f0"}`},children:[t.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:r.ty==="Lab"?"#059669":r.ty==="OPD"?"#3b82f6":"#f59e0b"}}),t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#1e293b"},children:[r.ty," ",r.sp?` ${r.sp}`:""]}),t.jsxs("div",{style:{fontSize:10,color:"#64748b"},children:[r.doc,r.notes?`  ${r.notes}`:""]})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700},children:r.dt?new Date(r.dt).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}):"TBD"}),r.tm&&t.jsx("div",{style:{fontSize:9,color:"#64748b"},children:r.tm})]}),t.jsxs("div",{style:{display:"flex",gap:3},children:[t.jsx("button",{onClick:()=>op(r),title:"Edit",style:{padding:"3px 6px",background:"#eff6ff",color:"#2563eb",border:"none",borderRadius:4,fontSize:10,cursor:"pointer",fontWeight:700},children:""}),t.jsx("button",{onClick:()=>_x(r.id),title:"Cancel",style:{padding:"3px 6px",background:"#fef2f2",color:"#dc2626",border:"none",borderRadius:4,fontSize:10,cursor:"pointer",fontWeight:700},children:""}),r.ty!=="Lab"&&t.jsx("button",{onClick:()=>yd(r.id),title:"Start Visit",style:{padding:"3px 8px",background:"#059669",color:"white",border:"none",borderRadius:4,fontSize:10,cursor:"pointer",fontWeight:700},children:" Start"})]})]},r.id))]}),Kt.length>0&&t.jsxs("div",{style:{marginBottom:12,padding:12,background:"#fffbeb",border:"1.5px solid #fde68a",borderRadius:10},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:6},children:[t.jsx("span",{style:{fontSize:14},children:""}),t.jsxs("span",{style:{fontSize:12,fontWeight:800,color:"#92400e"},children:["Lab Requisition  ",Kt.length," tests"]}),t.jsx("div",{style:{flex:1}}),t.jsx("button",{onClick:()=>{const r={id:"appt_"+Date.now(),dt:new Date().toISOString().slice(0,10),tm:"08:30",ty:"Lab",sp:"Lab",doc:"Gini Lab",notes:`Tests: ${Kt.join(", ")}`,labTests:Kt,labPickup:"hospital"};Or(s=>[...s,r])},style:{padding:"4px 10px",background:"#059669",color:"white",border:"none",borderRadius:6,fontSize:10,fontWeight:700,cursor:"pointer"},children:" Schedule Lab"})]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:Kt.map(r=>t.jsxs("span",{style:{fontSize:10,padding:"3px 8px",borderRadius:5,fontWeight:600,background:"white",color:"#92400e",border:"1px solid #fde68a"},children:[r,t.jsx("button",{onClick:()=>xo(s=>s.filter(d=>d!==r)),style:{background:"none",border:"none",color:"#dc2626",cursor:"pointer",fontWeight:700,fontSize:9,marginLeft:3},children:""})]},r))}),t.jsx("button",{onClick:()=>window.print(),style:{marginTop:6,width:"100%",padding:"6px",background:"#92400e",color:"white",border:"none",borderRadius:6,fontSize:11,fontWeight:700,cursor:"pointer"},children:" Print Requisition"})]}),t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#94a3b8",marginBottom:8,letterSpacing:".5px"},children:"GO TO"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8},children:[{tab:"quick",icon:"",label:"Quick Dictation",color:"#dc2626",bg:"#fef2f2"},{tab:"patient",icon:"",label:"Patient Details",color:"#1e40af",bg:"#eff6ff"},{tab:"mo",icon:"",label:"MO Entry",color:"#ea580c",bg:"#fff7ed"},{tab:"consultant",icon:"",label:"Consultant",color:"#0d9488",bg:"#f0fdfa"},{tab:"plan",icon:"",label:"Plan / Print",color:"#1e293b",bg:"#f1f5f9"},{tab:"docs",icon:"",label:"Documents",color:"#6366f1",bg:"#eef2ff"},{tab:"history",icon:"",label:"History",color:"#b45309",bg:"#fffbeb"},{tab:"outcomes",icon:"",label:"Outcomes",color:"#059669",bg:"#f0fdf4"}].map(r=>t.jsxs("button",{onClick:()=>n(r.tab),style:{background:r.bg,border:`1px solid ${r.color}22`,borderRadius:10,padding:"14px 8px",textAlign:"center",cursor:"pointer",transition:"all .15s"},onMouseEnter:s=>{s.currentTarget.style.transform="scale(1.02)",s.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,.08)"},onMouseLeave:s=>{s.currentTarget.style.transform="scale(1)",s.currentTarget.style.boxShadow="none"},children:[t.jsx("div",{style:{fontSize:22,marginBottom:4},children:r.icon}),t.jsx("div",{style:{fontSize:11,fontWeight:700,color:r.color},children:r.label})]},r.tab))}),((zp=P==null?void 0:P.consultations)==null?void 0:zp.length)>0&&t.jsxs("div",{style:{marginTop:14},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#94a3b8",marginBottom:6,letterSpacing:".5px"},children:"RECENT VISITS"}),P.consultations.slice(0,5).map((r,s)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",borderRadius:8,marginBottom:4,background:"#f8fafc",border:"1px solid #f1f5f9"},children:[t.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#475569",minWidth:70},children:new Date(String(r.visit_date).slice(0,10)+"T12:00:00").toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"2-digit"})}),t.jsx("div",{style:{flex:1,fontSize:11,color:"#64748b"},children:r.con_name||r.mo_name||""}),t.jsx("span",{style:{fontSize:10,fontWeight:600,color:r.status==="completed"?"#059669":"#d97706",background:r.status==="completed"?"#f0fdf4":"#fefce8",padding:"2px 8px",borderRadius:4},children:r.status||"completed"})]},s))]})]}),e==="quick"&&t.jsxs("div",{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg,#dc2626,#b91c1c)",borderRadius:10,padding:14,marginBottom:10,color:"white"},children:[t.jsx("div",{style:{fontSize:15,fontWeight:800,marginBottom:3},children:" Quick Dictation"}),t.jsx("div",{style:{fontSize:11,opacity:.85},children:"Dictate everything in one go  patient, history, vitals, meds, plan. AI splits it into all sections automatically."})]}),t.jsx(Pn,{onTranscript:Nb,dgKey:o,whisperKey:a,label:" Full Consultation  dictate everything at once",color:"#dc2626"}),ge.quick&&t.jsxs("div",{style:{textAlign:"center",padding:20},children:[t.jsx("div",{style:{fontSize:28,animation:"pulse 1s infinite"},children:""}),t.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#dc2626",marginTop:4},children:vt||"Processing..."}),t.jsx("div",{style:{fontSize:10,color:"#94a3b8",marginTop:4},children:"Running 2 parallel AI calls (Haiku = 3-5x faster)"}),t.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"center",marginTop:8},children:[t.jsx("div",{style:{padding:"4px 10px",borderRadius:6,background:"#f0fdf4",border:"1px solid #bbf7d0",fontSize:10,fontWeight:600,color:"#059669"},children:" Extract"}),t.jsx("div",{style:{padding:"4px 10px",borderRadius:6,background:"#eff6ff",border:"1px solid #bfdbfe",fontSize:10,fontWeight:600,color:"#2563eb"},children:" Plan"})]})]}),Qe.quick&&t.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:8,padding:10,marginTop:8},children:t.jsxs("div",{style:{fontSize:11,color:"#dc2626",fontWeight:600},children:[" ",Qe.quick]})}),Rt&&!ge.quick&&t.jsxs("div",{style:{marginTop:8,background:"#f8fafc",borderRadius:8,padding:10,border:"1px solid #e2e8f0"},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#94a3b8",marginBottom:4},children:"RAW TRANSCRIPT"}),t.jsx("div",{style:{fontSize:11,color:"#475569",lineHeight:1.6},children:Rt})]}),t.jsxs("div",{style:{marginTop:12,padding:10,background:"#fefce8",borderRadius:8,border:"1px solid #fef08a"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#854d0e",marginBottom:3},children:" Tips for best results:"}),t.jsx("div",{style:{fontSize:10,color:"#92400e",lineHeight:1.6},children:"Start with patient name and demographics, then history and current medications, then today's vitals and lab results, then the plan  new medicines, lifestyle advice, follow-up."})]}),t.jsx("div",{style:{marginTop:8,fontSize:10,color:"#94a3b8",textAlign:"center"},children:"Or use individual tabs  for step-by-step entry"}),Pd]}),e==="patient"&&t.jsxs("div",{style:{maxWidth:560,margin:"0 auto"},children:[t.jsx(Pn,{label:"Say patient details",dgKey:o,whisperKey:a,color:"#1e40af",compact:!0,onTranscript:Ux}),ge.pv&&t.jsx("div",{style:{textAlign:"center",padding:4,fontSize:11,color:"#1e40af",fontWeight:600},children:" Filling fields..."}),t.jsx(zr,{msg:Qe.pv,onDismiss:()=>Dt("pv")}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:6},children:[[{k:"name",l:"Full Name *",ph:"Rajinder Singh",span:2},{k:"phone",l:"Phone",ph:"+91 98765 43210"},{k:"fileNo",l:"File No.",ph:"GINI-2025-04821"},{k:"dob",l:"DOB",type:"date"},{k:"age",l:"Age",ph:"77",disabled:!!b.dob},{k:"address",l:"Address",ph:"House No, Sector, City",span:2}].map(r=>t.jsxs("div",{style:{gridColumn:r.span?"span 2":"span 1"},children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:r.l}),t.jsx("input",{type:r.type||"text",value:b[r.k],onChange:s=>Dr(r.k,s.target.value),disabled:r.disabled,placeholder:r.ph,style:{width:"100%",padding:"6px 8px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:14,boxSizing:"border-box",background:r.disabled?"#f8fafc":"white"}})]},r.k)),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:"Sex"}),t.jsx("div",{style:{display:"flex",gap:4},children:["Male","Female"].map(r=>t.jsx("button",{onClick:()=>Dr("sex",r),style:{flex:1,padding:"6px",border:`1px solid ${b.sex===r?"#1e293b":"#e2e8f0"}`,borderRadius:6,background:b.sex===r?"#1e293b":"white",color:b.sex===r?"white":"#64748b",fontWeight:600,fontSize:12,cursor:"pointer"},children:r},r))})]})]}),t.jsxs("details",{style:{marginTop:10,border:"1px solid #e2e8f0",borderRadius:8,overflow:"hidden"},children:[t.jsx("summary",{style:{padding:"6px 10px",fontSize:11,fontWeight:600,color:"#475569",cursor:"pointer",background:"#f8fafc"},children:" Health & Government IDs (optional)"}),t.jsxs("div",{style:{padding:10,display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:"ABHA ID"}),t.jsx("input",{value:b.abhaId||"",onChange:r=>Dr("abhaId",r.target.value),placeholder:"XX-XXXX-XXXX-XXXX",style:{width:"100%",padding:"6px 8px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:"Health ID"}),t.jsx("input",{value:b.healthId||"",onChange:r=>Dr("healthId",r.target.value),placeholder:"MyHealth Genie ID",style:{width:"100%",padding:"6px 8px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:"Aadhaar"}),t.jsx("input",{value:b.aadhaar||"",onChange:r=>Dr("aadhaar",r.target.value),placeholder:"XXXX XXXX XXXX",style:{width:"100%",padding:"6px 8px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:t.jsxs("select",{value:b.govtIdType||"",onChange:r=>Dr("govtIdType",r.target.value),style:{fontSize:10,border:"none",background:"transparent",fontWeight:600,color:"#475569"},children:[t.jsx("option",{value:"",children:"Other ID"}),t.jsx("option",{value:"Passport",children:"Passport"}),t.jsx("option",{value:"DrivingLicense",children:"Driving License"}),t.jsx("option",{value:"VoterID",children:"Voter ID"}),t.jsx("option",{value:"PAN",children:"PAN"})]})}),t.jsx("input",{value:b.govtId||"",onChange:r=>Dr("govtId",r.target.value),placeholder:"ID number",style:{width:"100%",padding:"6px 8px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,boxSizing:"border-box"}})]})]})]}),t.jsx("button",{onClick:()=>{b.name&&n("dashboard")},style:{marginTop:10,width:"100%",background:b.name?"#1e293b":"#94a3b8",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:b.name?"pointer":"not-allowed"},children:b.name?"Next: Dashboard ":"Enter name first"})]}),e==="intake"&&t.jsxs("div",{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg,#059669,#10b981)",borderRadius:10,padding:"10px 14px",marginBottom:10,color:"white",display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{fontSize:14,fontWeight:800},children:["Intake  ",b.name||"Patient"]}),t.jsx("div",{style:{fontSize:10,opacity:.8},children:((Up=P==null?void 0:P.consultations)==null?void 0:Up.length)>0?`Follow-up Visit  ${P.consultations.length} previous visits`:"Complaints + Vitals + Reports"})]}),t.jsx("span",{style:{fontSize:10,opacity:.6},children:"Step 1/6"})]}),((Wp=P==null?void 0:P.consultations)==null?void 0:Wp.length)>0&&(()=>{const r=P.consultations[0],s=r!=null&&r.visit_date?new Date(String(r.visit_date).slice(0,10)+"T12:00:00"):null,d=s?Math.round((Date.now()-s)/864e5):null,c=(r==null?void 0:r.con_data)||{},u=c.goals||[],h=(c.follow_up||{}).tests_to_bring||c.investigations_to_order||[],m=c.medications_confirmed||[],j=c.medications_stopped||[],w=[...new Map((P.diagnoses||[]).map(I=>[I.diagnosis_id||I.label,I])).values()],R=(P.medications||[]).filter(I=>I.is_active!==!1),M=[...new Map(R.map(I=>[(I.name||"").toUpperCase(),I])).values()],$=[...P.lab_results||[]],y=!!(F!=null&&F.panels);if(y){const I=new Date().toISOString().split("T")[0];F.panels.forEach(V=>(V.tests||[]).forEach(X=>{$.push({test_name:X.test_name,result:X.result_text||String(X.result),unit:X.unit||"",flag:X.flag,test_date:F.report_date||I,_isNew:!0})}))}const _={};$.forEach(I=>{_[I.test_name]||(_[I.test_name]=[]),_[I.test_name].push(I)}),Object.values(_).forEach(I=>I.sort((V,X)=>new Date(X.test_date)-new Date(V.test_date)));const k=I=>{const V=_[I]||[];if(!V.length)return null;const X=V[0],fe=V.length>1?V[1]:null;let pe="stable";if(fe){const Ge=parseFloat(X.result)-parseFloat(fe.result);Math.abs(Ge/(parseFloat(fe.result)||1))*100>5&&(pe=Ge>0?"up":"down")}return{vals:V.slice(0,4).reverse(),latest:X.result,unit:X.unit||"",prev:fe==null?void 0:fe.result,direction:pe,isNew:X._isNew,flag:X.flag}},le={"Type 2 DM":{markers:["HbA1c","FBS","PPBS"],lower:!0,targets:{HbA1c:"<7%",FBS:"<110",PPBS:"<180"}},"Type 1 DM":{markers:["HbA1c","FBS","PPBS"],lower:!0,targets:{HbA1c:"<7%"}},"Type 2 Diabetes Mellitus":{markers:["HbA1c","FBS","PPBS"],lower:!0,targets:{HbA1c:"<7%",FBS:"<110",PPBS:"<180"}},Hypertension:{markers:[],lower:!0,targets:{}},Dyslipidemia:{markers:["LDL","HDL","Triglycerides","Non-HDL","Total Cholesterol"],lower:!0,targets:{LDL:"<100",HDL:">40",Triglycerides:"<150","Non-HDL":"<130"}},Hypothyroidism:{markers:["TSH","Free T4"],lower:!1,targets:{TSH:"0.4-4.0"}},Hypothyroid:{markers:["TSH","Free T4"],lower:!1,targets:{TSH:"0.4-4.0"}},CKD:{markers:["Creatinine","eGFR","UACR"],lower:!0,targets:{eGFR:">60",UACR:"<30"}},Obesity:{markers:[],lower:!0,targets:{}},CAD:{markers:["LDL","Triglycerides"],lower:!0,targets:{LDL:"<70"}},"NAFLD/MAFLD":{markers:["SGPT (ALT)","SGOT (AST)"],lower:!0,targets:{}},MASLD:{markers:["SGPT (ALT)","SGOT (AST)","GGT"],lower:!0,targets:{}},"Vit D Deficiency":{markers:["Vitamin D"],lower:!1,targets:{"Vitamin D":">30"}},"B12 Deficiency":{markers:["Vitamin B12"],lower:!1,targets:{"Vitamin B12":">300"}},"DM Nephropathy":{markers:["UACR","eGFR","Creatinine"],lower:!0,targets:{UACR:"<30",eGFR:">60"}},Gout:{markers:["Uric Acid"],lower:!0,targets:{"Uric Acid":"<6"}}},Ae=I=>le[I]||le[Object.keys(le).find(V=>I==null?void 0:I.toLowerCase().includes(V.toLowerCase()))]||null,J=new Map;w.forEach(I=>{const V=Ae(I.label);V&&V.markers.forEach(X=>{var Ue;const fe=k(X);if(!fe)return;const pe=J.get(X),Ge=u.find(dt=>dt.marker===X),Ct=(Ge==null?void 0:Ge.target)||((Ue=V.targets)==null?void 0:Ue[X])||"";if(pe)pe.dxLabels.push(I.label);else{const dt=M.filter(mh=>(mh.for_diagnosis||mh.forDiagnosis||[]).map(Dd=>Dd.toLowerCase()).some(Dd=>I.label.toLowerCase().split(/[\s\/]+/).some(Cb=>Dd.includes(Cb))));J.set(X,{name:X,dxLabels:[I.label],lower:V.lower,target:Ct,trend:fe,meds:dt,goal:Ge})}})});const re=[];y&&F.panels.forEach(I=>(I.tests||[]).forEach(V=>{(V.flag==="H"||V.flag==="L")&&!J.has(V.test_name)&&re.push({name:V.test_name,result:V.result_text||String(V.result),unit:V.unit||"",flag:V.flag})}));const Me=I=>{const V=I.trend,X=I.lower&&V.direction==="down"||!I.lower&&V.direction==="up";return I.lower&&V.direction==="up"||!I.lower&&V.direction==="down"?{label:"Worsening",bg:"#dc2626",icon:""}:X?{label:"Improving",bg:"#059669",icon:""}:{label:"Stable",bg:"#d97706",icon:""}};return t.jsxs("div",{style:{marginBottom:14,borderRadius:12,overflow:"hidden",boxShadow:"0 4px 24px rgba(124,58,237,.15)"},children:[t.jsxs("div",{style:{background:"linear-gradient(135deg,#7c3aed,#4f46e5)",color:"white",padding:"14px 16px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[t.jsx("span",{style:{fontSize:24},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:17,fontWeight:900,letterSpacing:"-0.3px"},children:"Follow-up Dashboard"}),t.jsxs("div",{style:{fontSize:12,opacity:.85},children:["Last: ",s?s.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"",d?`  ${d} days ago`:"","  ",r.con_name||r.mo_name||"","  Visit #",P.consultations.length+1]})]}),y?t.jsx("span",{style:{fontSize:12,background:"#10b981",padding:"5px 14px",borderRadius:8,fontWeight:800},children:" Today's labs loaded"}):t.jsx("span",{style:{fontSize:12,background:"rgba(255,255,255,.2)",padding:"5px 14px",borderRadius:8,fontWeight:700,animation:"pulse 2s infinite"},children:" Upload reports below"})]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:5},children:w.slice(0,10).map((I,V)=>{const X=I.status==="Uncontrolled"?"#fca5a5":I.status==="Controlled"?"#86efac":"rgba(255,255,255,.4)";return t.jsxs("span",{style:{padding:"4px 12px",borderRadius:6,fontSize:12,fontWeight:700,background:"rgba(255,255,255,.15)",border:`1.5px solid ${X}`,color:"white"},children:[I.label," ",t.jsxs("span",{style:{opacity:.7},children:[" ",I.status||"Active"]})]},V)})})]}),t.jsxs("div",{style:{padding:"12px 16px",background:"linear-gradient(135deg,#faf5ff,#eff6ff)",borderBottom:"2px solid #e9d5ff"},children:[t.jsxs("div",{style:{fontSize:14,fontWeight:900,color:"#6d28d9",marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[" Last Treatment Plan",t.jsxs("span",{style:{fontSize:11,color:"#94a3b8",fontWeight:500},children:[" ",s?s.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):""]})]}),(m.length>0||M.length>0)&&t.jsxs("div",{style:{marginBottom:10},children:[t.jsx("div",{style:{fontSize:12,fontWeight:800,color:"#1e40af",marginBottom:4},children:" Current Medications"}),t.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:t.jsx("tbody",{children:(m.length>0?m:M).map((I,V)=>t.jsxs("tr",{style:{borderBottom:"1px solid #e9d5ff"},children:[t.jsxs("td",{style:{padding:"5px 8px",fontSize:12,fontWeight:700,color:"#1e293b"},children:[I.name,I.isNew&&t.jsx("span",{style:{fontSize:8,color:"#059669",fontWeight:800,marginLeft:4,background:"#f0fdf4",padding:"1px 4px",borderRadius:3},children:"NEW"}),I._shadowAction==="MODIFY"&&t.jsx("span",{style:{fontSize:8,color:"#f59e0b",fontWeight:800,marginLeft:4,background:"#fefce8",padding:"1px 4px",borderRadius:3},children:"MOD"})]}),t.jsx("td",{style:{padding:"5px 8px",fontSize:11,color:"#475569"},children:I.dose||""}),t.jsx("td",{style:{padding:"5px 8px",fontSize:11,color:"#475569"},children:I.frequency||""}),t.jsx("td",{style:{padding:"5px 8px",fontSize:11,color:"#64748b"},children:I.timing||""}),t.jsx("td",{style:{padding:"5px 8px",fontSize:10,color:"#94a3b8"},children:(I.forDiagnosis||[]).join(", ")})]},V))})})]}),j.length>0&&t.jsxs("div",{style:{marginBottom:8},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#dc2626",marginBottom:3},children:" Stopped"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:j.map((I,V)=>t.jsxs("span",{style:{fontSize:11,padding:"3px 10px",background:"#fef2f2",borderRadius:5,color:"#dc2626",fontWeight:600,textDecoration:"line-through"},children:[I.name," ",I.reason?` ${I.reason}`:""]},V))})]}),u.length>0&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:12,fontWeight:800,color:"#1e40af",marginBottom:4},children:" Goals"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:u.map((I,V)=>{const X=k(I.marker),fe=J.get(I.marker),pe=fe?Me(fe):null;return t.jsxs("div",{style:{padding:"8px 12px",background:"white",borderRadius:8,border:`2px solid ${(pe==null?void 0:pe.bg)||"#e2e8f0"}`,borderLeft:`5px solid ${(pe==null?void 0:pe.bg)||"#94a3b8"}`,minWidth:150},children:[t.jsx("div",{style:{fontSize:14,fontWeight:800,color:"#1e293b"},children:I.marker}),t.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:[I.current?`Was: ${I.current}  `:"","Target: ",t.jsx("b",{children:I.target})]}),X?t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginTop:4},children:[t.jsxs("span",{style:{fontSize:16,fontWeight:900,color:(pe==null?void 0:pe.bg)||"#475569"},children:[X.latest,X.unit]}),X.isNew&&t.jsx("span",{style:{fontSize:9,background:"#10b981",color:"white",padding:"1px 6px",borderRadius:3,fontWeight:800},children:"TODAY"}),pe&&t.jsxs("span",{style:{fontSize:10,fontWeight:700,color:"white",background:pe.bg,padding:"2px 8px",borderRadius:4},children:[pe.icon," ",pe.label]})]}):t.jsx("div",{style:{fontSize:11,color:"#d97706",fontStyle:"italic",marginTop:3},children:" Awaiting labs"})]},V)})})]})]}),h.length>0&&t.jsxs("div",{style:{padding:"12px 16px",background:y?"#f0fdf4":"#fffbeb",borderBottom:"2px solid "+(y?"#bbf7d0":"#fde68a")},children:[t.jsxs("div",{style:{fontSize:14,fontWeight:800,color:y?"#059669":"#92400e",marginBottom:6},children:[" Tests Ordered Last Visit ",!y&&" Upload reports to see updated trends"]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:h.map((I,V)=>{const X=typeof I=="string"?I:I.test||I,fe=(_[X]||[]).some(pe=>pe.test_date&&new Date(pe.test_date)>(s||new Date(0)));return t.jsxs("span",{style:{padding:"5px 12px",borderRadius:6,fontSize:12,fontWeight:700,background:fe?"#f0fdf4":"white",color:fe?"#059669":"#d97706",border:`1.5px solid ${fe?"#bbf7d0":"#fde68a"}`},children:[fe?"":""," ",X]},V)})})]}),J.size>0&&t.jsxs("div",{style:{padding:"12px 16px",background:"white",borderBottom:"1px solid #e2e8f0"},children:[t.jsxs("div",{style:{fontSize:14,fontWeight:900,color:"#1e293b",marginBottom:8},children:[" Biomarker Trends ",y?"+ Today's Results":"(Historical)"]}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#f8fafc",fontSize:10,fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},children:[t.jsx("td",{style:{padding:"8px",borderBottom:"2px solid #e2e8f0"},children:"Marker"}),t.jsx("td",{style:{padding:"8px",borderBottom:"2px solid #e2e8f0",textAlign:"center"},children:"Trend"}),t.jsx("td",{style:{padding:"8px",borderBottom:"2px solid #e2e8f0",textAlign:"center"},children:"Latest"}),t.jsx("td",{style:{padding:"8px",borderBottom:"2px solid #e2e8f0",textAlign:"center"},children:"Target"}),t.jsx("td",{style:{padding:"8px",borderBottom:"2px solid #e2e8f0",textAlign:"center"},children:"Status"}),t.jsx("td",{style:{padding:"8px",borderBottom:"2px solid #e2e8f0"},children:"Medications"})]})}),t.jsx("tbody",{children:[...J.values()].map((I,V)=>{const X=Me(I),fe=I.trend.vals||[];return t.jsxs("tr",{style:{borderBottom:"1px solid #f1f5f9",background:V%2===0?"white":"#fafbfc"},children:[t.jsxs("td",{style:{padding:"8px",fontWeight:700,color:"#1e293b"},children:[t.jsx("div",{style:{fontSize:12},children:I.name}),t.jsx("div",{style:{fontSize:9,color:"#94a3b8",fontWeight:500},children:I.dxLabels.join(", ")})]}),t.jsxs("td",{style:{padding:"8px",textAlign:"center"},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:3,flexWrap:"wrap"},children:fe.map((pe,Ge)=>{const Ct=Ge===fe.length-1;return t.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:3},children:[t.jsx("span",{style:{fontSize:Ct?14:10,fontWeight:Ct?800:500,color:Ct?X.bg:"#94a3b8",background:Ct?`${X.bg}12`:"none",padding:Ct?"2px 6px":"0",borderRadius:4},children:parseFloat(pe.result)||pe.result}),Ge<fe.length-1&&t.jsx("span",{style:{color:"#d1d5db",fontSize:9},children:""})]},Ge)})}),I.trend.isNew&&t.jsx("div",{style:{fontSize:9,color:"#10b981",fontWeight:800,marginTop:2},children:" TODAY"})]}),t.jsxs("td",{style:{padding:"8px",textAlign:"center",fontSize:16,fontWeight:900,color:X.bg},children:[I.trend.latest,I.trend.unit]}),t.jsx("td",{style:{padding:"8px",textAlign:"center",fontSize:12,fontWeight:600,color:"#475569"},children:I.target||""}),t.jsx("td",{style:{padding:"8px",textAlign:"center"},children:t.jsxs("span",{style:{fontSize:11,fontWeight:700,color:"white",background:X.bg,padding:"3px 10px",borderRadius:5,whiteSpace:"nowrap"},children:[X.icon," ",X.label]})}),t.jsx("td",{style:{padding:"8px"},children:t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:2},children:I.meds.length>0?I.meds.slice(0,3).map((pe,Ge)=>t.jsxs("span",{style:{fontSize:9,padding:"2px 6px",background:"#eff6ff",color:"#2563eb",borderRadius:3,fontWeight:600},children:[pe.name," ",pe.dose||""]},Ge)):t.jsx("span",{style:{fontSize:9,color:"#cbd5e1"},children:""})})})]},V)})})]})})]}),re.length>0&&t.jsxs("div",{style:{padding:"12px 16px",background:"#fef2f2",borderBottom:"1px solid #fecaca"},children:[t.jsx("div",{style:{fontSize:14,fontWeight:900,color:"#dc2626",marginBottom:6},children:" New Abnormal Findings (Today)"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:re.map((I,V)=>t.jsxs("span",{style:{padding:"6px 14px",background:"white",borderRadius:8,fontSize:13,fontWeight:700,border:`2px solid ${I.flag==="H"?"#dc2626":"#2563eb"}`,color:I.flag==="H"?"#dc2626":"#2563eb"},children:[I.flag==="H"?"":""," ",I.name,": ",I.result,I.unit]},V))})]}),t.jsxs("div",{style:{padding:"12px 16px",background:"#f8fafc",borderBottom:"1px solid #e2e8f0"},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,color:"#1e293b",marginBottom:8},children:" Changes Since Last Visit"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#92400e",marginBottom:4},children:" New External Medicines"}),pi.map((I,V)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,padding:"4px 10px",background:"#fef3c7",borderRadius:6,marginBottom:3,fontSize:12,fontWeight:600},children:[t.jsxs("span",{style:{flex:1},children:[I.name," ",I.dose," ",I.doctor?t.jsxs("span",{style:{color:"#64748b",fontWeight:400},children:[" ",I.doctor]}):""]}),t.jsx("button",{onClick:()=>Us(X=>X.filter((fe,pe)=>pe!==V)),style:{background:"none",border:"none",cursor:"pointer",color:"#dc2626",fontSize:14,padding:0},children:""})]},V)),t.jsxs("div",{style:{display:"flex",gap:4,marginTop:4},children:[t.jsx("input",{id:"fuExtMedName",placeholder:"Medicine name",style:{flex:2,padding:"7px 10px",border:"1.5px solid #e2e8f0",borderRadius:6,fontSize:12}}),t.jsx("input",{id:"fuExtMedDose",placeholder:"Dose",style:{flex:1,padding:"7px 10px",border:"1.5px solid #e2e8f0",borderRadius:6,fontSize:12}}),t.jsx("input",{id:"fuExtMedDoc",placeholder:"Dr. name",style:{flex:1,padding:"7px 10px",border:"1.5px solid #e2e8f0",borderRadius:6,fontSize:12}}),t.jsx("button",{onClick:()=>{const I=document.getElementById("fuExtMedName"),V=document.getElementById("fuExtMedDose"),X=document.getElementById("fuExtMedDoc");I.value.trim()&&(Us(fe=>[...fe,{name:I.value.trim(),dose:V.value.trim(),doctor:X.value.trim()}]),I.value="",V.value="",X.value="")},style:{padding:"7px 14px",background:"#f59e0b",color:"white",border:"none",borderRadius:6,fontSize:15,fontWeight:800,cursor:"pointer"},children:"+"})]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#dc2626",marginBottom:4},children:" New Conditions / Diagnoses"}),hi.map((I,V)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,padding:"4px 10px",background:"#fee2e2",borderRadius:6,marginBottom:3,fontSize:12,fontWeight:600},children:[t.jsx("span",{style:{flex:1},children:I}),t.jsx("button",{onClick:()=>gi(X=>X.filter((fe,pe)=>pe!==V)),style:{background:"none",border:"none",cursor:"pointer",color:"#dc2626",fontSize:14,padding:0},children:""})]},V)),t.jsxs("div",{style:{display:"flex",gap:4,marginTop:4},children:[t.jsx("input",{id:"fuNewCond",placeholder:"e.g. Sleep apnea by pulmonologist",style:{flex:1,padding:"7px 10px",border:"1.5px solid #e2e8f0",borderRadius:6,fontSize:12},onKeyDown:I=>{I.key==="Enter"&&I.target.value.trim()&&(gi(V=>[...V,I.target.value.trim()]),I.target.value="")}}),t.jsx("button",{onClick:()=>{const I=document.getElementById("fuNewCond");I.value.trim()&&(gi(V=>[...V,I.value.trim()]),I.value="")},style:{padding:"7px 14px",background:"#dc2626",color:"white",border:"none",borderRadius:6,fontSize:15,fontWeight:800,cursor:"pointer"},children:"+"})]})]})]})]}),t.jsxs("div",{style:{padding:"14px 16px",background:"white"},children:[t.jsx("div",{style:{fontSize:14,fontWeight:900,color:"#1e293b",marginBottom:10},children:" Quick Assessment"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[{key:"medCompliance",label:" Medicine Compliance",opts:["Good","Partial","Poor","Missed doses"],colors:["#059669","#d97706","#dc2626","#dc2626"]},{key:"dietExercise",label:" Diet & Exercise",opts:["Adherent","Partial","Not following","Improved"],colors:["#059669","#d97706","#dc2626","#2563eb"]},{key:"sideEffects",label:" Side Effects",opts:["None","Mild","Significant","Needs change"],colors:["#059669","#d97706","#dc2626","#dc2626"]},{key:"newSymptoms",label:" New Symptoms",opts:["None","Mild","Concerning","Urgent"],colors:["#059669","#d97706","#dc2626","#dc2626"]}].map(I=>t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#374151",marginBottom:5},children:I.label}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:5},children:I.opts.map((V,X)=>{const fe=Je[I.key]===V,pe=I.colors[X];return t.jsx("button",{onClick:()=>zs(Ge=>({...Ge,[I.key]:Ge[I.key]===V?"":V})),style:{fontSize:13,padding:"8px 16px",borderRadius:8,cursor:"pointer",fontWeight:700,transition:"all .15s",border:`2px solid ${fe?pe:"#e2e8f0"}`,background:fe?pe:"white",color:fe?"white":"#475569"},children:V},V)})})]},I.key))}),t.jsxs("div",{style:{marginTop:10},children:[t.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#374151",marginBottom:4},children:" Challenges / Notes"}),t.jsx("textarea",{value:Je.challenges,onChange:I=>zs(V=>({...V,challenges:I.target.value})),placeholder:"Patient reports: difficulty with morning meds, sugar cravings at night, new numbness in feet...",rows:2,style:{width:"100%",fontSize:14,padding:12,border:"2px solid #e2e8f0",borderRadius:8,resize:"vertical",boxSizing:"border-box",lineHeight:1.5}})]})]})]})})(),t.jsxs("div",{style:{marginBottom:12},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,marginBottom:6},children:" Chief Complaints"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginBottom:6},children:jx.map(r=>t.jsx("button",{onClick:()=>bd(tt,tr,r),style:{padding:"5px 10px",borderRadius:7,fontSize:11,fontWeight:600,cursor:"pointer",border:`1.5px solid ${tt.includes(r)?"#2563eb":"#e2e8f0"}`,background:tt.includes(r)?"#eff6ff":"white",color:tt.includes(r)?"#2563eb":"#64748b"},children:r},r))}),t.jsxs("div",{style:{display:"flex",gap:4},children:[t.jsx("input",{value:ld,onChange:r=>ui(r.target.value),onKeyDown:r=>{r.key==="Enter"&&ld.trim()&&(tr([...tt,ld.trim()]),ui(""))},placeholder:"Other complaint + Enter",style:{flex:1,padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,boxSizing:"border-box"}}),t.jsx(Pn,{label:"",dgKey:o,whisperKey:a,color:"#059669",compact:!0,onTranscript:r=>{r.trim()&&tr([...tt,r.trim()])}})]}),tt.length>0&&t.jsx("div",{style:{marginTop:4,display:"flex",flexWrap:"wrap",gap:3},children:tt.map((r,s)=>t.jsxs("span",{style:{padding:"3px 8px",background:"#2563eb",color:"white",borderRadius:5,fontSize:10,fontWeight:600,display:"flex",alignItems:"center",gap:4},children:[r,t.jsx("button",{onClick:()=>tr(tt.filter((d,c)=>c!==s)),style:{background:"none",border:"none",color:"white",cursor:"pointer",fontSize:10,padding:0},children:""})]},s))})]}),t.jsxs("div",{style:{marginBottom:12},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,marginBottom:6},children:" Vitals"}),t.jsx(Pn,{label:"Say vitals: BP 140/90, weight 80kg",dgKey:o,whisperKey:a,color:"#ea580c",compact:!0,onTranscript:cp}),ge.vv&&t.jsx("div",{style:{textAlign:"center",padding:3,fontSize:10,color:"#ea580c"},children:" Filling..."}),t.jsx(zr,{msg:Qe.vv,onDismiss:()=>Dt("vv")}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:5,marginTop:4},children:[{k:"bp_sys",l:"BP Sys"},{k:"bp_dia",l:"BP Dia"},{k:"pulse",l:"Pulse"},{k:"temp",l:"Temp F"},{k:"spo2",l:"SpO2 %"},{k:"weight",l:"Wt kg"},{k:"height",l:"Ht cm"},{k:"bmi",l:"BMI",disabled:!0},{k:"waist",l:"Waist cm"},{k:"body_fat",l:"Body Fat %"},{k:"muscle_mass",l:"Muscle kg"}].map(r=>t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:9,fontWeight:600,color:"#64748b"},children:r.l}),t.jsx("input",{type:"number",value:N[r.k],onChange:s=>dp(r.k,s.target.value),disabled:r.disabled,style:{width:"100%",padding:"4px 6px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:14,fontWeight:600,boxSizing:"border-box",background:r.disabled?"#f0fdf4":"white"}})]},r.k))})]}),t.jsxs("div",{style:{marginBottom:12},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,color:"#7c3aed",marginBottom:6},children:" Upload Reports"}),t.jsxs("div",{style:{display:"flex",gap:4,marginBottom:6},children:[t.jsxs("div",{onClick:()=>{var r;return(r=Qu.current)==null?void 0:r.click()},style:{flex:1,border:"2px dashed #c4b5fd",borderRadius:8,padding:10,textAlign:"center",cursor:"pointer",background:"#faf5ff"},children:[t.jsx("input",{ref:Qu,type:"file",accept:"image/*,.pdf,.heic,.heif",multiple:!0,onChange:r=>{Array.from(r.target.files).forEach(s=>{const d=new FileReader;d.onload=c=>{const u=c.target.result.split(",")[1],f=s.type||"image/jpeg";mt(h=>[...h,{id:"rpt_"+Date.now()+Math.random(),type:"lab",base64:u,mediaType:f,fileName:s.name,data:null,extracting:!1,error:null}])},d.readAsDataURL(s)}),r.target.value=""},style:{display:"none"}}),t.jsx("div",{style:{fontSize:18},children:""}),t.jsx("div",{style:{fontWeight:600,color:"#7c3aed",fontSize:11},children:"Upload Lab / Imaging Reports"}),t.jsx("div",{style:{fontSize:9,color:"#94a3b8"},children:"Multiple files supported"})]}),E&&!F&&t.jsx("button",{onClick:fp,disabled:ge.lab,style:{alignSelf:"stretch",background:ge.lab?"#94a3b8":"#7c3aed",color:"white",border:"none",padding:"10px 14px",borderRadius:8,fontSize:12,fontWeight:700,cursor:ge.lab?"wait":"pointer"},children:ge.lab?" Extracting...":" Extract"})]}),it.length>0&&t.jsxs("div",{style:{marginBottom:6},children:[it.map(r=>{var s;return t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"6px 8px",marginBottom:3,borderRadius:6,background:r.saved?"#f0fdf4":r.saveError?"#fef2f2":r.data?"#faf5ff":r.error?"#fef2f2":"#f8fafc",border:`1px solid ${r.saved?"#bbf7d0":r.saveError?"#fecaca":r.data?"#c4b5fd":r.error?"#fecaca":"#e2e8f0"}`},children:[t.jsx("span",{style:{fontSize:12},children:r.saved?"":r.type==="lab"?"":r.type==="imaging"?"":""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700},children:r.fileName}),r.data&&t.jsxs("div",{style:{fontSize:9,color:"#059669"},children:[((s=r.data.panels)==null?void 0:s.reduce((d,c)=>d+c.tests.length,0))||0," tests",r.data.lab_name&&t.jsxs("span",{style:{color:"#7c3aed"},children:["  ",r.data.lab_name]}),r.data.report_date&&t.jsxs("span",{style:{color:"#2563eb"},children:["  ",r.data.report_date]}),!r.data.report_date&&t.jsx("span",{style:{color:"#dc2626"},children:"   No date found"})]}),r.saved&&t.jsx("div",{style:{fontSize:9,color:"#059669",fontWeight:700},children:" Saved to patient record"}),r.saving&&t.jsx("div",{style:{fontSize:9,color:"#7c3aed"},children:" Saving..."}),r.saveError&&t.jsxs("div",{style:{fontSize:9,color:"#dc2626"},children:[" Save failed: ",r.saveError]}),r.error&&t.jsxs("div",{style:{fontSize:9,color:"#dc2626"},children:[" ",r.error]})]}),t.jsxs("select",{value:r.type,onChange:d=>mt(c=>c.map(u=>u.id===r.id?{...u,type:d.target.value}:u)),style:{padding:"3px 6px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:10},children:[t.jsx("option",{value:"lab",children:"Lab Report"}),t.jsx("option",{value:"imaging",children:"Imaging (X-Ray/MRI/USG)"}),t.jsx("option",{value:"prescription",children:"Prescription"}),t.jsx("option",{value:"other",children:"Other"})]}),!r.data&&!r.extracting&&t.jsx("button",{onClick:async()=>{mt(d=>d.map(c=>c.id===r.id?{...c,extracting:!0}:c));try{const d=r.type==="imaging"?Da:Pa,{data:c,error:u}=await d(r.base64,r.mediaType);if(c){if(mt(f=>f.map(h=>h.id===r.id?{...h,data:c,extracting:!1}:h)),r.type==="lab"&&c.panels){const f=(c.panels||[]).map(h=>({...h,report_date:c.report_date,lab_name:c.lab_name}));v(h=>h?{...h,panels:[...h.panels||[],...f]}:{...c,panels:f})}if(ee)try{const f=await ta(r,c);if(console.log(`${f?"":""} Auto-saved intake report: ${r.fileName}`),f){const m=await(await fetch(`${ie}/api/patients/${ee}`,{headers:ze()})).json();m.id&&Ft(m)}}catch(f){console.error("Auto-save failed:",f)}setTimeout(()=>qu(),500)}else mt(f=>f.map(h=>h.id===r.id?{...h,error:u||"No data",extracting:!1}:h))}catch(d){mt(c=>c.map(u=>u.id===r.id?{...u,error:d.message,extracting:!1}:u))}},style:{padding:"3px 10px",background:"#7c3aed",color:"white",border:"none",borderRadius:4,fontSize:10,fontWeight:700,cursor:"pointer"},children:" Extract"}),r.extracting&&t.jsx("span",{style:{fontSize:10,color:"#7c3aed"},children:""}),t.jsx("button",{onClick:()=>mt(d=>d.filter(c=>c.id!==r.id)),style:{background:"#fee2e2",border:"none",borderRadius:3,padding:"2px 6px",fontSize:9,cursor:"pointer",color:"#dc2626",fontWeight:700},children:""})]},r.id)}),it.some(r=>!r.data&&!r.extracting)&&t.jsxs("button",{onClick:async()=>{for(const r of it.filter(s=>!s.data&&!s.extracting)){mt(s=>s.map(d=>d.id===r.id?{...d,extracting:!0}:d));try{const s=r.type==="imaging"?Da:Pa,{data:d,error:c}=await s(r.base64,r.mediaType);if(d){if(mt(u=>u.map(f=>f.id===r.id?{...f,data:d,extracting:!1}:f)),r.type==="lab"&&d.panels){const u=(d.panels||[]).map(f=>({...f,report_date:d.report_date,lab_name:d.lab_name}));v(f=>f?{...f,panels:[...f.panels||[],...u]}:{...d,panels:u})}if(ee)try{const u=await ta(r,d);console.log(`${u?"":""} Auto-saved: ${r.fileName}`)}catch(u){console.error("Auto-save failed:",u)}}else mt(u=>u.map(f=>f.id===r.id?{...f,error:c||"No data",extracting:!1}:f))}catch(s){mt(d=>d.map(c=>c.id===r.id?{...c,error:s.message,extracting:!1}:c))}}if(ee)try{const s=await(await fetch(`${ie}/api/patients/${ee}`,{headers:ze()})).json();s.id&&Ft(s)}catch{}setTimeout(()=>qu(),500)},style:{width:"100%",padding:"8px",background:"#7c3aed",color:"white",border:"none",borderRadius:6,fontSize:12,fontWeight:700,cursor:"pointer",marginTop:4},children:[" Extract All (",it.filter(r=>!r.data&&!r.extracting).length,")"]}),it.some(r=>r.data&&!r.saved)&&ee&&t.jsx("button",{onClick:Md,disabled:it.some(r=>r.saving),style:{width:"100%",padding:"10px",background:it.some(r=>r.saving)?"#94a3b8":"linear-gradient(135deg,#059669,#10b981)",color:"white",border:"none",borderRadius:6,fontSize:13,fontWeight:800,cursor:it.some(r=>r.saving)?"wait":"pointer",marginTop:6},children:it.some(r=>r.saving)?` Saving ${it.filter(r=>r.saving).length}...`:` Save ${it.filter(r=>r.data&&!r.saved).length} Reports to Patient Record`}),it.some(r=>r.data&&!r.saved)&&!ee&&t.jsx("div",{style:{marginTop:6,padding:8,background:"#fef3c7",border:"1px solid #fde68a",borderRadius:6,fontSize:11,color:"#92400e",fontWeight:600,textAlign:"center"},children:" Search or create patient first to save reports to their record"}),it.length>0&&it.every(r=>r.saved)&&t.jsxs("div",{style:{marginTop:6,padding:8,background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:6,fontSize:11,color:"#059669",fontWeight:700,textAlign:"center"},children:[" All ",it.length," reports saved to patient record"]})]}),t.jsx(zr,{msg:Qe.lab,onDismiss:()=>Dt("lab")}),F&&(F.panels||[]).map((r,s)=>t.jsxs("div",{style:{marginTop:4,border:"1px solid #e2e8f0",borderRadius:6,overflow:"hidden"},children:[t.jsx("div",{style:{background:"#7c3aed",color:"white",padding:"3px 8px",fontSize:10,fontWeight:700},children:r.panel_name}),t.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10},children:t.jsx("tbody",{children:r.tests.map((d,c)=>t.jsxs("tr",{style:{background:d.flag==="H"?"#fef2f2":d.flag==="L"?"#eff6ff":c%2?"#fafafa":"white"},children:[t.jsx("td",{style:{padding:"2px 6px"},children:d.test_name}),t.jsxs("td",{style:{padding:"2px 6px",textAlign:"right",fontWeight:700,color:d.flag==="H"?"#dc2626":d.flag==="L"?"#2563eb":"#1e293b"},children:[d.result_text||d.result," ",d.unit]}),t.jsx("td",{style:{padding:"2px 6px",textAlign:"center",fontSize:8},children:d.flag==="H"?"":d.flag==="L"?"":""})]},c))})})]},s)),Ei.length>0&&t.jsxs("div",{style:{marginTop:8,padding:8,background:"linear-gradient(135deg,#faf5ff,#f0f9ff)",border:"2px solid #c4b5fd",borderRadius:8},children:[t.jsx("div",{style:{fontSize:11,fontWeight:800,color:"#7c3aed",marginBottom:4},children:" AI Detected from Reports"}),Ei.map((r,s)=>{var d;return t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 0",borderBottom:s<Ei.length-1?"1px solid #f1f5f9":"none"},children:[t.jsx("span",{style:{fontSize:12},children:((d=rn[r.name])==null?void 0:d.icon)||""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("span",{style:{fontSize:11,fontWeight:700},children:r.name}),t.jsx("span",{style:{fontSize:9,color:"#64748b",marginLeft:6},children:r.reason})]}),t.jsx("button",{onClick:()=>{we.includes(r.name)||bo(r.name)},style:{fontSize:9,background:we.includes(r.name)?"#059669":"#2563eb",color:"white",border:"none",padding:"3px 8px",borderRadius:4,fontWeight:700,cursor:"pointer"},children:we.includes(r.name)?" Added":"+ Add"})]},s)})]})]}),t.jsx("button",{onClick:()=>n("hxclinical"),style:{width:"100%",background:"#1e293b",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer"},children:"Next: Clinical History "})]}),e==="hxclinical"&&t.jsxs("div",{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg,#6366f1,#4f46e5)",borderRadius:10,padding:"10px 14px",marginBottom:10,color:"white",display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:14,fontWeight:800},children:"Clinical History"}),t.jsx("div",{style:{fontSize:10,opacity:.8},children:"Diagnoses  Surgeries  Allergies  Family"})]}),t.jsx("span",{style:{fontSize:10,opacity:.6},children:"Step 2/6"})]}),t.jsxs("div",{style:{marginBottom:14},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,marginBottom:6},children:" Known Diagnoses"}),t.jsx("input",{value:gd,onChange:r=>Nx(r.target.value),placeholder:" Search diagnosis...",style:{width:"100%",padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,boxSizing:"border-box",marginBottom:6}}),t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginBottom:8},children:[Ox.map(r=>{const s=rn[r];return t.jsxs("button",{onClick:()=>bo(r),style:{padding:"5px 10px",borderRadius:7,fontSize:11,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:3,border:`1.5px solid ${we.includes(r)?s.color:"#e2e8f0"}`,background:we.includes(r)?s.color+"12":"white",color:we.includes(r)?s.color:"#64748b"},children:[t.jsx("span",{children:s.icon}),r]},r)}),t.jsx("button",{onClick:()=>bo("Other"),style:{padding:"5px 10px",borderRadius:7,fontSize:11,fontWeight:600,cursor:"pointer",border:`1.5px solid ${we.includes("Other")?"#64748b":"#e2e8f0"}`,background:we.includes("Other")?"#64748b12":"white",color:we.includes("Other")?"#64748b":"#94a3b8"},children:"+ Other"})]}),Ei.filter(r=>!we.includes(r.name)).length>0&&t.jsxs("div",{style:{padding:8,background:"#faf5ff",border:"1.5px solid #c4b5fd",borderRadius:8,marginBottom:8},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#7c3aed",marginBottom:4},children:" AI Suggested from Labs"}),Ei.filter(r=>!we.includes(r.name)).map((r,s)=>{var d;return t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"3px 0"},children:[t.jsx("span",{children:(d=rn[r.name])==null?void 0:d.icon}),t.jsxs("span",{style:{fontSize:11,fontWeight:700,flex:1},children:[r.name," ",t.jsxs("span",{style:{fontSize:9,color:"#64748b"},children:[" ",r.reason]})]}),t.jsx("button",{onClick:()=>bo(r.name),style:{fontSize:9,background:"#2563eb",color:"white",border:"none",padding:"3px 8px",borderRadius:4,fontWeight:700,cursor:"pointer"},children:"+ Add"})]},s)})]}),we.map(r=>{const s=rn[r]||rn.Other,d=ud[r]||{},c=ep(r);return t.jsxs("div",{style:{background:"white",borderRadius:10,border:`2px solid ${s.color}25`,marginBottom:10,overflow:"hidden"},children:[t.jsxs("div",{style:{padding:"8px 12px",background:s.color+"08",display:"flex",alignItems:"center",gap:8,borderBottom:`1px solid ${s.color}15`},children:[t.jsx("span",{style:{fontSize:16},children:s.icon}),t.jsx("span",{style:{fontSize:13,fontWeight:800,color:s.color},children:r}),t.jsx("div",{style:{flex:1}}),t.jsx("button",{onClick:()=>bo(r),style:{fontSize:9,color:"#dc2626",background:"none",border:"none",cursor:"pointer",fontWeight:700},children:" Remove"})]}),c.length>0&&t.jsxs("div",{style:{padding:"6px 12px",background:"#f8fafc",borderBottom:"1px solid #f1f5f9"},children:[t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#64748b",marginBottom:4},children:" RELEVANT BIOMARKERS"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:c.map(u=>t.jsxs("div",{style:{padding:"3px 8px",borderRadius:4,fontSize:10,fontWeight:600,background:u.found?u.flag==="H"?"#fef2f2":u.flag==="L"?"#eff6ff":"#f0fdf4":"#f1f5f9",color:u.found?u.flag==="H"?"#dc2626":u.flag==="L"?"#2563eb":"#059669":"#94a3b8",border:`1px solid ${u.found?u.flag==="H"?"#fecaca":u.flag==="L"?"#bfdbfe":"#bbf7d0":"#e2e8f0"}`},children:[u.name,": ",u.found?t.jsx("b",{children:u.value}):t.jsx("span",{style:{fontStyle:"italic"},children:" need test"})]},u.name))})]}),s.questions.length>0&&t.jsx("div",{style:{padding:12},children:t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:s.questions.map(u=>t.jsxs("div",{style:u.type==="multi"?{gridColumn:"1/-1"}:{},children:[t.jsx("div",{style:{fontSize:10,fontWeight:600,color:"#475569",marginBottom:3},children:u.label}),u.type==="text"&&t.jsx("input",{value:d[u.id]||"",onChange:f=>xd(r,u.id,f.target.value),placeholder:u.placeholder,style:{width:"100%",padding:"6px 8px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:11,boxSizing:"border-box"}}),u.type==="select"&&t.jsxs("select",{value:d[u.id]||"",onChange:f=>xd(r,u.id,f.target.value),style:{width:"100%",padding:"6px 8px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:11,boxSizing:"border-box"},children:[t.jsx("option",{value:"",children:"Select..."}),u.options.map(f=>t.jsx("option",{children:f},f))]}),u.type==="multi"&&t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:u.options.map(f=>t.jsx("button",{onClick:()=>Cx(r,u.id,f),style:{padding:"4px 8px",borderRadius:5,fontSize:10,fontWeight:600,cursor:"pointer",border:`1.5px solid ${(d[u.id]||[]).includes(f)?s.color:"#e2e8f0"}`,background:(d[u.id]||[]).includes(f)?s.color+"12":"white",color:(d[u.id]||[]).includes(f)?s.color:"#64748b"},children:f},f))})]},u.id))})})]},r)})]}),t.jsxs("div",{style:{marginBottom:14},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,marginBottom:6},children:" Allergies"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3,marginBottom:4},children:wx.map(r=>t.jsx("button",{onClick:()=>Xt.includes(r)?ho(Xt.filter(s=>s!==r)):ho([...Xt,r]),style:{padding:"4px 8px",borderRadius:5,fontSize:10,fontWeight:600,cursor:"pointer",border:`1.5px solid ${Xt.includes(r)?"#dc2626":"#e2e8f0"}`,background:Xt.includes(r)?"#fef2f2":"white",color:Xt.includes(r)?"#dc2626":"#64748b"},children:r},r))}),t.jsx("div",{style:{display:"flex",gap:4},children:t.jsx("input",{value:hd,onChange:r=>Ku(r.target.value),placeholder:"Other allergy...",onKeyDown:r=>{r.key==="Enter"&&hd.trim()&&(ho([...Xt,hd.trim()]),Ku(""))},style:{flex:1,padding:"6px 8px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:11,boxSizing:"border-box"}})})]}),t.jsxs("div",{style:{marginBottom:14},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,marginBottom:6},children:" Past Surgical / Hospitalization History"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3,marginBottom:4},children:Lx.map(r=>t.jsx("button",{onClick:()=>wt.some(s=>s.name===r)?jn(wt.filter(s=>s.name!==r)):jn([...wt,{name:r,year:"",hospital:""}]),style:{padding:"4px 8px",borderRadius:5,fontSize:10,fontWeight:600,cursor:"pointer",border:`1.5px solid ${wt.some(s=>s.name===r)?"#475569":"#e2e8f0"}`,background:wt.some(s=>s.name===r)?"#f1f5f9":"white",color:wt.some(s=>s.name===r)?"#1e293b":"#64748b"},children:r},r))}),t.jsx("div",{style:{display:"flex",gap:4,marginBottom:4},children:t.jsx("input",{value:pd,onChange:r=>Xu(r.target.value),placeholder:"Other surgery/hospitalization...",onKeyDown:r=>{r.key==="Enter"&&pd.trim()&&(jn([...wt,{name:pd.trim(),year:"",hospital:""}]),Xu(""))},style:{flex:1,padding:"6px 8px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:11,boxSizing:"border-box"}})}),wt.map((r,s)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,padding:"3px 0",fontSize:11},children:[t.jsx("span",{style:{fontWeight:700,minWidth:120},children:r.name}),t.jsx("input",{value:r.year,onChange:d=>{const c=[...wt];c[s].year=d.target.value,jn(c)},placeholder:"Year",style:{width:50,padding:"3px 6px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:10}}),t.jsx("input",{value:r.hospital||"",onChange:d=>{const c=[...wt];c[s].hospital=d.target.value,jn(c)},placeholder:"Hospital",style:{flex:1,padding:"3px 6px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:10}}),t.jsx("button",{onClick:()=>jn(wt.filter((d,c)=>c!==s)),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",fontWeight:700,fontSize:10},children:""})]},s))]}),t.jsxs("div",{style:{marginBottom:14},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,marginBottom:6},children:" Family History"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginBottom:6},children:[{k:"dm",l:"Diabetes"},{k:"htn",l:"Hypertension"},{k:"cardiac",l:"Heart Disease"},{k:"thyroid",l:"Thyroid"},{k:"cancer",l:"Cancer"},{k:"ckd",l:"Kidney Disease"},{k:"obesity",l:"Obesity"}].map(r=>t.jsx("button",{onClick:()=>Vs(s=>({...s,[r.k]:!s[r.k]})),style:{padding:"5px 10px",borderRadius:6,fontSize:11,fontWeight:600,cursor:"pointer",border:`1.5px solid ${go[r.k]?"#f59e0b":"#e2e8f0"}`,background:go[r.k]?"#fef3c7":"white",color:go[r.k]?"#92400e":"#64748b"},children:r.l},r.k))}),t.jsx("input",{value:go.notes,onChange:r=>Vs(s=>({...s,notes:r.target.value})),placeholder:"Details (e.g., Father  MI at 55, Mother  DM2)",style:{width:"100%",padding:"6px 8px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:11,boxSizing:"border-box"}})]}),tp().length>0&&t.jsxs("div",{style:{marginBottom:14,padding:10,background:"#fffbeb",border:"1.5px solid #fde68a",borderRadius:8},children:[t.jsx("div",{style:{fontSize:11,fontWeight:800,color:"#92400e",marginBottom:4},children:" Missing Tests  Need for Diagnosis Confirmation"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:tp().map(r=>t.jsxs("button",{onClick:()=>{Kt.includes(r.test)||xo(s=>[...s,r.test])},style:{padding:"4px 8px",borderRadius:5,fontSize:10,fontWeight:600,cursor:"pointer",border:`1.5px solid ${Kt.includes(r.test)?"#059669":"#fde68a"}`,background:Kt.includes(r.test)?"#f0fdf4":"white",color:Kt.includes(r.test)?"#059669":"#92400e"},children:[Kt.includes(r.test)?"":"+"," ",r.test," ",t.jsxs("span",{style:{fontSize:8,color:"#94a3b8"},children:["(",r.forCondition,")"]})]},r.test))}),Kt.length>0&&t.jsxs("div",{style:{marginTop:6,padding:6,background:"#f0fdf4",borderRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{style:{fontSize:10,color:"#059669",fontWeight:700},children:[" ",Kt.length," tests for requisition"]}),t.jsx("button",{style:{padding:"4px 10px",background:"#059669",color:"white",border:"none",borderRadius:4,fontSize:10,fontWeight:700,cursor:"pointer"},children:" Print Requisition"})]})]}),t.jsxs("div",{style:{display:"flex",gap:6},children:[t.jsx("button",{onClick:()=>n("intake"),style:{flex:1,background:"#94a3b8",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer"},children:" Intake"}),t.jsx("button",{onClick:()=>n("exam"),style:{flex:2,background:"#1e293b",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer"},children:"Exam "})]})]}),e==="exam"&&t.jsxs("div",{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg,#f59e0b,#d97706)",borderRadius:10,padding:"10px 14px",marginBottom:10,color:"white",display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:14,fontWeight:800},children:"Physical Examination"}),t.jsx("div",{style:{fontSize:10,opacity:.8},children:"Tap findings  NAD = Normal"})]}),t.jsx("span",{style:{fontSize:10,opacity:.6},children:"Step 3/6"})]}),t.jsxs("div",{style:{display:"flex",gap:4,marginBottom:8,alignItems:"center"},children:[Object.keys(Js).map(r=>t.jsx("button",{onClick:()=>Mx(r),style:{padding:"5px 10px",borderRadius:7,fontSize:11,fontWeight:600,cursor:"pointer",border:`1.5px solid ${lo===r?"#f59e0b":"#e2e8f0"}`,background:lo===r?"#fef3c7":"white",color:lo===r?"#92400e":"#64748b"},children:r},r)),t.jsx("div",{style:{flex:1}}),t.jsx("button",{onClick:kx,style:{padding:"5px 12px",background:"#059669",color:"white",border:"none",borderRadius:6,fontSize:11,fontWeight:700,cursor:"pointer"},children:" All NAD"})]}),(Js[lo]||[]).map(r=>{const s=Tx===r.id,d=Yt[r.id+"_v"]||[],c=Yt[r.id+"_n"],u=d.length>0;return t.jsxs("div",{style:{background:"white",borderRadius:8,marginBottom:3,border:`1.5px solid ${u?"#f59e0b":c?"#bbf7d0":"#e2e8f0"}`,overflow:"hidden"},children:[t.jsxs("div",{onClick:()=>Rx(s?null:r.id),style:{display:"flex",alignItems:"center",gap:6,padding:"7px 10px",cursor:"pointer",background:u?"#fffbeb":"white"},children:[t.jsx("span",{style:{fontSize:14},children:r.ic}),t.jsx("span",{style:{flex:1,fontSize:12,fontWeight:700,color:"#1e293b"},children:r.l}),c&&!u&&t.jsx("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:4,background:"#dcfce7",color:"#059669",fontWeight:700},children:"NAD"}),u&&t.jsxs("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:4,background:"#fef3c7",color:"#92400e",fontWeight:700},children:[d.length," finding",d.length>1?"s":""]}),t.jsx("button",{onClick:f=>{f.stopPropagation(),Dx(r.id)},style:{fontSize:9,background:c?"#059669":"#f1f5f9",color:c?"white":"#64748b",border:"none",padding:"3px 8px",borderRadius:4,fontWeight:700,cursor:"pointer"},children:"NAD"}),t.jsx("span",{style:{fontSize:10,color:"#94a3b8"},children:s?"":""})]}),s&&t.jsx("div",{style:{padding:"6px 10px 10px",borderTop:"1px solid #f1f5f9"},children:t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:r.o.map(f=>t.jsx("button",{onClick:()=>Px(r.id,f),style:{padding:"5px 10px",borderRadius:6,fontSize:11,fontWeight:600,cursor:"pointer",border:`1.5px solid ${d.includes(f)?"#f59e0b":"#e2e8f0"}`,background:d.includes(f)?"#fef3c7":"white",color:d.includes(f)?"#92400e":"#64748b"},children:f},f))})})]},r.id)}),t.jsx("div",{style:{marginTop:8},children:t.jsx("textarea",{value:Ws,onChange:r=>mi(r.target.value),placeholder:"Additional exam notes...",rows:2,style:{width:"100%",padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,resize:"vertical",boxSizing:"border-box"}})}),t.jsxs("div",{style:{display:"flex",gap:6,marginTop:8},children:[t.jsx("button",{onClick:()=>n("hxclinical"),style:{flex:1,background:"#94a3b8",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer"},children:" History"}),t.jsx("button",{onClick:()=>n("assess"),style:{flex:2,background:"#1e293b",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer"},children:"Assess "})]})]}),e==="assess"&&t.jsxs("div",{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg,#7c3aed,#6d28d9)",borderRadius:10,padding:"10px 14px",marginBottom:10,color:"white",display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:14,fontWeight:800},children:"Assessment"}),t.jsx("div",{style:{fontSize:10,opacity:.8},children:"Diagnoses + Labs + Notes"})]}),t.jsx("span",{style:{fontSize:10,opacity:.6},children:"Step 4/6"})]}),t.jsxs("div",{style:{marginBottom:12},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,marginBottom:6},children:" Diagnoses"}),we.length>0&&(()=>{const r=we.filter(s=>{const d=Pr.find(c=>c.l.toLowerCase().includes(s.toLowerCase().slice(0,4)));return d&&!at.includes(d.id)});return r.length>0?t.jsxs("div",{style:{padding:6,background:"#faf5ff",border:"1px solid #c4b5fd",borderRadius:6,marginBottom:6},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#7c3aed",marginBottom:3},children:" From Clinical History  click to confirm"}),t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:[r.map(s=>{const d=Pr.find(c=>c.l.toLowerCase().includes(s.toLowerCase().slice(0,4)));return t.jsxs("button",{onClick:()=>{d&&!at.includes(d.id)&&Gr(c=>[...c,d.id])},style:{padding:"4px 8px",borderRadius:6,fontSize:10,fontWeight:700,cursor:"pointer",border:"1.5px solid #7c3aed",background:"#faf5ff",color:"#7c3aed"},children:["+ ",s]},s)}),t.jsxs("button",{onClick:()=>{const s=we.map(d=>{var c;return(c=Pr.find(u=>u.l.toLowerCase().includes(d.toLowerCase().slice(0,4))))==null?void 0:c.id}).filter(Boolean);Gr(d=>[...new Set([...d,...s])])},style:{padding:"4px 8px",borderRadius:6,fontSize:10,fontWeight:800,cursor:"pointer",border:"1.5px solid #059669",background:"#f0fdf4",color:"#059669"},children:[" Confirm All (",r.length,")"]})]})]}):null})(),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:Pr.map(r=>t.jsx("button",{onClick:()=>bd(at,Gr,r.id),style:{padding:"5px 10px",borderRadius:7,fontSize:11,fontWeight:600,cursor:"pointer",border:`1.5px solid ${at.includes(r.id)?r.cl:"#e2e8f0"}`,background:at.includes(r.id)?r.cl+"12":"white",color:at.includes(r.id)?r.cl:"#64748b"},children:r.l},r.id))}),at.length>0&&t.jsxs("div",{style:{marginTop:6,padding:8,background:"#f8fafc",borderRadius:6,border:"1px solid #e2e8f0"},children:[t.jsxs("div",{style:{fontSize:10,fontWeight:700,color:"#475569",marginBottom:4},children:["Selected: ",at.length]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:at.map(r=>{const s=Pr.find(d=>d.id===r);return s&&t.jsx("span",{style:{padding:"3px 8px",borderRadius:5,fontSize:10,fontWeight:700,background:s.cl,color:"white"},children:s.l},r)})})]})]}),t.jsxs("div",{style:{marginBottom:12},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,marginBottom:6},children:" Order Labs"}),(()=>{const r={dm2:"Type 2 DM",htn:"Hypertension",hypo:"Hypothyroid",hyper:"Hyperthyroid",dyslip:"Dyslipidemia",obesity:"Obesity",pcos:"PCOS",ckd:"CKD",cad:"CAD",vitd:"Vit D Deficiency",b12:"B12 Deficiency"},s=[...new Set(at.flatMap(u=>{const f=r[u];return!f||!rn[f]?[]:rn[f].biomarkers||[]}))],d=[...new Set(we.flatMap(u=>{var f;return((f=rn[u])==null?void 0:f.biomarkers)||[]}))],c=[...new Set([...s,...d])];return c.length>0?t.jsxs("div",{style:{padding:8,background:"#faf5ff",border:"1.5px solid #c4b5fd",borderRadius:8,marginBottom:8},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[t.jsx("span",{style:{fontSize:10,fontWeight:700,color:"#7c3aed"},children:" Suggested for selected diagnoses"}),t.jsxs("button",{onClick:()=>{const u=c.filter(f=>!lt.includes(f));nr(f=>[...f,...u])},style:{fontSize:9,padding:"2px 8px",borderRadius:4,background:"#7c3aed",color:"white",border:"none",fontWeight:700,cursor:"pointer"},children:["+ Add All (",c.filter(u=>!lt.includes(u)).length,")"]})]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:c.map(u=>t.jsxs("button",{onClick:()=>{lt.includes(u)||nr(f=>[...f,u])},style:{padding:"3px 8px",borderRadius:5,fontSize:10,fontWeight:600,cursor:"pointer",border:`1.5px solid ${lt.includes(u)?"#059669":"#c4b5fd"}`,background:lt.includes(u)?"#f0fdf4":"white",color:lt.includes(u)?"#059669":"#7c3aed"},children:[lt.includes(u)?"":"+"," ",u]},u))})]}):null})(),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3,marginBottom:6},children:[{l:" DM Panel",tests:["HbA1c","FBS","PPBS","C-Peptide","Fasting Insulin","RFT","UACR","Lipid Panel"]},{l:" Thyroid",tests:["TSH","Free T3","Free T4","Anti-TPO"]},{l:" Lipid",tests:["Total Cholesterol","LDL","HDL","Triglycerides","VLDL"]},{l:" Renal",tests:["Creatinine","eGFR","BUN","Urine ACR","Electrolytes"]},{l:" Annual",tests:["CBC","LFT","RFT","Lipid Panel","TSH","HbA1c","Vit D","Vit B12","Urine R/M"]}].map(r=>t.jsx("button",{onClick:()=>nr(s=>[...new Set([...s,...r.tests])]),style:{padding:"5px 10px",borderRadius:6,fontSize:10,fontWeight:700,cursor:"pointer",border:"1.5px solid #7c3aed20",background:"#faf5ff",color:"#6d28d9"},children:r.l},r.l))}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:Gx.map(r=>t.jsx("button",{onClick:()=>bd(lt,nr,r),style:{padding:"4px 8px",borderRadius:6,fontSize:10,fontWeight:600,cursor:"pointer",border:`1.5px solid ${lt.includes(r)?"#059669":"#e2e8f0"}`,background:lt.includes(r)?"#f0fdf4":"white",color:lt.includes(r)?"#059669":"#64748b"},children:r},r))}),lt.length>0&&t.jsxs("div",{style:{marginTop:6,padding:8,background:"#f0fdf4",borderRadius:6,border:"1px solid #bbf7d0"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[t.jsxs("div",{style:{fontSize:11,color:"#059669",fontWeight:700},children:[" ",lt.length," tests ordered"]}),t.jsxs("div",{style:{display:"flex",gap:4},children:[t.jsx("button",{onClick:()=>{xo(r=>[...new Set([...r,...lt])])},style:{padding:"4px 10px",background:"#059669",color:"white",border:"none",borderRadius:4,fontSize:10,fontWeight:700,cursor:"pointer"},children:" Save to Dashboard"}),t.jsx("button",{onClick:()=>window.print(),style:{padding:"4px 10px",background:"#1e40af",color:"white",border:"none",borderRadius:4,fontSize:10,fontWeight:700,cursor:"pointer"},children:" Print Requisition"})]})]}),t.jsx("div",{style:{fontSize:10,color:"#059669"},children:lt.join(", ")})]})]}),t.jsxs("div",{style:{marginBottom:12},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,marginBottom:4},children:" MO Notes"}),t.jsx(Pn,{label:" Dictate assessment notes",dgKey:o,whisperKey:a,color:"#7c3aed",compact:!0,onTranscript:r=>fo(s=>s?s+`
`+r:r)}),t.jsx("textarea",{value:co,onChange:r=>fo(r.target.value),placeholder:"Clinical notes, impressions...",rows:3,style:{width:"100%",padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,resize:"vertical",boxSizing:"border-box",marginTop:4}})]}),yo()&&t.jsxs("div",{style:{marginBottom:12,padding:8,background:"#fffbeb",border:"1px solid #fde68a",borderRadius:6},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#92400e",marginBottom:2},children:" EXAM SUMMARY"}),t.jsx("div",{style:{fontSize:11,color:"#78350f",lineHeight:1.6},children:yo()})]}),t.jsx("button",{onClick:()=>{var c,u;const r=[];tt.length&&r.push("Chief Complaints: "+tt.join(", "));const s=yo();if(s&&r.push("Examination: "+s),at.length){const f=at.map(h=>{var m;return((m=Pr.find(j=>j.id===h))==null?void 0:m.l)||h});r.push("Diagnoses: "+f.join(", "))}if(we.length&&r.push("History Conditions: "+we.join(", ")),Xt.length&&r.push("Allergies: "+Xt.join(", ")),wt.length&&r.push("Surgeries: "+wt.map(f=>`${f.name}${f.year?` (${f.year})`:""}`).join(", ")),co&&r.push("Notes: "+co),N.bp_sys&&r.push(`Vitals: BP ${N.bp_sys}/${N.bp_dia}, Pulse ${N.pulse}, SpO2 ${N.spo2}, Wt ${N.weight}kg, BMI ${N.bmi}`),F!=null&&F.panels){const f=F.panels.flatMap(h=>(h.tests||[]).filter(m=>m.flag).map(m=>`${m.test_name}: ${m.result}${m.unit||""} (${m.flag})`));f.length&&r.push("Key Labs: "+f.join(", "))}if((c=de==null?void 0:de.medications)!=null&&c.length){const f=(u=P==null?void 0:P.medications)==null?void 0:u.filter(h=>h.is_active!==!1).map(h=>`${h.name} ${h.dose||""} ${h.frequency||""} [${h.prescriber||""}]`).join(", ");r.push("Current Medications: "+f)}lt.length&&r.push("Labs Ordered: "+lt.join(", "));const d=r.join(". ");q(d),xp(d)},disabled:ge.mo,style:{width:"100%",background:ge.mo?"#94a3b8":"#7c3aed",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:ge.mo?"wait":"pointer",marginBottom:6},children:ge.mo?" Processing...":" Generate MO Summary"}),C&&t.jsxs("div",{style:{marginBottom:8,padding:8,background:"#f0fdf4",border:"1.5px solid #bbf7d0",borderRadius:8},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#059669",marginBottom:4},children:" MO Summary Generated"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:(C.diagnoses||[]).map((r,s)=>t.jsx("span",{style:{fontSize:10,padding:"2px 6px",borderRadius:4,fontWeight:600,background:r.status==="Uncontrolled"?"#fef2f2":"#f0fdf4",color:r.status==="Uncontrolled"?"#dc2626":"#059669"},children:r.label},s))})]}),t.jsxs("div",{style:{display:"flex",gap:6},children:[t.jsx("button",{onClick:()=>n("exam"),style:{flex:1,background:"#94a3b8",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer"},children:" Exam"}),t.jsx("button",{onClick:rb,disabled:Fs,style:{flex:1,background:Fs?"#94a3b8":"#7c3aed",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:Fs?"wait":"pointer"},children:Fs?" Analyzing...":" Shadow AI"}),t.jsx("button",{onClick:()=>n("consultant"),style:{flex:2,background:"#1e293b",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer"},children:"Consultant "})]}),Hs&&he&&t.jsxs("div",{style:{marginTop:10,background:"linear-gradient(135deg,#faf5ff,#f0f9ff)",borderRadius:10,border:"2px solid #c4b5fd",overflow:"hidden"},children:[t.jsxs("div",{style:{padding:"8px 12px",background:"#7c3aed10",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid #e9d5ff"},children:[t.jsx("span",{children:""}),t.jsx("span",{style:{fontSize:12,fontWeight:800,color:"#7c3aed"},children:"AI Shadow Analysis"}),t.jsx("span",{style:{fontSize:8,background:"#e9d5ff",color:"#6d28d9",padding:"2px 6px",borderRadius:4,fontWeight:700},children:"Independent"}),xi&&t.jsx("span",{style:{fontSize:8,background:"#fef3c7",color:"#92400e",padding:"2px 6px",borderRadius:4,fontWeight:700},children:"Edited"}),t.jsx("div",{style:{flex:1}}),t.jsx("button",{onClick:()=>{ia("merge"),n("consultant")},style:{fontSize:9,padding:"3px 10px",background:"#7c3aed",color:"white",border:"none",borderRadius:4,fontWeight:800,cursor:"pointer"},children:" Edit + Dictate"}),t.jsx("button",{onClick:ob,style:{fontSize:9,padding:"3px 10px",background:"#059669",color:"white",border:"none",borderRadius:4,fontWeight:800,cursor:"pointer"},children:" AI Only  Plan"}),t.jsx("button",{onClick:()=>uo(!1),style:{background:"none",border:"none",cursor:"pointer",fontSize:12,color:"#94a3b8"},children:""})]}),t.jsxs("div",{style:{padding:12,fontSize:11,lineHeight:1.7},children:[t.jsxs("div",{style:{fontWeight:700,color:"#6d28d9",marginBottom:4,display:"flex",alignItems:"center",gap:6},children:["DIAGNOSIS",t.jsx("button",{onClick:()=>yp("diagnoses",{label:"New Diagnosis",status:"New",reason:""}),style:{fontSize:8,padding:"1px 6px",background:"#e9d5ff",color:"#6d28d9",border:"none",borderRadius:3,cursor:"pointer",fontWeight:700},children:"+ Add"})]}),(he.diagnoses||[]).map((r,s)=>t.jsxs("div",{style:{padding:"3px 8px",background:"white",borderRadius:4,marginBottom:2,borderLeft:`3px solid ${r.status==="Controlled"?"#059669":r.status==="Uncontrolled"?"#dc2626":"#7c3aed"}`,fontSize:10,display:"flex",alignItems:"center",gap:4},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("b",{contentEditable:!0,suppressContentEditableWarning:!0,onBlur:d=>bp("diagnoses",s,"label",d.target.innerText),children:r.label}),"  ",t.jsxs("select",{value:r.status,onChange:d=>bp("diagnoses",s,"status",d.target.value),style:{fontSize:9,border:"1px solid #e2e8f0",borderRadius:3,padding:"1px 4px",fontWeight:700,color:r.status==="Controlled"?"#059669":"#dc2626"},children:[t.jsx("option",{value:"Controlled",children:"Controlled"}),t.jsx("option",{value:"Uncontrolled",children:"Uncontrolled"}),t.jsx("option",{value:"New",children:"New"})]}),t.jsxs("span",{style:{color:"#64748b"},children:[" (",r.reason,")"]})]}),t.jsx("button",{onClick:()=>Sp("diagnoses",s),style:{background:"none",border:"none",cursor:"pointer",fontSize:10,color:"#dc2626"},children:""})]},s)),t.jsx("div",{style:{fontWeight:700,color:"#6d28d9",marginTop:8,marginBottom:4},children:"TREATMENT PLAN"}),(he.treatment_plan||[]).map((r,s)=>{const d=r.drug||`tx_${s}`,c=rr[d];return t.jsx("div",{style:{padding:"4px 8px",borderRadius:4,marginBottom:3,fontSize:10,background:c==="disagree"?"#f1f5f9":r.action==="ADD"?"#f0fdf4":r.action==="STOP"?"#fef2f2":r.action==="MODIFY"?"#fffbeb":"white",borderLeft:`3px solid ${c==="disagree"?"#94a3b8":r.action==="ADD"?"#059669":r.action==="STOP"?"#dc2626":r.action==="MODIFY"?"#f59e0b":"#e2e8f0"}`,opacity:c==="disagree"?.5:1},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("span",{style:{fontWeight:700,color:r.action==="ADD"?"#059669":r.action==="STOP"?"#dc2626":r.action==="MODIFY"?"#f59e0b":"#475569"},children:[r.action==="ADD"?" ADD":r.action==="STOP"?" STOP":r.action==="MODIFY"?" MODIFY":" CONTINUE",":"]})," ",r.drug," ",r.detail," ",t.jsxs("span",{style:{color:"#64748b"},children:[" ",r.reason]})]}),t.jsxs("div",{style:{display:"flex",gap:2,flexShrink:0},children:[t.jsx("button",{onClick:()=>{rr[d]==="adopt"?or(f=>({...f,[d]:null})):(or(f=>({...f,[d]:"adopt"})),r.action==="ADD"&&r.drug&&Id({name:(r.drug||"").toUpperCase(),dose:r.dose||"",frequency:r.frequency||"OD",timing:r.timing||"Morning",isNew:!0,route:"Oral",forDiagnosis:r.forDiagnosis||[]}))},style:{fontSize:8,padding:"2px 6px",borderRadius:3,border:`1px solid ${c==="adopt"?"#059669":"#e2e8f0"}`,background:c==="adopt"?"#059669":"white",color:c==="adopt"?"white":"#059669",cursor:"pointer",fontWeight:700},children:c==="adopt"?" Adopted":"Adopt"}),t.jsx("button",{onClick:()=>or(u=>({...u,[d]:u[d]==="disagree"?null:"disagree"})),style:{fontSize:8,padding:"2px 6px",borderRadius:3,border:`1px solid ${c==="disagree"?"#dc2626":"#e2e8f0"}`,background:c==="disagree"?"#dc2626":"white",color:c==="disagree"?"white":"#dc2626",cursor:"pointer",fontWeight:700},children:c==="disagree"?" Rejected":"Disagree"})]})]})},s)}),(he.red_flags||[]).length>0&&t.jsxs("div",{style:{marginTop:8},children:[t.jsx("div",{style:{fontWeight:700,color:"#dc2626",marginBottom:4},children:" RED FLAGS"}),he.red_flags.map((r,s)=>t.jsxs("div",{style:{padding:"3px 8px",background:"#fef2f2",borderRadius:4,marginBottom:2,fontSize:10,color:"#dc2626"},children:[" ",r]},s))]}),(he.investigations||[]).length>0&&t.jsxs("div",{style:{marginTop:8},children:[t.jsxs("div",{style:{fontWeight:700,color:"#6d28d9",marginBottom:4,display:"flex",alignItems:"center",gap:6},children:[" SUGGESTED TESTS",t.jsx("button",{onClick:()=>{const r=prompt("Add test:");r&&yp("investigations",r)},style:{fontSize:8,padding:"1px 6px",background:"#e9d5ff",color:"#6d28d9",border:"none",borderRadius:3,cursor:"pointer",fontWeight:700},children:"+ Add"})]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:he.investigations.map((r,s)=>t.jsxs("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:4,background:"#eff6ff",color:"#2563eb",fontWeight:600,border:"1px solid #bfdbfe",display:"flex",alignItems:"center",gap:3},children:[ln(r),t.jsx("button",{onClick:()=>Sp("investigations",s),style:{background:"none",border:"none",cursor:"pointer",fontSize:8,color:"#dc2626",padding:0},children:""})]},s))})]})]})]})]}),e==="vitals"&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",gap:14,alignItems:"flex-start"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,marginBottom:6},children:" Vitals"}),t.jsx(Pn,{label:"Say vitals: BP 140 over 90, weight 80kg",dgKey:o,whisperKey:a,color:"#ea580c",compact:!0,onTranscript:cp}),ge.vv&&t.jsx("div",{style:{textAlign:"center",padding:3,fontSize:10,color:"#ea580c"},children:" Filling..."}),t.jsx(zr,{msg:Qe.vv,onDismiss:()=>Dt("vv")}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:5,marginTop:6},children:[{k:"bp_sys",l:"BP Sys"},{k:"bp_dia",l:"BP Dia"},{k:"pulse",l:"Pulse"},{k:"temp",l:"Temp F"},{k:"spo2",l:"SpO2 %"},{k:"weight",l:"Wt kg"},{k:"height",l:"Ht cm"},{k:"bmi",l:"BMI",disabled:!0},{k:"waist",l:"Waist cm"},{k:"body_fat",l:"Body Fat %"},{k:"muscle_mass",l:"Muscle kg"}].map(r=>t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:9,fontWeight:600,color:"#64748b"},children:r.l}),t.jsx("input",{type:"number",value:N[r.k],onChange:s=>dp(r.k,s.target.value),disabled:r.disabled,style:{width:"100%",padding:"4px 6px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:14,fontWeight:600,boxSizing:"border-box",background:r.disabled?"#f0fdf4":"white"}})]},r.k))})]}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,color:"#7c3aed",marginBottom:6},children:" Lab Reports"}),t.jsxs("div",{onClick:()=>{var r;return(r=ap.current)==null?void 0:r.click()},style:{border:"2px dashed #c4b5fd",borderRadius:8,padding:14,textAlign:"center",cursor:"pointer",background:"#faf5ff"},children:[t.jsx("input",{ref:ap,type:"file",accept:"image/*,.pdf,.heic,.heif",onChange:Wx,style:{display:"none"}}),E?t.jsxs("div",{style:{color:"#7c3aed",fontWeight:600,fontSize:12},children:[" ",E.fileName]}):t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:22},children:""}),t.jsx("div",{style:{fontWeight:600,color:"#7c3aed",fontSize:12},children:"Upload Report"})]})]}),E&&!F&&t.jsx("button",{onClick:fp,disabled:ge.lab,style:{marginTop:4,width:"100%",background:ge.lab?"#94a3b8":"#7c3aed",color:"white",border:"none",padding:"7px",borderRadius:6,fontSize:12,fontWeight:700,cursor:ge.lab?"wait":"pointer"},children:ge.lab?" Extracting...":" Extract Labs"}),t.jsx(zr,{msg:Qe.lab,onDismiss:()=>Dt("lab")}),B&&t.jsxs("div",{style:{marginTop:3,background:"#fef2f2",border:"1px solid #fecaca",borderRadius:4,padding:"3px 6px",fontSize:10,color:"#dc2626"},children:[" ",B]}),F&&t.jsxs("div",{style:{marginTop:3,color:"#059669",fontWeight:600,fontSize:11},children:[" ",(Hp=F.panels)==null?void 0:Hp.reduce((r,s)=>r+s.tests.length,0)," tests extracted"]})]})]}),F&&(F.panels||[]).map((r,s)=>t.jsxs("div",{style:{marginTop:6,border:"1px solid #e2e8f0",borderRadius:6,overflow:"hidden"},children:[t.jsx("div",{style:{background:"#7c3aed",color:"white",padding:"4px 8px",fontSize:11,fontWeight:700},children:r.panel_name}),t.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:t.jsx("tbody",{children:r.tests.map((d,c)=>t.jsxs("tr",{style:{background:d.flag==="H"?"#fef2f2":d.flag==="L"?"#eff6ff":c%2?"#fafafa":"white"},children:[t.jsx("td",{style:{padding:"2px 8px"},children:d.test_name}),t.jsxs("td",{style:{padding:"2px 8px",textAlign:"right",fontWeight:700,color:d.flag==="H"?"#dc2626":d.flag==="L"?"#2563eb":"#1e293b"},children:[d.result_text||d.result," ",d.unit]}),t.jsx("td",{style:{padding:"2px 8px",textAlign:"center",fontSize:9},children:d.flag==="H"?" HIGH":d.flag==="L"?" LOW":""})]},c))})})]},s)),t.jsxs("div",{style:{marginTop:14,borderTop:"2px solid #e2e8f0",paddingTop:10},children:[t.jsx("div",{style:{fontSize:13,fontWeight:800,color:"#0369a1",marginBottom:8},children:" Imaging & Diagnostic Reports"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginBottom:8},children:["X-Ray","MRI","Ultrasound","DEXA","ECG","Echo","CT","ABI","VPT","Fundus","PFT","NCS"].map(r=>t.jsxs("label",{style:{padding:"5px 10px",background:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:6,fontSize:10,fontWeight:600,color:"#0369a1",cursor:"pointer",display:"inline-block"},children:[" ",r,t.jsx("input",{type:"file",accept:"image/*,.pdf,.heic,.heif",multiple:!0,onChange:s=>Hx(s,r),style:{display:"none"}})]},r))}),Cr.map(r=>t.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:8,padding:10,marginBottom:8,background:r.data?"#f0fdf4":"#fafafa"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:r.data?6:0},children:[t.jsxs("span",{style:{fontSize:11,fontWeight:700,color:"#0369a1"},children:[" ",r.type]}),t.jsx("span",{style:{fontSize:10,color:"#94a3b8"},children:r.fileName}),t.jsx("div",{style:{flex:1}}),!r.data&&!r.extracting&&t.jsx("button",{onClick:()=>Fx(r.id),style:{background:"#0369a1",color:"white",border:"none",padding:"3px 10px",borderRadius:4,fontSize:10,fontWeight:700,cursor:"pointer"},children:" Extract"}),r.extracting&&t.jsx("span",{style:{fontSize:10,color:"#0369a1",fontWeight:600},children:" Analyzing..."}),r.data&&t.jsx("span",{style:{fontSize:10,color:"#059669",fontWeight:700},children:" Extracted"}),t.jsx("button",{onClick:()=>$x(r.id),style:{background:"#fef2f2",color:"#dc2626",border:"none",padding:"2px 6px",borderRadius:4,fontSize:9,cursor:"pointer"},children:""})]}),r.error&&t.jsxs("div",{style:{fontSize:10,color:"#dc2626",marginTop:3},children:[" ",r.error]}),r.data&&t.jsxs("div",{children:[r.data.impression&&t.jsxs("div",{style:{fontSize:11,color:"#1e293b",fontWeight:600,padding:"4px 8px",background:"#f0f9ff",borderRadius:4,marginBottom:4},children:[" ",r.data.impression]}),(r.data.findings||[]).length>0&&t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10,border:"1px solid #e2e8f0",borderRadius:4},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#0369a1",color:"white"},children:[t.jsx("th",{style:{padding:"3px 6px",textAlign:"left"},children:"Parameter"}),t.jsx("th",{style:{padding:"3px 6px",textAlign:"right"},children:"Value"}),t.jsx("th",{style:{padding:"3px 6px",textAlign:"center"},children:"Status"}),t.jsx("th",{style:{padding:"3px 6px",textAlign:"left"},children:"Detail"})]})}),t.jsx("tbody",{children:r.data.findings.map((s,d)=>t.jsxs("tr",{style:{background:s.interpretation==="Abnormal"?"#fef2f2":s.interpretation==="Borderline"?"#fefce8":d%2?"#fafafa":"white"},children:[t.jsx("td",{style:{padding:"2px 6px",fontWeight:600},children:s.parameter}),t.jsxs("td",{style:{padding:"2px 6px",textAlign:"right",fontWeight:700,color:s.interpretation==="Abnormal"?"#dc2626":"#1e293b"},children:[s.value," ",s.unit||""]}),t.jsx("td",{style:{padding:"2px 6px",textAlign:"center"},children:t.jsx("span",{style:{fontSize:8,padding:"1px 4px",borderRadius:3,fontWeight:700,background:s.interpretation==="Abnormal"?"#dc2626":s.interpretation==="Borderline"?"#f59e0b":"#059669",color:"white"},children:s.interpretation})}),t.jsx("td",{style:{padding:"2px 6px",fontSize:9,color:"#64748b"},children:s.detail||""})]},d))})]}),r.data.recommendations&&t.jsxs("div",{style:{fontSize:10,color:"#7c3aed",marginTop:3,fontStyle:"italic"},children:[" ",r.data.recommendations]})]})]},r.id))]}),t.jsx("button",{onClick:()=>n("mo"),style:{marginTop:8,width:"100%",background:"#1e293b",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer"},children:"Next: MO Recording "})]}),e==="mo"&&t.jsxs("div",{children:[Gd,t.jsxs("div",{style:{display:"flex",gap:6,marginBottom:6,alignItems:"center"},children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:"MO:"}),Ne.filter(r=>r.role==="mo").length>0?t.jsxs("select",{value:x,onChange:r=>A(r.target.value),style:{padding:"4px 8px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:12,fontWeight:600,width:200,background:"white"},children:[Ne.filter(r=>r.role==="mo").map(r=>t.jsx("option",{value:r.short_name,children:r.name},r.id)),t.jsx("option",{value:"",children:" Other "})]}):t.jsx("input",{value:x,onChange:r=>A(r.target.value),placeholder:"Dr. Name",style:{padding:"4px 8px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:12,fontWeight:600,width:160}})]}),ee&&t.jsx("div",{style:{marginBottom:10},children:ne?t.jsxs("div",{style:{border:"2px solid #1e40af",borderRadius:10,overflow:"hidden"},children:[t.jsxs("div",{style:{background:"linear-gradient(135deg,#1e40af,#1e3a8a)",color:"white",padding:"8px 12px",display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:14},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{fontWeight:800,fontSize:13},children:[ne.isFollowUp?"FOLLOW-UP":"NEW PATIENT"," BRIEF"]}),t.jsx("div",{style:{fontSize:10,opacity:.8},children:ne.isFollowUp?`${ne.totalVisits} visits  Last: ${ne.daysSince}d ago${(Fp=ne.lastVisit)!=null&&Fp.con_name?`  ${ne.lastVisit.con_name}`:""}`:"First visit"})]}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(ne.briefText)},style:{background:"rgba(255,255,255,.2)",border:"none",color:"white",padding:"4px 10px",borderRadius:5,fontSize:10,fontWeight:700,cursor:"pointer"},children:" Copy"}),t.jsx("button",{onClick:()=>Oe(Ep()),style:{background:"rgba(255,255,255,.15)",border:"none",color:"white",padding:"4px 8px",borderRadius:5,fontSize:10,cursor:"pointer"},children:""}),t.jsx("button",{onClick:()=>Oe(null),style:{background:"rgba(255,255,255,.1)",border:"none",color:"white",padding:"4px 6px",borderRadius:5,fontSize:10,cursor:"pointer"},children:""})]}),t.jsxs("div",{style:{padding:10,fontSize:11,lineHeight:1.7},children:[ne.diagnoses.length>0&&t.jsxs("div",{style:{marginBottom:8},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#1e40af",marginBottom:3},children:"KNOWN CONDITIONS"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:ne.diagnoses.map((r,s)=>t.jsxs("span",{style:{padding:"2px 8px",borderRadius:5,fontSize:10,fontWeight:600,background:r.status==="Uncontrolled"?"#fef2f2":r.status==="Controlled"?"#f0fdf4":"#fefce8",color:r.status==="Uncontrolled"?"#dc2626":r.status==="Controlled"?"#059669":"#92400e",border:`1px solid ${r.status==="Uncontrolled"?"#fecaca":r.status==="Controlled"?"#bbf7d0":"#fde68a"}`},children:[r.label,"  ",r.status]},s))})]}),ne.medications.length>0&&t.jsxs("div",{style:{marginBottom:8},children:[t.jsxs("div",{style:{fontSize:10,fontWeight:700,color:"#1e40af",marginBottom:3},children:["CURRENT MEDICATIONS (",ne.medications.length,")"]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:ne.medications.map((r,s)=>t.jsxs("div",{style:{fontSize:10,padding:"2px 6px",background:s%2?"#f8fafc":"white",borderRadius:3},children:[t.jsx("strong",{children:r.name})," ",r.dose||""," ",t.jsx("span",{style:{color:"#64748b"},children:r.timing||r.frequency||""})]},s))})]}),(ne.improving.length>0||ne.worsening.length>0)&&t.jsxs("div",{style:{marginBottom:8,display:"flex",gap:6},children:[ne.improving.length>0&&t.jsxs("div",{style:{flex:1,background:"#f0fdf4",borderRadius:6,padding:6,border:"1px solid #bbf7d0"},children:[t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#059669"},children:" IMPROVING"}),ne.improving.map((r,s)=>t.jsxs("div",{style:{fontSize:10,color:"#059669"},children:[r.name,": ",t.jsx("span",{style:{textDecoration:"line-through",opacity:.6},children:r.previous}),"  ",t.jsx("strong",{children:r.latest}),r.latestUnit]},s))]}),ne.worsening.length>0&&t.jsxs("div",{style:{flex:1,background:"#fef2f2",borderRadius:6,padding:6,border:"1px solid #fecaca"},children:[t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#dc2626"},children:" WORSENING"}),ne.worsening.map((r,s)=>t.jsxs("div",{style:{fontSize:10,color:"#dc2626"},children:[r.name,": ",t.jsx("span",{style:{textDecoration:"line-through",opacity:.6},children:r.previous}),"  ",t.jsx("strong",{children:r.latest}),r.latestUnit]},s))]})]}),ne.labTrends.filter(r=>r.isKey).length>0&&t.jsxs("div",{style:{marginBottom:8},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#1e40af",marginBottom:3},children:"KEY LAB VALUES"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:ne.labTrends.filter(r=>r.isKey).map((r,s)=>t.jsxs("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:600,background:r.latestFlag==="H"?"#fef2f2":r.latestFlag==="L"?"#eff6ff":"#f8fafc",color:r.latestFlag==="H"?"#dc2626":r.latestFlag==="L"?"#2563eb":"#334155",border:`1px solid ${r.latestFlag==="H"?"#fecaca":r.latestFlag==="L"?"#bfdbfe":"#e2e8f0"}`},children:[r.name,": ",t.jsx("strong",{children:r.latest}),r.latestUnit,r.previous&&t.jsxs("span",{style:{opacity:.5,marginLeft:3},children:["(prev: ",r.previous,")"]}),r.latestFlag==="H"?"":r.latestFlag==="L"?"":""]},s))})]}),(($p=ne.currentVitals)==null?void 0:$p.bp_sys)&&t.jsxs("div",{style:{marginBottom:4},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#1e40af",marginBottom:3},children:"TODAY'S VITALS"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:[{l:"BP",v:`${ne.currentVitals.bp_sys}/${ne.currentVitals.bp_dia}`,p:ne.prevVitals?`${ne.prevVitals.bp_sys}/${ne.prevVitals.bp_dia}`:null},{l:"Wt",v:ne.currentVitals.weight?`${ne.currentVitals.weight}kg`:null,p:(Yp=ne.prevVitals)!=null&&Yp.weight?`${ne.prevVitals.weight}kg`:null},{l:"BMI",v:ne.currentVitals.bmi,p:(Vp=ne.prevVitals)==null?void 0:Vp.bmi},{l:"Pulse",v:ne.currentVitals.pulse,p:null},{l:"SpO2",v:ne.currentVitals.spo2?`${ne.currentVitals.spo2}%`:null,p:null}].filter(r=>r.v).map((r,s)=>t.jsxs("span",{style:{background:"#fff7ed",border:"1px solid #fed7aa",borderRadius:4,padding:"2px 6px",fontSize:10},children:[t.jsxs("strong",{style:{color:"#9a3412"},children:[r.l,":"]})," ",r.v,r.p&&t.jsxs("span",{style:{color:"#94a3b8",marginLeft:3},children:["(prev: ",r.p,")"]})]},s))})]}),ne.newLabs.length>0&&t.jsxs("div",{style:{background:"#fffbeb",border:"1px solid #fde68a",borderRadius:6,padding:6,marginTop:6},children:[t.jsxs("div",{style:{fontSize:10,fontWeight:700,color:"#92400e"},children:[" ",ne.newLabs.length," NEW RESULTS since last visit"]}),t.jsx("div",{style:{fontSize:9,color:"#a16207",marginTop:2},children:[...new Set(ne.newLabs.map(r=>r.test_name))].join(", ")})]})]})]}):t.jsx("button",{onClick:()=>Oe(Ep()),style:{width:"100%",background:"linear-gradient(135deg,#1e40af,#3b82f6)",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:" Generate Consultant Brief"})}),t.jsx(Pn,{label:"MO  Patient History",dgKey:o,whisperKey:a,color:"#1e40af",onTranscript:r=>{q(r),Ie(null),Dt("mo")}}),z&&t.jsx("button",{onClick:xp,disabled:ge.mo,style:{marginTop:6,width:"100%",background:ge.mo?"#6b7280":C?"#059669":"#1e40af",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:ge.mo?"wait":"pointer"},children:ge.mo?" Structuring...":C?" Done  Re-process":" Structure MO Summary"}),t.jsx(zr,{msg:Qe.mo,onDismiss:()=>Dt("mo")}),C&&t.jsxs("div",{style:{marginTop:8},children:[t.jsxs("div",{style:{background:"#1e40af",color:"white",padding:"8px 12px",borderRadius:"8px 8px 0 0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("span",{style:{fontWeight:700,fontSize:13},children:[" MO Summary  ",b.name||"Patient"," ",t.jsxs("span",{style:{fontSize:10,opacity:.7},children:["by ",x]})]}),t.jsx("button",{onClick:()=>n("consultant"),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"3px 10px",borderRadius:4,fontSize:11,fontWeight:700,cursor:"pointer"},children:"Next: Consultant "})]}),t.jsxs("div",{style:{border:"1px solid #bfdbfe",borderTop:"none",borderRadius:"0 0 8px 8px",padding:12},children:[t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginBottom:10},children:xe(C,"diagnoses").map((r,s)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,padding:"4px 10px",borderRadius:6,background:(Ln[r.id]||"#64748b")+"12",border:`1px solid ${Ln[r.id]||"#64748b"}30`},children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:Ln[r.id]||"#64748b"}}),t.jsx("span",{style:{fontSize:12,fontWeight:600,color:Ln[r.id]||"#64748b"},children:r.label}),t.jsx("span",{style:{fontSize:9,fontWeight:700,padding:"1px 5px",borderRadius:8,background:r.status==="Uncontrolled"||r.status==="Suboptimal"?"#fef2f2":r.status==="Active"?"#fef3c7":"#f0fdf4",color:r.status==="Uncontrolled"||r.status==="Suboptimal"?"#dc2626":r.status==="Active"?"#92400e":"#059669"},children:r.status})]},s))}),xe(C,"complications").length>0&&t.jsxs("div",{style:{marginBottom:10},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#dc2626",marginBottom:3},children:" COMPLICATIONS"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:xe(C,"complications").map((r,s)=>t.jsxs("span",{style:{fontSize:11,padding:"2px 8px",borderRadius:6,background:r.severity==="high"?"#fef2f2":"#fef3c7",border:`1px solid ${r.severity==="high"?"#fecaca":"#fde68a"}`,color:r.severity==="high"?"#dc2626":"#92400e"},children:[r.name," (",r.status,") ",r.detail&&` ${r.detail}`]},s))})]}),C.history&&t.jsxs("div",{style:{marginBottom:10,background:"#f8fafc",borderRadius:6,padding:8,border:"1px solid #e2e8f0"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#1e293b",marginBottom:4},children:" HISTORY"}),t.jsxs("div",{style:{fontSize:11,lineHeight:1.8,color:"#475569"},children:[C.history.family&&C.history.family!=="NIL"&&t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Family:"})," ",C.history.family]}),C.history.past_medical_surgical&&C.history.past_medical_surgical!=="NIL"&&t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Past:"})," ",C.history.past_medical_surgical]}),C.history.personal&&C.history.personal!=="NIL"&&t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Personal:"})," ",C.history.personal]}),C.history.covid&&t.jsxs("div",{children:[" ",t.jsx("strong",{children:"COVID:"})," ",C.history.covid]}),C.history.vaccination&&t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Vaccination:"})," ",C.history.vaccination]})]})]}),xe(C,"previous_medications").length>0&&t.jsxs("div",{style:{marginBottom:10},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#1e40af",marginBottom:4},children:" PREVIOUS MEDICATIONS"}),t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11,border:"1px solid #bfdbfe",borderRadius:4,overflow:"hidden"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#1e40af",color:"white"},children:[t.jsx("th",{style:{padding:"3px 8px",textAlign:"left"},children:"Medicine"}),t.jsx("th",{style:{padding:"3px 8px"},children:"Dose"}),t.jsx("th",{style:{padding:"3px 8px"},children:"Freq"}),t.jsx("th",{style:{padding:"3px 8px"},children:"When"})]})}),t.jsx("tbody",{children:xe(C,"previous_medications").map((r,s)=>t.jsxs("tr",{style:{background:s%2?"#eff6ff":"white"},children:[t.jsxs("td",{style:{padding:"3px 8px"},children:[t.jsx("strong",{children:r.name}),r.composition&&t.jsx("div",{style:{fontSize:9,color:"#94a3b8"},children:r.composition})]}),t.jsx("td",{style:{padding:"3px 8px",textAlign:"center"},children:r.dose}),t.jsx("td",{style:{padding:"3px 8px",textAlign:"center"},children:r.frequency}),t.jsx("td",{style:{padding:"3px 8px",textAlign:"center"},children:r.timing})]},s))})]})]}),xe(C,"investigations").length>0&&t.jsxs("div",{style:{marginBottom:10},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#7c3aed",marginBottom:4},children:" INVESTIGATIONS"}),xe(C,"investigations").map((r,s)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 8px",marginBottom:2,borderRadius:4,background:r.critical?"#fef2f2":r.flag==="HIGH"?"#fff7ed":r.flag==="LOW"?"#eff6ff":"#f0fdf4",border:`1px solid ${r.critical?"#fecaca":r.flag==="HIGH"?"#fed7aa":r.flag==="LOW"?"#bfdbfe":"#bbf7d0"}`},children:[t.jsxs("span",{style:{fontSize:12,fontWeight:600},children:[r.test,r.date&&t.jsxs("span",{style:{fontSize:9,color:"#94a3b8",marginLeft:4},children:["(",r.date,")"]})]}),t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsxs("span",{style:{fontSize:13,fontWeight:800,color:r.critical?"#dc2626":r.flag==="HIGH"?"#ea580c":r.flag==="LOW"?"#2563eb":"#059669"},children:[r.value," ",r.unit]}),r.critical&&t.jsx("span",{style:{background:"#dc2626",color:"white",padding:"0 4px",borderRadius:4,fontSize:9,fontWeight:700},children:"CRITICAL"}),r.flag==="HIGH"&&!r.critical&&t.jsx("span",{style:{color:"#ea580c",fontSize:10},children:" HIGH"}),r.flag==="LOW"&&t.jsx("span",{style:{color:"#2563eb",fontSize:10},children:" LOW"}),!r.flag&&t.jsx("span",{style:{color:"#059669",fontSize:10},children:""}),r.ref&&t.jsxs("span",{style:{fontSize:9,color:"#94a3b8"},children:["(",r.ref,")"]})]})]},s))]}),xe(C,"missing_investigations").length>0&&t.jsxs("div",{style:{background:"#eff6ff",border:"1px solid #bfdbfe",borderRadius:6,padding:"6px 10px",fontSize:11,color:"#1e40af"},children:[" ",t.jsx("strong",{children:"Missing investigations:"})," ",xe(C,"missing_investigations").join(", ")]})]})]})]}),e==="consultant"&&t.jsxs("div",{children:[Gd,t.jsxs("div",{style:{display:"flex",gap:6,marginBottom:6,alignItems:"center"},children:[t.jsx("label",{style:{fontSize:10,fontWeight:600,color:"#475569"},children:"Consultant:"}),Ne.filter(r=>r.role==="consultant").length>0?t.jsxs("select",{value:G,onChange:r=>D(r.target.value),style:{padding:"4px 8px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:12,fontWeight:600,width:260,background:"white"},children:[Ne.filter(r=>r.role==="consultant").map(r=>t.jsxs("option",{value:r.short_name,children:[r.name,"  ",r.specialty]},r.id)),t.jsx("option",{value:"",children:" Other "})]}):t.jsx("input",{value:G,onChange:r=>D(r.target.value),placeholder:"Dr. Name",style:{padding:"4px 8px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:12,fontWeight:600,width:160}}),t.jsx("div",{style:{flex:1}}),ee&&((Xp=P==null?void 0:P.consultations)==null?void 0:Xp.length)>0&&t.jsx("button",{onClick:gb,style:{background:"#eff6ff",border:"1px solid #bfdbfe",padding:"4px 10px",borderRadius:6,fontSize:10,fontWeight:700,cursor:"pointer",color:"#2563eb"},children:" Copy Last Rx"}),t.jsx("button",{onClick:()=>Nd(!oa),style:{background:oa?"#1e293b":"#f1f5f9",border:"1px solid #e2e8f0",padding:"4px 10px",borderRadius:6,fontSize:10,fontWeight:700,cursor:"pointer",color:oa?"white":"#475569"},children:" Paste Rx"})]}),ne&&t.jsxs("div",{style:{marginBottom:8,background:"linear-gradient(135deg,#eff6ff,#f0fdf4)",border:"1px solid #bfdbfe",borderRadius:8,padding:"8px 10px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[t.jsxs("span",{style:{fontSize:11,fontWeight:800,color:"#1e40af"},children:[" ",ne.isFollowUp?"FOLLOW-UP":"NEW"," BRIEF"]}),ne.isFollowUp&&t.jsxs("span",{style:{fontSize:9,color:"#64748b",fontWeight:600},children:[ne.totalVisits," visits  ",ne.daysSince,"d ago"]}),t.jsx("div",{style:{flex:1}}),t.jsx("button",{onClick:()=>navigator.clipboard.writeText(ne.briefText),style:{fontSize:9,background:"white",border:"1px solid #bfdbfe",padding:"2px 6px",borderRadius:4,cursor:"pointer",color:"#2563eb",fontWeight:600},children:"Copy"})]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3,marginBottom:4},children:ne.diagnoses.slice(0,6).map((r,s)=>t.jsx("span",{style:{fontSize:9,padding:"1px 5px",borderRadius:4,fontWeight:600,background:r.status==="Uncontrolled"?"#fef2f2":"#f0fdf4",color:r.status==="Uncontrolled"?"#dc2626":"#059669"},children:r.label},s))}),ne.worsening.length>0&&t.jsxs("div",{style:{fontSize:9,color:"#dc2626",fontWeight:600},children:[" Worsening: ",ne.worsening.map(r=>`${r.name} ${r.previous}${r.latest}`).join(", ")]}),ne.improving.length>0&&t.jsxs("div",{style:{fontSize:9,color:"#059669",fontWeight:600},children:[" Improving: ",ne.improving.map(r=>`${r.name} ${r.previous}${r.latest}`).join(", ")]}),t.jsxs("div",{style:{fontSize:9,color:"#64748b",marginTop:2},children:[" ",ne.medications.length," meds",ne.newLabs.length>0?`   ${ne.newLabs.length} new labs`:""]})]}),$t&&(tt.length>0||we.length>0||Object.keys(Yt).length>0)&&t.jsxs("div",{style:{marginBottom:8,background:"linear-gradient(135deg,#f0f9ff,#faf5ff)",border:"2px solid #c7d2fe",borderRadius:10,padding:10},children:[t.jsx("div",{style:{fontSize:11,fontWeight:800,color:"#6d28d9",marginBottom:6},children:" PATIENT BRIEF  Current Visit"}),t.jsxs("div",{style:{fontSize:11,color:"#374151",lineHeight:1.6,padding:"6px 10px",background:"white",borderRadius:6,border:"1px solid #e9d5ff",marginBottom:6},children:[t.jsxs("b",{children:[b.name," | ",b.age,"Y/",(b.sex||"?").charAt(0)," | ",we.join(" + ")||"No dx yet"]}),N.bp_sys&&t.jsxs("span",{children:[" | BP ",N.bp_sys,"/",N.bp_dia]}),N.weight&&t.jsxs("span",{children:[" | Wt ",N.weight,"kg"]}),N.bmi&&t.jsxs("span",{children:[" | BMI ",N.bmi]})]}),tt.length>0&&t.jsxs("div",{style:{marginBottom:4},children:[t.jsx("span",{style:{fontSize:9,fontWeight:700,color:"#dc2626"},children:"CC: "}),t.jsx("span",{style:{fontSize:10},children:tt.join(", ")})]}),we.length>0&&t.jsxs("div",{style:{marginBottom:4},children:[t.jsx("span",{style:{fontSize:9,fontWeight:700,color:"#6d28d9"},children:"DX: "}),we.map((r,s)=>{const d=ep(r).filter(c=>c.found);return t.jsxs("span",{style:{fontSize:10},children:[t.jsx("b",{children:r}),d.length>0&&` (${d.map(c=>`${c.name}:${c.value}`).join(", ")})`,s<we.length-1?", ":""]},s)})]}),Xt.length>0&&Xt[0]!=="None known"&&t.jsxs("div",{style:{marginBottom:4},children:[t.jsx("span",{style:{fontSize:9,fontWeight:700,color:"#dc2626"},children:" ALLERGIES: "}),t.jsx("span",{style:{fontSize:10,color:"#dc2626"},children:Xt.join(", ")})]}),yo()&&t.jsxs("div",{style:{marginBottom:4},children:[t.jsx("span",{style:{fontSize:9,fontWeight:700,color:"#1e40af"},children:"EXAM: "}),t.jsx("span",{style:{fontSize:10},children:yo()})]}),(F==null?void 0:F.panels)&&(()=>{const r=F.panels.flatMap(s=>s.tests).filter(s=>s.flag==="H"||s.flag==="L");return r.length>0?t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3,marginTop:4},children:r.slice(0,10).map((s,d)=>t.jsxs("span",{style:{fontSize:9,padding:"2px 5px",borderRadius:3,fontWeight:600,background:s.flag==="H"?"#fef2f2":"#eff6ff",color:s.flag==="H"?"#dc2626":"#2563eb"},children:[s.test_name,": ",s.result,s.unit?" "+s.unit:""," ",s.flag==="H"?"":""]},d))}):null})()]}),he&&t.jsxs("div",{style:{marginBottom:8,background:"linear-gradient(135deg,#faf5ff,#f0f9ff)",borderRadius:10,border:"2px solid #c4b5fd",overflow:"hidden"},children:[t.jsxs("div",{style:{padding:"6px 12px",background:"#7c3aed10",display:"flex",alignItems:"center",gap:6,borderBottom:"1px solid #e9d5ff"},children:[t.jsx("span",{children:""}),t.jsx("span",{style:{fontSize:11,fontWeight:800,color:"#7c3aed"},children:"AI Shadow Analysis"}),t.jsx("span",{style:{fontSize:8,background:"#e9d5ff",color:"#6d28d9",padding:"2px 6px",borderRadius:4,fontWeight:700},children:"For Review"}),t.jsx("div",{style:{flex:1}}),t.jsx("button",{onClick:()=>uo(!Hs),style:{fontSize:9,background:"none",border:"1px solid #c4b5fd",borderRadius:4,padding:"2px 8px",cursor:"pointer",color:"#7c3aed",fontWeight:600},children:Hs?" Collapse":" Expand"})]}),Hs&&t.jsxs("div",{style:{padding:10,fontSize:10,lineHeight:1.6},children:[t.jsx("div",{style:{fontWeight:700,color:"#6d28d9",marginBottom:3},children:"DIAGNOSES"}),(he.diagnoses||[]).map((r,s)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,padding:"3px 6px",background:"white",borderRadius:4,marginBottom:2,borderLeft:"3px solid #7c3aed"},children:[t.jsxs("span",{style:{flex:1},children:[t.jsx("b",{children:r.label}),"  ",r.status," ",t.jsxs("span",{style:{color:"#94a3b8"},children:["(",r.reason,")"]})]}),t.jsx("button",{onClick:()=>{we.includes(r.label)||bo(r.label)},style:{fontSize:8,padding:"2px 6px",borderRadius:3,border:"1px solid #059669",background:we.includes(r.label)?"#059669":"white",color:we.includes(r.label)?"white":"#059669",cursor:"pointer",fontWeight:700},children:we.includes(r.label)?"":"Adopt"})]},s)),t.jsx("div",{style:{fontWeight:700,color:"#6d28d9",marginTop:6,marginBottom:3},children:"TREATMENT PLAN"}),(he.treatment_plan||[]).map((r,s)=>{const d=r.drug||`tx_${s}`,c=rr[d];return t.jsx("div",{style:{padding:"4px 6px",borderRadius:4,marginBottom:3,fontSize:10,background:c==="disagree"?"#f1f5f9":r.action==="ADD"?"#f0fdf4":r.action==="STOP"?"#fef2f2":r.action==="MODIFY"?"#fffbeb":"white",borderLeft:`3px solid ${c==="disagree"?"#94a3b8":r.action==="ADD"?"#059669":r.action==="STOP"?"#dc2626":r.action==="MODIFY"?"#f59e0b":"#e2e8f0"}`,opacity:c==="disagree"?.5:1},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("b",{children:r.action}),": ",r.drug," ",r.detail," ",t.jsxs("span",{style:{color:"#94a3b8"},children:[" ",r.reason]})]}),t.jsxs("div",{style:{display:"flex",gap:2,flexShrink:0},children:[t.jsx("button",{onClick:()=>{rr[d]==="adopt"?or(f=>({...f,[d]:null})):(or(f=>({...f,[d]:"adopt"})),r.action==="ADD"&&r.drug&&Id({name:(r.drug||"").toUpperCase(),dose:r.dose||"",frequency:r.frequency||"OD",timing:r.timing||"Morning",isNew:!0,route:"Oral",forDiagnosis:r.forDiagnosis||[]}))},style:{fontSize:8,padding:"2px 6px",borderRadius:3,border:`1px solid ${c==="adopt"?"#059669":"#e2e8f0"}`,background:c==="adopt"?"#059669":"white",color:c==="adopt"?"white":"#059669",cursor:"pointer",fontWeight:700},children:c==="adopt"?"":"Adopt"}),t.jsx("button",{onClick:()=>or(u=>({...u,[d]:u[d]==="disagree"?null:"disagree"})),style:{fontSize:8,padding:"2px 6px",borderRadius:3,border:`1px solid ${c==="disagree"?"#dc2626":"#e2e8f0"}`,background:c==="disagree"?"#dc2626":"white",color:c==="disagree"?"white":"#dc2626",cursor:"pointer",fontWeight:700},children:c==="disagree"?"":"Disagree"})]})]})},s)}),(he.red_flags||[]).length>0&&t.jsxs("div",{style:{marginTop:6},children:[t.jsx("div",{style:{fontWeight:700,color:"#dc2626",marginBottom:2},children:" RED FLAGS"}),he.red_flags.map((r,s)=>t.jsxs("div",{style:{fontSize:10,color:"#dc2626",padding:"2px 6px",background:"#fef2f2",borderRadius:3,marginBottom:1},children:[" ",r]},s))]}),(he.investigations||[]).length>0&&t.jsxs("div",{style:{marginTop:6},children:[t.jsx("div",{style:{fontWeight:700,color:"#6d28d9",marginBottom:2},children:" SUGGESTED TESTS"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:he.investigations.map((r,s)=>t.jsx("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:4,background:"#eff6ff",color:"#2563eb",fontWeight:600},children:ln(r)},s))})]})]})]}),he&&t.jsxs("div",{style:{marginBottom:8,borderRadius:8,overflow:"hidden",border:"2px solid #c4b5fd"},children:[t.jsx("div",{style:{display:"flex",gap:0},children:[{id:"merge",icon:"",label:"AI + Your Notes",desc:"Start from AI, dictate changes"},{id:"own",icon:"",label:"Own Notes Only",desc:"Ignore AI, fresh dictation"}].map(r=>t.jsxs("button",{onClick:()=>ia(r.id),style:{flex:1,padding:"8px 6px",border:"none",cursor:"pointer",transition:"all .15s",background:kr===r.id?r.id==="merge"?"linear-gradient(135deg,#7c3aed,#6d28d9)":"linear-gradient(135deg,#7c2d12,#9a3412)":"#f8fafc",color:kr===r.id?"white":"#64748b"},children:[t.jsx("div",{style:{fontSize:13},children:r.icon}),t.jsx("div",{style:{fontSize:10,fontWeight:800},children:r.label}),t.jsx("div",{style:{fontSize:8,opacity:.8},children:r.desc})]},r.id))}),kr==="merge"&&t.jsxs("div",{style:{padding:"8px 10px",background:"#faf5ff",borderTop:"1px solid #e9d5ff",fontSize:10},children:[t.jsx("div",{style:{fontWeight:700,color:"#6d28d9",marginBottom:4},children:" AI Baseline (adopted items):"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3,marginBottom:4},children:(he.diagnoses||[]).map((r,s)=>t.jsxs("span",{style:{padding:"1px 6px",borderRadius:4,fontSize:9,fontWeight:600,background:r.status==="Uncontrolled"?"#fef2f2":"#f0fdf4",color:r.status==="Uncontrolled"?"#dc2626":"#059669"},children:[r.label," (",r.status,")"]},s))}),(he.treatment_plan||[]).map((r,s)=>{const d=r.drug||`tx_${s}`,c=rr[d]==="disagree";return t.jsxs("div",{style:{padding:"2px 6px",marginBottom:1,borderRadius:3,fontSize:9,background:c?"#fef2f2":"white",textDecoration:c?"line-through":"none",color:c?"#94a3b8":"#374151",borderLeft:`3px solid ${c?"#fca5a5":r.action==="ADD"?"#059669":r.action==="STOP"?"#dc2626":"#f59e0b"}`},children:[t.jsx("b",{children:r.action}),": ",r.drug," ",r.dose||""," ",r.frequency||""," ",r.timing||"",c&&t.jsx("span",{style:{color:"#dc2626",fontWeight:700},children:"  Rejected"})]},s)}),t.jsx("div",{style:{marginTop:4,fontSize:9,color:"#7c3aed",fontStyle:"italic"},children:" Now dictate your additions or changes  AI will merge both"})]})]}),t.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",marginBottom:8,padding:6,background:"#eff6ff",borderRadius:6,border:"1px solid #bfdbfe"},children:[t.jsx("span",{style:{fontSize:10,fontWeight:700,color:"#1e40af"},children:" Next Visit:"}),t.jsx("input",{type:"date",value:It,onChange:r=>Ai(r.target.value),style:{padding:"4px 8px",border:"1px solid #bfdbfe",borderRadius:4,fontSize:11,fontWeight:600}}),It&&t.jsx("span",{style:{fontSize:10,color:"#059669",fontWeight:600},children:new Date(It).toLocaleDateString("en-IN",{weekday:"short",day:"2-digit",month:"short",year:"numeric"})})]}),oa&&t.jsxs("div",{style:{marginBottom:8,background:"#faf5ff",border:"1px solid #d8b4fe",borderRadius:8,padding:10},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#6b21a8",marginBottom:4},children:" Paste prescription or notes  AI will structure it"}),t.jsx("textarea",{value:Mo,onChange:r=>Cd(r.target.value),placeholder:`Paste old prescription, handwritten notes, or type freely...

Example:
Tab Glycomet GP2 - morning before food
Tab Telmisartan 40 - morning
Tab Ecosprin 75 - after lunch
Continue insulin Lantus 20U at night
HbA1c target < 7%
Follow up in 3 months with HbA1c, lipids`,rows:6,style:{width:"100%",border:"1px solid #d8b4fe",borderRadius:6,padding:10,fontSize:12,resize:"vertical",boxSizing:"border-box",lineHeight:1.6,fontFamily:"inherit"},autoFocus:!0}),t.jsxs("div",{style:{display:"flex",gap:6,marginTop:6},children:[t.jsx("button",{onClick:mb,disabled:!Mo.trim(),style:{flex:1,background:Mo.trim()?"#7c2d12":"#94a3b8",color:"white",border:"none",padding:"8px",borderRadius:6,fontSize:12,fontWeight:700,cursor:Mo.trim()?"pointer":"not-allowed"},children:" Process with AI"}),t.jsx("button",{onClick:()=>{Nd(!1),Cd("")},style:{background:"#f1f5f9",border:"1px solid #e2e8f0",padding:"8px 14px",borderRadius:6,fontSize:12,cursor:"pointer",color:"#64748b"},children:"Cancel"})]})]}),t.jsx(Pn,{label:he&&kr==="merge"?"Dictate changes to AI plan (or say 'agree with everything')":"Consultant  Treatment Decisions",dgKey:o,whisperKey:a,color:"#7c2d12",onTranscript:r=>{me(r),ve(null),Dt("con")}}),Z&&t.jsx("button",{onClick:Ap,disabled:ge.con,style:{marginTop:6,width:"100%",background:ge.con?"#6b7280":T?"#059669":he&&kr==="merge"?"#7c3aed":"#7c2d12",color:"white",border:"none",padding:"10px",borderRadius:8,fontSize:13,fontWeight:700,cursor:ge.con?"wait":"pointer"},children:ge.con?" Merging AI + Notes...":he&&kr==="merge"?T?" Done  Re-merge":" Merge AI Analysis + Your Notes":T?" Done  Re-process":" Extract Treatment Plan"}),t.jsx(zr,{msg:Qe.con,onDismiss:()=>Dt("con")}),T&&t.jsxs("div",{style:{marginTop:8,display:"flex",gap:8},children:[t.jsxs("div",{style:{flex:1,border:"1px solid #fed7aa",borderRadius:6,overflow:"hidden"},children:[t.jsx("div",{style:{background:"#7c2d12",color:"white",padding:"6px 8px",fontSize:12,fontWeight:700},children:"Assessment"}),t.jsxs("div",{style:{padding:8,fontSize:12,lineHeight:1.5},children:[t.jsx("div",{style:{fontWeight:600,marginBottom:3},children:T.assessment_summary}),xe(T,"key_issues").map((r,s)=>t.jsxs("div",{children:[" ",r]},s)),xe(T,"goals").length>0&&t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10,marginTop:6,border:"1px solid #bbf7d0"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#059669",color:"white"},children:[t.jsx("th",{style:{padding:"3px 5px"},children:"Marker"}),t.jsx("th",{style:{padding:"3px 5px"},children:"Now"}),t.jsx("th",{style:{padding:"3px 5px"},children:"Target"})]})}),t.jsx("tbody",{children:xe(T,"goals").map((r,s)=>t.jsxs("tr",{children:[t.jsx("td",{style:{padding:"2px 5px"},children:r.marker}),t.jsx("td",{style:{padding:"2px 5px",color:"#dc2626",fontWeight:700},children:r.current}),t.jsx("td",{style:{padding:"2px 5px",color:"#059669",fontWeight:700},children:r.target})]},s))})]})]})]}),t.jsxs("div",{style:{flex:1,border:"1px solid #e2e8f0",borderRadius:6,overflow:"hidden"},children:[t.jsxs("div",{style:{background:"#1e293b",color:"white",padding:"6px 8px",fontSize:12,fontWeight:700,display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{children:"Medications"}),t.jsx("button",{onClick:()=>n("plan"),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"1px 6px",borderRadius:3,fontSize:10,cursor:"pointer"},children:"Plan "})]}),t.jsxs("div",{style:{padding:8,fontSize:11,maxHeight:280,overflow:"auto"},children:[xe(T,"medications_confirmed").map((r,s)=>t.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:4,padding:"4px 8px",marginBottom:3},children:[t.jsxs("div",{children:[" ",t.jsx("strong",{children:r.name})]}),t.jsxs("div",{style:{fontSize:10,color:"#475569"},children:[r.dose,"  ",r.frequency,"  ",t.jsx("strong",{children:r.timing})]})]},s)),xe(T,"medications_needs_clarification").map((r,s)=>{var d;return t.jsxs("div",{style:{background:"#fffbeb",border:"1px solid #fde68a",borderRadius:4,padding:6,marginBottom:3,marginTop:s===0?4:0},children:[t.jsxs("div",{style:{fontSize:10,color:"#92400e",marginBottom:3},children:[' "',r.what_consultant_said,'" (',r.drug_class,")"]}),r.default_dose&&t.jsxs("div",{style:{fontSize:9,color:"#64748b",marginBottom:2},children:["Suggested: ",r.default_dose,", ",r.default_timing]}),t.jsxs("div",{style:{display:"flex",gap:3,flexWrap:"wrap"},children:[t.jsx("input",{placeholder:"Brand name",onChange:c=>Rd(s,"resolved_name",c.target.value),style:{flex:2,minWidth:70,padding:"3px 5px",border:"1px solid #fde68a",borderRadius:3,fontSize:10}}),t.jsx("input",{placeholder:r.default_dose||"Dose",onChange:c=>Rd(s,"resolved_dose",c.target.value),style:{flex:1,minWidth:40,padding:"3px 5px",border:"1px solid #fde68a",borderRadius:3,fontSize:10}}),t.jsx("input",{placeholder:r.default_timing||"Timing",onChange:c=>Rd(s,"resolved_timing",c.target.value),style:{flex:1,minWidth:50,padding:"3px 5px",border:"1px solid #fde68a",borderRadius:3,fontSize:10}})]}),((d=r.suggested_options)==null?void 0:d.length)>0&&t.jsxs("div",{style:{fontSize:9,color:"#94a3b8",marginTop:2},children:["Options: ",r.suggested_options.join("  ")]})]},s)})]})]})]}),Pd]}),e==="plan"&&t.jsxs("div",{"data-plan-area":!0,children:[Gd,(T==null?void 0:T._fromShadow)&&xi&&t.jsxs("div",{className:"no-print",style:{marginBottom:8,padding:"8px 12px",background:"linear-gradient(135deg,#faf5ff,#f0f9ff)",border:"2px solid #c4b5fd",borderRadius:8},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("span",{children:""}),t.jsx("span",{style:{fontSize:11,fontWeight:800,color:"#7c3aed"},children:"Plan from AI Shadow Analysis"}),t.jsx("button",{onClick:()=>cd(r=>!r),style:{fontSize:9,padding:"2px 8px",background:"#e9d5ff",color:"#6d28d9",border:"none",borderRadius:4,cursor:"pointer",fontWeight:700},children:Yu?"Hide Diff":"View Original"})]}),Yu&&t.jsxs("div",{style:{marginTop:6,display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,fontSize:9},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:800,color:"#94a3b8",marginBottom:3},children:"ORIGINAL AI"}),(xi.diagnoses||[]).map((r,s)=>t.jsxs("div",{style:{padding:"2px 6px",background:"#f1f5f9",borderRadius:3,marginBottom:1},children:[r.label,": ",r.status]},s)),t.jsx("div",{style:{marginTop:3,fontWeight:700},children:"Meds:"}),(xi.treatment_plan||[]).map((r,s)=>t.jsxs("div",{style:{padding:"2px 6px",background:"#f1f5f9",borderRadius:3,marginBottom:1},children:[r.action,": ",r.drug]},s))]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:800,color:"#7c3aed",marginBottom:3},children:"CURRENT"}),((he==null?void 0:he.diagnoses)||[]).map((r,s)=>{var u;const d=(u=xi.diagnoses)==null?void 0:u[s],c=!d||d.label!==r.label||d.status!==r.status;return t.jsxs("div",{style:{padding:"2px 6px",background:c?"#fef3c7":"#f0fdf4",borderRadius:3,marginBottom:1},children:[r.label,": ",r.status," ",c?"":""]},s)}),t.jsx("div",{style:{marginTop:3,fontWeight:700},children:"Meds:"}),((T==null?void 0:T.medications_confirmed)||[]).map((r,s)=>t.jsxs("div",{style:{padding:"2px 6px",background:"#f0fdf4",borderRadius:3,marginBottom:1},children:[r._shadowAction||"KEEP",": ",r.name]},s))]})]})]}),t.jsxs("div",{style:{display:"flex",gap:4,marginBottom:8,flexWrap:"wrap",alignItems:"center"},children:[t.jsx("button",{onClick:()=>n($t?"intake":"docs"),style:{background:"#f1f5f9",border:"1px solid #e2e8f0",padding:"4px 8px",borderRadius:4,fontSize:10,cursor:"pointer",fontWeight:600},children:"+ Reports"}),t.jsx("button",{onClick:()=>n("mo"),style:{background:"#f1f5f9",border:"1px solid #e2e8f0",padding:"4px 8px",borderRadius:4,fontSize:10,cursor:"pointer",fontWeight:600},children:" MO"}),t.jsx("button",{onClick:()=>n("consultant"),style:{background:"#f1f5f9",border:"1px solid #e2e8f0",padding:"4px 8px",borderRadius:4,fontSize:10,cursor:"pointer",fontWeight:600},children:" Consultant"}),t.jsx("button",{className:"no-print",onClick:ub,style:{background:"#fef3c7",border:"1px solid #fcd34d",padding:"4px 8px",borderRadius:4,fontSize:10,cursor:"pointer",fontWeight:600,color:"#92400e"},children:" Reset"}),Z&&t.jsx("button",{className:"no-print",onClick:Ap,disabled:ge.con,style:{background:ge.con?"#94a3b8":"#7c2d12",color:"white",border:"none",padding:"4px 10px",borderRadius:4,fontSize:10,fontWeight:700,cursor:ge.con?"wait":"pointer"},children:ge.con?" Regenerating...":" Regenerate"}),t.jsx("button",{className:"no-print",onClick:Kx,disabled:hs,style:{background:ri?"#7c3aed":"linear-gradient(135deg,#7c3aed,#2563eb)",color:"white",border:"none",padding:"4px 12px",borderRadius:4,fontSize:10,fontWeight:700,cursor:hs?"wait":"pointer",opacity:hs?.7:1},children:hs?" Reviewing...":" Review Rx"}),t.jsx("div",{style:{flex:1}}),t.jsx("button",{className:"no-print",onClick:xb,style:{background:sa?"#059669":"#f1f5f9",color:sa?"white":"#475569",border:`1px solid ${sa?"#059669":"#e2e8f0"}`,padding:"4px 10px",borderRadius:4,fontSize:10,fontWeight:700,cursor:"pointer"},children:sa?" Copied!":" Copy Rx"}),t.jsx("button",{onClick:Xx,style:{background:"#1e293b",color:"white",border:"none",padding:"4px 12px",borderRadius:4,fontSize:10,fontWeight:700,cursor:"pointer"},children:" Print & Save"})]}),ri&&ri.length>0&&t.jsxs("div",{className:"no-print",style:{marginBottom:10,border:"2px solid #7c3aed",borderRadius:8,overflow:"hidden"},children:[t.jsxs("div",{style:{background:"linear-gradient(135deg,#7c3aed,#4f46e5)",color:"white",padding:"6px 12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontWeight:700,fontSize:12},children:" AI Prescription Review"}),t.jsx("button",{onClick:()=>no(null),style:{background:"rgba(255,255,255,.2)",border:"none",color:"white",borderRadius:4,padding:"1px 6px",fontSize:10,cursor:"pointer",fontWeight:700},children:""})]}),t.jsx("div",{style:{padding:8,maxHeight:300,overflow:"auto",background:"#faf5ff"},children:ri.map((r,s)=>{const d={warning:"",suggestion:"",good:"",missing:""},c={warning:"#fef2f2",suggestion:"#eff6ff",good:"#f0fdf4",missing:"#fef2f2"},u={warning:"#fecaca",suggestion:"#bfdbfe",good:"#bbf7d0",missing:"#fecaca"},f={warning:"#dc2626",suggestion:"#1e40af",good:"#059669",missing:"#dc2626"};return t.jsx("div",{style:{background:c[r.type]||"#f8fafc",border:`1px solid ${u[r.type]||"#e2e8f0"}`,borderRadius:6,padding:"6px 10px",marginBottom:4,fontSize:11},children:t.jsxs("div",{style:{display:"flex",gap:4,alignItems:"flex-start"},children:[t.jsx("span",{style:{fontSize:13},children:d[r.type]||""}),t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{fontWeight:700,color:f[r.type]||"#334155"},children:[r.text,r.priority==="high"&&t.jsx("span",{style:{background:"#dc2626",color:"white",fontSize:8,padding:"0 4px",borderRadius:3,marginLeft:4,fontWeight:800},children:"HIGH"}),t.jsx("span",{style:{fontSize:8,color:"#94a3b8",fontWeight:500,marginLeft:4},children:r.category})]}),r.detail&&t.jsx("div",{style:{color:"#64748b",marginTop:2,lineHeight:1.4},children:r.detail})]})]})},s)})}),Su?t.jsxs("div",{style:{borderTop:"2px solid #059669",padding:8,background:"#f0fdf4",textAlign:"center",fontSize:11,fontWeight:700,color:"#059669"},children:[" Feedback saved  ",Su.agreement_level==="agree"?"AI analysis confirmed":"Corrections recorded for AI improvement"]}):t.jsxs("div",{style:{borderTop:"2px solid #7c3aed",padding:10,background:"#faf5ff"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#4c1d95",marginBottom:6},children:" Doctor's Review"}),t.jsx("div",{style:{display:"flex",gap:6,marginBottom:8},children:[["agree"," Agree","#059669","#f0fdf4"],["partially_agree"," Partial","#d97706","#fffbeb"],["disagree"," Disagree","#dc2626","#fef2f2"]].map(([r,s,d,c])=>t.jsx("button",{onClick:()=>cu(r),style:{flex:1,padding:"6px 4px",fontSize:11,fontWeight:700,border:`2px solid ${Xn===r?d:"#e2e8f0"}`,borderRadius:6,cursor:"pointer",background:Xn===r?c:"white",color:Xn===r?d:"#64748b",transition:"all .15s"},children:s},r))}),Xn&&t.jsxs(t.Fragment,{children:[t.jsx("textarea",{value:fu,onChange:r=>uu(r.target.value),rows:2,placeholder:Xn==="agree"?"Any additional notes? (optional)":"What would you change or what did the AI miss?",style:{width:"100%",border:"1px solid #e2e8f0",borderRadius:6,padding:8,fontSize:11,marginBottom:6,resize:"vertical",boxSizing:"border-box"}}),Xn!=="agree"&&t.jsxs(t.Fragment,{children:[t.jsx("textarea",{value:pu,onChange:r=>hu(r.target.value),rows:2,placeholder:"What should be the correct approach?",style:{width:"100%",border:"1px solid #e2e8f0",borderRadius:6,padding:8,fontSize:11,marginBottom:6,resize:"vertical",boxSizing:"border-box"}}),t.jsx("textarea",{value:gu,onChange:r=>mu(r.target.value),rows:2,placeholder:"Reason for difference (most valuable field)",style:{width:"100%",border:"1px solid #fecaca",borderRadius:6,padding:8,fontSize:11,marginBottom:6,resize:"vertical",boxSizing:"border-box",background:"#fff5f5"}}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginBottom:6},children:tb.map(r=>t.jsx("button",{onClick:()=>xu(s=>s.includes(r)?s.filter(d=>d!==r):[...s,r]),style:{fontSize:9,padding:"3px 8px",borderRadius:10,border:`1px solid ${bs.includes(r)?"#7c3aed":"#e2e8f0"}`,background:bs.includes(r)?"#f5f3ff":"white",color:bs.includes(r)?"#7c3aed":"#64748b",cursor:"pointer",fontWeight:600},children:r},r))}),t.jsxs("div",{style:{display:"flex",gap:4,marginBottom:8},children:[t.jsx("span",{style:{fontSize:10,color:"#64748b",fontWeight:600,alignSelf:"center"},children:"Severity:"}),[["minor","Minor","#94a3b8"],["moderate","Moderate","#d97706"],["major","Major","#dc2626"]].map(([r,s,d])=>t.jsx("button",{onClick:()=>bu(r),style:{fontSize:9,padding:"3px 10px",borderRadius:6,border:`1px solid ${ys===r?d:"#e2e8f0"}`,background:ys===r?d+"15":"white",color:ys===r?d:"#94a3b8",cursor:"pointer",fontWeight:700},children:s},r))]})]}),t.jsx("button",{onClick:nb,disabled:Ss,style:{width:"100%",background:Ss?"#94a3b8":"#7c3aed",color:"white",border:"none",padding:"8px",borderRadius:6,fontSize:11,fontWeight:700,cursor:Ss?"wait":"pointer"},children:Ss?" Saving...":" Save Feedback"})]})]})]}),!C&&!T?t.jsx("div",{style:{textAlign:"center",padding:24,color:"#94a3b8"},children:"Complete MO & Consultant first"}):t.jsxs("div",{"data-plan-content":!0,children:[t.jsxs("div",{style:{background:"linear-gradient(135deg,#1e293b,#334155)",color:"white",padding:"12px 16px",borderRadius:"10px 10px 0 0"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("div",{style:{width:26,height:26,background:"white",borderRadius:5,display:"flex",alignItems:"center",justifyContent:"center",color:"#1e293b",fontWeight:900,fontSize:11},children:"G"}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:13,fontWeight:800},children:"GINI ADVANCED CARE HOSPITAL"}),t.jsx("div",{style:{fontSize:9,opacity:.7},children:"Sector 69, Mohali | 0172-4120100"})]})]}),t.jsxs("div",{style:{textAlign:"right",fontSize:10},children:[t.jsx("div",{style:{fontWeight:700},children:G}),t.jsx("div",{style:{opacity:.8},children:"Consultant"})]})]}),t.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,.12)",marginTop:6,paddingTop:5,fontSize:12},children:[t.jsx("strong",{children:b.name})," | ",b.age,"Y / ",b.sex," ",b.phone&&`| ${b.phone}`," ",b.fileNo&&`| ${b.fileNo}`,t.jsx("span",{style:{float:"right",fontSize:11,fontWeight:700},children:(()=>{var s,d;const r=(d=(s=P==null?void 0:P.consultations)==null?void 0:s[0])==null?void 0:d.visit_date;if(r){const c=String(r);return(c.length>=10?new Date(c.slice(0,10)+"T12:00:00"):new Date(c)).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}return new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})()})]})]}),t.jsxs("div",{style:{border:"1px solid #e2e8f0",borderTop:"none",borderRadius:"0 0 10px 10px",padding:14},children:[!Y.has("summary")&&(T==null?void 0:T.assessment_summary)&&t.jsxs("div",{style:{background:"linear-gradient(135deg,#eff6ff,#f0fdf4)",border:"1px solid #bfdbfe",borderRadius:8,padding:10,marginBottom:12,position:"relative"},children:[t.jsx("button",{className:"no-print",onClick:()=>Nt("summary"),style:{position:"absolute",top:4,right:4,background:"#fee2e2",border:"none",borderRadius:3,padding:"1px 5px",fontSize:9,cursor:"pointer",color:"#dc2626",fontWeight:700},children:""}),t.jsxs("div",{style:{fontSize:10,fontWeight:700,color:"#1e40af",marginBottom:4},children:[" Dear ",b.name?b.name.split(" ")[0]:"Patient",":"]}),t.jsx("textarea",{className:"no-print",value:Eo("summary",T.assessment_summary),onChange:r=>vd("summary",r.target.value),rows:3,style:{width:"100%",border:"1px solid #bfdbfe",borderRadius:6,padding:8,fontSize:12,color:"#334155",lineHeight:1.6,resize:"vertical",boxSizing:"border-box",background:"white",outline:"none",fontFamily:"inherit"},onFocus:r=>r.target.style.borderColor="#3b82f6",onBlur:r=>r.target.style.borderColor="#bfdbfe"}),t.jsx("div",{className:"print-only",style:{display:"none",fontSize:12,color:"#334155",lineHeight:1.6},children:Eo("summary",T.assessment_summary)})]}),Y.has("summary")&&t.jsx("div",{className:"no-print",style:{marginBottom:4,opacity:.4,cursor:"pointer",fontSize:10,color:"#94a3b8"},onClick:()=>Nt("summary"),children:" Summary"}),(()=>{const r=["no gmi","no hypoglycemia","no hypoglycaemia","routine follow-up","follow-up visit","no complaints"],s=((C==null?void 0:C.chief_complaints)||[]).filter(d=>!r.some(c=>String(d).toLowerCase().includes(c)));return s.length>0&&t.jsx(Jt,{id:"complaints",title:" Chief Complaints",color:"#dc2626",hidden:Y.has("complaints"),onToggle:()=>Nt("complaints"),children:t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:[s.map((d,c)=>t.jsxs("span",{style:{fontSize:11,padding:"3px 8px",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:6,color:"#dc2626",fontWeight:600,display:"flex",alignItems:"center",gap:4},children:[" ",t.jsx(an,{value:d,onChange:u=>{const f=[...C.chief_complaints||[]],h=f.indexOf(d);h>=0&&(f[h]=u,Ie(m=>({...m,chief_complaints:f})))},style:{fontSize:11,color:"#dc2626",fontWeight:600}}),t.jsx("button",{className:"no-print",onClick:()=>{const u=[...C.chief_complaints||[]],f=u.indexOf(d);f>=0&&(u.splice(f,1),Ie(h=>({...h,chief_complaints:u})))},style:{background:"none",border:"none",color:"#dc2626",fontSize:10,cursor:"pointer",padding:0,fontWeight:700},children:""})]},c)),t.jsx("button",{className:"no-print",onClick:()=>{const d=prompt("Add complaint");d&&hb(d)},style:{fontSize:11,padding:"3px 8px",background:"white",border:"1px dashed #fecaca",borderRadius:6,color:"#dc2626",fontWeight:600,cursor:"pointer"},children:"+ Add"})]})})})(),aa.length>0&&t.jsx(Jt,{id:"diagnoses",title:" Your Conditions",color:"#1e293b",hidden:Y.has("diagnoses"),onToggle:()=>Nt("diagnoses"),children:t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:3},children:aa.map((r,s)=>{const d=xe(C,"diagnoses").indexOf(r);return t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,padding:"4px 8px",background:(Ln[r.id]||"#64748b")+"08",border:`1px solid ${Ln[r.id]||"#64748b"}22`,borderRadius:5,fontSize:11},children:[t.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:Ln[r.id]||"#64748b"}}),t.jsx("strong",{style:{flex:1},children:Ym[r.id]||r.label}),t.jsx("span",{style:{fontSize:9,fontWeight:600,padding:"0 4px",borderRadius:6,background:r.status==="Uncontrolled"?"#fef2f2":"#f0fdf4",color:r.status==="Uncontrolled"?"#dc2626":"#059669"},children:r.status}),t.jsx(wo,{onClick:()=>ab(d)})]},s)})})}),N.bp_sys&&t.jsx(Jt,{id:"vitals",title:" Vitals",color:"#ea580c",hidden:Y.has("vitals"),onToggle:()=>Nt("vitals"),children:t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:[{l:"BP",v:N.bp_sys?`${N.bp_sys}/${N.bp_dia}`:null,suffix:N.bp2_sys?" (Sitting)":""},{l:"BP Standing",v:N.bp2_sys?`${N.bp2_sys}/${N.bp2_dia}`:null},{l:"Pulse",v:N.pulse},{l:"SpO2",v:N.spo2&&`${N.spo2}%`},{l:"Weight",v:N.weight&&`${N.weight}kg`},{l:"Height",v:N.height&&`${N.height}cm`},{l:"BMI",v:N.bmi},{l:"Waist",v:N.waist&&`${N.waist}cm`},{l:"Body Fat",v:N.body_fat&&`${N.body_fat}%`}].filter(r=>r.v&&r.v!=="/").map((r,s)=>t.jsxs("span",{style:{background:"#fff7ed",border:"1px solid #fed7aa",borderRadius:4,padding:"2px 6px",fontSize:11},children:[t.jsxs("strong",{style:{color:"#9a3412"},children:[r.l,":"]})," ",r.v,r.suffix||""]},s))})}),da.length>0&&t.jsxs(Jt,{id:"goals",title:" Your Health Goals",color:"#059669",hidden:Y.has("goals"),onToggle:()=>Nt("goals"),children:[t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11,border:"1px solid #bbf7d0"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#059669",color:"white"},children:[t.jsx("th",{style:{padding:"4px 8px",textAlign:"left"},children:"Marker"}),t.jsx("th",{style:{padding:"4px 8px"},children:"Current"}),t.jsx("th",{style:{padding:"4px 8px"},children:"Target"}),t.jsx("th",{style:{padding:"4px 8px"},children:"By"}),t.jsx("th",{className:"no-print",style:{padding:"4px 8px",width:20}})]})}),t.jsx("tbody",{children:da.map((r,s)=>{const d=xe(T,"goals").indexOf(r),c=(u,f)=>{const h=[...(T==null?void 0:T.goals)||[]],m=h.indexOf(r);m>=0&&(h[m]={...h[m],[u]:f},ve(j=>({...j,goals:h})))};return t.jsxs("tr",{style:{background:r.priority==="critical"?"#fef2f2":s%2?"#f0fdf4":"white"},children:[t.jsx("td",{style:{padding:"3px 8px"},children:t.jsx(an,{value:r.marker,onChange:u=>c("marker",u),style:{fontWeight:600}})}),t.jsx("td",{style:{padding:"3px 8px",textAlign:"center"},children:t.jsx(an,{value:r.current||"",onChange:u=>c("current",u),style:{fontWeight:700,color:"#dc2626"}})}),t.jsx("td",{style:{padding:"3px 8px",textAlign:"center"},children:t.jsx(an,{value:r.target||"",onChange:u=>c("target",u),style:{fontWeight:700,color:"#059669"}})}),t.jsx("td",{style:{padding:"3px 8px",textAlign:"center"},children:t.jsx(an,{value:r.timeline||"",onChange:u=>c("timeline",u),style:{color:"#64748b"}})}),t.jsx("td",{className:"no-print",style:{padding:"3px 4px"},children:t.jsx(wo,{onClick:()=>db(d)})})]},s)})})]}),t.jsx("button",{className:"no-print",onClick:()=>{const r=prompt("Goal marker (e.g., HbA1c, Weight, BP)");if(!r)return;const s=prompt("Current value")||"",d=prompt("Target value")||"",c=prompt("Timeline (e.g., 3 months)")||"";pb({marker:r,current:s,target:d,timeline:c})},style:{marginTop:6,background:"#f8fafc",border:"1px dashed #cbd5e1",borderRadius:6,padding:"6px 12px",fontSize:11,fontWeight:600,cursor:"pointer",color:"#64748b",width:"100%"},children:"+ Add Goal"})]}),Br.length>0&&t.jsxs(Jt,{id:"meds",title:" Your Medications",color:"#dc2626",hidden:Y.has("meds"),onToggle:()=>Nt("meds"),children:[t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11,border:"1px solid #e2e8f0"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#1e293b",color:"white"},children:[t.jsx("th",{style:{padding:"5px 8px",textAlign:"left"},children:"Medicine"}),t.jsx("th",{style:{padding:"5px 8px"},children:"Dose"}),t.jsx("th",{style:{padding:"5px 8px"},children:"When to Take"}),t.jsx("th",{style:{padding:"5px 8px",textAlign:"left"},children:"For"}),t.jsx("th",{className:"no-print",style:{padding:"5px 8px",width:20}})]})}),t.jsx("tbody",{children:Br.map((r,s)=>{const d=Mp.indexOf(r);return t.jsxs("tr",{style:{background:r.isNew||r.resolved?"#eff6ff":s%2?"#fafafa":"white"},children:[t.jsxs("td",{style:{padding:"4px 8px"},children:[t.jsx(an,{value:r.name,onChange:c=>Ld(r,"name",c),style:{fontWeight:700}}),r._matched&&t.jsx("span",{title:`Pharmacy match: ${r._matched} (${r._confidence}%)`,style:{color:"#059669",fontSize:9,marginLeft:3},children:""}),(r.isNew||r.resolved)&&t.jsx("span",{style:{background:"#1e40af",color:"white",padding:"0 3px",borderRadius:3,fontSize:8,marginLeft:3},children:"NEW"}),r.composition&&t.jsx("div",{style:{fontSize:9,color:"#94a3b8"},children:r.composition})]}),t.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:t.jsx(an,{value:r.dose||"",onChange:c=>Ld(r,"dose",c),style:{fontWeight:600}})}),t.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:t.jsx(an,{value:r.timing||r.frequency||"",onChange:c=>Ld(r,"timing",c),style:{fontSize:10,fontWeight:600,color:"#1e40af"}})}),t.jsx("td",{style:{padding:"4px 8px"},children:(r.forDiagnosis||[]).map(c=>t.jsx(Ig,{id:c,friendly:!0},c))}),t.jsx("td",{className:"no-print",style:{padding:"4px 4px"},children:t.jsx(wo,{onClick:()=>sb(d)})})]},s)})})]}),vp==="med"?t.jsxs("div",{className:"no-print",style:{display:"flex",gap:4,marginTop:6,flexWrap:"wrap",alignItems:"center",background:"#eff6ff",padding:8,borderRadius:6,border:"1px solid #bfdbfe"},children:[t.jsx("input",{value:Gn.name,onChange:r=>Ti(s=>({...s,name:r.target.value})),placeholder:"Medicine name",style:{flex:2,minWidth:120,padding:"5px 8px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:11},autoFocus:!0}),t.jsx("input",{value:Gn.dose,onChange:r=>Ti(s=>({...s,dose:r.target.value})),placeholder:"Dose",style:{width:70,padding:"5px 8px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:11}}),t.jsx("select",{value:Gn.frequency,onChange:r=>Ti(s=>({...s,frequency:r.target.value})),style:{padding:"5px 4px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:11},children:["OD","BD","TDS","QID","SOS","Weekly"].map(r=>t.jsx("option",{children:r},r))}),t.jsx("select",{value:Gn.timing,onChange:r=>Ti(s=>({...s,timing:r.target.value})),style:{padding:"5px 4px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:11},children:["Morning","Night","Before meals","After meals","Empty stomach","Bedtime"].map(r=>t.jsx("option",{children:r},r))}),t.jsx("button",{onClick:()=>{Gn.name.trim()&&(Id({name:Gn.name.toUpperCase(),dose:Gn.dose,frequency:Gn.frequency,timing:Gn.timing,isNew:!0,route:"Oral"}),Ti({name:"",dose:"",frequency:"OD",timing:"Morning"}))},style:{background:"#2563eb",color:"white",border:"none",padding:"5px 10px",borderRadius:4,fontSize:11,fontWeight:700,cursor:"pointer"},children:" Add"}),t.jsx("button",{onClick:()=>Ao(null),style:{background:"#f1f5f9",border:"1px solid #e2e8f0",padding:"5px 8px",borderRadius:4,fontSize:11,cursor:"pointer"},children:""})]}):t.jsx("button",{className:"no-print",onClick:()=>Ao("med"),style:{marginTop:6,background:"#f8fafc",border:"1px dashed #cbd5e1",borderRadius:6,padding:"6px 12px",fontSize:11,fontWeight:600,cursor:"pointer",color:"#64748b",width:"100%"},children:"+ Add Medicine"})]}),Tp.length>0&&t.jsxs(Jt,{id:"extmeds",title:` Medications by Other Consultants (${on.length})`,color:"#f59e0b",hidden:Y.has("extmeds"),onToggle:()=>Nt("extmeds"),children:[t.jsxs("div",{style:{background:"#fffbeb",border:"1px solid #fde68a",borderRadius:6,padding:"6px 10px",marginBottom:8,fontSize:10,color:"#92400e"},children:[t.jsx("b",{children:"Note:"})," External consultant medications based on prescriptions provided by patient. Verified during this visit."]}),t.jsxs("div",{className:"no-print",style:{display:"flex",gap:4,marginBottom:8,flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>{const r={};on.forEach(s=>{pt[s.name]||(r[s.name]="continue")}),bi(s=>({...s,...r}))},style:{padding:"5px 12px",background:"#059669",color:"white",border:"none",borderRadius:6,fontSize:11,fontWeight:700,cursor:"pointer"},children:" Confirm All Continue"}),t.jsx("button",{onClick:()=>{const r=on.filter(u=>pt[u.name]!=="stop"&&pt[u.name]!=="hold"),s=on.filter(u=>pt[u.name]==="hold"),d=on.filter(u=>pt[u.name]==="stop");let c="";if(r.length){const u={};r.forEach(f=>{const h=f.prescriber||"External";u[h]||(u[h]=[]),u[h].push(f.name)}),c+="Medications continued: "+Object.entries(u).map(([f,h])=>`${h.join(", ")} (prescribed by ${f})`).join("; ")+". "}if(d.length&&(c+="Medications stopped: "+d.map(u=>{const f=Vt[u.name];return`${u.name}${f?` (${f})`:""}`}).join(", ")+". "),s.length&&(c+="Medications on hold: "+s.map(u=>{const f=Vt[u.name];return`${u.name}${f?` (${f})`:""}`}).join(", ")+". "),c){const u=Eo("summary",(T==null?void 0:T.assessment_summary)||""),f=`

 Medication Reconciliation: `,h=u.includes(" Medication Reconciliation:")?u.split(" Medication Reconciliation:")[0].trim():u;vd("summary",h+f+c)}},style:{padding:"5px 12px",background:"#2563eb",color:"white",border:"none",borderRadius:6,fontSize:11,fontWeight:700,cursor:"pointer"},children:" Done  Add to Summary"})]}),Tp.map((r,s)=>t.jsxs("div",{style:{marginBottom:10,borderRadius:8,overflow:"hidden",border:"1px solid #e2e8f0"},children:[t.jsxs("div",{style:{background:"linear-gradient(135deg,#f1f5f9,#e2e8f0)",padding:"8px 14px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:12,fontWeight:800,color:"#1e293b"},children:[r.doctor,r.specialty&&t.jsxs("span",{style:{fontWeight:600,color:"#475569"},children:[" (",r.specialty,")"]})]}),r.date&&t.jsx("div",{style:{fontSize:10,color:"#64748b",marginTop:1},children:new Date(String(r.date).slice(0,10)+"T12:00:00").toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]}),t.jsxs("div",{style:{textAlign:"right"},children:[r.hospital&&t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#dc2626"},children:r.hospital}),t.jsxs("div",{style:{fontSize:9,color:"#94a3b8"},children:[r.meds.length," medicine",r.meds.length>1?"s":""]})]})]}),r.meds.map((d,c)=>{const u=pt[d.name]||"continue",f=Vt[d.name]||"";return t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"8px 14px",background:u==="stop"?"#fef2f2":u==="hold"?"#fef3c7":"white",borderTop:"1px solid #f1f5f9"},children:[t.jsx("span",{style:{fontSize:16,color:u==="stop"?"#dc2626":u==="hold"?"#f59e0b":"#059669"},children:u==="stop"?"":u==="hold"?"":""}),t.jsx("div",{style:{flex:1},children:t.jsxs("div",{style:{fontSize:12,fontWeight:700,color:u==="stop"?"#94a3b8":"#1e293b",textDecoration:u==="stop"?"line-through":"none"},children:[d.name," ",t.jsx("span",{style:{fontSize:10,fontWeight:400,color:"#94a3b8"},children:d.composition})]})}),t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#475569",minWidth:55,textAlign:"right"},children:d.dose}),t.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#2563eb",minWidth:90,textAlign:"center"},children:d.timing||d.frequency}),t.jsx("div",{className:"no-print",style:{display:"flex",gap:2},children:[{v:"continue",l:"Continue",c:"#059669"},{v:"hold",l:"Hold",c:"#f59e0b"},{v:"stop",l:"Stop",c:"#dc2626"}].map(h=>t.jsx("button",{onClick:()=>{bi(m=>({...m,[d.name]:h.v})),h.v==="continue"&&yi(m=>{const j={...m};return delete j[d.name],j})},style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,cursor:"pointer",border:`1.5px solid ${u===h.v?h.c:"#e2e8f0"}`,background:u===h.v?h.c:"white",color:u===h.v?"white":"#475569"},children:h.l},h.v))})]}),(u==="hold"||u==="stop")&&t.jsxs("div",{className:"no-print",style:{padding:"4px 14px 8px 44px",background:u==="stop"?"#fef2f2":"#fef3c7"},children:[t.jsxs("div",{style:{fontSize:9,fontWeight:700,color:u==="stop"?"#dc2626":"#92400e",marginBottom:3},children:["Reason for ",u==="stop"?"stopping":"holding",":"]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:(vx[u]||[]).map(h=>t.jsx("button",{onClick:()=>yi(m=>({...m,[d.name]:h})),style:{fontSize:9,padding:"3px 8px",borderRadius:12,cursor:"pointer",fontWeight:600,border:`1.5px solid ${f===h?u==="stop"?"#dc2626":"#f59e0b":"#e2e8f0"}`,background:f===h?u==="stop"?"#dc2626":"#f59e0b":"white",color:f===h?"white":"#475569"},children:h},h))}),f&&t.jsxs("div",{style:{fontSize:9,marginTop:3,color:u==="stop"?"#dc2626":"#92400e",fontWeight:600},children:[" ",f]})]})]},c)})]},s)),Object.values(pt).some(r=>r!=="continue")&&t.jsxs("div",{style:{marginTop:6,padding:10,background:"#f8fafc",borderRadius:8,border:"1px solid #e2e8f0"},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#1e293b",marginBottom:4},children:" Reconciliation Summary"}),Object.entries(pt).filter(([r,s])=>s==="stop").map(([r])=>t.jsxs("div",{style:{fontSize:10,color:"#dc2626",fontWeight:600,marginBottom:2,display:"flex",gap:4},children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[r,"  STOPPED",Vt[r]?` (${Vt[r]})`:""]})]},r)),Object.entries(pt).filter(([r,s])=>s==="hold").map(([r])=>t.jsxs("div",{style:{fontSize:10,color:"#f59e0b",fontWeight:600,marginBottom:2,display:"flex",gap:4},children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[r,"  ON HOLD",Vt[r]?` (${Vt[r]})`:""]})]},r))]})]}),(Br.length>0||on.length>0)&&t.jsxs("div",{style:{marginBottom:10},children:[t.jsxs("button",{onClick:()=>fd(!Si),style:{width:"100%",padding:"10px 14px",background:Si?"linear-gradient(135deg,#1e293b,#334155)":"#faf5ff",color:Si?"white":"#7c3aed",border:"1.5px solid #c4b5fd",borderRadius:8,fontSize:13,fontWeight:800,cursor:"pointer"},children:[" ",Si?"Hide":"Show"," Complete Medicine Schedule"]}),Si&&(()=>{var d,c,u;const r=ib(),s=Br.length+on.filter(f=>pt[f.name]!=="stop").length;return t.jsxs("div",{"data-medcard":!0,style:{marginTop:6,borderRadius:10,overflow:"hidden",border:"2px solid #c4b5fd"},children:[t.jsxs("div",{style:{background:"linear-gradient(135deg,#1e293b,#334155)",padding:"12px 16px",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:14,fontWeight:800},children:" YOUR COMPLETE MEDICINE SCHEDULE"}),t.jsxs("div",{style:{fontSize:10,opacity:.7},children:[b.name," | ",b.fileNo||""," | Updated: ",new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})]})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontSize:24,fontWeight:800},children:s}),t.jsx("div",{style:{fontSize:8,opacity:.7},children:"Active Medicines"})]})]}),r.map(f=>t.jsxs("div",{children:[t.jsxs("div",{style:{background:"#f8fafc",padding:"6px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #e2e8f0",borderTop:"1px solid #e2e8f0"},children:[t.jsx("div",{style:{fontSize:12,fontWeight:800,color:"#1e293b"},children:f.label}),f.time&&t.jsx("div",{style:{fontSize:10,color:"#64748b",fontWeight:600},children:f.time})]}),f.meds.map((h,m)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 16px",borderBottom:"1px solid #f1f5f9"},children:[t.jsx("span",{style:{fontSize:14,color:"#cbd5e1"},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{fontSize:12,fontWeight:700},children:[h.name,h.isNew&&t.jsx("span",{style:{background:"#dc2626",color:"white",padding:"0 4px",borderRadius:3,fontSize:8,marginLeft:4,fontWeight:800},children:"NEW"})]}),t.jsxs("div",{style:{fontSize:10,color:"#94a3b8"},children:[h.dose," ",h.frequency," ",h.timing&&h.timing!==h.frequency?` ${h.timing}`:""," ",(h.forDiagnosis||[]).length>0?` ${h.forDiagnosis.join(", ")}`:""]})]}),t.jsx("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:4,fontWeight:700,background:h.isGini?"#2563eb":"#f8fafc",color:h.isGini?"white":"#475569",border:h.isGini?"none":"1px solid #e2e8f0"},children:h.isGini?G||"Gini":h.prescriber&&h.prescriber!=="External"?h.prescriber:"Other"})]},m))]},f.id)),((T==null?void 0:T.self_monitoring)||[]).length>0&&t.jsxs("div",{style:{padding:12,background:"#fef3c7",borderTop:"2px solid #fde68a"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:800,marginBottom:4},children:" IMPORTANT REMINDERS"}),T.self_monitoring.map((f,h)=>t.jsxs("div",{style:{fontSize:10,marginBottom:2},children:[f.alert&&t.jsxs("div",{children:["  ",t.jsxs("b",{children:[f.title,":"]})," ",f.alert]}),f.targets&&t.jsxs("div",{children:["  ",t.jsxs("b",{children:[f.title,":"]})," ",f.targets]}),(f.instructions||[]).map((m,j)=>t.jsxs("div",{children:[" ",m]},j))]},h))]}),on.filter(f=>pt[f.name]==="hold").length>0&&t.jsxs("div",{style:{padding:12,background:"#fef3c7",borderTop:"2px solid #fde68a"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:800,color:"#92400e",marginBottom:4},children:" MEDICATIONS ON HOLD"}),on.filter(f=>pt[f.name]==="hold").map((f,h)=>t.jsxs("div",{style:{fontSize:11,padding:"4px 0",borderBottom:"1px solid #fde68a40"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsxs("span",{style:{fontWeight:700},children:[" ",f.name," ",f.dose]}),t.jsx("span",{style:{fontSize:10,color:"#92400e"},children:f.prescriber&&f.prescriber!=="External"?f.prescriber:""})]}),Vt[f.name]&&t.jsxs("div",{style:{fontSize:9,color:"#b45309",fontStyle:"italic",marginTop:1},children:["Reason: ",Vt[f.name]]})]},h))]}),on.filter(f=>pt[f.name]==="stop").length>0&&t.jsxs("div",{style:{padding:12,background:"#fef2f2",borderTop:"2px solid #fecaca"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:800,color:"#dc2626",marginBottom:4},children:" MEDICATIONS STOPPED"}),on.filter(f=>pt[f.name]==="stop").map((f,h)=>t.jsxs("div",{style:{fontSize:11,padding:"4px 0",borderBottom:"1px solid #fecaca40"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsxs("span",{style:{fontWeight:700,textDecoration:"line-through",opacity:.7},children:[" ",f.name," ",f.dose]}),t.jsx("span",{style:{fontSize:10,color:"#dc2626"},children:f.prescriber&&f.prescriber!=="External"?f.prescriber:""})]}),Vt[f.name]&&t.jsxs("div",{style:{fontSize:9,color:"#dc2626",fontStyle:"italic",marginTop:1},children:["Reason: ",Vt[f.name]]})]},h))]}),(It||(T==null?void 0:T.follow_up))&&t.jsxs("div",{style:{padding:12,background:"#f0f9ff",borderTop:"2px solid #bfdbfe"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:800,marginBottom:2},children:" NEXT VISIT"}),It?t.jsx("div",{style:{fontSize:16,fontWeight:800,color:"#2563eb"},children:new Date(It+"T12:00:00").toLocaleDateString("en-IN",{weekday:"long",day:"2-digit",month:"short",year:"numeric"})}):t.jsx("div",{style:{fontSize:16,fontWeight:800},children:Eo("followup_dur",((d=T==null?void 0:T.follow_up)==null?void 0:d.duration)||"")}),It&&((c=T==null?void 0:T.follow_up)==null?void 0:c.duration)&&t.jsxs("div",{style:{fontSize:10,color:"#64748b"},children:["(",T.follow_up.duration,")"]}),(((u=T==null?void 0:T.follow_up)==null?void 0:u.tests_to_bring)||[]).length>0&&t.jsxs("div",{style:{fontSize:10,color:"#64748b",marginTop:2},children:[" ",T.follow_up.tests_to_bring.map(ln).join(", ")]})]}),t.jsx("div",{style:{padding:"8px 16px",background:"#f8fafc",textAlign:"center",fontSize:9,color:"#94a3b8",borderTop:"1px solid #e2e8f0"},children:"Medicine schedule prepared at Gini Advanced Care Hospital, Mohali. Verify with your doctor before changes. |  0172-4120100"}),t.jsx("div",{className:"no-print",style:{padding:8,textAlign:"center"},children:t.jsx("button",{onClick:()=>{const f=document.querySelector("[data-medcard]");if(!f)return;const h=window.open("","","width=800,height=1000");h.document.write("<html><head><title>Medicine Card - "+b.name+"</title><style>body{font-family:system-ui,sans-serif;margin:0;padding:12px}@media print{body{margin:0}}</style></head><body>"),h.document.write(f.innerHTML),h.document.write("</body></html>"),h.document.close(),setTimeout(()=>{h.print(),h.close()},300)},style:{padding:"8px 20px",background:"#7c3aed",color:"white",border:"none",borderRadius:6,fontSize:12,fontWeight:700,cursor:"pointer"},children:" Print Medicine Card Only"})})]})})()]}),la.length>0&&t.jsxs(Jt,{id:"lifestyle",title:" Lifestyle Changes",color:"#059669",hidden:Y.has("lifestyle"),onToggle:()=>Nt("lifestyle"),children:[la.map((r,s)=>{const d=xe(T,"diet_lifestyle").indexOf(r),c=typeof r=="string";return t.jsxs("div",{style:{display:"flex",gap:5,padding:"3px 0",borderBottom:"1px solid #f1f5f9",fontSize:11,alignItems:"center"},children:[!c&&r.category&&t.jsx("span",{style:{fontSize:8,fontWeight:700,padding:"1px 4px",borderRadius:4,color:"white",background:r.category==="Critical"?"#dc2626":r.category==="Diet"?"#059669":"#2563eb",alignSelf:"flex-start",marginTop:2},children:r.category}),c?t.jsxs("div",{style:{flex:1},children:[" ",t.jsx(an,{value:r,onChange:u=>wd(r,"advice",u),style:{fontSize:11}})]}):t.jsxs("div",{style:{flex:1},children:[t.jsx(an,{value:r.advice,onChange:u=>wd(r,"advice",u),style:{fontWeight:700,fontSize:11}}),r.detail?t.jsxs("span",{children:["  ",t.jsx(an,{value:r.detail,onChange:u=>wd(r,"detail",u),style:{fontSize:11}})]}):""," ",(r.helps||[]).map(u=>t.jsx(Ig,{id:u,friendly:!0},u))]}),t.jsx(wo,{onClick:()=>lb(d)})]},s)}),vp==="lifestyle"?t.jsxs("div",{className:"no-print",style:{display:"flex",gap:4,marginTop:6,alignItems:"center",background:"#f0fdf4",padding:8,borderRadius:6,border:"1px solid #bbf7d0"},children:[t.jsx("input",{value:Mi,onChange:r=>ra(r.target.value),placeholder:"e.g., Walk 30 minutes daily",style:{flex:1,padding:"5px 8px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:11},autoFocus:!0,onKeyDown:r=>{r.key==="Enter"&&Mi.trim()&&(Rp({advice:Mi,detail:"",category:"Exercise",helps:[]}),ra(""),Ao(null))}}),t.jsxs("select",{id:"planAddCat",style:{padding:"5px 4px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:10},children:[t.jsx("option",{children:"Exercise"}),t.jsx("option",{children:"Diet"}),t.jsx("option",{children:"Critical"}),t.jsx("option",{children:"Sleep"}),t.jsx("option",{children:"Stress"})]}),t.jsx("button",{onClick:()=>{Mi.trim()&&(Rp({advice:Mi,detail:"",category:document.getElementById("planAddCat").value,helps:[]}),ra(""),Ao(null))},style:{background:"#059669",color:"white",border:"none",padding:"5px 10px",borderRadius:4,fontSize:11,fontWeight:700,cursor:"pointer"},children:""}),t.jsx("button",{onClick:()=>{Ao(null),ra("")},style:{background:"#f1f5f9",border:"1px solid #e2e8f0",padding:"5px 8px",borderRadius:4,fontSize:11,cursor:"pointer"},children:""})]}):t.jsx("button",{className:"no-print",onClick:()=>Ao("lifestyle"),style:{marginTop:6,background:"#f8fafc",border:"1px dashed #cbd5e1",borderRadius:6,padding:"6px 12px",fontSize:11,fontWeight:600,cursor:"pointer",color:"#64748b",width:"100%"},children:"+ Add Lifestyle Advice"})]}),ca.length>0&&t.jsx(Jt,{id:"monitoring",title:" What to Monitor at Home",color:"#2563eb",hidden:Y.has("monitoring"),onToggle:()=>Nt("monitoring"),children:ca.map((r,s)=>{const d=xe(T,"self_monitoring").indexOf(r),c=typeof r=="string";return t.jsxs("div",{style:{marginBottom:6,background:"#eff6ff",borderRadius:6,padding:8,border:"1px solid #bfdbfe"},children:[t.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:c?t.jsxs("div",{style:{fontSize:11,fontWeight:600},children:[" ",r]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#1e40af"},children:r.title}),t.jsx(wo,{onClick:()=>cb(d)})]})}),!c&&t.jsxs(t.Fragment,{children:[(r.instructions||[]).map((u,f)=>t.jsxs("div",{style:{fontSize:10,color:"#334155",paddingLeft:6},children:[" ",u]},f)),r.targets&&t.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#059669",marginTop:3},children:[" Target: ",r.targets]}),r.alert&&t.jsxs("div",{style:{fontSize:10,fontWeight:700,color:"#dc2626",marginTop:2},children:[" ",r.alert]})]})]},s)})}),((T==null?void 0:T.investigations_ordered)||(T==null?void 0:T.investigations_to_order)||[]).length>0&&t.jsxs(Jt,{id:"investigations",title:" Investigations Ordered",color:"#7c3aed",hidden:Y.has("investigations"),onToggle:()=>Nt("investigations"),children:[t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:(T.investigations_ordered||T.investigations_to_order||[]).map((r,s)=>t.jsx("span",{style:{background:"#f5f3ff",border:"1px solid #c4b5fd",borderRadius:4,padding:"2px 8px",fontSize:11,fontWeight:600,color:"#6d28d9"},children:ln(r)},s))}),((Kp=T==null?void 0:T.follow_up)==null?void 0:Kp.instructions)&&t.jsxs("div",{style:{marginTop:8,background:"#fefce8",border:"1px solid #fde68a",borderRadius:6,padding:8,fontSize:11,color:"#92400e",lineHeight:1.6},children:[t.jsx("div",{style:{fontWeight:700,marginBottom:3},children:" Instructions:"}),T.follow_up.instructions.split(/\n|(?=\d\.)/).filter(Boolean).map((r,s)=>t.jsxs("div",{children:[" ",r.trim()]},s))]})]}),(T==null?void 0:T.insulin_education)&&t.jsx(Jt,{id:"insulin",title:" Insulin Guide",color:"#dc2626",hidden:Y.has("insulin"),onToggle:()=>Nt("insulin"),children:t.jsxs("div",{style:{border:"1px solid #fecaca",borderRadius:8,overflow:"hidden"},children:[t.jsxs("div",{style:{background:"#dc2626",color:"white",padding:"6px 10px",fontSize:12,fontWeight:700},children:[T.insulin_education.type," Insulin  ",T.insulin_education.device]}),t.jsxs("div",{style:{padding:10},children:[t.jsxs("div",{style:{marginBottom:8,background:"#f8fafc",borderRadius:6,padding:8,border:"1px solid #e2e8f0"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#1e293b",marginBottom:4},children:" How to Inject"}),t.jsx("div",{style:{fontSize:11,lineHeight:1.8},children:["Wash hands with soap","Choose injection site: "+(T.insulin_education.injection_sites||["Abdomen","Thigh"]).join(" or "),"Clean area with alcohol swab","Pinch skin gently, insert needle at 90","Push plunger slowly, hold 10 seconds","Release skin, remove needle","Rotate injection site each time"].map((r,s)=>t.jsxs("div",{style:{display:"flex",gap:6,alignItems:"flex-start"},children:[t.jsx("span",{style:{background:"#dc2626",color:"white",borderRadius:"50%",width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:800,flexShrink:0},children:s+1}),t.jsx("span",{children:r})]},s))})]}),T.insulin_education.titration&&t.jsxs("div",{style:{marginBottom:8,background:"#fff7ed",borderRadius:6,padding:8,border:"1px solid #fed7aa"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#9a3412",marginBottom:3},children:" Dose Adjustment (Titration)"}),t.jsx("div",{style:{fontSize:12,fontWeight:600},children:T.insulin_education.titration}),t.jsxs("table",{style:{width:"100%",marginTop:6,borderCollapse:"collapse",fontSize:10,border:"1px solid #fed7aa"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#ea580c",color:"white"},children:[t.jsx("th",{style:{padding:"3px 6px"},children:"Fasting Sugar"}),t.jsx("th",{style:{padding:"3px 6px"},children:"Action"})]})}),t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{style:{padding:"2px 6px",border:"1px solid #fed7aa"},children:"Above 130 mg/dL"}),t.jsx("td",{style:{padding:"2px 6px",border:"1px solid #fed7aa",fontWeight:600,color:"#ea580c"},children:" Increase by 2 units"})]}),t.jsxs("tr",{children:[t.jsx("td",{style:{padding:"2px 6px",border:"1px solid #fed7aa"},children:"90-130 mg/dL"}),t.jsx("td",{style:{padding:"2px 6px",border:"1px solid #fed7aa",fontWeight:600,color:"#059669"},children:" No change (at target)"})]}),t.jsxs("tr",{children:[t.jsx("td",{style:{padding:"2px 6px",border:"1px solid #fed7aa"},children:"Below 90 mg/dL"}),t.jsx("td",{style:{padding:"2px 6px",border:"1px solid #fed7aa",fontWeight:600,color:"#dc2626"},children:" Decrease by 2 units"})]}),t.jsxs("tr",{style:{background:"#fef2f2"},children:[t.jsx("td",{style:{padding:"2px 6px",border:"1px solid #fed7aa"},children:"Below 70 mg/dL"}),t.jsx("td",{style:{padding:"2px 6px",border:"1px solid #fed7aa",fontWeight:700,color:"#dc2626"},children:" STOP  call doctor"})]})]})]})]}),t.jsxs("div",{style:{background:"#fef2f2",borderRadius:6,padding:8,border:"2px solid #dc2626",marginBottom:6},children:[t.jsx("div",{style:{fontSize:11,fontWeight:800,color:"#dc2626",marginBottom:3},children:" LOW SUGAR EMERGENCY (Below 70 mg/dL)"}),t.jsxs("div",{style:{fontSize:11,lineHeight:1.8},children:[t.jsxs("div",{children:["1 ",t.jsx("strong",{children:"Eat 3 glucose tablets"})," or 1 tablespoon sugar in water"]}),t.jsxs("div",{children:["2 ",t.jsx("strong",{children:"Wait 15 minutes"}),", recheck sugar"]}),t.jsxs("div",{children:["3 If still below 70  ",t.jsx("strong",{children:"repeat step 1"})]}),t.jsxs("div",{children:["4 Once above 70  ",t.jsx("strong",{children:"eat a snack"})," (biscuits + milk)"]}),t.jsx("div",{style:{marginTop:4,fontWeight:700,color:"#dc2626"},children:" Always carry glucose tablets with you!"})]})]}),t.jsxs("div",{style:{display:"flex",gap:8,fontSize:10,color:"#64748b"},children:[t.jsxs("span",{children:[" ",t.jsx("strong",{children:"Storage:"})," ",T.insulin_education.storage||"Keep in fridge, room temp vial valid 28 days"]}),t.jsxs("span",{children:[" ",t.jsx("strong",{children:"Needles:"})," ",T.insulin_education.needle_disposal||"Use sharps container, never reuse"]})]})]})]})}),((T==null?void 0:T.follow_up)||It)&&t.jsx(Jt,{id:"followup",title:" Follow Up",color:"#1e293b",hidden:Y.has("followup"),onToggle:()=>Nt("followup"),children:t.jsxs("div",{style:{display:"flex",gap:10,alignItems:"flex-start"},children:[t.jsxs("div",{style:{background:"#f8fafc",border:"2px solid #1e293b",borderRadius:6,padding:"6px 14px",textAlign:"center",minWidth:90},children:[t.jsx("div",{style:{fontSize:8,color:"#64748b"},children:"NEXT VISIT"}),It?t.jsx("div",{style:{fontSize:14,fontWeight:800,color:"#059669"},children:new Date(It+"T12:00:00").toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}):t.jsx("div",{style:{fontSize:18,fontWeight:800},children:t.jsx(an,{value:Eo("followup_dur",((Zp=(Jp=T==null?void 0:T.follow_up)==null?void 0:Jp.duration)==null?void 0:Zp.toUpperCase())||((Qp=T==null?void 0:T.follow_up)==null?void 0:Qp.date)||""),onChange:r=>vd("followup_dur",r),style:{fontSize:18,fontWeight:800}})})]}),t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[t.jsx("span",{style:{fontSize:10,fontWeight:700,color:"#1e40af"},children:" Date:"}),t.jsx("input",{type:"date",value:It,onChange:r=>Ai(r.target.value),style:{padding:"4px 8px",border:"1px solid #bfdbfe",borderRadius:4,fontSize:11,fontWeight:600}}),It&&t.jsx("span",{style:{fontSize:11,fontWeight:700,color:"#059669"},children:new Date(It).toLocaleDateString("en-IN",{weekday:"short",day:"2-digit",month:"short",year:"numeric"})})]}),(((qp=T==null?void 0:T.follow_up)==null?void 0:qp.tests_to_bring)||(T==null?void 0:T.investigations_ordered)||(T==null?void 0:T.investigations_to_order)||[]).length>0&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:11,fontWeight:600,marginBottom:2},children:"Please bring these reports:"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:2},children:(((eh=T==null?void 0:T.follow_up)==null?void 0:eh.tests_to_bring)||(T==null?void 0:T.investigations_ordered)||(T==null?void 0:T.investigations_to_order)||[]).map((r,s)=>t.jsx("span",{style:{background:"white",border:"1px solid #e2e8f0",borderRadius:3,padding:"1px 5px",fontSize:10,fontWeight:600},children:ln(r)},s))})]})]})]})}),((th=he==null?void 0:he.investigations)==null?void 0:th.length)>0&&t.jsx(Jt,{id:"aitests",title:" AI Suggested Investigations",color:"#7c3aed",hidden:Y.has("aitests"),onToggle:()=>Nt("aitests"),children:t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:he.investigations.map((r,s)=>t.jsx("span",{style:{fontSize:10,padding:"3px 8px",borderRadius:5,fontWeight:600,background:"#faf5ff",color:"#6d28d9",border:"1px solid #c4b5fd"},children:ln(r)},s))})}),wp.length>0&&t.jsx(Jt,{id:"future",title:" Future Plan",color:"#7c3aed",hidden:Y.has("future"),onToggle:()=>Nt("future"),children:wp.map((r,s)=>{const d=xe(T,"future_plan").indexOf(r);return t.jsxs("div",{style:{fontSize:11,padding:"2px 0",display:"flex",alignItems:"center",gap:4},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("strong",{children:"If"})," ",r.condition,"  ",r.action]}),t.jsx(wo,{onClick:()=>fb(d)})]},s)})}),t.jsxs("div",{style:{borderTop:"2px solid #1e293b",paddingTop:6,display:"flex",justifyContent:"space-between",fontSize:10,color:"#94a3b8"},children:[t.jsxs("div",{children:[G," | MO: ",x," |  0172-4120100"]}),t.jsx("div",{children:"Gini Clinical Scribe v1"})]})]})]}),Pd]}),t.jsx("style",{children:"@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}} @media print{button,.no-print{display:none!important} .print-only{display:block!important}} .editable-hover:hover{border-bottom-color:#3b82f6!important;background:#eff6ff}"}),e==="docs"&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:15,fontWeight:800,color:"#1e293b",marginBottom:10},children:" Patient Documents"}),ee?(nh=P==null?void 0:P.documents)!=null&&nh.length?t.jsx("div",{children:(()=>{const r=(P==null?void 0:P.documents)||[],s={};return r.forEach(d=>{const c=["lab_report","Blood Test","Thyroid Panel","Lipid Profile","HbA1c","CBC","Urine","Kidney Function","Liver Function"].includes(d.doc_type)?" Lab Reports":d.doc_type==="prescription"?" Prescriptions":["X-Ray","MRI","Ultrasound","DEXA","ECG","Echo","CT","ABI","VPT","Fundus","PFT","NCS"].includes(d.doc_type)?" Imaging & Diagnostics":" Other Documents";s[c]||(s[c]=[]),s[c].push(d)}),Object.entries(s).map(([d,c])=>t.jsxs("div",{style:{marginBottom:12},children:[t.jsxs("div",{style:{fontSize:12,fontWeight:800,color:"#1e293b",padding:"6px 0",borderBottom:"2px solid #e2e8f0",marginBottom:6},children:[d," (",c.length,")"]}),c.map(u=>{var h,m,j,w,R;const f=u.extracted_data;return t.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:8,padding:10,marginBottom:6,background:"white"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[t.jsxs("div",{children:[t.jsx("strong",{style:{fontSize:12},children:u.title||u.doc_type}),u.file_name&&t.jsx("span",{style:{fontSize:9,color:"#94a3b8",marginLeft:6},children:u.file_name})]}),t.jsxs("div",{style:{textAlign:"right"},children:[u.doc_date&&t.jsx("div",{style:{fontSize:10,fontWeight:600,color:"#2563eb"},children:new Date(String(u.doc_date).slice(0,10)+"T12:00:00").toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),u.source&&t.jsx("div",{style:{fontSize:8,color:"#94a3b8"},children:u.source})]})]}),f&&d.includes("Lab")&&f.panels&&t.jsx("div",{style:{marginTop:4},children:(f.panels||[]).map((M,$)=>t.jsxs("div",{style:{marginBottom:4},children:[t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#7c3aed",background:"#faf5ff",padding:"2px 6px",borderRadius:3},children:M.panel_name}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginTop:2},children:(M.tests||[]).map((y,_)=>t.jsxs("span",{style:{fontSize:10,padding:"1px 6px",borderRadius:4,background:y.flag==="H"?"#fef2f2":y.flag==="L"?"#eff6ff":"#f1f5f9",color:y.flag==="H"?"#dc2626":y.flag==="L"?"#2563eb":"#475569",fontWeight:y.flag?700:400},children:[y.test_name,": ",y.result_text||y.result," ",y.unit||""]},_))})]},$))}),f&&d.includes("Imaging")&&t.jsxs("div",{style:{marginTop:4},children:[f.impression&&t.jsxs("div",{style:{fontSize:11,color:"#1e293b",fontWeight:600,padding:"3px 8px",background:"#f0f9ff",borderRadius:4,marginBottom:3},children:[" ",f.impression]}),(f.findings||[]).length>0&&t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:f.findings.map((M,$)=>t.jsxs("span",{style:{fontSize:9,padding:"1px 6px",borderRadius:4,background:M.interpretation==="Abnormal"?"#fef2f2":M.interpretation==="Borderline"?"#fefce8":"#f1f5f9",color:M.interpretation==="Abnormal"?"#dc2626":"#475569"},children:[M.parameter,": ",M.value," ",M.unit||""," (",M.interpretation,")"]},$))})]}),u.notes&&!f&&t.jsx("div",{style:{fontSize:10,color:"#64748b",marginTop:3},children:u.notes}),t.jsxs("div",{style:{display:"flex",gap:4,marginTop:4,flexWrap:"wrap"},children:[u.storage_path&&t.jsx("button",{onClick:()=>hp(u.id),style:{background:"#2563eb",color:"white",border:"none",padding:"4px 12px",borderRadius:5,fontSize:10,fontWeight:700,cursor:"pointer"},children:" View File"}),u.doc_type==="prescription"&&f&&t.jsx("button",{onClick:()=>dx(Vl===u.id?null:u.id),style:{background:"#059669",color:"white",border:"none",padding:"4px 12px",borderRadius:5,fontSize:10,fontWeight:700,cursor:"pointer"},children:Vl===u.id?" Hide Plan":" View Plan"})]}),Vl===u.id&&u.doc_type==="prescription"&&f&&t.jsxs("div",{style:{marginTop:6,border:"1px solid #d1fae5",borderRadius:8,padding:10,background:"#f0fdf4",fontSize:11},children:[f.assessment_summary&&t.jsx("div",{style:{fontWeight:600,color:"#1e293b",marginBottom:6,lineHeight:1.5},children:f.assessment_summary}),((h=f.diagnoses)==null?void 0:h.length)>0&&t.jsxs("div",{style:{marginBottom:6},children:[t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#475569",marginBottom:2},children:"DIAGNOSES"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:f.diagnoses.map((M,$)=>t.jsxs("span",{style:{fontSize:10,padding:"1px 6px",borderRadius:4,background:M.status==="Uncontrolled"?"#fef2f2":M.status==="Controlled"?"#f0fdf4":"#f1f5f9",color:M.status==="Uncontrolled"?"#dc2626":M.status==="Controlled"?"#059669":"#475569",border:`1px solid ${M.status==="Uncontrolled"?"#fecaca":M.status==="Controlled"?"#bbf7d0":"#e2e8f0"}`},children:[M.label," (",M.status,")"]},$))})]}),((m=f.medications)==null?void 0:m.length)>0&&t.jsxs("div",{style:{marginBottom:6},children:[t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#475569",marginBottom:2},children:"MEDICATIONS"}),f.medications.map((M,$)=>t.jsxs("div",{style:{display:"flex",gap:6,padding:"2px 0",borderBottom:"1px solid #e2e8f0"},children:[t.jsx("strong",{style:{flex:1},children:M.name}),t.jsxs("span",{style:{color:"#64748b"},children:[M.dose," ",M.frequency," ",M.timing]})]},$))]}),((j=f.goals)==null?void 0:j.length)>0&&t.jsxs("div",{style:{marginBottom:6},children:[t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#475569",marginBottom:2},children:"GOALS"}),f.goals.map((M,$)=>t.jsxs("div",{style:{fontSize:10,padding:"1px 0"},children:[" ",M.marker,": ",M.current,"  ",M.target," (",M.timeline,")"]},$))]}),((w=f.diet_lifestyle)==null?void 0:w.length)>0&&t.jsxs("div",{style:{marginBottom:6},children:[t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#475569",marginBottom:2},children:"DIET & LIFESTYLE"}),f.diet_lifestyle.map((M,$)=>t.jsxs("div",{style:{fontSize:10,padding:"1px 0"},children:[" ",M.advice,M.detail?`  ${M.detail}`:""]},$))]}),f.follow_up&&t.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#2563eb",marginTop:4},children:[" Follow-up: ",f.follow_up.duration," ",(R=f.follow_up.tests_to_bring)!=null&&R.length?`| Bring: ${f.follow_up.tests_to_bring.map(ln).join(", ")}`:""]}),f.doctor&&t.jsxs("div",{style:{fontSize:9,color:"#94a3b8",marginTop:4},children:["Doctor: ",f.doctor," ",f.mo?`| MO: ${f.mo}`:""]})]})]},u.id)})]},d))})()}):t.jsxs("div",{children:[t.jsxs("div",{style:{textAlign:"center",padding:20,color:"#94a3b8",marginBottom:12},children:[t.jsx("div",{style:{fontSize:22,marginBottom:4},children:""}),t.jsx("div",{style:{fontSize:12,fontWeight:600},children:"No uploaded documents yet"}),t.jsx("div",{style:{fontSize:10,marginTop:2},children:"Upload reports from the Visit Workflow or Lab Portal"})]}),((P==null?void 0:P.lab_results)||[]).length>0&&t.jsxs("div",{style:{marginBottom:12},children:[t.jsxs("div",{style:{fontSize:12,fontWeight:800,color:"#1e293b",padding:"6px 0",borderBottom:"2px solid #7c3aed",marginBottom:6},children:[" Lab Results (",P.lab_results.length,")"]}),t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11,border:"1px solid #e2e8f0"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#f8fafc"},children:[t.jsx("th",{style:{padding:"4px 8px",textAlign:"left",fontWeight:700,fontSize:10},children:"Test"}),t.jsx("th",{style:{padding:"4px 8px",textAlign:"right",fontWeight:700,fontSize:10},children:"Result"}),t.jsx("th",{style:{padding:"4px 8px",textAlign:"center",fontWeight:700,fontSize:10},children:"Flag"}),t.jsx("th",{style:{padding:"4px 8px",textAlign:"left",fontWeight:700,fontSize:10},children:"Ref"}),t.jsx("th",{style:{padding:"4px 8px",textAlign:"right",fontWeight:700,fontSize:10},children:"Date"})]})}),t.jsx("tbody",{children:P.lab_results.slice(0,50).map((r,s)=>t.jsxs("tr",{style:{background:r.flag==="H"?"#fef2f2":r.flag==="L"?"#eff6ff":s%2?"#fafafa":"white",borderBottom:"1px solid #f1f5f9"},children:[t.jsx("td",{style:{padding:"3px 8px",fontWeight:600},children:r.test_name}),t.jsxs("td",{style:{padding:"3px 8px",textAlign:"right",fontWeight:700,color:r.flag==="H"?"#dc2626":r.flag==="L"?"#2563eb":"#1e293b"},children:[r.result," ",r.unit||""]}),t.jsx("td",{style:{padding:"3px 8px",textAlign:"center",fontSize:9},children:r.flag==="H"?" HIGH":r.flag==="L"?" LOW":""}),t.jsx("td",{style:{padding:"3px 8px",fontSize:9,color:"#94a3b8"},children:r.ref_range||""}),t.jsx("td",{style:{padding:"3px 8px",textAlign:"right",fontSize:9,color:"#64748b"},children:r.test_date?new Date(String(r.test_date).slice(0,10)+"T12:00:00").toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"2-digit"}):""})]},s))})]})]}),((P==null?void 0:P.medications)||[]).length>0&&t.jsxs("div",{style:{marginBottom:12},children:[t.jsxs("div",{style:{fontSize:12,fontWeight:800,color:"#1e293b",padding:"6px 0",borderBottom:"2px solid #059669",marginBottom:6},children:[" Active Medications (",P.medications.filter(r=>r.is_active!==!1).length,")"]}),P.medications.filter(r=>r.is_active!==!1).map((r,s)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"5px 8px",borderBottom:"1px solid #f1f5f9"},children:[t.jsx("span",{style:{fontSize:11,fontWeight:700,flex:1},children:r.name}),t.jsx("span",{style:{fontSize:10,color:"#475569"},children:r.dose}),t.jsxs("span",{style:{fontSize:10,color:"#2563eb"},children:[r.frequency," ",r.timing||""]}),t.jsx("span",{style:{fontSize:9,color:"#94a3b8"},children:r.is_new?"":""})]},s))]}),((P==null?void 0:P.diagnoses)||[]).length>0&&t.jsxs("div",{style:{marginBottom:12},children:[t.jsxs("div",{style:{fontSize:12,fontWeight:800,color:"#1e293b",padding:"6px 0",borderBottom:"2px solid #f59e0b",marginBottom:6},children:[" Diagnoses (",P.diagnoses.length,")"]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:P.diagnoses.map((r,s)=>t.jsxs("span",{style:{padding:"4px 10px",borderRadius:6,fontSize:11,fontWeight:700,background:r.status==="Controlled"||r.status==="Active-Controlled"?"#f0fdf4":r.status==="Resolved"?"#f8fafc":"#fef2f2",color:r.status==="Controlled"||r.status==="Active-Controlled"?"#059669":r.status==="Resolved"?"#94a3b8":"#dc2626",border:`1px solid ${r.status==="Controlled"||r.status==="Active-Controlled"?"#bbf7d0":r.status==="Resolved"?"#e2e8f0":"#fecaca"}`},children:[r.label," ",t.jsxs("span",{style:{fontSize:9,fontWeight:400},children:["(",r.status,")"]})]},s))})]}),((P==null?void 0:P.consultations)||[]).length>0&&t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:12,fontWeight:800,color:"#1e293b",padding:"6px 0",borderBottom:"2px solid #2563eb",marginBottom:6},children:[" Visit History (",P.consultations.length,")"]}),P.consultations.slice(0,20).map((r,s)=>t.jsxs("div",{style:{display:"flex",gap:8,padding:"4px 8px",fontSize:11,borderBottom:"1px solid #f1f5f9"},children:[t.jsx("span",{style:{fontWeight:700,color:"#2563eb",minWidth:80},children:r.visit_date?new Date(String(r.visit_date).slice(0,10)+"T12:00:00").toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):""}),t.jsx("span",{style:{color:"#64748b"},children:r.visit_type||"OPD"}),t.jsx("span",{style:{flex:1},children:r.con_name||r.mo_name||""}),t.jsx("span",{style:{fontSize:9,color:r.status==="completed"?"#059669":"#f59e0b",fontWeight:600},children:r.status})]},s))]})]}):t.jsxs("div",{style:{textAlign:"center",padding:30,color:"#94a3b8"},children:[t.jsx("div",{style:{fontSize:28,marginBottom:8},children:""}),t.jsx("div",{style:{fontSize:13,fontWeight:600},children:"Load a patient first"})]})]}),e==="labportal"&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[t.jsx("div",{style:{fontSize:15,fontWeight:800,color:"#0369a1"},children:" Report Upload Portal"}),t.jsx("div",{style:{flex:1}}),ue&&t.jsxs("span",{style:{fontSize:10,background:"#f0f9ff",color:"#0369a1",padding:"2px 8px",borderRadius:10,fontWeight:600},children:[" ",ue.name]})]}),ee?t.jsxs("div",{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg,#0369a1,#0284c7)",color:"white",borderRadius:10,padding:"10px 14px",marginBottom:10,display:"flex",alignItems:"center",gap:10},children:[t.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:"rgba(255,255,255,.2)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:16},children:(b.name||"?").charAt(0).toUpperCase()}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:14,fontWeight:800},children:b.name}),t.jsxs("div",{style:{fontSize:10,opacity:.8},children:[b.age,"Y / ",b.sex," ",b.fileNo&&`| ${b.fileNo}`," ",b.phone&&`| ${b.phone}`]})]}),t.jsx("button",{onClick:lp,style:{background:"rgba(255,255,255,.2)",color:"white",border:"none",padding:"4px 10px",borderRadius:6,fontSize:10,fontWeight:700,cursor:"pointer"},children:"Change"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[t.jsx("label",{style:{fontSize:11,fontWeight:700,color:"#475569"},children:" Report Date:"}),t.jsx("input",{type:"date",value:Ms,onChange:r=>Iu(r.target.value),style:{padding:"4px 8px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:12,fontWeight:600}}),t.jsx("button",{onClick:()=>Iu(new Date().toISOString().slice(0,10)),style:{fontSize:9,background:"#eff6ff",border:"1px solid #bfdbfe",padding:"3px 8px",borderRadius:4,cursor:"pointer",color:"#1e40af",fontWeight:600},children:"Today"})]}),t.jsxs("div",{style:{marginBottom:8},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#7c3aed",marginBottom:4},children:" Blood Work & Lab Reports"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:["Blood Test","Thyroid Panel","Lipid Profile","Kidney Function","Liver Function","HbA1c","CBC","Urine","Other Lab"].map(r=>t.jsxs("label",{style:{padding:"6px 12px",background:"#faf5ff",border:"1px solid #d8b4fe",borderRadius:8,fontSize:11,fontWeight:600,color:"#7c3aed",cursor:"pointer"},children:[" ",r,t.jsx("input",{type:"file",accept:"image/*,.pdf,.heic,.heif",multiple:!0,onChange:s=>up(s,r),style:{display:"none"}})]},r))})]}),t.jsxs("div",{style:{marginBottom:10},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#0369a1",marginBottom:4},children:" Imaging & Diagnostic Tests"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:["X-Ray","ECG","ABI","VPT","Ultrasound","DEXA","MRI","CT","Echo","Fundus","PFT","NCS"].map(r=>t.jsxs("label",{style:{padding:"6px 12px",background:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:8,fontSize:11,fontWeight:600,color:"#0369a1",cursor:"pointer"},children:[" ",r,t.jsx("input",{type:"file",accept:"image/*,.pdf,.heic,.heif",multiple:!0,onChange:s=>up(s,r),style:{display:"none"}})]},r))})]}),Nr.length>0&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,borderTop:"1px solid #e2e8f0",paddingTop:8,marginBottom:6},children:[t.jsxs("div",{style:{fontSize:11,fontWeight:700,color:"#475569"},children:["UPLOADED (",Nr.length,")"]}),t.jsx("div",{style:{flex:1}}),Nr.filter(r=>!r.extracted&&!r.extracting&&r.base64).length>1&&t.jsxs("button",{onClick:async()=>{for(const r of Nr.filter(s=>!s.extracted&&!s.extracting&&s.base64))await pp(r.id)},style:{background:"linear-gradient(135deg,#7c3aed,#2563eb)",color:"white",border:"none",padding:"4px 14px",borderRadius:6,fontSize:11,fontWeight:700,cursor:"pointer"},children:[" Extract All (",Nr.filter(r=>!r.extracted&&!r.extracting&&r.base64).length,")"]})]}),Nr.map(r=>t.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:8,padding:10,marginBottom:6,background:r.saved?"#f0fdf4":r.error?"#fef2f2":"white"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsxs("span",{style:{fontSize:12,fontWeight:700,color:r.category==="lab"?"#7c3aed":"#0369a1"},children:[r.category==="lab"?"":""," ",r.type]}),t.jsx("span",{style:{fontSize:10,color:"#94a3b8"},children:r.fileName}),t.jsx("span",{style:{fontSize:9,color:"#64748b"},children:r.date}),t.jsx("div",{style:{flex:1}}),!r.extracted&&!r.extracting&&t.jsx("button",{onClick:()=>pp(r.id),style:{background:r.category==="lab"?"#7c3aed":"#0369a1",color:"white",border:"none",padding:"4px 12px",borderRadius:6,fontSize:11,fontWeight:700,cursor:"pointer"},children:" Extract & Save"}),r.extracting&&t.jsx("span",{style:{fontSize:11,fontWeight:600,color:"#f59e0b"},children:" Processing..."}),r.saved&&t.jsx("span",{style:{fontSize:11,fontWeight:700,color:"#059669"},children:" Saved"}),r.error&&t.jsxs("span",{style:{fontSize:10,color:"#dc2626"},children:[" ",r.error]}),t.jsx("button",{onClick:()=>Yx(r.id),style:{background:"#fef2f2",color:"#dc2626",border:"none",padding:"2px 6px",borderRadius:4,fontSize:9,cursor:"pointer"},children:""})]}),r.data&&r.category==="lab"&&(r.data.panels||[]).map((s,d)=>t.jsxs("div",{style:{marginTop:4},children:[t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#7c3aed"},children:s.panel_name}),t.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10,marginTop:2},children:t.jsx("tbody",{children:(s.tests||[]).map((c,u)=>t.jsxs("tr",{style:{background:c.flag==="H"?"#fef2f2":c.flag==="L"?"#eff6ff":u%2?"#fafafa":"white"},children:[t.jsx("td",{style:{padding:"2px 6px"},children:c.test_name}),t.jsxs("td",{style:{padding:"2px 6px",textAlign:"right",fontWeight:700,color:c.flag==="H"?"#dc2626":c.flag==="L"?"#2563eb":"#1e293b"},children:[c.result_text||c.result," ",c.unit||""]}),t.jsx("td",{style:{padding:"2px 6px",fontSize:9,color:"#94a3b8"},children:c.ref_range||""}),t.jsx("td",{style:{padding:"2px 6px",textAlign:"center",fontSize:9},children:c.flag==="H"?" HIGH":c.flag==="L"?" LOW":""})]},u))})})]},d)),r.data&&r.category==="imaging"&&t.jsx("div",{style:{marginTop:4},children:r.data.impression&&t.jsxs("div",{style:{fontSize:11,fontWeight:600,padding:"3px 8px",background:"#f0f9ff",borderRadius:4},children:[" ",r.data.impression]})})]},r.id))]}),((rh=P==null?void 0:P.documents)==null?void 0:rh.length)>0&&t.jsxs("div",{style:{marginTop:12,borderTop:"2px solid #e2e8f0",paddingTop:8},children:[t.jsxs("div",{style:{fontSize:11,fontWeight:700,color:"#94a3b8",marginBottom:4},children:[" PREVIOUS DOCUMENTS (",((oh=P==null?void 0:P.documents)==null?void 0:oh.length)||0,")"]}),((P==null?void 0:P.documents)||[]).slice(0,10).map(r=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"4px 8px",borderBottom:"1px solid #f1f5f9",fontSize:11},children:[t.jsx("span",{children:r.doc_type==="lab_report"?"":r.doc_type==="prescription"?"":""}),t.jsx("span",{style:{flex:1},children:r.title||r.doc_type}),r.doc_date&&t.jsx("span",{style:{fontSize:9,color:"#64748b"},children:new Date(String(r.doc_date).slice(0,10)+"T12:00:00").toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"2-digit"})}),r.storage_path&&t.jsx("button",{onClick:()=>hp(r.id),style:{fontSize:8,background:"#2563eb",color:"white",border:"none",padding:"2px 6px",borderRadius:3,cursor:"pointer",fontWeight:600},children:" View"}),t.jsx("span",{style:{fontSize:8,color:"#94a3b8"},children:r.source||""})]},r.id))]})]}):t.jsxs("div",{style:{textAlign:"center",padding:20},children:[t.jsx("div",{style:{fontSize:28,marginBottom:8},children:""}),t.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#1e293b",marginBottom:4},children:"Step 1: Find Patient"}),t.jsx("div",{style:{fontSize:11,color:"#64748b",marginBottom:10},children:"Search by name, phone, or file number"}),t.jsx("button",{onClick:sp,style:{background:"#0369a1",color:"white",border:"none",padding:"10px 24px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer"},children:" Find Patient"})]})]}),e==="history"&&t.jsx("div",{children:ee?t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:14,fontWeight:700,marginBottom:8,color:"#1e293b"},children:[" Add Past Record  ",b.name]}),Rs.length>0&&t.jsxs("div",{style:{marginBottom:10,background:"#f8fafc",borderRadius:8,padding:8,border:"1px solid #e2e8f0"},children:[t.jsxs("div",{style:{fontSize:10,fontWeight:700,color:"#64748b",marginBottom:4},children:["VISIT HISTORY (",Rs.length,")"]}),Rs.slice(0,20).map((r,s)=>t.jsxs("div",{style:{display:"flex",gap:8,padding:"3px 0",fontSize:10,borderBottom:s<Math.min(Rs.length,20)-1?"1px solid #f1f5f9":"none"},children:[t.jsx("span",{style:{fontWeight:600,color:"#2563eb",minWidth:70},children:(()=>{const d=String(r.visit_date||"");return(d.length>=10?new Date(d.slice(0,10)+"T12:00:00"):new Date(d)).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})()}),t.jsx("span",{style:{color:"#64748b"},children:r.visit_type||"OPD"}),t.jsx("span",{style:{color:"#374151"},children:r.con_name||r.mo_name||""}),t.jsx("span",{style:{marginLeft:"auto",fontSize:8,color:r.status==="completed"?"#059669":r.status==="historical"?"#64748b":"#f59e0b",fontWeight:600},children:r.status})]},s))]}),t.jsx("div",{style:{display:"flex",gap:0,marginBottom:8,borderRadius:6,overflow:"hidden",border:"1px solid #e2e8f0"},children:[["rx"," Prescription"],["report"," Reports"],["manual"," Manual"],["bulk"," Bulk Import"]].map(([r,s])=>t.jsx("button",{onClick:()=>cx(r),style:{flex:1,padding:"6px",fontSize:10,fontWeight:700,border:"none",cursor:"pointer",background:qn===r?"#2563eb":"white",color:qn===r?"white":"#64748b"},children:s},r))}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:4,marginBottom:8},children:[t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:8,fontWeight:600,color:"#64748b"},children:"Date *"}),t.jsx("input",{type:"date",value:Fe.visit_date,onChange:r=>_e(s=>({...s,visit_date:r.target.value})),style:{width:"100%",padding:"3px 5px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:10,boxSizing:"border-box"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:8,fontWeight:600,color:"#64748b"},children:"Type"}),t.jsxs("select",{value:Fe.visit_type,onChange:r=>_e(s=>({...s,visit_type:r.target.value})),style:{width:"100%",padding:"3px 5px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:10,boxSizing:"border-box"},children:[t.jsx("option",{children:"OPD"}),t.jsx("option",{children:"IPD"}),t.jsx("option",{children:"Follow-up"}),t.jsx("option",{children:"Emergency"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:8,fontWeight:600,color:"#64748b"},children:"Specialty"}),t.jsxs("select",{value:Fe.specialty,onChange:r=>_e(s=>({...s,specialty:r.target.value})),style:{width:"100%",padding:"3px 5px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:10,boxSizing:"border-box"},children:[t.jsx("option",{value:"",children:"Select..."}),t.jsx("option",{children:"Endocrinology"}),t.jsx("option",{children:"Cardiology"}),t.jsx("option",{children:"Nephrology"}),t.jsx("option",{children:"Neurology"}),t.jsx("option",{children:"General Medicine"}),t.jsx("option",{children:"Orthopedics"}),t.jsx("option",{children:"Ophthalmology"}),t.jsx("option",{children:"Pulmonology"}),t.jsx("option",{children:"Gastroenterology"}),t.jsx("option",{children:"Dermatology"}),t.jsx("option",{children:"Psychiatry"}),t.jsx("option",{children:"Gynecology"}),t.jsx("option",{children:"Urology"}),t.jsx("option",{children:"ENT"}),t.jsx("option",{children:"Surgery"}),t.jsx("option",{children:"Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:8,fontWeight:600,color:"#64748b"},children:"Doctor"}),Ne.length>0?t.jsxs("select",{value:Fe.doctor_name,onChange:r=>_e(s=>({...s,doctor_name:r.target.value})),style:{width:"100%",padding:"3px 5px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:10,boxSizing:"border-box",background:"white"},children:[t.jsx("option",{value:"",children:"Select Doctor"}),Ne.map(r=>t.jsx("option",{value:r.short_name,children:r.name},r.id)),t.jsx("option",{value:"_other",children:" Other/External "})]}):t.jsx("input",{value:Fe.doctor_name,onChange:r=>_e(s=>({...s,doctor_name:r.target.value})),placeholder:"Dr. Name",style:{width:"100%",padding:"3px 5px",border:"1px solid #e2e8f0",borderRadius:4,fontSize:10,boxSizing:"border-box"}})]})]}),qn==="rx"&&t.jsxs("div",{style:{background:"white",borderRadius:8,padding:10,border:"1px solid #e2e8f0"},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#2563eb",marginBottom:4},children:" PASTE OR DICTATE OLD PRESCRIPTION"}),t.jsx("div",{style:{fontSize:9,color:"#94a3b8",marginBottom:6},children:"Paste prescription text, type from the slip, or use voice recording. Claude will auto-extract diagnoses, medications, vitals."}),t.jsx(Pn,{label:"Dictate prescription",dgKey:o,whisperKey:a,color:"#2563eb",compact:!0,onTranscript:r=>ai(s=>s?s+`
`+r:r)}),t.jsx("textarea",{value:vs,onChange:r=>ai(r.target.value),placeholder:`Paste prescription here...

Example:
Dr. Sharma - Endocrinology
Dx: Type 2 DM (uncontrolled), HTN
BP: 150/90, Wt: 78kg
Rx:
1. Tab Metformin 500mg BD
2. Tab Glimepiride 2mg OD before breakfast
3. Tab Telmisartan 40mg OD morning
Adv: HbA1c after 3 months
F/U: 6 weeks`,style:{width:"100%",minHeight:120,padding:8,border:"1px solid #e2e8f0",borderRadius:6,fontSize:11,fontFamily:"monospace",resize:"vertical",marginTop:6,boxSizing:"border-box"}}),t.jsx("button",{onClick:bb,disabled:Ls||!vs.trim(),style:{marginTop:6,width:"100%",padding:"8px",background:Ls?"#6b7280":Kl?"#059669":"#2563eb",color:"white",border:"none",borderRadius:6,fontWeight:700,fontSize:12,cursor:Ls?"wait":"pointer"},children:Ls?" Extracting...":Kl?" Extracted  Re-extract":" Extract from Prescription"}),Kl&&t.jsx("div",{style:{marginTop:8,background:"#f0fdf4",borderRadius:6,padding:8,border:"1px solid #bbf7d0"},children:t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#059669",marginBottom:4},children:" EXTRACTED  Review & edit below, then Save"})})]}),qn==="report"&&t.jsxs("div",{style:{background:"white",borderRadius:8,padding:10,border:"1px solid #e2e8f0"},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#7c3aed",marginBottom:4},children:" UPLOAD TEST REPORTS"}),t.jsx("div",{style:{fontSize:9,color:"#94a3b8",marginBottom:8},children:"Upload photos or PDFs of test reports. Claude will extract values automatically."}),t.jsxs("div",{style:{display:"flex",gap:4,marginBottom:8,alignItems:"center"},children:[t.jsxs("select",{id:"reportType",defaultValue:"Blood Test",style:{flex:1,padding:"6px 8px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:11,fontWeight:600},children:[t.jsx("option",{children:"Blood Test"}),t.jsx("option",{children:"HbA1c"}),t.jsx("option",{children:"Thyroid Panel"}),t.jsx("option",{children:"Lipid Profile"}),t.jsx("option",{children:"Kidney Function"}),t.jsx("option",{children:"Liver Function"}),t.jsx("option",{children:"CBC"}),t.jsx("option",{children:"Urine"}),t.jsx("option",{children:"X-Ray"}),t.jsx("option",{children:"Ultrasound"}),t.jsx("option",{children:"MRI"}),t.jsx("option",{children:"DEXA"}),t.jsx("option",{children:"ABI"}),t.jsx("option",{children:"VPT"}),t.jsx("option",{children:"ECG"}),t.jsx("option",{children:"Doppler"}),t.jsx("option",{children:"Retinopathy"}),t.jsx("option",{children:"Other"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,padding:"6px 12px",background:"#7c3aed",color:"white",borderRadius:6,cursor:"pointer",fontSize:11,fontWeight:700,whiteSpace:"nowrap"},children:[" Upload",t.jsx("input",{type:"file",accept:"image/*,.pdf,.heic,.heif",style:{display:"none"},onChange:r=>yb(r,document.getElementById("reportType").value)})]})]}),Gu.map((r,s)=>{var d;return t.jsxs("div",{style:{marginBottom:8,background:r.extracted?"#f0fdf4":"#f8fafc",borderRadius:6,padding:8,border:`1px solid ${r.extracted?"#bbf7d0":r.error?"#fecaca":"#e2e8f0"}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[t.jsxs("div",{style:{fontSize:11,fontWeight:700},children:[t.jsx("span",{style:{background:"#7c3aed",color:"white",padding:"1px 6px",borderRadius:3,fontSize:9,marginRight:6},children:r.type}),r.fileName]}),t.jsxs("div",{style:{display:"flex",gap:4},children:[!r.extracted&&!r.extracting&&t.jsx("button",{onClick:()=>Sb(s),style:{fontSize:9,padding:"2px 8px",background:"#7c3aed",color:"white",border:"none",borderRadius:4,fontWeight:700,cursor:"pointer"},children:" Extract"}),t.jsx("button",{onClick:()=>Eb(s),style:{fontSize:10,padding:"2px 6px",background:"none",border:"1px solid #fecaca",borderRadius:3,cursor:"pointer",color:"#dc2626"},children:""})]})]}),r.extracting&&t.jsx("div",{style:{fontSize:10,color:"#7c3aed",fontWeight:600},children:" Extracting values..."}),r.error&&t.jsxs("div",{style:{fontSize:10,color:"#dc2626"},children:[" ",r.error]}),r.extracted&&t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:9,color:"#059669",fontWeight:600,marginBottom:2},children:[" ",((d=r.extracted.tests)==null?void 0:d.length)||0," tests extracted",r.extracted.report_date&&`  ${r.extracted.report_date}`,r.extracted.lab_name&&`  ${r.extracted.lab_name}`]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:(r.extracted.tests||[]).slice(0,12).map((c,u)=>t.jsxs("span",{style:{fontSize:8,padding:"1px 5px",borderRadius:3,fontWeight:600,background:c.flag==="HIGH"?"#fef2f2":c.flag==="LOW"?"#eff6ff":"#f0fdf4",color:c.flag==="HIGH"?"#dc2626":c.flag==="LOW"?"#2563eb":"#059669",border:`1px solid ${c.flag==="HIGH"?"#fecaca":c.flag==="LOW"?"#bfdbfe":"#bbf7d0"}`},children:[c.test_name,": ",c.result,c.unit," ",c.flag||""]},u))})]})]},s)})]}),qn==="bulk"&&t.jsxs("div",{style:{background:"white",borderRadius:8,padding:10,border:"1px solid #e2e8f0",marginTop:8},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#1e40af",marginBottom:4},children:" PASTE ALL VISIT HISTORY"}),t.jsx("div",{style:{fontSize:9,color:"#64748b",marginBottom:4},children:"Paste the full EMR dump  all visits, all dates. AI will split into individual visits and save each one separately."}),t.jsx("textarea",{value:Is,onChange:r=>Ns(r.target.value),placeholder:`Paste all visit history here...

Example:
FOLLOW UP ON 16/9/25
HT 159.8 WT 81.7 BMI 32.3
FBG 69 HBA1C 5.3 TG 268
TREATMENT: TAB THYRONORM 75MCG...

FOLLOW UP ON 16/5/25
HT 159.5 WT 83.1 BF 34.75
HBA1C 5.1 FBG 87.5 TG 287.2...`,style:{width:"100%",minHeight:150,padding:8,fontSize:11,borderRadius:6,border:"1px solid #d1d5db",fontFamily:"monospace",resize:"vertical",boxSizing:"border-box"}}),t.jsxs("div",{style:{display:"flex",gap:6,marginTop:6,alignItems:"center",flexWrap:"wrap"},children:[t.jsx("button",{onClick:Ab,disabled:Cs||!Is.trim(),style:{padding:"8px 16px",fontSize:11,fontWeight:700,background:Cs?"#94a3b8":"#2563eb",color:"white",border:"none",borderRadius:6,cursor:Cs?"wait":"pointer"},children:Cs?" Parsing...":" Parse Visits"}),Tn.length>0&&!Pu&&t.jsxs("button",{onClick:Mb,disabled:!ee,style:{padding:"8px 16px",fontSize:11,fontWeight:700,background:"#16a34a",color:"white",border:"none",borderRadius:6,cursor:"pointer"},children:[" Save All ",Tn.length," Visits"]}),Tn.length>0&&t.jsx("button",{onClick:()=>{di([]),gn(""),Ns("")},style:{padding:"8px 16px",fontSize:11,fontWeight:600,background:"#fef2f2",color:"#dc2626",border:"1px solid #fca5a5",borderRadius:6,cursor:"pointer"},children:" Clear"}),Jl&&t.jsx("span",{style:{fontSize:10,color:Jl.includes("")?"#dc2626":"#16a34a",fontWeight:600},children:Jl})]}),Pu&&t.jsx("div",{style:{marginTop:6,background:"#f0fdf4",borderRadius:6,overflow:"hidden",height:6},children:t.jsx("div",{style:{height:"100%",background:"#16a34a",width:`${fx/Math.max(Tn.length,1)*100}%`,transition:"width 0.3s"}})}),Tn.length>0&&t.jsx("div",{style:{marginTop:8,maxHeight:300,overflowY:"auto"},children:Tn.map((r,s)=>{var d,c,u;return t.jsxs("div",{style:{padding:8,marginBottom:4,background:s%2===0?"#f8fafc":"#f1f5f9",borderRadius:6,fontSize:10,border:"1px solid #e2e8f0"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[t.jsxs("span",{style:{fontWeight:800,color:"#1e40af"},children:[" ",r.visit_date]}),t.jsx("span",{style:{color:"#64748b"},children:r.doctor_name||""})]}),t.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",fontSize:9},children:[((d=r.vitals)==null?void 0:d.weight)&&t.jsxs("span",{children:[" ",r.vitals.weight,"kg"]}),((c=r.vitals)==null?void 0:c.bp_sys)&&t.jsxs("span",{children:[" ",r.vitals.bp_sys,"/",r.vitals.bp_dia]}),((u=r.vitals)==null?void 0:u.bmi)&&t.jsxs("span",{children:[" BMI ",r.vitals.bmi]})]}),(r.labs||[]).length>0&&t.jsx("div",{style:{marginTop:3,display:"flex",flexWrap:"wrap",gap:3},children:r.labs.map((f,h)=>t.jsxs("span",{style:{fontSize:8,padding:"1px 5px",borderRadius:3,fontWeight:600,background:f.flag==="H"?"#fef2f2":f.flag==="L"?"#eff6ff":"#f0fdf4",color:f.flag==="H"?"#dc2626":f.flag==="L"?"#2563eb":"#059669"},children:[f.test_name,": ",f.result,f.unit||""]},h))}),(r.medications||[]).length>0&&t.jsxs("div",{style:{marginTop:3,fontSize:9,color:"#475569"},children:[" ",r.medications.map(f=>f.name).join(", ")]}),(r.diagnoses||[]).length>0&&t.jsx("div",{style:{marginTop:3,display:"flex",flexWrap:"wrap",gap:2},children:r.diagnoses.map((f,h)=>t.jsx("span",{style:{fontSize:8,padding:"1px 5px",borderRadius:3,fontWeight:600,background:f.status==="Controlled"?"#f0fdf4":f.status==="Uncontrolled"?"#fef2f2":"#f1f5f9",color:f.status==="Controlled"?"#059669":f.status==="Uncontrolled"?"#dc2626":"#475569"},children:f.label},h))}),r.notes&&t.jsx("div",{style:{marginTop:3,fontSize:9,color:"#64748b",fontStyle:"italic"},children:r.notes})]},s)})})]}),qn!=="bulk"&&t.jsxs("div",{style:{background:"white",borderRadius:8,padding:10,border:"1px solid #e2e8f0",marginTop:8},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#64748b",marginBottom:6},children:qn==="manual"?" MANUAL ENTRY":" REVIEW EXTRACTED DATA"}),t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#94a3b8",marginBottom:3},children:"VITALS"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr",gap:3,marginBottom:8},children:[["bp_sys","BP Sys"],["bp_dia","BP Dia"],["pulse","Pulse"],["weight","Wt (kg)"],["height","Ht (cm)"]].map(([r,s])=>t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:7,color:"#94a3b8"},children:s}),t.jsx("input",{value:Fe.vitals[r]||"",onChange:d=>_e(c=>({...c,vitals:{...c.vitals,[r]:d.target.value}})),style:{width:"100%",padding:"2px 4px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:10,boxSizing:"border-box"}})]},r))}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:3},children:[t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#94a3b8"},children:"DIAGNOSES"}),t.jsx("button",{onClick:()=>Od("diagnoses"),style:{fontSize:8,padding:"1px 5px",border:"1px solid #e2e8f0",borderRadius:3,cursor:"pointer",background:"white"},children:"+"})]}),Fe.diagnoses.map((r,s)=>t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"70px 1fr 85px 20px",gap:3,marginBottom:2},children:[t.jsx("input",{value:r.id,onChange:d=>{const c=d.target.value;_e(u=>{const f={...u};return f.diagnoses=[...f.diagnoses],f.diagnoses[s]={...f.diagnoses[s],id:c},f})},placeholder:"dm2",style:{padding:"2px 4px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:9,boxSizing:"border-box"}}),t.jsx("input",{value:r.label,onChange:d=>{const c=d.target.value;_e(u=>{const f={...u};return f.diagnoses=[...f.diagnoses],f.diagnoses[s]={...f.diagnoses[s],label:c},f})},placeholder:"Type 2 DM (since 2015)",style:{padding:"2px 4px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:9,boxSizing:"border-box"}}),t.jsxs("select",{value:r.status,onChange:d=>{const c=d.target.value;_e(u=>{const f={...u};return f.diagnoses=[...f.diagnoses],f.diagnoses[s]={...f.diagnoses[s],status:c},f})},style:{padding:"2px 4px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:8,boxSizing:"border-box"},children:[t.jsx("option",{children:"New"}),t.jsx("option",{children:"Controlled"}),t.jsx("option",{children:"Uncontrolled"})]}),t.jsx("button",{onClick:()=>jd("diagnoses",s),style:{fontSize:11,cursor:"pointer",border:"none",background:"none",color:"#dc2626",padding:0},children:""})]},s)),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:3,marginTop:6},children:[t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#94a3b8"},children:"MEDICATIONS"}),t.jsx("button",{onClick:()=>Od("medications"),style:{fontSize:8,padding:"1px 5px",border:"1px solid #e2e8f0",borderRadius:3,cursor:"pointer",background:"white"},children:"+"})]}),Fe.medications.map((r,s)=>t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 60px 50px 70px 20px",gap:3,marginBottom:2},children:[t.jsx("input",{value:r.name,onChange:d=>{const c=d.target.value;_e(u=>{const f={...u};return f.medications=[...f.medications],f.medications[s]={...f.medications[s],name:c},f})},placeholder:"THYRONORM 88MCG",style:{padding:"2px 4px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:9,boxSizing:"border-box"}}),t.jsx("input",{value:r.dose,onChange:d=>{const c=d.target.value;_e(u=>{const f={...u};return f.medications=[...f.medications],f.medications[s]={...f.medications[s],dose:c},f})},placeholder:"88mcg",style:{padding:"2px 4px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:9,boxSizing:"border-box"}}),t.jsx("input",{value:r.frequency,onChange:d=>{const c=d.target.value;_e(u=>{const f={...u};return f.medications=[...f.medications],f.medications[s]={...f.medications[s],frequency:c},f})},placeholder:"OD",style:{padding:"2px 4px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:9,boxSizing:"border-box"}}),t.jsx("input",{value:r.timing,onChange:d=>{const c=d.target.value;_e(u=>{const f={...u};return f.medications=[...f.medications],f.medications[s]={...f.medications[s],timing:c},f})},placeholder:"Morning",style:{padding:"2px 4px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:9,boxSizing:"border-box"}}),t.jsx("button",{onClick:()=>jd("medications",s),style:{fontSize:11,cursor:"pointer",border:"none",background:"none",color:"#dc2626",padding:0},children:""})]},s)),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:3,marginTop:6},children:[t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#94a3b8"},children:"LAB RESULTS"}),t.jsx("button",{onClick:()=>Od("labs"),style:{fontSize:8,padding:"1px 5px",border:"1px solid #e2e8f0",borderRadius:3,cursor:"pointer",background:"white"},children:"+"})]}),Fe.labs.map((r,s)=>t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 55px 40px 45px 70px 20px",gap:3,marginBottom:2},children:[t.jsx("input",{value:r.test_name,onChange:d=>{const c=d.target.value;_e(u=>{const f={...u};return f.labs=[...f.labs],f.labs[s]={...f.labs[s],test_name:c},f})},placeholder:"HbA1c",style:{padding:"2px 4px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:9,boxSizing:"border-box"}}),t.jsx("input",{value:r.result,onChange:d=>{const c=d.target.value;_e(u=>{const f={...u};return f.labs=[...f.labs],f.labs[s]={...f.labs[s],result:c},f})},placeholder:"8.2",style:{padding:"2px 4px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:9,boxSizing:"border-box"}}),t.jsx("input",{value:r.unit,onChange:d=>{const c=d.target.value;_e(u=>{const f={...u};return f.labs=[...f.labs],f.labs[s]={...f.labs[s],unit:c},f})},placeholder:"%",style:{padding:"2px 4px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:9,boxSizing:"border-box"}}),t.jsxs("select",{value:r.flag,onChange:d=>{const c=d.target.value;_e(u=>{const f={...u};return f.labs=[...f.labs],f.labs[s]={...f.labs[s],flag:c},f})},style:{padding:"2px 4px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:8,boxSizing:"border-box"},children:[t.jsx("option",{value:"",children:"OK"}),t.jsx("option",{children:"HIGH"}),t.jsx("option",{children:"LOW"})]}),t.jsx("input",{value:r.ref_range,onChange:d=>{const c=d.target.value;_e(u=>{const f={...u};return f.labs=[...f.labs],f.labs[s]={...f.labs[s],ref_range:c},f})},placeholder:"<6.5",style:{padding:"2px 4px",border:"1px solid #e2e8f0",borderRadius:3,fontSize:9,boxSizing:"border-box"}}),t.jsx("button",{onClick:()=>jd("labs",s),style:{fontSize:11,cursor:"pointer",border:"none",background:"none",color:"#dc2626",padding:0},children:""})]},s))]}),qn!=="bulk"&&t.jsx("button",{onClick:Tb,disabled:Cu||!Fe.visit_date,style:{marginTop:8,width:"100%",padding:"10px",background:Fe.visit_date?"#2563eb":"#e2e8f0",color:Fe.visit_date?"white":"#94a3b8",border:"none",borderRadius:6,fontWeight:700,fontSize:13,cursor:Fe.visit_date?"pointer":"default"},children:Cu?" Saving...":" Save Historical Visit"})]}):t.jsxs("div",{style:{textAlign:"center",padding:30,color:"#94a3b8"},children:[t.jsx("div",{style:{fontSize:28,marginBottom:8},children:""}),t.jsx("div",{style:{fontSize:13,fontWeight:600},children:"Load a patient from the database first"}),t.jsx("div",{style:{fontSize:11,marginTop:4},children:"Use  Find to search and select a patient, or save a consultation first"})]})}),e==="outcomes"&&t.jsx("div",{style:{maxWidth:920,margin:"0 auto"},children:ee?ux?t.jsxs("div",{style:{textAlign:"center",padding:50},children:[t.jsx("div",{style:{fontSize:28,marginBottom:10},children:""}),t.jsx("div",{style:{fontSize:13,color:"#94a3b8"},children:"Loading health data..."})]}):t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:20,fontWeight:800,color:"#0f172a",letterSpacing:"-0.5px"},children:"Health Dashboard"}),t.jsxs("div",{style:{fontSize:12,color:"#64748b",marginTop:2},children:[b.name,b.age?`  ${b.age}y`:"",b.sex?`  ${b.sex}`:""]})]}),t.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[t.jsx("div",{style:{display:"flex",borderRadius:8,overflow:"hidden",border:"1px solid #e2e8f0"},children:[["3m","3M"],["6m","6M"],["1y","1Y"],["all","All"]].map(([r,s])=>t.jsx("button",{onClick:()=>{px(r),To(ee,r)},style:{padding:"5px 12px",fontSize:11,fontWeight:700,border:"none",cursor:"pointer",background:ql===r?"#0f172a":"white",color:ql===r?"white":"#64748b",transition:"all 0.15s"},children:s},r))}),t.jsx("button",{onClick:()=>To(ee),title:"Refresh",style:{fontSize:14,padding:"4px 8px",border:"1px solid #e2e8f0",borderRadius:8,cursor:"pointer",background:"white",color:"#64748b"},children:""})]})]}),P&&t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:10,marginBottom:20},children:[{label:"Visits",value:((ih=P.consultations)==null?void 0:ih.length)||0,icon:"",bg:"linear-gradient(135deg,#eff6ff,#dbeafe)",color:"#1d4ed8"},{label:"Active Meds",value:(()=>{const r=new Set;return(P.medications||[]).filter(s=>{if(!s.is_active)return!1;const d=(s.name||"").toUpperCase();return r.has(d)?!1:(r.add(d),!0)}).length})(),icon:"",bg:"linear-gradient(135deg,#f0fdf4,#dcfce7)",color:"#059669"},{label:"Diagnoses",value:(()=>{const r=new Set;return(P.diagnoses||[]).filter(s=>{const d=s.diagnosis_id||s.label;return r.has(d)?!1:(r.add(d),!0)}).length})(),icon:"",bg:"linear-gradient(135deg,#fffbeb,#fef3c7)",color:"#d97706"},{label:"Lab Tests",value:((sh=P.lab_results)==null?void 0:sh.length)||0,icon:"",bg:"linear-gradient(135deg,#fdf2f8,#fce7f3)",color:"#db2777"}].map((r,s)=>t.jsxs("div",{style:{background:r.bg,borderRadius:14,padding:"12px 14px",textAlign:"center"},children:[t.jsxs("div",{style:{fontSize:9,color:"#64748b",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.6px"},children:[r.icon," ",r.label]}),t.jsx("div",{style:{fontSize:24,fontWeight:900,color:r.color,marginTop:3},children:r.value})]},s))}),t.jsxs("div",{style:{background:"linear-gradient(135deg,#f0f9ff,#e0f2fe)",borderRadius:16,padding:16,marginBottom:20,border:"1px solid #bae6fd"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:ua?10:0},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsx("span",{style:{fontSize:13,fontWeight:700,color:"#0c4a6e"},children:"AI Health Summary"})]}),t.jsx("button",{onClick:vb,disabled:pa,style:{fontSize:11,padding:"5px 14px",border:"none",borderRadius:8,cursor:pa?"wait":"pointer",background:pa?"#94a3b8":"#0369a1",color:"white",fontWeight:700},children:pa?" Analyzing...":ua?" Regenerate":" Generate Summary"})]}),ua&&t.jsx("div",{style:{fontSize:13,lineHeight:"1.7",color:"#0c4a6e",marginTop:6,background:"white",borderRadius:10,padding:12},children:ua})]}),ae&&(()=>{var c,u,f;const r={};(ae.visits||[]).forEach(h=>{const m=(h.visit_date||"").split("T")[0];r[m]={lifestyle:h.lifestyle||[],compliance:h.compliance||"",symptoms:(h.symptoms||h.chief_complaints||[]).filter(j=>!["no gmi","no hypoglycemia","no hypoglycaemia","routine follow-up","follow-up visit","no complaints"].some(w=>String(j).toLowerCase().includes(w))),summary:h.summary||"",doctor:h.con_name||h.mo_name||"",meds_confirmed:h.medications_confirmed||[]}});const s={};(ae.med_timeline||[]).forEach(h=>{const m=(h.visit_date||"").split("T")[0];s[m]||(s[m]=[]),s[m].push(h)});const d=(h,m,j,w)=>w.some(M=>{var $;return(($=M.data)==null?void 0:$.length)>0})?t.jsxs("div",{style:{marginBottom:20},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:8},children:[t.jsx("span",{style:{fontSize:14},children:m}),t.jsx("span",{style:{fontSize:12,fontWeight:800,color:j,textTransform:"uppercase",letterSpacing:"0.5px"},children:h})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:w.map((M,$)=>{var k;if(!((k=M.data)!=null&&k.length))return null;const y=M.biomarkerKey||M.label.toLowerCase().replace(/[^a-z]/g,""),_=hx===`${h}-${$}`;return t.jsxs("div",{style:{gridColumn:_?"1 / -1":"auto",background:"white",borderRadius:14,border:_?"2px solid "+M.color:"1px solid #f1f5f9",boxShadow:_?"0 4px 12px rgba(0,0,0,0.08)":"0 1px 3px rgba(0,0,0,0.04)",overflow:"hidden",cursor:"pointer",transition:"all 0.2s"},onClick:()=>gx(_?null:`${h}-${$}`),children:[t.jsx("div",{style:{padding:_?14:0},children:t.jsx(Rb,{data:M.data,label:M.label,unit:M.unit,color:M.color,target:M.target,valueKey:M.valueKey,lowerBetter:M.lowerBetter})}),_&&t.jsxs("div",{style:{borderTop:"1px solid #f1f5f9",padding:14,background:"#fafbfc"},onClick:le=>le.stopPropagation(),children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#475569",marginBottom:10},children:" What was happening at each reading:"}),M.data.slice().reverse().map((le,Ae)=>{const J=(le.test_date||le.date||"").split("T")[0],re=r[J]||{},Me=s[J]||[],I=aS(y,Me.map(Ue=>Ue.pharmacy_match||Ue.name)),V=(Array.isArray(re.lifestyle)?re.lifestyle:[]).filter(Ue=>{if(typeof Ue=="object"&&Ue.helps){const dt=(Ue.helps||[]).join(",").toLowerCase();if(y==="hba1c"||y==="fpg")return dt.includes("dm");if(y==="bp")return dt.includes("htn");if(y==="ldl"||y==="triglycerides"||y==="hdl")return dt.includes("dyslipidemia")||dt.includes("lipid");if(y==="weight")return dt.includes("obesity")||dt.includes("dm");if(y==="tsh")return dt.includes("hypo")}return!0}),X=le[M.valueKey||"result"],fe=String(J||""),pe=fe.length>=10?new Date(fe.slice(0,10)+"T12:00:00"):new Date(fe),Ge=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ct=J?`${pe.getDate()} ${Ge[pe.getMonth()]} ${pe.getFullYear()}`:"";return t.jsxs("div",{style:{padding:"10px 0",borderBottom:Ae<M.data.length-1?"1px solid #f1f5f9":"none"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[t.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6},children:[t.jsxs("span",{style:{fontSize:18,fontWeight:800,color:M.color},children:[X,M.unit]}),re.doctor&&t.jsxs("span",{style:{fontSize:10,color:"#94a3b8"},children:[" ",re.doctor.startsWith("Dr")?re.doctor:"Dr. "+re.doctor]})]}),t.jsx("span",{style:{fontSize:12,color:"#475569",fontWeight:700,background:"#f1f5f9",padding:"3px 10px",borderRadius:8},children:Ct})]}),re.compliance&&t.jsx("div",{style:{marginBottom:4},children:t.jsx("span",{style:{padding:"2px 8px",borderRadius:10,fontWeight:700,fontSize:9,background:(re.compliance+"").startsWith("Good")?"#dcfce7":(re.compliance+"").startsWith("Poor")?"#fef2f2":"#fef3c7",color:(re.compliance+"").startsWith("Good")?"#059669":(re.compliance+"").startsWith("Poor")?"#dc2626":"#d97706"},children:re.compliance})}),I.length>0&&t.jsxs("div",{style:{marginBottom:4},children:[t.jsx("div",{style:{fontSize:9,color:"#94a3b8",fontWeight:600,marginBottom:2},children:"PROTOCOL:"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:I.map((Ue,dt)=>t.jsxs("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:8,background:"#f0fdf4",color:"#059669",border:"1px solid #bbf7d0",fontWeight:600},children:[" ",Ue]},dt))})]}),V.length>0&&t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3,marginBottom:3},children:V.map((Ue,dt)=>t.jsx("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:8,background:"#eff6ff",color:"#2563eb",fontWeight:600},children:typeof Ue=="object"?Ue.advice:Ue},dt))}),(re.symptoms||[]).length>0&&t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:re.symptoms.map((Ue,dt)=>t.jsxs("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:8,background:"#fef2f2",color:"#dc2626",fontWeight:600},children:[" ",Ue]},dt))})]},Ae)})]})]},$)})})]},h):null;return t.jsxs(t.Fragment,{children:[d("Diabetes & Metabolic","","#b91c1c",[{data:ae.hba1c,label:"HbA1c",unit:"%",color:"#dc2626",target:6.5,biomarkerKey:"hba1c"},{data:ae.fpg,label:"Fasting Glucose",unit:" mg/dl",color:"#ea580c",target:100,biomarkerKey:"fpg"},{data:ae.ppg,label:"Post-Prandial",unit:" mg/dl",color:"#f97316",target:180,biomarkerKey:"ppg"},{data:ae.bp,label:"BP (Systolic)",unit:" mmHg",color:"#7c3aed",target:130,valueKey:"bp_sys",biomarkerKey:"bp"},{data:ae.weight,label:"Weight",unit:" kg",color:"#2563eb",valueKey:"weight",biomarkerKey:"weight"}]),d("Lipids & Kidney","","#1d4ed8",[{data:ae.ldl,label:"LDL",unit:" mg/dl",color:"#d97706",target:100,biomarkerKey:"ldl"},{data:ae.triglycerides,label:"Triglycerides",unit:" mg/dl",color:"#b45309",target:150,biomarkerKey:"triglycerides"},{data:ae.hdl,label:"HDL",unit:" mg/dl",color:"#059669",target:40,lowerBetter:!1,biomarkerKey:"hdl"},{data:ae.nonhdl,label:"Non-HDL",unit:" mg/dl",color:"#a16207",target:130,biomarkerKey:"nonhdl"},{data:ae.egfr,label:"eGFR",unit:" ml/min",color:"#0d9488",target:60,lowerBetter:!1,biomarkerKey:"egfr"},{data:ae.creatinine,label:"Creatinine",unit:" mg/dl",color:"#6366f1",target:1.2,biomarkerKey:"creatinine"},{data:ae.uacr,label:"UACR",unit:" mg/g",color:"#be185d",target:30,biomarkerKey:"uacr"},{data:ae.tsh,label:"TSH",unit:" mIU/L",color:"#0891b2",biomarkerKey:"tsh"}]),d("Liver Function","","#92400e",[{data:ae.alt,label:"ALT (SGPT)",unit:" U/L",color:"#dc2626",target:40,biomarkerKey:"alt"},{data:ae.ast,label:"AST (SGOT)",unit:" U/L",color:"#ea580c",target:40,biomarkerKey:"ast"},{data:ae.alp,label:"ALP",unit:" U/L",color:"#d97706",target:120,biomarkerKey:"alp"}]),d("Vitamins & Inflammation","","#7c3aed",[{data:ae.vitamin_d,label:"Vitamin D",unit:" ng/ml",color:"#7c3aed",target:30,lowerBetter:!1,biomarkerKey:"vitamind"},{data:ae.vitamin_b12,label:"Vitamin B12",unit:" pg/ml",color:"#6366f1",target:200,lowerBetter:!1,biomarkerKey:"vitaminb12"},{data:ae.ferritin,label:"Ferritin",unit:" ng/ml",color:"#b45309",biomarkerKey:"ferritin"},{data:ae.crp,label:"CRP",unit:" mg/L",color:"#dc2626",target:3,biomarkerKey:"crp"}]),(((c=ae.waist)==null?void 0:c.length)>0||((u=ae.body_fat)==null?void 0:u.length)>0||((f=ae.muscle_mass)==null?void 0:f.length)>0)&&d("Body Composition","","#059669",[{data:ae.waist,label:"Waist",unit:" cm",color:"#059669",valueKey:"waist",biomarkerKey:"waist"},{data:ae.body_fat,label:"Body Fat",unit:"%",color:"#d97706",valueKey:"body_fat",biomarkerKey:"body_fat"},{data:ae.muscle_mass,label:"Muscle Mass",unit:" kg",color:"#2563eb",lowerBetter:!1,valueKey:"muscle_mass",biomarkerKey:"muscle_mass"}]),(()=>{const h=[],m=new Set;if((ae.visits||[]).forEach(M=>{const $=(M.visit_date||"").split("T")[0];if(m.has($))return;const y=[...M.symptoms||[],...M.chief_complaints||[]].filter(_=>_&&!["no gmi","no hypoglycemia","no hypoglycaemia","routine follow-up","follow-up visit","no complaints","routine","regular follow-up"].some(k=>String(_).toLowerCase().includes(k)));y.length!==0&&(m.add($),h.push({date:$,doctor:M.con_name||M.mo_name||"",symptoms:[...new Set(y)]}))}),h.length===0)return null;const j={};h.forEach(M=>{M.symptoms.forEach($=>{const y=String($).toLowerCase().trim();j[y]||(j[y]={label:$,dates:new Set}),j[y].dates.add(M.date)})});const w=Object.values(j).map(M=>({...M,count:M.dates.size,dates:[...M.dates].sort()})).sort((M,$)=>$.count-M.count),R=w.filter(M=>M.count>=2);return t.jsxs("div",{style:{marginBottom:20},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:8},children:[t.jsx("span",{style:{fontSize:14},children:""}),t.jsx("span",{style:{fontSize:12,fontWeight:800,color:"#7c2d12",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Symptoms Tracker"})]}),R.length>0&&t.jsxs("div",{style:{background:"linear-gradient(135deg,#fef2f2,#fff1f2)",border:"1px solid #fecaca",borderRadius:12,padding:12,marginBottom:10},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#991b1b",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.5px"},children:" Recurring Symptoms"}),R.map((M,$)=>{const y=M.dates.some(k=>(Date.now()-new Date(k).getTime())/864e5<30),_=M.dates.length>=2?(()=>{const k=new Date(M.dates[0]),le=new Date(M.dates[M.dates.length-1]),Ae=Math.round((le-k)/(1e3*60*60*24));return Ae>365?`${Math.round(Ae/365)}y`:Ae>30?`${Math.round(Ae/30)}mo`:`${Ae}d`})():"";return t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0",borderBottom:$<R.length-1?"1px solid #fecaca":"none"},children:[t.jsx("div",{style:{width:32,height:32,borderRadius:"50%",background:"#dc2626",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:13,fontWeight:800,flexShrink:0},children:M.count}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#1e293b"},children:M.label}),t.jsxs("div",{style:{fontSize:9,color:"#64748b",marginTop:1},children:[M.count," visits over ",_,y&&t.jsx("span",{style:{marginLeft:6,color:"#dc2626",fontWeight:700},children:" Still active"}),!y&&t.jsx("span",{style:{marginLeft:6,color:"#059669",fontWeight:700},children:" Resolved"})]})]}),t.jsx("div",{style:{display:"flex",gap:2,flexShrink:0},children:M.dates.slice(-6).map((k,le)=>t.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:(Date.now()-new Date(k).getTime())/(1e3*60*60*24)<30?"#dc2626":"#fca5a5"},title:k},le))})]},$)})]}),t.jsxs("div",{style:{background:"white",borderRadius:10,border:"1px solid #f1f5f9",overflow:"hidden"},children:[t.jsx("div",{style:{padding:"6px 12px",background:"#f8fafc",fontSize:9,fontWeight:700,color:"#64748b",textTransform:"uppercase"},children:"Visit Timeline"}),h.slice(0,10).map((M,$)=>{const y=String(M.date||""),_=y.length>=10?new Date(y.slice(0,10)+"T12:00:00"):new Date(y),k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],le=M.date?`${_.getDate()} ${k[_.getMonth()]} ${_.getFullYear()}`:"";return t.jsxs("div",{style:{padding:"6px 12px",borderBottom:$<h.length-1?"1px solid #f1f5f9":"none",display:"flex",gap:10,alignItems:"flex-start"},children:[t.jsxs("div",{style:{minWidth:70,flexShrink:0},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#475569"},children:le}),M.doctor&&t.jsx("div",{style:{fontSize:8,color:"#94a3b8"},children:M.doctor})]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:M.symptoms.map((Ae,J)=>{var I;const re=String(Ae).toLowerCase().trim(),Me=((I=w.find(V=>V.label.toLowerCase()===re))==null?void 0:I.count)>=2;return t.jsx("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:6,background:Me?"#fef2f2":"#f8fafc",color:Me?"#dc2626":"#475569",fontWeight:Me?700:400,border:`1px solid ${Me?"#fecaca":"#e2e8f0"}`},children:Ae},J)})})]},$)})]})]})})(),(()=>{var m,j,w,R;const h=[];return(m=ae.hba1c)!=null&&m.length||h.push("HbA1c"),(j=ae.fpg)!=null&&j.length||h.push("Fasting Glucose"),(w=ae.ldl)!=null&&w.length||h.push("LDL"),(R=ae.egfr)!=null&&R.length||h.push("eGFR"),h.length>0?t.jsxs("div",{style:{background:"#fffbeb",borderRadius:12,padding:"10px 14px",border:"1px solid #fde68a",marginBottom:20},children:[t.jsxs("div",{style:{fontSize:11,fontWeight:700,color:"#92400e"},children:[" Missing: ",h.join(", ")]}),t.jsx("div",{style:{fontSize:10,color:"#b45309",marginTop:3},children:"Add via  Hx tab  Reports to see trends"})]}):null})()]})})(),ae&&(()=>{var $;const r=[],s={};(ae.diagnosis_journey||[]).forEach(y=>{const _=(y.visit_date||"").split("T")[0];s[_]||(s[_]=[]),s[_].find(le=>le.label===y.label&&le.status===y.status)||s[_].push({label:y.label,status:y.status})});const d={};(ae.med_timeline||[]).forEach(y=>{if(!y.is_new)return;const _=(y.visit_date||"").split("T")[0];d[_]||(d[_]=[]);const k=y.pharmacy_match||y.name;d[_].includes(k)||d[_].push(k)});const c=new Set;(ae.visits||[]).forEach(y=>{if(y.con_name&&c.add(y.con_name),y.mo_name&&c.add(y.mo_name),!y.visit_date)return;const _=y.visit_date.split("T")[0];r.push({date:_,type:"visit",icon:"",label:`${y.status==="historical"?"Historical ":""}${y.visit_type||"OPD"} Visit`,doctor:y.con_name||y.mo_name||"",summary:y.summary||"",diagChanges:s[_]||[],newMeds:(d[_]||[]).slice(0,6),lifestyle:y.lifestyle||[],compliance:y.compliance||"",symptoms:(y.symptoms||y.chief_complaints||[]).filter(k=>!["no gmi","no hypoglycemia","no hypoglycaemia","routine follow-up","follow-up visit","no complaints"].some(le=>String(k).toLowerCase().includes(le))),color:"#0369a1",bg:"#f0f9ff"})});const u={};if((ae.diagnosis_journey||[]).forEach(y=>{u[y.diagnosis_id]||(u[y.diagnosis_id]={label:y.label}),u[y.diagnosis_id].label=y.label}),Object.entries(u).forEach(([y,_])=>{const k=_.label.match(/\((?:since\s+)?(\d+)\s*(?:years?|yrs?)\)/i);if(k){const le=new Date().getFullYear()-parseInt(k[1]);r.push({date:`${le}-06-01`,type:"diagnosis",icon:"",label:_.label.replace(/\s*\(.*?\)/,""),detail:`Estimated onset ~${le}`,color:"#dc2626",bg:"#fef2f2"})}}),((C==null?void 0:C.complications)||[]).forEach(y=>{y!=null&&y.name&&r.push({date:null,type:"complication",icon:"",label:y.name,detail:`${y.status}${y.detail?`  ${y.detail}`:""}`,color:"#dc2626",bg:"#fef2f2"})}),($=C==null?void 0:C.history)!=null&&$.past_medical_surgical){const y=C.history.past_medical_surgical;y&&y!=="NIL"&&y.length>3&&y.split(/[,;]/).forEach(_=>{const k=_.trim();if(k.length>2){const le=k.match(/(19|20)\d{2}/);r.push({date:le?`${le[0]}-06-01`:null,type:"history",icon:"",label:k,detail:"Past medical/surgical",color:"#7c3aed",bg:"#faf5ff"})}})}if((ae.visits||[]).forEach(y=>{var _;if(y.complications&&Array.isArray(y.complications)&&y.complications.forEach(k=>{k!=null&&k.name&&!r.find(le=>le.label===k.name&&le.type==="complication")&&r.push({date:null,type:"complication",icon:"",label:k.name,detail:`${k.status||""}${k.detail?`  ${k.detail}`:""}`,color:"#dc2626",bg:"#fef2f2"})}),(_=y.history)!=null&&_.past_medical_surgical){const k=y.history.past_medical_surgical;k&&k!=="NIL"&&k.length>3&&k.split(/[,;]/).forEach(le=>{const Ae=le.trim();if(Ae.length>2&&!r.find(J=>J.label===Ae&&J.type==="history")){const J=Ae.match(/(19|20)\d{2}/);r.push({date:J?`${J[0]}-06-01`:null,type:"history",icon:"",label:Ae,detail:"Past medical/surgical",color:"#7c3aed",bg:"#faf5ff"})}})}}),b.dob)r.push({date:b.dob,type:"life",icon:"",label:"Born",detail:fa(b.dob),color:"#6366f1",bg:"#eef2ff"});else if(b.age){const y=new Date().getFullYear()-parseInt(b.age);r.push({date:`${y}-01-01`,type:"life",icon:"",label:"Born",detail:`~${y} (age ${b.age})`,color:"#6366f1",bg:"#eef2ff"})}r.sort((y,_)=>y.type==="life"?1:_.type==="life"?-1:!y.date&&!_.date?0:y.date?_.date?new Date(_.date)-new Date(y.date):-1:1);const f=new Set,h=r.filter(y=>{const _=`${y.label}|${(y.date||"").split("T")[0]}`;return f.has(_)?!1:(f.add(_),!0)});if(h.length===0)return null;const m=["All","Visits","Diagnosis","Meds","Symptoms","History"],j=[...c],w=(y,_)=>{var k,le,Ae;return _==="All"?!0:_==="Visits"?y.type==="visit":_==="Diagnosis"?y.type==="diagnosis"||y.type==="visit"&&((k=y.diagChanges)==null?void 0:k.length)>0:_==="Meds"?y.type==="visit"&&((le=y.newMeds)==null?void 0:le.length)>0:_==="Symptoms"?y.type==="visit"&&((Ae=y.symptoms)==null?void 0:Ae.length)>0||y.type==="complication":_==="History"?y.type==="history"||y.type==="complication"||y.type==="life":!0},R=h.filter(y=>!(!w(y,js)||On&&y.doctor&&y.doctor!==On)),M=y=>{if(!y)return"";const _=String(y),k=_.length===10?new Date(_+"T12:00:00"):new Date(_),le=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${k.getDate()} ${le[k.getMonth()]} ${k.getFullYear()}`};return t.jsxs("div",{style:{background:"white",borderRadius:16,padding:18,border:"1px solid #f1f5f9",marginBottom:20,boxShadow:"0 1px 4px rgba(0,0,0,0.04)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[t.jsx("span",{style:{fontSize:18},children:""}),t.jsx("span",{style:{fontSize:15,fontWeight:800,color:"#0f172a"},children:"Health Story"})]}),t.jsx("div",{style:{display:"flex",gap:4,marginBottom:6,flexWrap:"wrap",alignItems:"center"},children:m.map(y=>{const _=h.filter(k=>w(k,y)).length;return t.jsxs("button",{onClick:()=>mx(y),style:{padding:"4px 10px",fontSize:10,fontWeight:700,borderRadius:20,cursor:"pointer",border:js===y?"none":"1px solid #e2e8f0",background:js===y?"#0f172a":"white",color:js===y?"white":"#64748b"},children:[y,y!=="All"?` (${_})`:""]},y)})}),j.length>0&&t.jsxs("div",{style:{display:"flex",gap:3,marginBottom:12,alignItems:"center"},children:[t.jsx("span",{style:{fontSize:9,color:"#94a3b8",fontWeight:600},children:"Doctor:"}),t.jsx("button",{onClick:()=>ku(""),style:{padding:"2px 8px",fontSize:9,fontWeight:600,borderRadius:12,cursor:"pointer",border:On?"1px solid #e2e8f0":"none",background:On?"white":"#475569",color:On?"#64748b":"white"},children:"All"}),j.map(y=>t.jsx("button",{onClick:()=>ku(On===y?"":y),style:{padding:"2px 8px",fontSize:9,fontWeight:600,borderRadius:12,cursor:"pointer",border:On===y?"none":"1px solid #e2e8f0",background:On===y?"#475569":"white",color:On===y?"white":"#64748b"},children:y.startsWith("Dr")?y:"Dr. "+y},y))]}),t.jsxs("div",{style:{position:"relative",paddingLeft:34},children:[t.jsx("div",{style:{position:"absolute",left:13,top:8,bottom:8,width:2,background:"linear-gradient(to bottom, #0ea5e9, #e2e8f0, #c4b5fd)",borderRadius:2}}),R.map((y,_)=>{var le,Ae,J,re;const k=y.type==="visit";return t.jsxs("div",{style:{position:"relative",marginBottom:_<R.length-1?k?18:12:0},children:[t.jsx("div",{style:{position:"absolute",left:-28,top:3,width:24,height:24,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,background:y.bg||"#f8fafc",border:`2px solid ${y.color||"#94a3b8"}`,boxShadow:"0 1px 3px rgba(0,0,0,0.08)",zIndex:1},children:y.icon}),t.jsxs("div",{style:{background:k?"#f8fafc":"transparent",borderRadius:12,padding:k?"12px 14px":"4px 0",marginLeft:6,border:k?"1px solid #e2e8f0":"none"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#475569",marginBottom:4,background:k?"#e2e8f0":"#f1f5f9",display:"inline-block",padding:"2px 10px",borderRadius:8},children:M(y.date)}),t.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#0f172a"},children:y.label}),y.doctor&&t.jsxs("div",{style:{fontSize:10,color:"#64748b",marginTop:1},children:[" ",y.doctor.startsWith("Dr")?y.doctor:"Dr. "+y.doctor]}),k&&y.summary&&t.jsx("div",{style:{fontSize:11,color:"#475569",marginTop:6,lineHeight:"1.5",fontStyle:"italic",background:"white",borderRadius:8,padding:"6px 10px",border:"1px solid #f1f5f9"},children:typeof y.summary=="string"?y.summary.slice(0,200)+(y.summary.length>200?"...":""):""}),!k&&y.detail&&t.jsx("div",{style:{fontSize:11,color:"#475569",marginTop:3},children:y.detail}),k&&y.compliance&&t.jsx("div",{style:{marginTop:6},children:t.jsx("span",{style:{fontSize:9,fontWeight:700,padding:"2px 8px",borderRadius:10,background:(y.compliance+"").startsWith("Good")?"#dcfce7":(y.compliance+"").startsWith("Poor")?"#fef2f2":"#fef3c7",color:(y.compliance+"").startsWith("Good")?"#059669":(y.compliance+"").startsWith("Poor")?"#dc2626":"#d97706"},children:y.compliance})}),k&&((le=y.diagChanges)==null?void 0:le.length)>0&&t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginTop:6},children:y.diagChanges.map((Me,I)=>t.jsxs("span",{style:{fontSize:10,fontWeight:600,padding:"2px 8px",borderRadius:20,background:Me.status==="Controlled"?"#dcfce7":Me.status==="Uncontrolled"?"#fef2f2":"#dbeafe",color:Me.status==="Controlled"?"#059669":Me.status==="Uncontrolled"?"#dc2626":"#2563eb"},children:[Me.label.replace(/\s*\(.*?\)/,""),"  ",Me.status]},I))}),k&&((Ae=y.symptoms)==null?void 0:Ae.length)>0&&t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3,marginTop:4},children:y.symptoms.map((Me,I)=>t.jsxs("span",{style:{fontSize:9,fontWeight:600,padding:"2px 6px",borderRadius:8,background:"#fef2f2",color:"#dc2626",border:"1px solid #fecaca"},children:[" ",Me]},I))}),k&&((J=y.lifestyle)==null?void 0:J.length)>0&&t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3,marginTop:4},children:(Array.isArray(y.lifestyle)?y.lifestyle:[]).slice(0,5).map((Me,I)=>t.jsx("span",{style:{fontSize:9,fontWeight:600,padding:"2px 6px",borderRadius:8,background:"#f0fdf4",color:"#059669",border:"1px solid #bbf7d0"},children:typeof Me=="object"?Me.advice:Me},I))}),k&&((re=y.newMeds)==null?void 0:re.length)>0&&t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3,marginTop:4},children:y.newMeds.map((Me,I)=>t.jsxs("span",{style:{fontSize:9,fontWeight:600,padding:"2px 6px",borderRadius:8,background:"#faf5ff",color:"#7c3aed",border:"1px solid #e9d5ff"},children:[" ",Me]},I))})]})]},_)})]})]})})(),((ah=ae==null?void 0:ae.diagnosis_journey)==null?void 0:ah.length)>0&&(()=>{const r={};return ae.diagnosis_journey.forEach(s=>{r[s.diagnosis_id]||(r[s.diagnosis_id]={label:s.label,history:[]});const d=(s.visit_date||"").split("T")[0];r[s.diagnosis_id].history.find(c=>c.date.split("T")[0]===d&&c.status===s.status)||r[s.diagnosis_id].history.push({status:s.status,date:s.visit_date,doctor:s.con_name||s.mo_name}),r[s.diagnosis_id].label=s.label}),t.jsxs("div",{style:{background:"white",borderRadius:16,padding:16,border:"1px solid #f1f5f9",marginBottom:20,boxShadow:"0 1px 3px rgba(0,0,0,0.04)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsx("span",{style:{fontSize:14,fontWeight:800,color:"#0f172a"},children:"Diagnosis Journey"}),t.jsx("span",{style:{fontSize:10,color:"#94a3b8",marginLeft:"auto"},children:"Click to expand"})]}),Object.entries(r).map(([s,d],c)=>{const u=d.history[d.history.length-1],f=u.status==="Controlled"?"#059669":u.status==="Uncontrolled"?"#dc2626":"#d97706",h=u.status==="Controlled"?"#f0fdf4":u.status==="Uncontrolled"?"#fef2f2":"#fffbeb",m=xx===s,w={dm2:["hba1c","fpg"],dm1:["hba1c","fpg"],htn:["bp"],hypo:["tsh"],dyslipidemia:["ldl","triglycerides","hdl"],ckd:["egfr","creatinine","uacr"],nephropathy:["egfr","creatinine","uacr"],obesity:["weight"]}[s]||[],R=w.map(M=>{const $=ae[M];if(!$||!$.length)return null;const y=$[$.length-1],_=$[0],k=y.result||y.bp_sys||y.weight||y[M],le=_.result||_.bp_sys||_.weight||_[M];return{key:M,label:M.toUpperCase().replace("_"," "),latest:k,first:le,count:$.length}}).filter(Boolean);return t.jsxs("div",{style:{padding:"10px 0",borderBottom:c<Object.keys(r).length-1?"1px solid #f1f5f9":"none",cursor:"pointer"},onClick:()=>bx(m?null:s),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("span",{style:{fontSize:13,fontWeight:700,color:"#1e293b"},children:d.label}),t.jsx("span",{style:{fontSize:10,color:"#94a3b8"},children:m?"":""})]}),t.jsx("span",{style:{fontSize:11,fontWeight:700,color:f,background:h,padding:"3px 12px",borderRadius:20},children:u.status})]}),t.jsx("div",{style:{display:"flex",gap:6,marginTop:8,flexWrap:"wrap",alignItems:"center"},children:d.history.map((M,$)=>{const y=String(M.date||""),_=y.length>=10?new Date(y.slice(0,10)+"T12:00:00"):new Date(y),k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,padding:"3px 10px",borderRadius:14,background:M.status==="Controlled"?"#dcfce7":M.status==="Uncontrolled"?"#fef2f2":"#fef3c7",color:M.status==="Controlled"?"#059669":M.status==="Uncontrolled"?"#dc2626":"#d97706"},children:M.status==="Controlled"?"C":M.status==="Uncontrolled"?"U":"N"}),t.jsxs("div",{style:{fontSize:10,color:"#64748b",marginTop:2,fontWeight:600},children:[_.getDate()," ",k[_.getMonth()]," ",String(_.getFullYear()).slice(2)]})]}),$<d.history.length-1&&t.jsx("span",{style:{fontSize:14,color:"#cbd5e1"},children:""})]},$)})}),m&&t.jsxs("div",{style:{marginTop:10,padding:12,background:"#fafbfc",borderRadius:10,border:"1px solid #f1f5f9"},onClick:M=>M.stopPropagation(),children:[R.length>0&&t.jsxs("div",{style:{marginBottom:8},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#475569",marginBottom:6},children:" Key Biomarkers:"}),t.jsx("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:R.map((M,$)=>{const y=M.key==="egfr"||M.key==="hdl"?M.latest>M.first:M.latest<M.first;return t.jsxs("div",{style:{background:"white",borderRadius:10,padding:"8px 12px",border:"1px solid #f1f5f9",minWidth:110},children:[t.jsx("div",{style:{fontSize:9,color:"#94a3b8",fontWeight:600},children:M.label}),t.jsx("div",{style:{fontSize:16,fontWeight:800,color:y?"#059669":"#dc2626"},children:M.latest}),M.count>1&&t.jsxs("div",{style:{fontSize:9,color:y?"#059669":"#dc2626"},children:[y?"":""," from ",M.first," (",M.count," readings)"]})]},$)})})]}),(()=>{const M=(ae.med_timeline||[]).filter(_=>{const k=(_.pharmacy_match||_.name||"").toString();for(const[le,Ae]of Object.entries($m))if(w.some(J=>Ae.biomarkers.includes(J))&&Ae.patterns.test(k))return!0;return!1}),$={};M.forEach(_=>{const k=(_.pharmacy_match||_.name).toUpperCase();$[k]?_.is_active&&($[k]=_):$[k]=_});const y=Object.values($);return y.length===0?null:t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#475569",marginBottom:4},children:" Current Protocol:"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:y.map((_,k)=>t.jsxs("span",{style:{fontSize:9,padding:"2px 8px",borderRadius:8,background:_.is_active?"#f0fdf4":"#f8fafc",color:_.is_active?"#059669":"#94a3b8",border:`1px solid ${_.is_active?"#bbf7d0":"#e2e8f0"}`,fontWeight:600,textDecoration:_.is_active?"none":"line-through"},children:[_.pharmacy_match||_.name," ",_.dose," ",_.frequency]},k))})]})})()]})]},s)})]})})(),((lh=ae==null?void 0:ae.med_timeline)==null?void 0:lh.length)>0&&(()=>{const r={};ae.med_timeline.forEach(u=>{const f=(u.pharmacy_match||u.name).toUpperCase();r[f]||(r[f]={name:u.pharmacy_match||u.name,entries:[]}),r[f].entries.push(u)}),Object.values(r).forEach(u=>{const f=new Set;u.entries=u.entries.filter(h=>{const m=`${h.dose}|${h.frequency}|${h.visit_date}`;return f.has(m)?!1:(f.add(m),!0)})});const s=Object.values(r).filter(u=>{var f;return(f=u.entries[u.entries.length-1])==null?void 0:f.is_active}),d=Object.values(r).filter(u=>{var f;return!((f=u.entries[u.entries.length-1])!=null&&f.is_active)}),c=u=>{if(!u)return"";const f=new Date(u),h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${f.getDate()} ${h[f.getMonth()]} ${f.getFullYear()}`};return t.jsxs("div",{style:{background:"white",borderRadius:16,padding:16,border:"1px solid #f1f5f9",marginBottom:20,boxShadow:"0 1px 3px rgba(0,0,0,0.04)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsx("span",{style:{fontSize:14,fontWeight:800,color:"#0f172a"},children:"Medications"}),t.jsxs("span",{style:{fontSize:10,color:"#94a3b8",marginLeft:"auto"},children:[s.length," active",d.length>0?`  ${d.length} stopped`:""]})]}),s.map((u,f)=>{const h=u.entries[u.entries.length-1],m=u.entries[0],j=h.dose!==m.dose&&u.entries.length>1;return t.jsxs("div",{style:{display:"flex",gap:10,padding:"8px 0",borderBottom:f<s.length-1?"1px solid #f8fafc":"none",alignItems:"center"},children:[t.jsx("div",{style:{width:4,height:28,borderRadius:2,background:"#059669",flexShrink:0}}),t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#1e293b"},children:u.name}),j&&t.jsx("span",{style:{fontSize:8,padding:"1px 6px",background:"#fef3c7",color:"#d97706",borderRadius:10,fontWeight:700},children:"dose changed"})]}),t.jsxs("div",{style:{fontSize:10,color:"#64748b",marginTop:1},children:[h.dose,"  ",h.frequency,h.timing?`  ${h.timing}`:"","  ",t.jsxs("span",{style:{color:"#94a3b8"},children:["since ",c(m.started_date||m.visit_date)]})]})]})]},f)}),d.length>0&&t.jsxs("div",{style:{marginTop:8,paddingTop:8,borderTop:"1px dashed #e2e8f0"},children:[t.jsx("div",{style:{fontSize:10,color:"#94a3b8",fontWeight:700,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Stopped"}),d.map((u,f)=>t.jsxs("div",{style:{display:"flex",gap:10,padding:"4px 0",alignItems:"center"},children:[t.jsx("div",{style:{width:4,height:20,borderRadius:2,background:"#e2e8f0",flexShrink:0}}),t.jsx("span",{style:{fontSize:11,color:"#94a3b8",textDecoration:"line-through"},children:u.name})]},f))]})]})})(),((dh=P==null?void 0:P.lab_results)==null?void 0:dh.length)>0&&t.jsxs("div",{style:{background:"white",borderRadius:16,padding:16,border:"1px solid #f1f5f9",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",marginBottom:20},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsx("span",{style:{fontSize:14,fontWeight:800,color:"#0f172a"},children:"Recent Lab Results"})]}),(()=>{const r=P.lab_results||[],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=w=>{const R=String(w||""),M=R.length>=10?new Date(R.slice(0,10)+"T12:00:00"):new Date(R);return`${M.getDate()} ${s[M.getMonth()]} ${String(M.getFullYear()).slice(2)}`},c=w=>String(w||"").slice(0,10),u=[...new Set(r.map(w=>c(w.test_date)))].filter(Boolean).sort(),f=new Set,h=[];r.forEach(w=>{f.has(w.test_name)||(f.add(w.test_name),h.push(w.test_name))});const m={};r.forEach(w=>{m[w.test_name]||(m[w.test_name]={}),m[w.test_name][c(w.test_date)]=w});const j=u.slice(-6);return t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"2px solid #e2e8f0"},children:[t.jsx("th",{style:{textAlign:"left",padding:"6px 8px",fontSize:10,color:"#94a3b8",fontWeight:700,position:"sticky",left:0,background:"white",minWidth:100},children:"Test"}),t.jsx("th",{style:{padding:"6px 4px",fontSize:9,color:"#94a3b8",fontWeight:600,minWidth:40},children:"Ref"}),j.map(w=>t.jsx("th",{style:{padding:"6px 6px",fontSize:9,color:"#475569",fontWeight:700,minWidth:55,textAlign:"center"},children:d(w)},w))]})}),t.jsx("tbody",{children:h.map((w,R)=>{var M;return t.jsxs("tr",{style:{borderBottom:"1px solid #f1f5f9",background:R%2?"#fafbfc":"white"},children:[t.jsx("td",{style:{padding:"5px 8px",fontWeight:600,color:"#334155",position:"sticky",left:0,background:R%2?"#fafbfc":"white"},children:w}),t.jsx("td",{style:{padding:"5px 4px",fontSize:9,color:"#94a3b8",textAlign:"center"},children:((M=m[w][Object.keys(m[w])[0]])==null?void 0:M.ref_range)||""}),j.map($=>{var _;const y=(_=m[w])==null?void 0:_[$];return t.jsx("td",{style:{padding:"5px 6px",textAlign:"center",fontWeight:y?700:400,color:y?y.flag==="H"||y.flag==="HIGH"?"#dc2626":y.flag==="L"||y.flag==="LOW"?"#2563eb":"#374151":"#e2e8f0"},children:y?t.jsxs(t.Fragment,{children:[y.result,t.jsx("span",{style:{fontSize:8,fontWeight:400,color:"#94a3b8",marginLeft:1},children:y.unit})]}):""},$)})]},w)})})]})})})()]})]}):t.jsxs("div",{style:{textAlign:"center",padding:50,color:"#94a3b8"},children:[t.jsx("div",{style:{fontSize:40,marginBottom:12},children:""}),t.jsx("div",{style:{fontSize:15,fontWeight:600,color:"#64748b"},children:"Load a patient first"}),t.jsx("div",{style:{fontSize:12,color:"#cbd5e1",marginTop:6},children:"Use  Find to search existing patients"})]})}),e==="ai"&&t.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"calc(100vh - 120px)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[t.jsx("div",{style:{fontSize:15,fontWeight:800,color:"#7c2d12"},children:" Gini AI  Clinical Assistant"}),t.jsx("div",{style:{flex:1}}),b.name&&t.jsxs("span",{style:{fontSize:10,background:"#f0fdf4",color:"#059669",padding:"2px 8px",borderRadius:10,fontWeight:600},children:["Context: ",b.name]}),t.jsx("button",{onClick:()=>Gs([]),style:{fontSize:10,background:"#f1f5f9",border:"1px solid #e2e8f0",padding:"3px 8px",borderRadius:4,cursor:"pointer",color:"#64748b"},children:"Clear Chat"})]}),t.jsxs("div",{style:{marginBottom:10,background:"#faf5ff",borderRadius:10,padding:10,border:"1px solid #e9d5ff"},children:[t.jsx("label",{style:{fontSize:10,fontWeight:700,color:"#7c3aed",display:"block",marginBottom:4},children:"Ask about patient, medications, guidelines, protocols..."}),t.jsxs("div",{style:{display:"flex",gap:6},children:[t.jsx("input",{value:Ps,onChange:r=>td(r.target.value),placeholder:"e.g., Drug interactions check, ADA guidelines for this HbA1c...",onKeyDown:r=>r.key==="Enter"&&!r.shiftKey&&gp(),style:{flex:1,padding:"10px 14px",border:"2px solid #e9d5ff",borderRadius:10,fontSize:13,outline:"none",background:"white"},onFocus:r=>r.target.style.borderColor="#7c3aed",onBlur:r=>r.target.style.borderColor="#e9d5ff"}),t.jsx("button",{onClick:gp,disabled:so||!Ps.trim(),style:{padding:"10px 20px",background:so?"#94a3b8":"#7c2d12",color:"white",border:"none",borderRadius:10,fontSize:13,fontWeight:700,cursor:so?"wait":"pointer"},children:so?"":"Send "})]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginTop:6},children:["Drug interactions","ADA guidelines","Suggest investigations","Diabetic foot protocol","Explain lab trends","Referral letter"].map(r=>t.jsx("button",{onClick:()=>td(r),style:{fontSize:9,background:"white",border:"1px solid #d8b4fe",padding:"3px 8px",borderRadius:12,cursor:"pointer",color:"#7c3aed",fontWeight:600},children:r},r))})]}),t.jsxs("div",{ref:nd,style:{flex:1,overflow:"auto",display:"flex",flexDirection:"column",gap:8},children:[ed.length===0&&t.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#94a3b8"},children:[t.jsx("div",{style:{fontSize:32,marginBottom:8},children:""}),t.jsx("div",{style:{fontSize:13,fontWeight:600},children:"Ask anything about this patient"}),t.jsx("div",{style:{fontSize:11,marginTop:4},children:"Uses full patient context  diagnoses, meds, labs, vitals"})]}),ed.map((r,s)=>t.jsx("div",{style:{display:"flex",justifyContent:r.role==="user"?"flex-end":"flex-start"},children:t.jsxs("div",{style:{maxWidth:"85%",padding:"10px 14px",borderRadius:r.role==="user"?"14px 14px 4px 14px":"14px 14px 14px 4px",background:r.role==="user"?"#1e293b":"#f8fafc",color:r.role==="user"?"white":"#1e293b",border:r.role==="user"?"none":"1px solid #e2e8f0",fontSize:12,lineHeight:1.7,whiteSpace:"pre-wrap"},children:[r.role==="assistant"&&t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#7c3aed",marginBottom:4},children:" GINI AI"}),r.content]})},s)),so&&t.jsx("div",{style:{display:"flex",justifyContent:"flex-start"},children:t.jsx("div",{style:{padding:"10px 14px",background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"14px 14px 14px 4px"},children:t.jsx("div",{style:{fontSize:12,color:"#94a3b8"},children:" Thinking..."})})})]})]}),e==="reports"&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[t.jsx("div",{style:{fontSize:15,fontWeight:800,color:"#1e293b"},children:" Clinical Reports"}),t.jsx("div",{style:{flex:1}}),t.jsx("button",{onClick:()=>So(Jn,ro),disabled:Ru,style:{background:"#2563eb",color:"white",border:"none",padding:"4px 12px",borderRadius:4,fontSize:10,fontWeight:700,cursor:"pointer"},children:Ru?" Loading...":" Refresh"})]}),t.jsx("div",{style:{display:"flex",gap:0,marginBottom:10,borderRadius:8,overflow:"hidden",border:"1px solid #e2e8f0"},children:[{id:"summary",label:" Dashboard"},{id:"diagnoses",label:" Diagnoses"},{id:"query",label:" AI Query"},{id:"doctors",label:" Doctors"}].map(r=>t.jsx("button",{onClick:()=>{ox(r.id),(!Kn||!si||!Fl)&&So(Jn,ro)},style:{flex:1,padding:"7px 4px",fontSize:10,fontWeight:600,cursor:"pointer",border:"none",background:oo===r.id?"#1e293b":"white",color:oo===r.id?"white":"#64748b"},children:r.label},r.id))}),oo==="summary"&&t.jsxs("div",{children:[t.jsx("div",{style:{display:"flex",gap:4,marginBottom:8,flexWrap:"wrap"},children:[{l:"Today",v:"today"},{l:"This Week",v:"week"},{l:"This Month",v:"month"},{l:"Quarter",v:"quarter"},{l:"Year",v:"year"},{l:"All",v:"all"}].map(r=>t.jsx("button",{onClick:()=>{rx(r.v),So(r.v,ro)},style:{padding:"3px 10px",borderRadius:20,fontSize:10,fontWeight:600,cursor:"pointer",border:Jn===r.v?"2px solid #2563eb":"1px solid #e2e8f0",background:Jn===r.v?"#eff6ff":"white",color:Jn===r.v?"#2563eb":"#64748b"},children:r.l},r.v))}),Kn?t.jsxs("div",{children:[t.jsx("div",{style:{background:"linear-gradient(135deg,#1e293b,#334155)",borderRadius:10,padding:"12px 16px",marginBottom:10,color:"white"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:28,fontWeight:900},children:Kn.total}),t.jsx("div",{style:{fontSize:11,opacity:.7},children:"Patients Seen"})]}),Kn.by_doctor&&Object.keys(Kn.by_doctor).length>0&&t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,justifyContent:"flex-end",maxWidth:"60%"},children:Object.entries(Kn.by_doctor).map(([r,s])=>t.jsxs("span",{style:{background:"rgba(255,255,255,.15)",borderRadius:12,padding:"2px 8px",fontSize:9},children:[r,": ",s]},r))})]})}),t.jsx("div",{style:{fontSize:11,fontWeight:800,color:"#1e293b",marginBottom:6},children:" BIOMARKER CONTROL RATES"}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,marginBottom:12},children:(Kn.biomarkers||[]).filter(r=>r.tested>0).map(r=>{const s=r.pct,d=s>=70?"#059669":s>=40?"#d97706":"#dc2626",c=ix===r.key;return t.jsxs("div",{children:[t.jsxs("div",{onClick:()=>sx(c?null:r.key),style:{background:"white",border:"1px solid #e2e8f0",borderRadius:8,padding:"8px 12px",cursor:"pointer",transition:"all .15s",borderColor:c?"#2563eb":"#e2e8f0",boxShadow:c?"0 0 0 2px rgba(37,99,235,.15)":"none"},onMouseEnter:u=>{c||(u.currentTarget.style.borderColor="#cbd5e1")},onMouseLeave:u=>{c||(u.currentTarget.style.borderColor="#e2e8f0")},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[t.jsx("span",{style:{fontSize:14},children:r.emoji}),t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:12,fontWeight:700},children:r.label}),t.jsxs("span",{style:{fontSize:11,fontWeight:800,color:d},children:[s,"%"]})]}),t.jsxs("div",{style:{fontSize:9,color:"#94a3b8"},children:["Target: ",r.target]})]})]}),t.jsxs("div",{style:{display:"flex",height:6,borderRadius:3,overflow:"hidden",background:"#f1f5f9",gap:1},children:[r.in_control>0&&t.jsx("div",{style:{width:`${r.in_control/r.total*100}%`,background:"#22c55e",borderRadius:3}}),r.warning>0&&t.jsx("div",{style:{width:`${r.warning/r.total*100}%`,background:"#f59e0b",borderRadius:3}}),r.out_control>0&&t.jsx("div",{style:{width:`${r.out_control/r.total*100}%`,background:"#ef4444",borderRadius:3}}),r.no_data>0&&t.jsx("div",{style:{width:`${r.no_data/r.total*100}%`,background:"#e2e8f0",borderRadius:3}})]}),t.jsxs("div",{style:{display:"flex",gap:8,fontSize:9,color:"#64748b",marginTop:3},children:[t.jsxs("span",{style:{color:"#059669"},children:[" ",r.in_control]}),r.warning>0&&t.jsxs("span",{style:{color:"#d97706"},children:[" ",r.warning]}),t.jsxs("span",{style:{color:"#dc2626"},children:[" ",r.out_control]}),r.no_data>0&&t.jsxs("span",{style:{color:"#94a3b8"},children:[" ",r.no_data," no data"]}),t.jsx("span",{style:{marginLeft:"auto",fontSize:8,color:"#94a3b8"},children:c?" Hide":" Details"})]})]}),c&&t.jsxs("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderTop:"none",borderRadius:"0 0 8px 8px",padding:6,maxHeight:300,overflow:"auto"},children:[r.patients.filter(u=>u.status!=="no_data").map((u,f)=>{var h;return t.jsxs("div",{onClick:()=>Ad({id:u.id,name:u.name,age:u.age,sex:u.sex,file_no:u.file_no}),style:{display:"flex",alignItems:"center",gap:6,padding:"4px 6px",borderBottom:"1px solid #e2e8f0",cursor:"pointer",fontSize:10,borderRadius:4},onMouseEnter:m=>m.currentTarget.style.background="#eff6ff",onMouseLeave:m=>m.currentTarget.style.background="transparent",children:[t.jsx("span",{style:{fontSize:11},children:u.status==="in_control"?"":u.status==="warning"?"":""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("strong",{children:u.name}),t.jsxs("span",{style:{color:"#94a3b8",marginLeft:4},children:[u.age,"Y/",(h=u.sex)==null?void 0:h.charAt(0)]})]}),t.jsx("span",{style:{fontWeight:700,fontSize:11,color:u.status==="in_control"?"#059669":u.status==="warning"?"#d97706":"#dc2626"},children:u.display||""}),t.jsx("span",{style:{fontSize:8,color:"#94a3b8"},children:u.con_name})]},f)}),r.patients.filter(u=>u.status==="no_data").length>0&&t.jsxs("div",{style:{fontSize:9,color:"#94a3b8",padding:"4px 6px",fontStyle:"italic"},children:["+ ",r.patients.filter(u=>u.status==="no_data").length," patients with no ",r.label," data"]})]})]},r.key)})}),t.jsx("div",{style:{fontSize:11,fontWeight:800,color:"#1e293b",marginBottom:6},children:" PATIENT TARGET SCORECARD"}),t.jsx("div",{style:{maxHeight:400,overflow:"auto"},children:(Kn.patients||[]).map((r,s)=>{var u,f;const d=r.pct===null?"#94a3b8":r.pct>=70?"#059669":r.pct>=40?"#d97706":"#dc2626",c=ax===r.id;return t.jsxs("div",{style:{marginBottom:4},children:[t.jsxs("div",{onClick:()=>lx(c?null:r.id),style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",background:"white",border:"1px solid #e2e8f0",borderRadius:8,cursor:"pointer",fontSize:11,borderColor:c?"#2563eb":"#e2e8f0"},onMouseEnter:h=>{c||(h.currentTarget.style.background="#f8fafc")},onMouseLeave:h=>{c||(h.currentTarget.style.background="white")},children:[t.jsx("div",{style:{width:36,height:36,borderRadius:"50%",border:`3px solid ${d}`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:t.jsx("span",{style:{fontSize:11,fontWeight:800,color:d},children:r.pct!==null?`${r.pct}%`:""})}),t.jsxs("div",{style:{flex:1,minWidth:0},children:[t.jsxs("div",{children:[t.jsx("strong",{children:r.name})," ",t.jsxs("span",{style:{color:"#94a3b8"},children:[r.age,"Y/",(u=r.sex)==null?void 0:u.charAt(0)," ",r.file_no&&`| ${r.file_no}`]})]}),t.jsxs("div",{style:{fontSize:9,color:"#64748b"},children:[r.targets_total>0?`${r.targets_met}/${r.targets_total} targets met`:"No lab data",r.con_name&&`  ${r.con_name}`]})]}),t.jsx("div",{style:{display:"flex",gap:2,flexShrink:0,flexWrap:"wrap",maxWidth:100,justifyContent:"flex-end"},children:Object.entries(r.conditions||{}).map(([h,m])=>t.jsx("span",{title:`${m.label}: ${m.val} (${m.in_control?"In target":"Out of target"}  ${m.target})`,style:{width:8,height:8,borderRadius:"50%",background:m.in_control?"#22c55e":"#ef4444"}},h))}),t.jsx("span",{style:{fontSize:9,color:"#94a3b8"},children:c?"":""})]}),c&&t.jsxs("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderTop:"none",borderRadius:"0 0 8px 8px",padding:8},children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(130px,1fr))",gap:4,marginBottom:6},children:Object.entries(r.conditions||{}).map(([h,m])=>t.jsxs("div",{style:{background:m.in_control?"#f0fdf4":"#fef2f2",border:`1px solid ${m.in_control?"#bbf7d0":"#fecaca"}`,borderRadius:6,padding:"4px 8px"},children:[t.jsxs("div",{style:{fontSize:9,color:"#64748b"},children:[m.emoji," ",m.label]}),t.jsx("div",{style:{fontSize:13,fontWeight:800,color:m.in_control?"#059669":"#dc2626"},children:(typeof m.val=="number"&&m.label==="Blood Pressure",m.val)}),t.jsxs("div",{style:{fontSize:8,color:"#94a3b8"},children:["Target: ",m.target]})]},h))}),((f=r.diagnoses)==null?void 0:f.length)>0&&t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3,marginBottom:4},children:(r.diagnoses||[]).filter((h,m,j)=>j.findIndex(w=>w.id===h.id)===m).map((h,m)=>t.jsx("span",{style:{fontSize:9,padding:"1px 6px",borderRadius:4,background:h.status==="Uncontrolled"?"#fef2f2":h.status==="Controlled"?"#f0fdf4":"#f1f5f9",color:h.status==="Uncontrolled"?"#dc2626":h.status==="Controlled"?"#059669":"#64748b"},children:h.label},m))}),t.jsx("button",{onClick:()=>Ad({id:r.id,name:r.name,age:r.age,sex:r.sex,file_no:r.file_no}),style:{background:"#2563eb",color:"white",border:"none",padding:"3px 12px",borderRadius:4,fontSize:10,fontWeight:700,cursor:"pointer"},children:"Open Patient "})]})]},s)})})]}):t.jsx("div",{style:{textAlign:"center",padding:30},children:t.jsx("button",{onClick:()=>So(Jn,ro),style:{background:"#2563eb",color:"white",border:"none",padding:"10px 24px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer"},children:"Load Reports"})})]}),oo==="diagnoses"&&t.jsx("div",{children:si?si.length===0?t.jsxs("div",{style:{textAlign:"center",padding:30,color:"#94a3b8"},children:[t.jsx("div",{style:{fontSize:24,marginBottom:4},children:""}),t.jsx("div",{style:{fontSize:12},children:"No diagnosis data yet. Import patient records to see distribution."})]}):t.jsxs("div",{children:[si.slice(0,12).map((r,s)=>{const d=Math.max(...si.map(u=>u.total)),c=r.total>0?Math.round(r.controlled/r.total*100):0;return t.jsxs("div",{style:{marginBottom:6},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,marginBottom:2},children:[t.jsx("strong",{children:r.label||r.id}),t.jsxs("span",{style:{color:"#64748b"},children:[r.total," patients"]})]}),t.jsxs("div",{style:{display:"flex",height:20,borderRadius:4,overflow:"hidden",background:"#f1f5f9"},children:[r.controlled>0&&t.jsx("div",{style:{width:`${r.controlled/d*100}%`,background:"#22c55e",transition:"width .3s"},title:`Controlled: ${r.controlled}`}),r.uncontrolled>0&&t.jsx("div",{style:{width:`${r.uncontrolled/d*100}%`,background:"#ef4444",transition:"width .3s"},title:`Uncontrolled: ${r.uncontrolled}`}),r.present>0&&t.jsx("div",{style:{width:`${r.present/d*100}%`,background:"#3b82f6",transition:"width .3s"},title:`Present: ${r.present}`})]}),t.jsxs("div",{style:{display:"flex",gap:8,fontSize:9,color:"#64748b",marginTop:1},children:[r.controlled>0&&t.jsxs("span",{children:[" ",r.controlled," controlled",r.total>0?` (${c}%)`:""]}),r.uncontrolled>0&&t.jsxs("span",{children:[" ",r.uncontrolled," uncontrolled"]}),r.present>0&&t.jsxs("span",{children:[" ",r.present," present"]}),r.avg_hba1c&&t.jsxs("span",{children:[" Avg HbA1c: ",r.avg_hba1c,"%"]})]})]},s)}),t.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center",fontSize:10,color:"#64748b",marginTop:8},children:[t.jsx("span",{children:" Controlled"}),t.jsx("span",{children:" Uncontrolled"}),t.jsx("span",{children:" Present"})]})]}):t.jsx("div",{style:{textAlign:"center",padding:30},children:t.jsx("button",{onClick:()=>So(Jn,ro),style:{background:"#2563eb",color:"white",border:"none",padding:"10px 24px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer"},children:"Load Reports"})})}),oo==="query"&&t.jsxs("div",{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg,#faf5ff,#eff6ff)",borderRadius:10,padding:12,marginBottom:10,border:"1px solid #c4b5fd"},children:[t.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#6b21a8",marginBottom:6},children:" Ask anything about your patient data"}),t.jsx("div",{style:{display:"flex",gap:4,flexWrap:"wrap",marginBottom:8},children:["DM2 patients with HbA1c > 8","Patients on Mounjaro - weight trends","Overdue for HbA1c (>3 months)","HTN patients with BP > 140/90","Most prescribed medications","Patients needing follow-up"].map(r=>t.jsx("button",{onClick:()=>Lu(r),style:{fontSize:9,background:"white",border:"1px solid #d8b4fe",padding:"3px 8px",borderRadius:20,cursor:"pointer",color:"#7c3aed",fontWeight:600},children:r},r))}),t.jsxs("div",{style:{display:"flex",gap:6},children:[t.jsx("input",{value:Es,onChange:r=>Lu(r.target.value),placeholder:"Ask a question about your patients...",onKeyDown:r=>r.key==="Enter"&&mp(),style:{flex:1,padding:"8px 12px",border:"1px solid #d8b4fe",borderRadius:8,fontSize:12,outline:"none"}}),t.jsx("button",{onClick:mp,disabled:As||!Es.trim(),style:{padding:"8px 16px",background:As?"#94a3b8":"#7c3aed",color:"white",border:"none",borderRadius:8,fontSize:12,fontWeight:700,cursor:As?"wait":"pointer"},children:As?"":"Ask "})]})]}),$l&&t.jsxs("div",{style:{background:"white",border:"1px solid #e2e8f0",borderRadius:10,padding:14,fontSize:12,lineHeight:1.7,maxHeight:500,overflow:"auto"},children:[t.jsx("div",{style:{fontSize:9,fontWeight:700,color:"#7c3aed",marginBottom:6},children:" AI ANALYSIS"}),$l.split(`
`).map((r,s)=>{var u,f;const d=r.trim();if(!d)return t.jsx("div",{style:{height:6}},s);if(d.startsWith("## "))return t.jsx("div",{style:{fontSize:13,fontWeight:800,color:"#1e293b",marginTop:10,marginBottom:4},children:d.replace(/^##\s*/,"").replace(/\*\*/g,"")},s);if(d.startsWith("# "))return t.jsx("div",{style:{fontSize:14,fontWeight:800,color:"#1e293b",marginTop:10,marginBottom:4},children:d.replace(/^#\s*/,"").replace(/\*\*/g,"")},s);if(d.startsWith("|")&&d.endsWith("|")){if(d.includes("---"))return null;const h=d.split("|").filter(Boolean).map(j=>j.trim()),m=s>0&&((f=(u=$l.split(`
`)[s+1])==null?void 0:u.trim())==null?void 0:f.includes("---"));return t.jsx("div",{style:{display:"flex",gap:0,borderBottom:"1px solid #e2e8f0"},children:h.map((j,w)=>t.jsx("div",{style:{flex:1,padding:"4px 8px",fontSize:11,fontWeight:m?700:400,background:m?"#f1f5f9":"white",color:m?"#1e293b":"#334155"},children:j.replace(/\*\*/g,"")},w))},s)}if(d.startsWith("- ")){const m=d.slice(2).split(/(\*\*[^*]+\*\*)/g);return t.jsxs("div",{style:{display:"flex",gap:6,padding:"2px 0",paddingLeft:8},children:[t.jsx("span",{style:{color:"#7c3aed",fontWeight:800},children:""}),t.jsx("span",{children:m.map((j,w)=>j.startsWith("**")?t.jsx("strong",{style:{color:"#1e293b"},children:j.replace(/\*\*/g,"")},w):t.jsx("span",{children:j},w))})]},s)}const c=d.split(/(\*\*[^*]+\*\*)/g);return t.jsx("div",{style:{padding:"1px 0"},children:c.map((h,m)=>h.startsWith("**")?t.jsx("strong",{style:{color:"#1e293b"},children:h.replace(/\*\*/g,"")},m):t.jsx("span",{children:h},m))},s)})]})]}),oo==="doctors"&&t.jsx("div",{children:Fl?t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#1e293b",color:"white"},children:[t.jsx("th",{style:{padding:"8px 10px",textAlign:"left"},children:"Doctor"}),t.jsx("th",{style:{padding:"8px 6px",textAlign:"center"},children:"Patients"}),t.jsx("th",{style:{padding:"8px 6px",textAlign:"center"},children:"Visits"}),t.jsx("th",{style:{padding:"8px 6px",textAlign:"center"},children:"Today"}),t.jsx("th",{style:{padding:"8px 6px",textAlign:"center"},children:"Week"}),t.jsx("th",{style:{padding:"8px 6px",textAlign:"center"},children:"Month"})]})}),t.jsx("tbody",{children:Fl.map((r,s)=>t.jsxs("tr",{style:{borderBottom:"1px solid #f1f5f9",background:s%2?"#fafafa":"white"},children:[t.jsx("td",{style:{padding:"6px 10px",fontWeight:700},children:r.doctor}),t.jsx("td",{style:{padding:"6px 6px",textAlign:"center",fontWeight:700,color:"#1e40af"},children:r.total_patients}),t.jsx("td",{style:{padding:"6px 6px",textAlign:"center",color:"#64748b"},children:r.total_visits}),t.jsx("td",{style:{padding:"6px 6px",textAlign:"center",fontWeight:700,color:parseInt(r.today)>0?"#059669":"#cbd5e1"},children:r.today}),t.jsx("td",{style:{padding:"6px 6px",textAlign:"center",color:"#475569"},children:r.this_week}),t.jsx("td",{style:{padding:"6px 6px",textAlign:"center",color:"#475569"},children:r.this_month})]},s))})]}):t.jsx("div",{style:{textAlign:"center",padding:30},children:t.jsx("button",{onClick:()=>So(Jn,ro),style:{background:"#2563eb",color:"white",border:"none",padding:"10px 24px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer"},children:"Load Reports"})})})]}),e==="ci"&&t.jsxs("div",{style:{maxWidth:920,margin:"0 auto"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#0f172a"},children:" Clinical Intelligence"}),t.jsx("div",{style:{fontSize:11,color:"#64748b",marginTop:2},children:"AI performance & clinical reasoning capture"})]}),t.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[t.jsx("div",{style:{display:"flex",borderRadius:8,overflow:"hidden",border:"1px solid #e2e8f0"},children:[["month","Month"],["quarter","Quarter"],["year","Year"],["all","All"]].map(([r,s])=>t.jsx("button",{onClick:()=>{Zm(r),Td(r)},style:{padding:"5px 10px",fontSize:10,fontWeight:700,border:"none",cursor:"pointer",background:Hl===r?"#0f172a":"white",color:Hl===r?"white":"#64748b"},children:s},r))}),t.jsx("button",{onClick:()=>Td(),style:{fontSize:12,padding:"4px 8px",border:"1px solid #e2e8f0",borderRadius:8,cursor:"pointer",background:"white"},children:""})]})]}),Jm?t.jsxs("div",{style:{textAlign:"center",padding:40},children:[t.jsx("div",{style:{fontSize:24},children:""}),t.jsx("div",{style:{fontSize:13,color:"#94a3b8"},children:"Loading Clinical Intelligence..."})]}):et?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:10,marginBottom:16},children:[{label:"Reasoning Captured",value:et.overview.cr_total,sub:`${et.overview.cr_month} this month`,icon:"",bg:"linear-gradient(135deg,#e0f2fe,#bae6fd)",color:"#0369a1"},{label:"Rx Reviews",value:et.overview.rx_total,sub:`${et.overview.rx_month} this month`,icon:"",bg:"linear-gradient(135deg,#f5f3ff,#ede9fe)",color:"#7c3aed"},{label:"Agreement Rate",value:(()=>{const r=et.overview.agreement,s=r.reduce((c,u)=>c+parseInt(u.count),0),d=r.find(c=>c.agreement_level==="agree");return s?Math.round(parseInt((d==null?void 0:d.count)||0)/s*100)+"%":""})(),sub:"AI accuracy",icon:"",bg:"linear-gradient(135deg,#f0fdf4,#dcfce7)",color:"#059669"},{label:"Audio Hours",value:et.overview.audio_hours||0,sub:"recordings",icon:"",bg:"linear-gradient(135deg,#fffbeb,#fef3c7)",color:"#d97706"}].map((r,s)=>t.jsxs("div",{style:{background:r.bg,borderRadius:12,padding:"12px 14px"},children:[t.jsxs("div",{style:{fontSize:9,color:"#64748b",fontWeight:700,textTransform:"uppercase"},children:[r.icon," ",r.label]}),t.jsx("div",{style:{fontSize:22,fontWeight:900,color:r.color,marginTop:2},children:r.value}),t.jsx("div",{style:{fontSize:9,color:"#94a3b8"},children:r.sub})]},s))}),et.overview.agreement.length>0&&t.jsxs("div",{style:{background:"white",borderRadius:12,border:"1px solid #f1f5f9",padding:14,marginBottom:16},children:[t.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#334155",marginBottom:8},children:" AI Review Breakdown"}),t.jsx("div",{style:{display:"flex",gap:8},children:et.overview.agreement.map((r,s)=>{const d=et.overview.agreement.reduce((h,m)=>h+parseInt(m.count),0),c=Math.round(parseInt(r.count)/d*100),u={agree:"#059669",partially_agree:"#d97706",disagree:"#dc2626"},f={agree:" Agree",partially_agree:" Partial",disagree:" Disagree"};return t.jsxs("div",{style:{flex:1,textAlign:"center"},children:[t.jsxs("div",{style:{fontSize:24,fontWeight:900,color:u[r.agreement_level]},children:[c,"%"]}),t.jsx("div",{style:{fontSize:10,color:"#64748b"},children:f[r.agreement_level]}),t.jsx("div",{style:{height:6,background:"#f1f5f9",borderRadius:3,marginTop:4},children:t.jsx("div",{style:{height:6,borderRadius:3,background:u[r.agreement_level],width:`${c}%`}})})]},s)})})]}),((ch=et.disagreement_tags)==null?void 0:ch.length)>0&&t.jsxs("div",{style:{background:"white",borderRadius:12,border:"1px solid #f1f5f9",padding:14,marginBottom:16},children:[t.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#334155",marginBottom:8},children:" Top Disagreement Reasons"}),et.disagreement_tags.map((r,s)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"4px 0"},children:[t.jsx("div",{style:{flex:1,fontSize:11,color:"#475569"},children:r.tag}),t.jsx("div",{style:{width:120,height:8,background:"#f1f5f9",borderRadius:4},children:t.jsx("div",{style:{height:8,borderRadius:4,background:"#dc2626",width:`${Math.min(100,parseInt(r.count)*20)}%`}})}),t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#dc2626",minWidth:20,textAlign:"right"},children:r.count})]},s))]}),((fh=et.doctor_stats)==null?void 0:fh.length)>0&&t.jsxs("div",{style:{background:"white",borderRadius:12,border:"1px solid #f1f5f9",padding:14,marginBottom:16},children:[t.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#334155",marginBottom:8},children:" Doctor Contributions"}),et.doctor_stats.map((r,s)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:s<et.doctor_stats.length-1?"1px solid #f8fafc":"none"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:600},children:r.doctor_name||"Unknown"}),t.jsxs("div",{style:{display:"flex",gap:12,fontSize:10},children:[t.jsxs("span",{style:{color:"#0369a1"},children:[" ",r.reasoning_count," reasoning"]}),t.jsxs("span",{style:{color:"#7c3aed"},children:[" ",r.rx_count," reviews"]})]})]},s))]}),t.jsxs("div",{style:{background:"white",borderRadius:12,border:"1px solid #f1f5f9",padding:14,marginBottom:16},children:[t.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#334155",marginBottom:8},children:" Clinical Reasoning Feed"}),((uh=et.reasoning_feed)==null?void 0:uh.length)===0&&t.jsx("div",{style:{textAlign:"center",padding:20,color:"#94a3b8",fontSize:12},children:"No entries yet  start capturing reasoning in consultations"}),(ph=et.reasoning_feed)==null?void 0:ph.map((r,s)=>{var d;return t.jsxs("div",{onClick:()=>Qm(Mu===r.id?null:r.id),style:{padding:"8px 0",borderBottom:s<et.reasoning_feed.length-1?"1px solid #f8fafc":"none",cursor:"pointer"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[t.jsx("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:6,background:"#e0f2fe",color:"#0369a1",fontWeight:700},children:r.primary_condition||"General"}),t.jsx("span",{style:{fontSize:10,fontWeight:600},children:r.file_no||r.patient_name}),t.jsxs("span",{style:{fontSize:9,color:"#94a3b8"},children:["by ",r.doctor_name]})]}),t.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center"},children:[r.audio_url&&t.jsx("span",{style:{fontSize:10},children:""}),t.jsx("span",{style:{fontSize:9,color:"#94a3b8"},children:new Date(r.created_at).toLocaleDateString("en-IN",{day:"2-digit",month:"short"})})]})]}),Mu===r.id&&t.jsxs("div",{style:{marginTop:6,padding:8,background:"#f0f9ff",borderRadius:6,fontSize:11,color:"#334155",lineHeight:1.6},children:[r.reasoning_text&&t.jsx("div",{children:r.reasoning_text}),r.audio_transcript&&t.jsxs("div",{style:{marginTop:4,fontStyle:"italic",color:"#64748b"},children:[" ",r.audio_transcript]}),((d=r.reasoning_tags)==null?void 0:d.length)>0&&t.jsx("div",{style:{marginTop:4,display:"flex",gap:3,flexWrap:"wrap"},children:r.reasoning_tags.map((c,u)=>t.jsx("span",{style:{fontSize:8,padding:"1px 6px",borderRadius:4,background:"#dbeafe",color:"#1d4ed8"},children:c},u))})]})]},r.id)})]}),t.jsxs("div",{style:{background:"white",borderRadius:12,border:"1px solid #f1f5f9",padding:14,marginBottom:16},children:[t.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#334155",marginBottom:8},children:" Rx Review Feedback Feed"}),((hh=et.rx_feed)==null?void 0:hh.length)===0&&t.jsx("div",{style:{textAlign:"center",padding:20,color:"#94a3b8",fontSize:12},children:"No feedback yet  review AI prescriptions to generate data"}),(gh=et.rx_feed)==null?void 0:gh.map((r,s)=>{var u;const d={agree:"#059669",partially_agree:"#d97706",disagree:"#dc2626"},c={agree:" Agree",partially_agree:" Partial",disagree:" Disagree"};return t.jsxs("div",{onClick:()=>qm(Tu===r.id?null:r.id),style:{padding:"8px 0",borderBottom:s<et.rx_feed.length-1?"1px solid #f8fafc":"none",cursor:"pointer"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[t.jsx("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:6,background:d[r.agreement_level]+"15",color:d[r.agreement_level],fontWeight:700},children:c[r.agreement_level]}),t.jsx("span",{style:{fontSize:10,fontWeight:600},children:r.file_no||r.patient_name}),r.severity&&t.jsx("span",{style:{fontSize:8,padding:"1px 5px",borderRadius:3,background:r.severity==="major"?"#fef2f2":"#fffbeb",color:r.severity==="major"?"#dc2626":"#d97706",fontWeight:700},children:r.severity})]}),t.jsx("span",{style:{fontSize:9,color:"#94a3b8"},children:new Date(r.created_at).toLocaleDateString("en-IN",{day:"2-digit",month:"short"})})]}),Tu===r.id&&t.jsxs("div",{style:{marginTop:6,padding:8,background:"#faf5ff",borderRadius:6,fontSize:11,lineHeight:1.6},children:[r.feedback_text&&t.jsxs("div",{children:[t.jsx("strong",{children:"Feedback:"})," ",r.feedback_text]}),r.correct_approach&&t.jsxs("div",{style:{marginTop:4},children:[t.jsx("strong",{children:"Correct approach:"})," ",r.correct_approach]}),r.reason_for_difference&&t.jsxs("div",{style:{marginTop:4,color:"#dc2626"},children:[t.jsx("strong",{children:"Why AI was wrong:"})," ",r.reason_for_difference]}),((u=r.disagreement_tags)==null?void 0:u.length)>0&&t.jsx("div",{style:{marginTop:4,display:"flex",gap:3,flexWrap:"wrap"},children:r.disagreement_tags.map((f,h)=>t.jsx("span",{style:{fontSize:8,padding:"1px 6px",borderRadius:4,background:"#ede9fe",color:"#7c3aed"},children:f},h))})]})]},r.id)})]}),t.jsx("div",{style:{textAlign:"center",padding:10},children:t.jsx("button",{onClick:async()=>{const s=await(await fetch(`${ie}/api/reports/clinical-intelligence/export`,{headers:ze()})).json(),d=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),c=URL.createObjectURL(d),u=document.createElement("a");u.href=c,u.download=`clinical-intelligence-${new Date().toISOString().slice(0,10)}.json`,u.click()},style:{background:"#1e293b",color:"white",border:"none",padding:"8px 20px",borderRadius:8,fontSize:11,fontWeight:700,cursor:"pointer"},children:" Export All Data (JSON)"})})]}):t.jsx("div",{style:{textAlign:"center",padding:40},children:t.jsx("button",{onClick:()=>Td(),style:{background:"#0ea5e9",color:"white",border:"none",padding:"12px 30px",borderRadius:8,fontSize:14,fontWeight:700,cursor:"pointer"},children:" Load Report"})})]})]})}const Ur=window.location.origin,AS=void 0,uc=[{id:"prescription",label:" Prescription",color:"#2563eb"},{id:"blood_test",label:" Blood Test",color:"#dc2626"},{id:"thyroid",label:" Thyroid",color:"#7c3aed"},{id:"lipid",label:" Lipid Profile",color:"#f59e0b"},{id:"kidney",label:" Kidney Fn",color:"#059669"},{id:"hba1c",label:" HbA1c",color:"#e11d48"},{id:"urine",label:" Urine",color:"#ca8a04"},{id:"xray",label:" X-Ray",color:"#475569"},{id:"usg",label:" Ultrasound",color:"#6366f1"},{id:"mri",label:" MRI / CT",color:"#4f46e5"},{id:"dexa",label:" DEXA",color:"#78716c"},{id:"ecg",label:" ECG/Echo",color:"#be123c"},{id:"ncs",label:" NCS/EMG",color:"#0369a1"},{id:"eye",label:" Eye/Fundus",color:"#15803d"},{id:"other",label:" Other",color:"#64748b"}],MS=async(e,n,o=3)=>{for(let i=0;i<=o;i++){const a=await fetch(e,n);if(a.status===529&&i<o){await new Promise(l=>setTimeout(l,2e3*(i+1)));continue}return a}};function TS(){var oe,ut,vt,qe;const[e,n]=S.useState("home"),[o,i]=S.useState([]),[a,l]=S.useState(""),[p,g]=S.useState(null),[x,A]=S.useState(null),[G,D]=S.useState("records"),[b,U]=S.useState(!1),[N,W]=S.useState("camera"),[F,v]=S.useState(null),[E,L]=S.useState(null),[B,K]=S.useState({doctor:"",hospital:"",specialty:"",date:""}),[z,q]=S.useState(null),[Z,me]=S.useState(0),[C,Ie]=S.useState(!1),[ne,Oe]=S.useState(null),[Wt,Tt]=S.useState(null),[T,ve]=S.useState(null),Y=S.useRef(null),ce=S.useRef(null);S.useEffect(()=>{se()},[]);const se=async()=>{try{const O=await fetch(`${Ur}/api/patients?limit=50`);if(O.ok){const Q=await O.json();i(Q)}}catch(O){console.error("Load patients:",O)}},Se=async O=>{U(!0);try{const Q=await fetch(`${Ur}/api/patients/${O}`);if(Q.ok){const be=await Q.json();A(be)}}catch(Q){console.error("Load patient:",Q)}U(!1)},je=O=>{g(O),n("patient"),D("records"),Se(O.id)},Ht=O=>{var ot;const Q=(ot=O.target.files)==null?void 0:ot[0];if(!Q)return;const be=new FileReader;be.onload=()=>{v({file:Q,preview:be.result,base64:be.result.split(",")[1],fileName:Q.name,mediaType:Q.type||"image/jpeg",timestamp:new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}),W("categorize"),Tt(null),Oe(null)},be.readAsDataURL(Q)},ge=O=>{const Q=(O.patient_name||O.name||"").toLowerCase().trim(),be=((p==null?void 0:p.name)||"").toLowerCase().trim();if(!Q||!be||Q.length<3)return null;const ot=Q.split(/\s+/),Xe=be.split(/\s+/);return ot.some(Te=>Te.length>2&&Xe.some(Ke=>Ke.includes(Te)||Te.includes(Ke)))?null:{reportName:O.patient_name||O.name,selectedName:p.name}},rt=async()=>{var O,Q,be;if(!(!(F!=null&&F.preview)||!E)){Ie(!0),Oe(null),Tt(null),W("extracting");try{const ot=E==="prescription",Xe=["blood_test","thyroid","lipid","kidney","hba1c","urine"].includes(E),ye=ot?`Extract from this prescription image. Return JSON:
{"patient_name":"name on document","doctor_name":"","specialty":"","hospital_name":"","visit_date":"YYYY-MM-DD","diagnoses":[{"id":"dm2","label":"Type 2 DM","status":"Active"}],"medications":[{"name":"BRAND","composition":"Generic","dose":"dose","frequency":"OD","timing":"Morning"}],"labs":[{"test_name":"HbA1c","result":"7.2","unit":"%","flag":"HIGH","ref_range":"<6.5"}],"vitals":{"bp_sys":null,"bp_dia":null,"weight":null},"follow_up":"date or duration","advice":"key advice"}`:Xe?`Extract lab values from this report image. Return JSON:
{"patient_name":"name on document","labs":[{"test_name":"","result":"","unit":"","flag":"HIGH/LOW/NORMAL","ref_range":""}],"report_date":"YYYY-MM-DD","lab_name":"","summary":"brief clinical interpretation"}`:`Extract key findings from this medical document. Return JSON:
{"patient_name":"name on document","doc_type":"${E}","findings":"","date":"YYYY-MM-DD","doctor":"","notes":""}`,Te=F.base64,Ke=(O=F.mediaType)!=null&&O.startsWith("image/")?F.mediaType:"image/jpeg",Be=await MS("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":AS,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:2e3,messages:[{role:"user",content:[{type:"image",source:{type:"base64",media_type:Ke,data:Te}},{type:"text",text:ye+`

Return ONLY valid JSON. No markdown, no backticks.`}]}]})});if(!Be.ok)throw new Error(`API ${Be.status}`);const Lr=((be=(Q=(await Be.json()).content)==null?void 0:Q[0])==null?void 0:be.text)||"",Lt=JSON.parse(Lr.replace(/```json|```/g,"").trim());q(Lt),Lt.doctor_name&&K(Ir=>({...Ir,doctor:Lt.doctor_name,hospital:Lt.hospital_name||"",specialty:Lt.specialty||"",date:Lt.visit_date||""})),Lt.report_date&&K(Ir=>({...Ir,date:Lt.report_date})),Lt.lab_name&&K(Ir=>({...Ir,hospital:Lt.lab_name}));const wr=ge(Lt);wr&&Tt(wr),W("review")}catch(ot){console.error("Extraction:",ot),Oe(ot.message),W("review")}Ie(!1)}},Qe=async()=>{var O,Q;if(p!=null&&p.id){U(!0),ve("Saving...");try{const be=E==="prescription",ot=["blood_test","thyroid","lipid","kidney","hba1c","urine"].includes(E);if(be&&z){ve("Saving prescription...");const ye=await fetch(`${Ur}/api/patients/${p.id}/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({visit_date:B.date||new Date().toISOString().split("T")[0],visit_type:"OPD",doctor_name:B.doctor||z.doctor_name||"",specialty:B.specialty||z.specialty||"",hospital_name:B.hospital||z.hospital_name||"",diagnoses:z.diagnoses||[],medications:z.medications||[],labs:(z.labs||[]).map(Te=>({test_name:Te.test_name,result:Te.result,unit:Te.unit,flag:Te.flag,ref_range:Te.ref_range})),vitals:z.vitals||{}})});if(!ye.ok)throw new Error("Prescription save: "+ye.status)}else if(ot&&((O=z==null?void 0:z.labs)!=null&&O.length)){ve(`Saving ${z.labs.length} lab values...`);for(const ye of z.labs)await fetch(`${Ur}/api/patients/${p.id}/labs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_date:B.date||new Date().toISOString().split("T")[0],test_name:ye.test_name,result:ye.result,unit:ye.unit,flag:ye.flag,ref_range:ye.ref_range,source:B.hospital||"companion"})})}ve("Saving document...");const Xe=await fetch(`${Ur}/api/patients/${p.id}/documents`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc_type:E,title:be?`${B.doctor||"External"}  ${B.specialty||E}`:`${(((Q=uc.find(ye=>ye.id===E))==null?void 0:Q.label)||E).replace(/^[^\s]+\s/,"")}  ${B.date||"Today"}`,doc_date:B.date||new Date().toISOString().split("T")[0],source:B.hospital||"Companion Upload",notes:B.doctor?`Doctor: ${B.doctor}`:(z==null?void 0:z.summary)||"",extracted_data:JSON.stringify(z||{})})});if(Xe.ok){const ye=await Xe.json();if(F.base64&&ye.id){ve("Uploading image...");try{await fetch(`${Ur}/api/documents/${ye.id}/upload-file`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64:F.base64,mediaType:F.mediaType||"image/jpeg",fileName:F.fileName||`capture_${Date.now()}.jpg`})})}catch(Te){console.warn("Image upload failed (doc still saved):",Te)}}}ve(null),me(ye=>ye+1),v(null),L(null),q(null),K({doctor:"",hospital:"",specialty:"",date:""}),W("camera"),Oe(null),Tt(null),Se(p.id)}catch(be){console.error("Save:",be),Oe("Save failed: "+be.message),ve(null)}U(!1)}},He=o.filter(O=>(O.name||"").toLowerCase().includes(a.toLowerCase())||(O.file_no||"").includes(a)||(O.phone||"").includes(a)),Rt=O=>{try{const Q=String(O||"");return(Q.length>=10?new Date(Q.slice(0,10)+"T12:00:00"):new Date(Q)).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return""}},Rr=()=>t.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,maxWidth:480,margin:"0 auto",background:"white",borderTop:"1px solid #e2e8f0",display:"flex",zIndex:20,boxShadow:"0 -2px 10px rgba(0,0,0,.08)"},children:[["home","","Patients"],["capture","","Capture"],["patient","","Record"]].map(([O,Q,be])=>t.jsxs("button",{onClick:()=>{if(O==="capture"&&!p){alert("Select a patient first");return}n(O),O==="capture"&&W("camera")},style:{flex:1,padding:"8px 4px",border:"none",cursor:"pointer",background:e===O?"#eff6ff":"white",display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[t.jsx("span",{style:{fontSize:18},children:Q}),t.jsx("span",{style:{fontSize:9,fontWeight:700,color:e===O?"#2563eb":"#94a3b8"},children:be})]},O))});return t.jsxs("div",{style:{maxWidth:480,margin:"0 auto",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif",background:"#f8fafc",minHeight:"100vh",paddingBottom:60},children:[e==="home"&&t.jsxs("div",{children:[t.jsx("div",{style:{background:"linear-gradient(135deg, #1e293b, #334155)",color:"white",padding:"14px 16px",position:"sticky",top:0,zIndex:10},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:16,fontWeight:800},children:"Gini Companion"}),t.jsxs("div",{style:{fontSize:10,opacity:.7},children:[new Date().toLocaleDateString("en-IN",{weekday:"long",day:"2-digit",month:"short",year:"numeric"}),"  Gini Advanced Care"]})]}),t.jsxs("div",{style:{fontSize:10,background:"#059669",padding:"4px 10px",borderRadius:8,fontWeight:700},children:[o.length," patients"]})]})}),t.jsxs("div",{style:{padding:12},children:[t.jsx("input",{value:a,onChange:O=>l(O.target.value),placeholder:" Search name, file no, phone...",style:{width:"100%",padding:"10px 14px",borderRadius:8,border:"1px solid #e2e8f0",fontSize:13,boxSizing:"border-box",background:"white"}}),t.jsxs("div",{style:{marginTop:10},children:[He.slice(0,30).map(O=>{var Q;return t.jsxs("div",{onClick:()=>je(O),style:{display:"flex",alignItems:"center",gap:10,padding:"10px 12px",background:"white",borderRadius:8,marginBottom:6,border:"1px solid #e2e8f0",cursor:"pointer"},children:[t.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:"#eff6ff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:800,color:"#2563eb"},children:(O.name||"?")[0]}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:13,fontWeight:700},children:O.name}),t.jsxs("div",{style:{fontSize:10,color:"#64748b"},children:[O.age,"Y/",((Q=O.sex)==null?void 0:Q[0])||"?","  ",O.file_no||"",O.phone?`  ${O.phone}`:""]})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsxs("div",{style:{fontSize:9,color:"#64748b"},children:[O.visit_count||0," visits"]}),O.last_visit&&t.jsx("div",{style:{fontSize:8,color:"#94a3b8"},children:Rt(O.last_visit)})]})]},O.id)}),He.length===0&&t.jsx("div",{style:{textAlign:"center",padding:30,color:"#94a3b8"},children:"No patients found"})]})]})]}),e==="capture"&&p&&t.jsxs("div",{children:[t.jsxs("div",{style:{background:"#1e293b",color:"white",padding:"10px 16px",display:"flex",alignItems:"center",gap:10,position:"sticky",top:0,zIndex:10},children:[t.jsx("button",{onClick:()=>n("patient"),style:{background:"none",border:"none",color:"white",fontSize:18,cursor:"pointer"},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:13,fontWeight:700},children:p.name}),t.jsxs("div",{style:{fontSize:10,opacity:.7},children:["Capture Documents",Z>0?`  ${Z} saved `:""]})]})]}),t.jsxs("div",{style:{padding:12},children:[N==="camera"&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[t.jsxs("button",{onClick:()=>{var O;return(O=ce.current)==null?void 0:O.click()},style:{flex:1,padding:"20px 10px",background:"linear-gradient(135deg, #2563eb, #3b82f6)",color:"white",border:"none",borderRadius:12,fontSize:14,fontWeight:800,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:6},children:[t.jsx("span",{style:{fontSize:28},children:""}),"Take Photo"]}),t.jsxs("button",{onClick:()=>{var O;return(O=Y.current)==null?void 0:O.click()},style:{flex:1,padding:"20px 10px",background:"linear-gradient(135deg, #059669, #10b981)",color:"white",border:"none",borderRadius:12,fontSize:14,fontWeight:800,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:6},children:[t.jsx("span",{style:{fontSize:28},children:""}),"Upload File"]})]}),t.jsx("input",{ref:ce,type:"file",accept:"image/*",capture:"environment",onChange:Ht,style:{display:"none"}}),t.jsx("input",{ref:Y,type:"file",accept:"image/*,.pdf",onChange:Ht,style:{display:"none"}}),Z>0&&t.jsxs("div",{style:{textAlign:"center",padding:12,background:"#f0fdf4",borderRadius:8,border:"1px solid #bbf7d0"},children:[t.jsx("div",{style:{fontSize:24},children:""}),t.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#059669"},children:[Z," document",Z>1?"s":""," saved"]})]})]}),N==="categorize"&&F&&t.jsxs("div",{children:[F.preview&&t.jsx("div",{style:{marginBottom:10,borderRadius:8,overflow:"hidden",border:"1px solid #e2e8f0",maxHeight:200},children:t.jsx("img",{src:F.preview,alt:"Captured",style:{width:"100%",objectFit:"cover",maxHeight:200}})}),t.jsx("div",{style:{fontSize:12,fontWeight:700,marginBottom:8,color:"#1e293b"},children:"What type of document is this?"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6},children:uc.map(O=>t.jsx("button",{onClick:()=>L(O.id),style:{padding:"8px 4px",borderRadius:8,fontSize:10,fontWeight:700,cursor:"pointer",textAlign:"center",background:E===O.id?O.color:"white",color:E===O.id?"white":O.color,border:`2px solid ${E===O.id?O.color:"#e2e8f0"}`},children:O.label},O.id))}),E==="prescription"&&t.jsxs("div",{style:{marginTop:10,display:"grid",gridTemplateColumns:"1fr 1fr",gap:6},children:[t.jsx("input",{value:B.doctor,onChange:O=>K(Q=>({...Q,doctor:O.target.value})),placeholder:"Doctor name",style:{padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:11}}),t.jsx("input",{value:B.hospital,onChange:O=>K(Q=>({...Q,hospital:O.target.value})),placeholder:"Hospital",style:{padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:11}}),t.jsx("input",{value:B.specialty,onChange:O=>K(Q=>({...Q,specialty:O.target.value})),placeholder:"Specialty",style:{padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:11}}),t.jsx("input",{type:"date",value:B.date,onChange:O=>K(Q=>({...Q,date:O.target.value})),style:{padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:6,fontSize:11}})]}),t.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[t.jsx("button",{onClick:()=>{W("camera"),v(null),L(null)},style:{flex:1,padding:"10px",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:8,fontSize:12,fontWeight:700,cursor:"pointer"},children:" Cancel"}),t.jsx("button",{onClick:rt,disabled:!E,style:{flex:2,padding:"10px",background:E?"#2563eb":"#cbd5e1",color:"white",border:"none",borderRadius:8,fontSize:12,fontWeight:800,cursor:E?"pointer":"default"},children:" Extract with AI"})]})]}),N==="extracting"&&t.jsxs("div",{style:{textAlign:"center",padding:40},children:[t.jsx("div",{style:{fontSize:40,marginBottom:12,animation:"pulse 1.5s infinite"},children:""}),t.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#2563eb"},children:"AI is reading the document..."}),t.jsx("div",{style:{fontSize:11,color:"#64748b",marginTop:6},children:"Extracting diagnoses, medications, lab values"})]}),N==="review"&&t.jsxs("div",{children:[Wt&&t.jsxs("div",{style:{padding:10,background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:8,marginBottom:10},children:[t.jsx("div",{style:{fontSize:12,fontWeight:800,color:"#92400e"},children:" Name Mismatch"}),t.jsxs("div",{style:{fontSize:11,color:"#78350f",marginTop:4,lineHeight:1.5},children:["Report says: ",t.jsx("b",{children:Wt.reportName}),t.jsx("br",{}),"Selected patient: ",t.jsx("b",{children:Wt.selectedName})]}),t.jsx("div",{style:{fontSize:10,color:"#92400e",marginTop:4},children:"Please verify this is the correct patient before saving."})]}),ne&&t.jsx("div",{style:{padding:10,background:"#fef2f2",border:"1px solid #fecaca",borderRadius:8,marginBottom:10},children:t.jsxs("div",{style:{fontSize:11,fontWeight:700,color:"#dc2626"},children:[" ",ne]})}),(F==null?void 0:F.preview)&&t.jsx("div",{style:{marginBottom:8,borderRadius:6,overflow:"hidden",border:"1px solid #e2e8f0",maxHeight:100},children:t.jsx("img",{src:F.preview,alt:"",style:{width:"100%",objectFit:"cover",maxHeight:100}})}),z&&t.jsxs("div",{children:[z.doctor_name&&t.jsxs("div",{style:{padding:8,background:"#eff6ff",borderRadius:8,marginBottom:8,border:"1px solid #bfdbfe"},children:[t.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#1e40af"},children:[z.doctor_name," ",z.specialty?`(${z.specialty})`:""]}),z.hospital_name&&t.jsx("div",{style:{fontSize:10,color:"#64748b"},children:z.hospital_name})]}),((oe=z.diagnoses)==null?void 0:oe.length)>0&&t.jsxs("div",{style:{marginBottom:8},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#64748b",marginBottom:4},children:"DIAGNOSES"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:3},children:z.diagnoses.map((O,Q)=>t.jsx("span",{style:{background:"#dbeafe",borderRadius:4,padding:"2px 8px",fontSize:10,fontWeight:600,color:"#1e40af"},children:typeof O=="string"?O:O.label||O.id||""},Q))})]}),((ut=z.medications)==null?void 0:ut.length)>0&&t.jsxs("div",{style:{marginBottom:8},children:[t.jsxs("div",{style:{fontSize:10,fontWeight:700,color:"#64748b",marginBottom:4},children:["MEDICATIONS (",z.medications.length,")"]}),z.medications.map((O,Q)=>t.jsxs("div",{style:{padding:"4px 8px",background:"white",borderRadius:4,marginBottom:2,border:"1px solid #f1f5f9",fontSize:11},children:[t.jsx("span",{style:{fontWeight:700},children:O.name}),t.jsxs("span",{style:{color:"#64748b",marginLeft:4},children:[O.dose," ",O.frequency," ",O.timing]})]},Q))]}),((vt=z.labs)==null?void 0:vt.length)>0&&t.jsxs("div",{style:{marginBottom:8},children:[t.jsxs("div",{style:{fontSize:10,fontWeight:700,color:"#64748b",marginBottom:4},children:["LAB VALUES (",z.labs.length,")"]}),t.jsx("div",{style:{background:"white",borderRadius:6,border:"1px solid #e2e8f0",overflow:"hidden"},children:z.labs.map((O,Q)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 8px",borderBottom:"1px solid #f1f5f9",fontSize:11},children:[t.jsx("span",{style:{fontWeight:600},children:O.test_name}),t.jsxs("span",{children:[t.jsx("span",{style:{fontWeight:700,color:O.flag==="HIGH"?"#dc2626":O.flag==="LOW"?"#f59e0b":"#059669"},children:O.result}),t.jsx("span",{style:{color:"#94a3b8",marginLeft:4},children:O.unit})]})]},Q))}),z.summary&&t.jsxs("div",{style:{fontSize:10,color:"#475569",marginTop:4,padding:"4px 8px",background:"#f8fafc",borderRadius:4},children:[" ",z.summary]})]}),z.findings&&t.jsxs("div",{style:{padding:8,background:"#f8fafc",borderRadius:6,border:"1px solid #e2e8f0",fontSize:11,marginBottom:8},children:[t.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#64748b",marginBottom:2},children:"FINDINGS"}),z.findings]})]}),t.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[t.jsx("button",{onClick:()=>{W("camera"),v(null),L(null),q(null),Oe(null),Tt(null)},style:{flex:1,padding:"10px",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:8,fontSize:12,fontWeight:700,cursor:"pointer"},children:" Discard"}),t.jsx("button",{onClick:()=>{W("categorize"),q(null),Oe(null),Tt(null)},style:{flex:1,padding:"10px",background:"#f59e0b",color:"white",border:"none",borderRadius:8,fontSize:12,fontWeight:700,cursor:"pointer"},children:" Retry"}),t.jsx("button",{onClick:Qe,disabled:b,style:{flex:2,padding:"10px",background:b?"#94a3b8":"#059669",color:"white",border:"none",borderRadius:8,fontSize:12,fontWeight:800,cursor:b?"default":"pointer"},children:b?T||"Saving...":" Save"})]})]})]})]}),e==="patient"&&p&&t.jsxs("div",{children:[t.jsxs("div",{style:{background:"linear-gradient(135deg, #1e293b, #334155)",color:"white",padding:"10px 16px",position:"sticky",top:0,zIndex:10},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[t.jsx("button",{onClick:()=>{n("home"),g(null),A(null),me(0)},style:{background:"none",border:"none",color:"white",fontSize:18,cursor:"pointer"},children:""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:14,fontWeight:800},children:p.name}),t.jsxs("div",{style:{fontSize:10,opacity:.7},children:[p.age,"Y/",(qe=p.sex)==null?void 0:qe[0],"  ",p.file_no]})]}),t.jsx("button",{onClick:()=>{n("capture"),W("camera")},style:{background:"#2563eb",border:"none",color:"white",padding:"6px 12px",borderRadius:6,fontSize:11,fontWeight:700,cursor:"pointer"},children:" Capture"})]}),t.jsx("div",{style:{display:"flex",marginTop:8,gap:2},children:[["records"," Docs"],["rx"," Meds"],["labs"," Labs"],["visits"," Visits"]].map(([O,Q])=>t.jsx("button",{onClick:()=>D(O),style:{flex:1,padding:"6px",border:"none",borderRadius:"6px 6px 0 0",fontSize:10,fontWeight:700,cursor:"pointer",background:G===O?"white":"rgba(255,255,255,.1)",color:G===O?"#1e293b":"rgba(255,255,255,.6)"},children:Q},O))})]}),b&&t.jsx("div",{style:{textAlign:"center",padding:30},children:t.jsx("div",{style:{fontSize:24,animation:"pulse 1s infinite"},children:""})}),!b&&x&&t.jsxs("div",{style:{padding:12},children:[G==="records"&&t.jsx("div",{children:(x.documents||[]).length===0?t.jsxs("div",{style:{textAlign:"center",padding:30,color:"#94a3b8"},children:[t.jsx("div",{style:{fontSize:28},children:""}),t.jsx("div",{style:{fontSize:12,fontWeight:600,marginTop:6},children:"No documents yet"}),t.jsx("button",{onClick:()=>{n("capture"),W("camera")},style:{marginTop:8,padding:"8px 16px",background:"#2563eb",color:"white",border:"none",borderRadius:6,fontWeight:700,cursor:"pointer"},children:" Capture"})]}):(x.documents||[]).map(O=>{var ot,Xe,ye,Te;const Q=uc.find(Ke=>Ke.id===O.doc_type)||{label:"",color:"#64748b"},be=O.extracted_data?typeof O.extracted_data=="string"?(()=>{try{return JSON.parse(O.extracted_data)}catch{return null}})():O.extracted_data:null;return t.jsx("div",{style:{padding:"8px 10px",background:"white",borderRadius:8,marginBottom:6,border:"1px solid #e2e8f0"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[t.jsx("div",{style:{width:32,height:32,borderRadius:6,background:Q.color+"15",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,flexShrink:0},children:(ot=Q.label)==null?void 0:ot.split(" ")[0]}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700},children:O.title||O.doc_type}),t.jsxs("div",{style:{fontSize:9,color:"#64748b"},children:[O.source,"  ",Rt(O.doc_date)]}),be&&t.jsxs("div",{style:{display:"flex",gap:4,marginTop:2},children:[((Xe=be.medications)==null?void 0:Xe.length)>0&&t.jsxs("span",{style:{fontSize:8,background:"#dbeafe",color:"#2563eb",padding:"1px 4px",borderRadius:3,fontWeight:600},children:["",be.medications.length]}),((ye=be.labs)==null?void 0:ye.length)>0&&t.jsxs("span",{style:{fontSize:8,background:"#dcfce7",color:"#059669",padding:"1px 4px",borderRadius:3,fontWeight:600},children:["",be.labs.length]}),((Te=be.diagnoses)==null?void 0:Te.length)>0&&t.jsxs("span",{style:{fontSize:8,background:"#fef3c7",color:"#92400e",padding:"1px 4px",borderRadius:3,fontWeight:600},children:["",be.diagnoses.length]})]})]}),O.storage_path&&t.jsx("button",{onClick:async()=>{try{const Ke=await fetch(`${Ur}/api/documents/${O.id}/file-url`);if(Ke.ok){const Be=await Ke.json();window.open(Be.url,"_blank")}}catch{}},style:{fontSize:9,background:"#2563eb",color:"white",border:"none",padding:"4px 8px",borderRadius:4,cursor:"pointer",fontWeight:600,flexShrink:0},children:"View"})]})},O.id)})}),G==="rx"&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:12,fontWeight:800,marginBottom:8},children:" Active Medications"}),(x.medications||[]).filter(O=>O.is_active).length===0?t.jsx("div",{style:{padding:20,textAlign:"center",color:"#94a3b8"},children:"No active medications"}):t.jsx("div",{style:{background:"white",borderRadius:8,border:"1px solid #e2e8f0",overflow:"hidden"},children:(x.medications||[]).filter(O=>O.is_active).map((O,Q)=>{const be=(x.consultations||[]).find(ot=>ot.id===O.consultation_id)||{};return t.jsxs("div",{style:{padding:"6px 10px",borderBottom:"1px solid #f1f5f9",fontSize:11},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{fontWeight:700},children:O.name}),t.jsx("span",{style:{fontSize:9,color:"#7c3aed"},children:be.con_name||""})]}),t.jsxs("div",{style:{fontSize:10,color:"#64748b"},children:[O.dose," ",O.frequency," ",O.timing]})]},Q)})})]}),G==="labs"&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:12,fontWeight:800,marginBottom:8},children:" Lab Results"}),(x.lab_results||[]).length===0?t.jsx("div",{style:{padding:20,textAlign:"center",color:"#94a3b8"},children:"No lab results"}):t.jsx("div",{style:{background:"white",borderRadius:8,border:"1px solid #e2e8f0",overflow:"hidden"},children:(x.lab_results||[]).slice(0,40).map((O,Q)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"5px 10px",borderBottom:"1px solid #f1f5f9",fontSize:11},children:[t.jsxs("div",{children:[t.jsx("span",{style:{fontWeight:600},children:O.test_name}),t.jsx("span",{style:{fontSize:9,color:"#94a3b8",marginLeft:4},children:Rt(O.test_date)})]}),t.jsxs("span",{children:[t.jsx("span",{style:{fontWeight:700,color:O.flag==="HIGH"?"#dc2626":O.flag==="LOW"?"#f59e0b":"#059669"},children:O.result}),t.jsx("span",{style:{color:"#94a3b8",marginLeft:3},children:O.unit})]})]},Q))})]}),G==="visits"&&t.jsx("div",{children:(x.consultations||[]).length===0?t.jsx("div",{style:{padding:20,textAlign:"center",color:"#94a3b8"},children:"No visits"}):(x.consultations||[]).map((O,Q)=>t.jsx("div",{style:{padding:"8px 10px",background:"white",borderRadius:8,marginBottom:6,border:"1px solid #e2e8f0",borderLeft:`3px solid ${O.status==="completed"?"#059669":O.status==="historical"?"#7c3aed":"#f59e0b"}`},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:12,fontWeight:700},children:O.con_name||O.mo_name||""}),t.jsxs("div",{style:{fontSize:10,color:"#64748b"},children:[Rt(O.visit_date),"  ",O.visit_type||"OPD"]})]}),t.jsx("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:4,fontWeight:700,background:O.status==="completed"?"#dcfce7":O.status==="historical"?"#f3e8ff":"#fef3c7",color:O.status==="completed"?"#059669":O.status==="historical"?"#7c3aed":"#f59e0b"},children:O.status})]})},Q))})]})]}),t.jsx(Rr,{}),t.jsx("style",{children:"@keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}"})]})}const RS=window.location.pathname,vS=RS.startsWith("/companion");pc.createRoot(document.getElementById("root")).render(vS?t.jsx(TS,{}):t.jsx(ES,{}));
